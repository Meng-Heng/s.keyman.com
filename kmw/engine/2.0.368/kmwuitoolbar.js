(function() {var a=!0,e=null,j=!1;
try{var l=window.tavultesoft.keymanweb,m=l.osk,n=l.util;if(n.isTouchDevice())throw"";l.ui={t:j,c:e,Ea:e,o:e,p:e,P:e,v:e,Z:e,g:e,J:e,n:e,j:[],i:e,O:[],u:[],h:"as",b:[],X:0,ua:1,ra:e,r:e,w:"",pa:0,qa:0,q:[],F:j,A:0,I:""};var o=l.ui;o.name="toolbar";o.a={fa:"Languages",ia:"Turn off KeymanWeb keyboards",ha:"Off",ka:"Show On Screen Keyboard",ga:"Select language"};o.a.SelectKeyboardPre="Select ";o.a.SelectKeyboardSuf="keyboard";o.a.AltKeyboardsPre="Alternate keyboards for ";o.a.AltKeyboardsSuf="";o.a.ca=
"Central America";o.a.sa="South America";o.a.na="North America";o.a.eu="Europe";o.a.af="Africa";o.a.me="Middle east";o.a.as="Asia";o.a.oc="Oceania";o.createNode=function(c,b,d,f){var g=document.createElement(c);b&&(g.id=b);d&&(g.className=d);f&&(g.innerHTML=f);if("a"==c||"area"==c||"map"==c)g.Ia=function(){return j};return g};o.initialize=o.Ga=function(){if(l.initialized&&!o.t){var c=document.getElementById("KeymanWebControl");if(!c){if(document.body==e)return;c=document.createElement("DIV");c.id=
"KeymanWebControl";document.body.insertBefore(c,document.body.firstChild)}c.style.visibility="hidden";c.style.maxHeight="35px";o.t=a;if(!n.isTouchDevice()){n.linkStyleSheet(n.getOption("resources")+"ui/toolbar/kmwuitoolbar.css");o.e={};o.e.ca={k:o.a.ca,l:"49,52,65,54,68,57,71,56,73,59,75,60,93,61,94,58,97,58,101,59,107,60,114,64,115,68,114,77,104,74,98,75,96,78,95,82,90,81,85,80,82,76,78,74,74,73,65,68,57,61"};o.e.sa={k:o.a.sa,l:"82,82,95,82,96,78,98,75,104,74,114,77,120,79,124,83,126,87,141,90,142,97,138,103,135,113,127,116,123,124,115,131,112,132,109,138,117,139,140,141,141,146,134,148,114,145,109,148,100,148,91,143,91,130,96,111,89,102,83,95,77,89"};
o.e.na={k:o.a.na,l:"0,3,0,37,24,32,35,37,43,47,49,52,65,54,68,57,71,56,73,59,75,60,93,61,93,57,103,49,118,41,126,41,136,23,148,17,156,14,164,5,164,0,57,0,35,5,25,9,5,8"};o.e.eu={k:o.a.eu,l:"145,29,146,19,158,14,171,6,187,2,206,1,217,4,227,11,231,16,231,33,227,34,225,35,225,37,227,39,228,44,228,47,227,48,223,46,218,44,215,43,208,43,203,45,202,48,205,52,201,52,195,49,189,50,187,48,177,48,175,49,166,50,147,33"};o.e.af={k:o.a.af,l:"150,58,158,50,166,50,175,49,177,48,187,48,189,50,195,49,201,52,205,52,207,53,221,75,229,75,231,77,231,85,227,92,232,101,237,106,237,112,227,115,222,118,206,125,199,127,193,127,185,111,183,104,180,87,168,89,153,85,143,71,147,60"};
o.e.me={k:o.a.me,l:"205,52,202,48,203,45,208,43,215,43,218,44,223,46,227,48,232,48,239,48,240,49,239,53,242,60,243,65,237,76,231,77,229,75,221,75,207,53"};o.e.as={k:o.a.as,l:"219,1,221,6,228,12,231,16,231,33,227,34,225,35,225,37,227,39,229,45,232,48,239,48,240,49,239,53,242,60,243,65,249,70,252,81,259,87,271,87,278,95,289,100,303,101,311,98,320,98,323,98,323,84,311,81,308,73,307,65,317,57,330,50,334,44,348,36,364,38,375,34,375,8,355,8,336,5,292,1,285,0,219,0"};o.e.oc={k:o.a.oc,l:"288,117,289,107,303,101,311,98,323,98,323,84,333,77,344,73,362,80,369,88,375,96,375,141,352,143,323,142,316,136,310,130,291,130"};
o.c=o.createNode("div","kmw_controls");o.c.style.display="block";var b=o.createNode("a","kmw_controls_start",e," ");b.href="http://tavultesoft.com/keymanweb/";b.target="_blank";o.c.appendChild(b);o.p=o.createNode("div","kmw_btn_keyboards","kmw_button");o.p.title=o.a.ga;b=o.createNode("a",e,"kmw_button_a");b.href="#";b.onclick=o.Ba;b.appendChild(o.createNode("div","kmw_img_keyboards","kmw_img"));b.appendChild(o.createNode("div",e,"kmw_a",o.a.fa));b.appendChild(o.createNode("div",e,"kmw_drop"));o.p.appendChild(b);
o.n=o.createNode("div","kmw_selector");o.m=o.createNode("div","kmw_selector_regions");o.o=o.createNode("div","kmw_browsemap");b=o.createNode("img","kmw_region_browsemap");b.src=n.getOption("resources")+"ui/toolbar/blank.gif";b.useMap="#kmw_worldgrey16";o.o.appendChild(b);var d=o.createNode("map","kmw_worldgrey16");d.name="kmw_worldgrey16";for(var f in o.e)b=o.createNode("area"),b.shape="poly",b.alt="",b.href="#",b.title=o.e[f].k,b.Fa="true",b.onclick=function(b){return function(c){return o.R(c,b)}}(f),
b.onmouseover=function(b){return function(c){return o.W(c,b)}}(f),b.onmouseout=function(b){return function(c){return o.ba(c,b)}}(f),b.coords=o.e[f].l,d.appendChild(b);b=o.createNode("area");b.shape="default";b.Ha="true";b.alt="";b.onclick=o.f;d.appendChild(b);o.o.appendChild(d);o.m.appendChild(o.o);o.i=[];b=o.createNode("ul");for(f in o.e)d=o.createNode("li"),o.i[f]=o.createNode("a",e,e,o.e[f].k),o.i[f].href="#",o.i[f].onclick=function(b){return function(c){return o.R(c,b)}}(f),o.i[f].onmouseover=
function(b){return function(c){return o.W(c,b)}}(f),o.i[f].onmouseout=function(b){return function(c){return o.ba(c,b)}}(f),d.appendChild(o.i[f]),b.appendChild(d);o.m.appendChild(b);o.n.appendChild(o.m);o.p.appendChild(o.n);o.c.appendChild(o.p);o.c.appendChild(o.Z=o.createNode("div","kmw_bar_off","kmw_bar"));o.v=o.createNode("div","kmw_btn_off","kmw_button_selected");b=o.createNode("a",e,"kmw_button_a");b.href="#";b.onclick=o.va;b.title=o.a.ia;b.appendChild(o.createNode("div","kmw_img_off","kmw_img"));
b.appendChild(o.createNode("div",e,"kmw_a",o.a.ha));o.v.appendChild(b);o.c.appendChild(o.v);o.c.appendChild(o.P=o.createNode("div","kmw_control_keyboards","kmw_button"));o.c.appendChild(o.J=o.createNode("div","kmw_bar_osk","kmw_bar"));o.g=o.createNode("div","kmw_btn_osk","kmw_button");b=o.createNode("a",e,"kmw_button_a");b.href="#";b.onclick=o.Ca;b.title=o.a.ka;b.appendChild(o.createNode("div","kmw_img_osk","kmw_img"));o.g.appendChild(b);o.c.appendChild(o.g);o.c.appendChild(o.createNode("div","kmw_controls_end",
e," "));f=o.createNode("div");f.id="kmw_map_preload";o.c.appendChild(f);o.c.appendChild(o.createNode("br",e,"kmw_clear"));c.appendChild(o.c);o.F=a;o.A&&clearTimeout(o.A);o.A=setTimeout(o.G,2E3);n.attachDOMEvent(document.body,"click",o.V,j);o.h="eu";l.focusLastActiveElement()}}};o.G=function(){if(o.F){o.F=j;var c=0;o.j=[];var b=l.getKeyboards();b.sort(o.Da);for(c=o.m.childNodes.length;0<c;c--)"kmw_selector_region"==o.m.childNodes[c-1].className&&o.m.removeChild(o.m.childNodes[c-1]);for(var d in o.e){o.j[d]=
o.createNode("div",e,"kmw_selector_region");for(var f=o.createNode("div",e,"kmw_keyboard_col"),g=0,h=0,k="",i=0;i<b.length;i++)b[i].RegionCode==d&&b[i].LanguageCode!=k&&(k=b[i].LanguageCode,g++);g=((g+3)/4).toFixed(0);k="";for(i=0;i<b.length;i++)if(b[i].RegionCode==d)if(b[i].LanguageCode==k){var p=o.q[k].d;p.push?p.push(b[i]):o.q[k].d=p.concat(b[i])}else{k=b[i].LanguageCode;o.q[k]={id:b[i].LanguageCode,name:b[i].LanguageName,d:[b[i]]};0==h%g&&0<h&&(o.j[d].appendChild(f),f=o.createNode("div",e,3==
h/g?"kmw_keyboard_col_right":"kmw_keyboard_col"));h++;var p=o.createNode("div",e,"kmw_language"),q=o.createNode("a",e,e,b[i].LanguageName);q.href="#";q.onclick=function(b){return function(c){return o.aa(c,b)}}(o.q[k]);p.appendChild(q);f.appendChild(p);c++}o.j[d].appendChild(f);o.j[d].appendChild(o.createNode("div",e,"kmw_clear"));o.m.appendChild(o.j[d])}o.ta();o.R(e,o.h);o.M();l.focusLastActiveElement()}};o.Da=function(c,b){return c.RegionCode<b.RegionCode?-2:c.RegionCode>b.RegionCode?2:c.LanguageName<
b.LanguageName?-1:c.LanguageName>b.LanguageName?1:0};o.B=function(c){for(var b=0;b<o.b.length;b++)if(o.b[b].lang.id==c.id)return b;return e};o.U=function(c,b){var d=o.B(c);if(d==e){if(o.b.length>=o.ua){for(var f=2147483647,d=e,g=0;g<o.b.length;g++)o.b[g].Q<f&&(d=g,f=o.b[g].Q);d!=e&&(f=o.b[d],o.u[f.lang.id]=e,o.O[f.lang.id]=e,o.P.removeChild(f.H),o.b=0==d?o.b.slice(d+1):d==o.b.length-1?o.b.slice(0,d):o.b.slice(0,d).concat(o.b.slice(d+1)))}d=o.createNode("div",e,"kmw_button");f=o.createNode("a",e,"kmw_button_a"+
(1<c.d.length?" kmw_norightgap":""));f.href="#";var g=o.a.SelectKeyboardPre+b.Name,h=o.a.SelectKeyboardSuf;0>g.toLowerCase().indexOf(h.toLowerCase())&&(g=g+" "+h);f.title=g;f.onclick=function(b){return o.aa(b,c)};f.appendChild(o.createNode("div","kmw_img_kbd","kmw_img"));o.I=o.truncate(c.name,28);f.appendChild(o.createNode("div",e,"kmw_a",o.I));d.appendChild(f);h=f;if(1<c.d.length){f=o.createNode("a",e,"kmw_button_a kmw_noleftgap");f.href="#";f.title=o.a.AltKeyboardsPre+c.name+o.a.AltKeyboardsSuf;
f.onclick=function(b){return o.Aa(b,c)};var k=o.createNode("div",e,"kmw_a"),g=o.truncate(b.Name.replace(/\s?keyboard/i,""),40-o.I.length);k.appendChild(o.O[c.id]=o.createNode("span",e,"kmw_kbd",g));f.appendChild(k);f.appendChild(o.createNode("div",e,"kmw_drop"));d.appendChild(f);o.u[c.id]=o.createNode("ul",e,"kmw_selector_kbd");o.u[c.id].style.display="none";for(var i in c.d)k=o.createNode("li"),g=c.d[i].Name.replace(/\s?keyboard/i,""),f=o.createNode("a",e,e,g),f.href="#",f.title="",f.onclick=function(b,
c){return function(d){return o.D(d,b,c)}}(c,c.d[i]),k.appendChild(f),o.u[c.id].appendChild(k);d.appendChild(o.u[c.id])}o.P.appendChild(d);o.b.push({Q:o.X++,lang:c,N:b,H:d,T:h})}else{o.b[d].Q=o.X++;o.b[d].N=b;if(i=o.O[c.id])g=b.Name.replace(/\s?keyboard/i,""),i.innerHTML=o.truncate(g,40-o.I.length);o.b[d].T&&(g=o.a.SelectKeyboardPre+b.Name,h=o.a.SelectKeyboardSuf,0>g.toLowerCase().indexOf(h.toLowerCase())&&(g=g+" "+h),o.b[d].T.title=g)}};o.truncate=function(c,b){return c.length<=b?c:c.substr(0,b-1)+
"\u2026"};o.za=function(){o.F=a;o.A&&clearTimeout(o.A);o.A=setTimeout(o.G,2E3)};l.addEventListener("keyboardregistered",o.za);o.s=function(c){var b=o.Y;b&&(b.style.display="none");o.K();return o.f(c)};o.Aa=function(c,b){o.C(c);var d=o.u[b.id];if(d){if("block"==d.style.display)return o.s(c);d.style.display="block";o.Y=d;o.S(d,o.s)}return o.f(c)};o.aa=function(c,b){var d=o.B(b),f=e,f=d==e?b.d[0]:o.b[d].N;return!f?j:o.D(c,b,f)};o.D=function(c,b,d){if(o.w){var f=o.B(o.w);f!=e&&(o.b[f].H.className="kmw_button")}o.v.className=
"kmw_button";o.w=b;o.r=d;o.ja=b.id;o.z();o.U(b,d);l.setActiveKeyboard(d.InternalName,b.id);o.b[o.B(b)].H.className="kmw_button_selected";o.$();o.M();return o.C(c)||o.s(c)};o.M=function(){var c=[o.v,o.Z,o.g,o.J],b=j;l.isCJK(o.r)?b=a:o.r==e&&(b="none"==c[2].style.display);if(o.r!=e||0<o.b.length)for(var d=0;d<c.length;d++)c[d].style.display="";else for(d=0;d<c.length;d++)c[d].style.display="none";b?o.g.style.display=o.J.style.display="none":o.r==e&&(o.g.className="kmw_button_disabled");o.c.parentNode.style.visibility=
"visible"};o.z=function(){l.focusLastActiveElement()};o.Ca=function(c){m&&""!=l.getActiveKeyboard()&&(m.isEnabled()?m.hide():m.show(a));o.z();return o.f(c)};o.va=function(c){if("kmw_controls_disabled"!=o.c.className){o.s(e);if(o.w){var b=o.B(o.w);b!=e&&(o.b[b].H.className="kmw_button")}o.r=e;o.w=e;o.ja="";o.v.className="kmw_button_selected"}o.z();l.setActiveKeyboard("","");o.$();o.M();return o.f(c)};o.f=function(c){c||(c=window.event);window.event&&(window.event.returnValue=j);c&&(c.cancelBubble=
a);return j};o.R=function(c,b){var d=o.o;if(!d)return o.f(c);d.className="kmw_browsemap_"+b;"undefined"==typeof o.j[b]&&(o.F=a,o.G());o.j[b].style.display="block";o.i[b].className="selected";o.h!=e&&o.h!=b&&(o.j[o.h].style.display="none",o.i[o.h].className="");o.h=b;return o.f(c)};o.ba=function(c,b){o.o.className=o.h==e?"":"kmw_browsemap_"+o.h;o.i[b].className=o.h==b?"selected":"";return o.f(c)};o.W=function(c,b){o.o.className="kmw_browsemap_"+b+"_sel";o.i[b].className="hover";return o.f(c)};o.ya=
function(c){return c.getAttribute?c.getAttribute("kmw_disable")||c.kmw_disable:c.kmw_disable};o.oa=function(c){if(!o.t)return a;c=c.target;if("textarea"==c.tagName.toLowerCase()||"input"==c.tagName.toLowerCase()&&"text"==c.type.toLowerCase())if(o.ra=c,o.ya(c))"kmw_controls_disabled"!=o.c.className&&(o.c.className="kmw_controls_disabled");else{o.r!=e&&(l.isCJK()?o.g.style.display=o.J.style.display="none":o.g.className=m&&m.isEnabled()?"kmw_button_selected":"kmw_button");""!=o.c.className&&(o.c.className=
"");var b,d;b=c.da?c.da:64;d=c.ea?c.ea:0;o.pa=n.getAbsoluteX(c)+b;o.qa=n.getAbsoluteY(c)+c.offsetHeight+d}return a};l.addEventListener("controlfocused",o.oa);o.la=function(){if(!o.t)return a;"none"!=o.g.style.display&&(o.g.className="kmw_button_disabled");return a};l.addEventListener("controlblurred",o.la);o.ma=function(c){if(c.indirect){var b=c.internalName,c=c.languageCode;if(""!=c&&""!=b&&(c=o.q[c],c!=e))for(var d=0;d<c.d.length;d++)c.d[d].InternalName==b&&(o.D(e,c,c.d[d]),window.focus(),o.z())}return a};
l.addEventListener("keyboardchange",o.ma);o.xa=function(c){o.t&&(o.g.className="kmw_button_selected");return c};m.addEventListener("show",o.xa);o.wa=function(c){o.t&&c.HiddenByUser&&(o.g.className="kmw_button")};m.addEventListener("hide",o.wa);o.Ba=function(c){o.G();if("kmw_controls_disabled"==o.c.className)return o.f(c);o.s(e);if("kmw_over"==o.n.className)return o.C(c);o.n.className="kmw_over";o.p.className="kmw_button_selected";o.S(o.n,o.C);return o.f(c)};o.C=function(c){o.n.className="";o.p.className=
"kmw_button";o.K();return o.f(c)};o.V=function(c){var b=o.Y;if((!b||"none"==b.style.display)&&""==o.n.className)return a;o.C(c);o.s(c);return o.f(c)};var r=e,s=e,t=e;o.L=function(c){var b=c&&c.target||window.event&&window.event.srcElement;if(b)for(;b.parentNode;){if(b==s)return e;b=b.parentNode}"#document"==b.nodeName&&o.V(c);return r};o.S=function(c,b){o.L==document.onclick&&o.K();r=b;s=c;t=document.onclick;document.onclick=o.L};o.K=function(){o.L==document.onclick&&(document.onclick=t,s=r=t=e)};
o.ta=function(){var c="",b=n.loadCookie("KeymanWeb_Keyboard");void 0!=b.current&&(c=b.current.split(":")[0]);b=n.loadCookie("KeymanWeb_Toolbar");void 0!=b.region&&(o.h=b.region);if(void 0!=b.maxrecent)for(var d=0;d<b.maxrecent;d++){if(void 0!=b["recent"+d]){var f=b["recent"+d].split(",");if(2==f.length){var g=o.q[f[0]];if(g!=e)for(var h=0;h<g.d.length;h++)if(g.d[h].InternalName==f[1]){o.U(g,g.d[h]);if(g.d[h].InternalName==c){o.D(e,g,g.d[h]);window.focus();o.z();break}break}}}}else if(c=l.getActiveKeyboard(),
h=l.getActiveLanguage(),""!=h&&""!=c&&(b=o.q[h],b!=e))for(h=0;h<b.d.length;h++)b.d[h].InternalName==c&&(o.D(e,b,b.d[h]),window.focus(),o.z())};o.$=function(){var c={};c.region=o.h;c.maxrecent=""+o.b.length;for(var b=0;b<o.b.length;b++)c["recent"+b]=o.b[b].lang.id+","+o.b[b].N.InternalName;n.saveCookie("KeymanWeb_Toolbar",c)}}catch(u){};}());
