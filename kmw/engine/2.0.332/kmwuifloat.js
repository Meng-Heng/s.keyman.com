var g=!0,h=null,i=!1;
(function(){var e=window.tavultesoft.keymanweb,f=e.osk,d=e.util;if(!d.isTouchDevice()){e.ui={};var a=e.ui;a.name="float";a.a=h;a.b=h;a.e=h;a.f=h;a.d=h;a.m=i;a.n=g;a.o=h;a.c=i;a.A=function(){e.focusLastActiveElement();f.show&&(f.isEnabled()?f.hide():f.show(g));window.event&&(window.event.returnValue=i);return i};a.i=function(){if(e.initialized&&!a.c&&!d.isTouchDevice()){var b=d.getOption("resources")+"ui/float/";a.b=d.createElement("DIV");a.e=d.createElement("DIV");a.d=d.createElement("IMG");a.b.innerHTML=
"<a href='http://keyman.com/web/' target='KeymanWebHelp'><img src='"+b+"kmicon.gif' border='0' style='padding: 2px' title='KeymanWeb' alt='KeymanWeb' /></a>";var c=a.b.style;c.backgroundColor="white";c.border="solid 1px black";c.position="absolute";c.height="24px";c.font="bold 8pt sans-serif";c.display="none";c.textAlign="left";c.overflow="hidden";d.attachDOMEvent(a.b,"mousedown",a.v);d.attachDOMEvent(a.b,"mouseover",a.z);d.attachDOMEvent(a.b,"mouseout",a.w);window.createPopup&&!("XmlHttpRequest"in
window)&&(a.j=d.createShim());a.d.src=b+"kbdicon.gif";a.d.title="Display visual keyboard";a.l(i);b=d.createElement("DIV");a.f=b;b.onclick=a.A;b.appendChild(a.d);a.e.appendChild(b);a.b.appendChild(a.e);document.body.appendChild(a.b);a.j&&document.body.appendChild(a.j);a.a=d.createElement("SELECT");c=a.a.style;c.font="8pt sans-serif";c.backgroundColor="#f3e5de";c.border="solid 1px #7B9EBD";c.height="18px";c.margin="2px";c.left="24px";c.top="0px";c.position="absolute";d.attachDOMEvent(a.a,"change",a.u);
d.attachDOMEvent(a.a,"blur",a.t);a.e.appendChild(a.a);b=d.createElement("OPTION");b.value="-";b.innerHTML=d.getOption("unmappedKeyboardName","English");a.a.appendChild(b);b=d.getOption("ui");"object"==typeof b&&"undefined"!=typeof b.position&&(a.q="right"==b.position);a.c=g;a.r()}};e.addEventListener("unloaduserinterface",function(){a.a=a.e=a.b=a.d=h});a.r=function(){if(a.n){a.c||a.i();var b,c=a.a.getElementsByTagName("OPTION");for(b=c.length;1<b;b--)a.a.removeChild(c[b-1]);var j=e.getKeyboards();
for(b=0;b<j.length;b++){c=d.createElement("OPTION");c.value=j[b].InternalName+":"+j[b].LanguageCode;c.innerHTML=j[b].Name;if(j[b].LanguageName){var k=j[b].LanguageName,k=k.split(",")[0];-1==j[b].Name.search(k)&&(c.innerHTML=k+" ("+c.innerHTML+")")}a.a.appendChild(c)}}a.n=i;b=e.getSavedKeyboard().split(":");2>b.length&&(b[1]="");a.h(b[0],b[1])};a.h=function(b,c){var e=0;if(a.c){var d=b;""!=c&&(d+=":"+c);if(""==b)a.a.selectedIndex=0;else for(var f=a.a.getElementsByTagName("OPTION"),e=0;e<f.length;e++){var l=
f[e].value;""==c&&(l=l.split(":")[0]);if(l==d){a.a.selectedIndex=e;break}}}};e.addEventListener("keyboardregistered",function(){a.n=g;a.o&&clearTimeout(a.o);a.o=setTimeout(a.r,200)});e.addEventListener("keyboardloaded",function(){var b=e.getSavedKeyboard().split(":");1<b.length&&a.h(b[0],b[1])});e.addEventListener("keyboardchange",function(b){a.h(b.internalName,b.languageCode);a.k()});f.addEventListener("show",function(b){b.userLocated&&(b.x=d.getAbsoluteX(a.b),b.y=d.getAbsoluteY(a.b)+a.b.offsetHeight);
a.k();return b});a.l=function(b){var c=a.d.style;c.width="24px";c.height="13px";c.top="2px";c.verticalAlign="bottom";c.padding="3px 2px 2px 2px";c.position="absolute";c.border=b?"inset 1px #808080":"none";c.background=b?"#f7e7de":"white";c.display="block";a.c&&(a.f.style.display="block")};f.addEventListener("hide",function(){a.c&&a.l(i)});a.v=function(){e.activatingUI&&e.activatingUI(1)};a.z=function(){e.activatingUI&&e.activatingUI(1)};a.w=function(){e.activatingUI&&e.activatingUI(0)};a.u=function(){if("-"!=
a.a.value){var b=a.a.options[a.a.selectedIndex].value.split(":");e.setActiveKeyboard(b[0],b[1])}else e.setActiveKeyboard("");e.focusLastActiveElement();a.m=g};a.t=function(){a.m||e.focusLastActiveElement();a.m=i};a.g=function(b,c){if(a.c){var d=a.b.style;b&&c&&(d.left=b+"px",d.top=c+"px");d.display="block";a.d.style.left=a.a.offsetWidth+28+"px";a.k();a.h(e.getActiveKeyboard(),e.getActiveLanguage())}};a.s=function(){a.c&&(a.b.style.display="none",d.hideShim(a.j))};a.k=function(){a.f!=h&&(e.isCJK()||
0==a.a.selectedIndex?(a.f.style.display="none",a.b.style.width=a.a.offsetWidth+30+"px"):(a.f.style.display="block",a.l(f.isEnabled()),a.b.style.width=a.a.offsetWidth+59+"px"))};e.addEventListener("controlfocused",function(b){if(b.activeControl==h||b.activeControl.LEnabled)a.q?a.g(d.getAbsoluteX(b.target)+b.target.offsetWidth+1,d.getAbsoluteY(b.target)+1):a.g(d.getAbsoluteX(b.target)+1,d.getAbsoluteY(b.target)+b.target.offsetHeight+1);return g});e.addEventListener("controlblurred",function(b){if(!b.event)return g;
b.isActivating||a.s();return g});a.p=function(){if("block"==a.b.style.display){var b=e.getLastActiveElement();a.q?a.g(d.getAbsoluteX(b)+b.offsetWidth+1,d.getAbsoluteY(b)+1):a.g(d.getAbsoluteX(b)+1,d.getAbsoluteY(b)+b.offsetHeight+1)}return g};window.addEventListener?window.addEventListener("resize",a.p,i):window.attachEvent("onresize",a.p);e.addEventListener("loadserinterface",a.i);a.i()}})();
