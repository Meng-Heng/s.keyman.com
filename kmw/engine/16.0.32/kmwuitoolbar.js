(function() {var a=this&&this.Qa||function(){a=Object.assign||function(c){for(var b,d=1,e=arguments.length;d<e;d++){b=arguments[d];for(var f in b)Object.prototype.hasOwnProperty.call(b,f)&&(c[f]=b[f])}return c};return a.apply(this,arguments)};
if(!window.keyman.ui.name)try{var h=window.keyman,n=h.util;if(n.isTouchDevice())throw"";h.ui={B:!1,c:null,Ra:null,u:null,v:null,Y:null,F:null,ja:null,i:null,S:null,s:null,m:[],l:null,X:[],C:[],j:"as",b:[],da:"un",ha:0,Ea:1,Ca:null,w:null,G:"",Aa:0,Ba:0,languages:[],M:!1,H:0,R:""};var q=h.ui;q.name="toolbar";q.a={qa:"Languages",ua:"Turn off KeymanWeb keyboards",ta:"Off",wa:"Show On Screen Keyboard",ra:"Select language"};q.a.SelectKeyboardPre="Select ";q.a.SelectKeyboardSuf="keyboard";q.a.AltKeyboardsPre=
"Alternate keyboards for ";q.a.AltKeyboardsSuf="";q.a.ca="Central America";q.a.sa="South America";q.a.na="Americas";q.a.eu="Europe";q.a.af="Africa";q.a.un="Undetermined";q.a.as="Asia";q.a.oc="Oceania";q.createNode=function(c,b,d,e){var f=document.createElement(c);b&&(f.id=b);d&&(f.className=d);e&&(f.innerHTML=e);if("a"==c||"area"==c||"map"==c)f.Va=function(){return!1};return f};q.initialize=q.Ta=function(){if(h.initialized&&!q.B){var c=document.getElementById("KeymanWebControl");if(!c){if(null==document.body)return;
c=document.createElement("DIV");c.id="KeymanWebControl";document.body.insertBefore(c,document.body.firstChild);q.xa=c}c.style.visibility="hidden";c.style.maxHeight="35px";q.B=!0;if(!n.isTouchDevice()){n.linkStyleSheet(n.getOption("resources")+"ui/toolbar/kmwuitoolbar.css");q.g={};q.g.na={t:q.a.na,D:"0,3,0,37,24,32,35,37,43,47,49,52,65,54,68,57,71,56,73,59,75,60,93,61,93,57,103,49,118,41,126,41,136,23,148,17,156,14,164,5,164,0,57,0,35,5,25,9,5,8,49,52,65,54,68,57,71,56,73,59,75,60,93,61,94,58,97,58,101,59,107,60,114,64,115,68,114,77,104,74,98,75,96,78,95,82,90,81,85,80,82,76,78,74,74,73,65,68,57,61,82,82,95,82,96,78,98,75,104,74,114,77,120,79,124,83,126,87,141,90,142,97,138,103,135,113,127,116,123,124,115,131,112,132,109,138,117,139,140,141,141,146,134,148,114,145,109,148,100,148,91,143,91,130,96,111,89,102,83,95,77,89"};
q.g.eu={t:q.a.eu,D:"145,29,146,19,158,14,171,6,187,2,206,1,217,4,227,11,231,16,231,33,227,34,225,35,225,37,227,39,228,44,228,47,227,48,223,46,218,44,215,43,208,43,203,45,202,48,205,52,201,52,195,49,189,50,187,48,177,48,175,49,166,50,147,33"};q.g.af={t:q.a.af,D:"150,58,158,50,166,50,175,49,177,48,187,48,189,50,195,49,201,52,205,52,207,53,221,75,229,75,231,77,231,85,227,92,232,101,237,106,237,112,227,115,222,118,206,125,199,127,193,127,185,111,183,104,180,87,168,89,153,85,143,71,147,60"};q.g.as={t:q.a.as,
D:"219,1,221,6,228,12,231,16,231,33,227,34,225,35,225,37,227,39,229,45,232,48,239,48,240,49,239,53,242,60,243,65,249,70,252,81,259,87,271,87,278,95,289,100,303,101,311,98,320,98,323,98,323,84,311,81,308,73,307,65,317,57,330,50,334,44,348,36,364,38,375,34,375,8,355,8,336,5,292,1,285,0,219,0"};q.g.oc={t:q.a.oc,D:"288,117,289,107,303,101,311,98,323,98,323,84,333,77,344,73,362,80,369,88,375,96,375,141,352,143,323,142,316,136,310,130,291,130"};q.g.un={t:q.a.un,D:"205,52,202,48,203,45,208,43,215,43,218,44,223,46,227,48,232,48,239,48,240,49,239,53,242,60,243,65,237,76,231,77,229,75,221,75,207,53"};
q.c=q.createNode("div","kmw_controls");q.c.style.display="block";var b=q.createNode("a","kmw_controls_start",null," ");b.href="https://keyman.com/developer/keymanweb/";b.target="_blank";q.c.appendChild(b);q.v=q.createNode("div","kmw_btn_keyboards","kmw_button");q.v.title=q.a.ra;b=q.createNode("a",null,"kmw_button_a");b.href="#";b.onclick=q.Ma;b.appendChild(q.createNode("div","kmw_img_keyboards","kmw_img"));b.appendChild(q.createNode("div",null,"kmw_a",q.a.qa));b.appendChild(q.createNode("div",null,
"kmw_drop"));q.v.appendChild(b);q.s=q.createNode("div","kmw_selector");q.o=q.createNode("div","kmw_selector_regions");q.u=q.createNode("div","kmw_browsemap");b=q.createNode("img","kmw_region_browsemap");b.src=n.getOption("resources")+"ui/toolbar/blank.gif";b.useMap="#kmw_worldgrey16";q.u.appendChild(b);var d=q.createNode("map","kmw_worldgrey16");d.name="kmw_worldgrey16";for(var e in q.g)b=q.createNode("area"),b.shape="poly",b.alt="",b.href="#",b.title=q.g[e].t,b.Sa="true",b.onclick=function(f){return function(g){return q.Z(g,
f)}}(e),b.onmouseover=function(f){return function(g){return q.ga(g,f)}}(e),b.onmouseout=function(f){return function(g){return q.ma(g,f)}}(e),b.coords=q.g[e].D,d.appendChild(b);b=q.createNode("area");b.shape="default";b.Ua="true";b.alt="";b.onclick=q.h;d.appendChild(b);q.u.appendChild(d);q.o.appendChild(q.u);q.l={};b=q.createNode("ul");for(e in q.g)d=q.createNode("li"),q.l[e]=q.createNode("a",null,null,q.g[e].t),q.l[e].href="#",q.l[e].onclick=function(f){return function(g){return q.Z(g,f)}}(e),q.l[e].onmouseover=
function(f){return function(g){return q.ga(g,f)}}(e),q.l[e].onmouseout=function(f){return function(g){return q.ma(g,f)}}(e),d.appendChild(q.l[e]),b.appendChild(d);q.o.appendChild(b);q.s.appendChild(q.o);q.v.appendChild(q.s);q.c.appendChild(q.v);q.c.appendChild(q.ja=q.createNode("div","kmw_bar_off","kmw_bar"));q.F=q.createNode("div","kmw_btn_off","kmw_button_selected");b=q.createNode("a",null,"kmw_button_a");b.href="#";b.onclick=q.Fa;b.title=q.a.ua;b.appendChild(q.createNode("div","kmw_img_off","kmw_img"));
b.appendChild(q.createNode("div",null,"kmw_a",q.a.ta));q.F.appendChild(b);q.c.appendChild(q.F);q.c.appendChild(q.Y=q.createNode("div","kmw_control_keyboards","kmw_button"));q.c.appendChild(q.S=q.createNode("div","kmw_bar_osk","kmw_bar"));q.i=q.createNode("div","kmw_btn_osk","kmw_button");b=q.createNode("a",null,"kmw_button_a");b.href="#";b.onclick=q.Na;b.onmousedown=function(){h.activatingUI(!0)};b.title=q.a.wa;b.appendChild(q.createNode("div","kmw_img_osk","kmw_img"));q.i.appendChild(b);q.c.appendChild(q.i);
q.c.appendChild(q.createNode("div","kmw_controls_end",null," "));e=q.createNode("div");e.id="kmw_map_preload";q.c.appendChild(e);q.c.appendChild(q.createNode("br",null,"kmw_clear"));c.appendChild(q.c);q.M=!0;q.H&&clearTimeout(q.H);q.H=setTimeout(q.N,0);n.attachDOMEvent(document.body,"click",q.fa,!1);q.j="eu";q.Ja();h.focusLastActiveElement()}}};q.Wa=function(){var c=q.c;c&&c.parentNode.removeChild(c);(c=q.xa)&&c.parentNode.removeChild(c)};q.N=function(){if(q.M){q.M=!1;var c=0;q.m={};var b=h.getKeyboards();
b.sort(q.Oa);for(c=q.o.childNodes.length;0<c;c--)"kmw_selector_region"==q.o.childNodes[c-1].className&&q.o.removeChild(q.o.childNodes[c-1]);for(var d in q.g){q.m[d]=q.createNode("div",null,"kmw_selector_region");for(var e=q.createNode("div",null,"kmw_keyboard_col"),f=0,g=0,m="",l=0;l<b.length;l++){var k=b[l].RegionCode;if(!q.g[k]){if(d!=q.da)continue}else if(k!=d)continue;k=h.util.getLanguageCodes(b[l].LanguageCode);k[0]!=m&&(m=k[0],f++)}f=Number(((f+3)/4).toFixed(0));m="";for(l=0;l<b.length;l++){k=
b[l].RegionCode;if(!q.g[k]){if(d!=q.da)continue}else if(k!=d)continue;k=h.util.getLanguageCodes(b[l].LanguageCode);if(k[0]==m)k=q.languages[m].f,k.push?k.push(b[l]):q.languages[m].f=k.concat(b[l]);else{m=k[0];q.languages[m]={id:b[l].LanguageCode,name:b[l].LanguageName,f:[b[l]]};0==g%f&&0<g&&(q.m[d].appendChild(e),e=q.createNode("div",null,3==g/f?"kmw_keyboard_col_right":"kmw_keyboard_col"));g++;k=q.createNode("div",null,"kmw_language");var p=q.createNode("a",null,null,b[l].LanguageName);p.href="#";
p.onclick=function(r){return function(w){return q.la(w,r)}}(q.languages[m]);k.appendChild(p);e.appendChild(k);c++}}q.m[d].appendChild(e);q.m[d].appendChild(q.createNode("div",null,"kmw_clear"));q.o.appendChild(q.m[d])}q.Da();q.Z(null,q.j);q.V();q.P&&q.ea(q.P);h.focusLastActiveElement()}};q.Oa=function(c,b){return c.RegionCode<b.RegionCode?-2:c.RegionCode>b.RegionCode?2:c.LanguageName<b.LanguageName?-1:c.LanguageName>b.LanguageName?1:0};q.I=function(c){for(var b=0;b<q.b.length;b++)if(q.b[b].lang.id==
c.id)return b;return null};q.ba=function(c,b){var d=q.I(c);if(null==d){if(q.b.length>=q.Ea){var e=2147483647;d=null;for(var f=0;f<q.b.length;f++)q.b[f].priority<e&&(d=f,e=q.b[f].priority);null!=d&&(e=q.b[d],q.C[e.lang.id]=null,q.X[e.lang.id]=null,q.Y.removeChild(e.O),q.b=0==d?q.b.slice(d+1):d==q.b.length-1?q.b.slice(0,d):q.b.slice(0,d).concat(q.b.slice(d+1)))}d=q.createNode("div",null,"kmw_button");e=q.createNode("a",null,"kmw_button_a"+(1<c.f.length?" kmw_norightgap":""));e.href="#";f=q.a.SelectKeyboardPre+
b.Name;var g=q.a.SelectKeyboardSuf;0>f.toLowerCase().indexOf(g.toLowerCase())&&(f=f+" "+g);e.title=f;e.onclick=function(k){return q.la(k,c)};e.appendChild(q.createNode("div","kmw_img_kbd","kmw_img"));q.R=q.truncate(c.name,28);e.appendChild(q.createNode("div",null,"kmw_a",q.R));d.appendChild(e);g=e;if(1<c.f.length){e=q.createNode("a",null,"kmw_button_a kmw_noleftgap");e.href="#";e.title=q.a.AltKeyboardsPre+c.name+q.a.AltKeyboardsSuf;e.onclick=function(k){return q.La(k,c)};var m=q.createNode("div",
null,"kmw_a");f=q.truncate(b.Name.replace(/\s?keyboard/i,""),40-q.R.length);m.appendChild(q.X[c.id]=q.createNode("span",null,"kmw_kbd",f));e.appendChild(m);e.appendChild(q.createNode("div",null,"kmw_drop"));d.appendChild(e);q.C[c.id]=q.createNode("ul",null,"kmw_selector_kbd");q.C[c.id].style.display="none";for(var l in c.f)m=q.createNode("li"),f=c.f[l].Name.replace(/\s?keyboard/i,""),f=f+" ["+c.f[l].LanguageCode+"]",e=q.createNode("a",null,null,f),e.href="#",e.title="",e.onclick=function(k,p){return function(r){return q.K(r,
k,p,!0)}}(c,c.f[l]),m.appendChild(e),q.C[c.id].appendChild(m);d.appendChild(q.C[c.id])}q.Y.appendChild(d);q.b.push({priority:q.ha++,lang:c,W:b,O:d,aa:g})}else{q.b[d].priority=q.ha++;q.b[d].W=b;if(l=q.X[c.id])f=b.Name.replace(/\s?keyboard/i,""),l.innerHTML=q.truncate(f,40-q.R.length);q.b[d].aa&&(f=q.a.SelectKeyboardPre+b.Name,g=q.a.SelectKeyboardSuf,0>f.toLowerCase().indexOf(g.toLowerCase())&&(f=f+" "+g),q.b[d].aa.title=f)}};q.truncate=function(c,b){return c.length<=b?c:c.substr(0,b-1)+"\u2026"};q.Ka=
function(){q.M=!0;q.H&&clearTimeout(q.H);q.H=setTimeout(q.N,0)};h.addEventListener("keyboardregistered",q.Ka);q.A=function(c){var b=q.ia;b&&(b.style.display="none");q.T();return q.h(c)};q.La=function(c,b){q.J(c);if(b=q.C[b.id]){if("block"==b.style.display)return q.A(c);b.style.display="block";q.ia=b;q.$(b,q.A)}return q.h(c)};q.la=function(c,b){var d=q.I(b);return(d=null==d?b.f[0]:q.b[d].W)?q.K(c,b,d,!0):!1};q.K=function(c,b,d,e){h.activatingUI(!0);if(q.G){var f=q.I(q.G);null!=f&&(q.b[f].O.className=
"kmw_button")}q.F.className="kmw_button";q.G=b;q.w=d;q.va=d.Pa;q.L();q.ba(b,d);e&&h.setActiveKeyboard(d.InternalName,d.LanguageCode);q.b[q.I(b)].O.className="kmw_button_selected";q.ka();q.V();h.activatingUI(!1);return q.J(c)||q.A(c)};q.V=function(){var c=[q.F,q.ja,q.i,q.S],b=!1;h.isCJK(q.w)?b=!0:null==q.w&&(b="none"==c[2].style.display);if(null!=q.w||0<q.b.length)for(var d=0;d<c.length;d++)c[d].style.display="";else for(d=0;d<c.length;d++)c[d].style.display="none";b?q.i.style.display=q.S.style.display=
"none":null==q.w&&(q.i.className="kmw_button_disabled");q.c.parentNode.style.visibility="visible"};q.L=function(){h.focusLastActiveElement()};q.Na=function(c){var b=h.osk;if(b)return h.activatingUI(!0),b&&""!=h.getActiveKeyboard()&&(b.isEnabled()?b.hide():b.show(!0)),q.L(),h.activatingUI(!1),q.h(c)};q.Fa=function(c){if("kmw_controls_disabled"!=q.c.className){q.A(null);if(q.G){var b=q.I(q.G);null!=b&&(q.b[b].O.className="kmw_button")}q.w=null;q.G=null;q.va="";q.F.className="kmw_button_selected"}q.L();
h.setActiveKeyboard("","");q.ka();q.V();return q.h(c)};q.h=function(c){c||(c=window.event);window.event&&(window.event.returnValue=!1);c&&(c.cancelBubble=!0);return!1};q.Z=function(c,b){var d=q.u;if(!d)return q.h(c);d.className="kmw_browsemap_"+b;"undefined"==typeof q.m[b]&&(q.M=!0,q.N());q.m[b].style.display="block";q.l[b].className="selected";null!=q.j&&q.j!=b&&(q.m[q.j].style.display="none",q.l[q.j].className="");q.j=b;return q.h(c)};q.ma=function(c,b){q.u.className=null==q.j?"":"kmw_browsemap_"+
q.j;q.l[b].className=q.j==b?"selected":"";return q.h(c)};q.ga=function(c,b){q.u.className="kmw_browsemap_"+b+"_sel";q.l[b].className="hover";return q.h(c)};q.Ia=function(c){return c.getAttribute?c.getAttribute("kmw_disable")||c.kmw_disable:c.kmw_disable};q.za=function(c){if(!q.B)return!0;c=c.target;if("textarea"==c.tagName.toLowerCase()||"input"==c.tagName.toLowerCase()&&"text"==c.type.toLowerCase())if(q.Ca=c,q.Ia(c))"kmw_controls_disabled"!=q.c.className&&(q.c.className="kmw_controls_disabled");
else{if(null!=q.w)if(h.isCJK())q.i.style.display=q.S.style.display="none";else{var b=h.osk;q.i.className=b&&b.isEnabled()?"kmw_button_selected":"kmw_button"}""!=q.c.className&&(q.c.className="");b=c.oa?c.oa:64;var d=c.pa?c.pa:0;q.Aa=n.getAbsoluteX(c)+b;q.Ba=n.getAbsoluteY(c)+c.offsetHeight+d}return!0};h.addEventListener("controlfocused",q.za);q.ya=function(){if(!q.B)return!0;"none"!=q.i.style.display&&(q.i.className="kmw_button_disabled");return!0};h.addEventListener("controlblurred",q.ya);q.P=null;
q.ea=function(c){q.P=null;var b=c.internalName,d=h.util.getLanguageCodes(c.languageCode)[0];if(""!=d&&""!=b){d=q.languages[d];if(null!=d)for(var e=0;e<d.f.length;e++)if(d.f[e].InternalName==b)return q.K(null,d,d.f[e],!1),!0;q.P=a({},c)}return!0};h.addEventListener("keyboardchange",q.ea);q.Ha=function(c){q.B&&(q.i.className="kmw_button_selected");return c};q.Ga=function(c){q.B&&c.HiddenByUser&&(q.i.className="kmw_button")};q.Ja=function(){var c=h.osk;c&&(c.addEventListener("show",q.Ha),c.addEventListener("hide",
q.Ga))};q.Ma=function(c){q.N();if("kmw_controls_disabled"==q.c.className)return q.h(c);q.A(null);if("kmw_over"==q.s.className)return q.J(c);q.s.className="kmw_over";q.v.className="kmw_button_selected";q.$(q.s,q.J);return q.h(c)};q.J=function(c){q.s.className="";q.v.className="kmw_button";q.T();return q.h(c)};q.fa=function(c){var b=q.ia;if((!b||"none"==b.style.display)&&""==q.s.className)return!0;q.J(c);q.A(c);return q.h(c)};var t=null,u=null,v=null;q.U=function(c){var b=c&&c.target||window.event&&
window.event.srcElement;if(b)for(;b.parentNode;){if(b==u)return null;b=b.parentNode}"#document"==b.nodeName&&q.fa(c);return t};q.$=function(c,b){q.U==document.onclick&&q.T();t=b;u=c;v=document.onclick;document.onclick=q.U};q.T=function(){q.U==document.onclick&&(document.onclick=v,u=t=v=null)};q.Da=function(){var c="",b=n.loadCookie("KeymanWeb_Keyboard");void 0!=b.current&&(c=b.current.split(":")[0]);b=n.loadCookie("KeymanWeb_Toolbar");void 0!=b.region&&(q.j=b.region);if(void 0!=b.maxrecent)for(var d=
0;d<b.maxrecent;d++){if(void 0!=b["recent"+d]){var e=b["recent"+d].split(",");if(2==e.length){var f=q.languages[e[0]];if(null!=f)for(var g=0;g<f.f.length;g++)if(f.f[g].InternalName==e[1]){q.ba(f,f.f[g]);if(f.f[g].InternalName==c){q.K(null,f,f.f[g],!0);window.focus();q.L();break}break}}}}else if(c=h.getActiveKeyboard(),g=h.getActiveLanguage(),""!=g&&""!=c&&(b=q.languages[g],null!=b))for(g=0;g<b.f.length;g++)b.f[g].InternalName==c&&(q.K(null,b,b.f[g],!0),window.focus(),q.L())};q.ka=function(){var c=
{};c.region=q.j;c.maxrecent=""+q.b.length;for(var b=0;b<q.b.length;b++)c["recent"+b]=q.b[b].lang.id+","+q.b[b].W.InternalName;n.saveCookie("KeymanWeb_Toolbar",c)}}catch(c){};}());
//# sourceMappingURL=kmwuitoolbar.js.map
