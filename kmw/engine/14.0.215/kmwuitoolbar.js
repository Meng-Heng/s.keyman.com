(function() {if(!window.keyman.ui.name)try{var a=window.keyman,k=a.osk,n=a.util;if(n.isTouchDevice())throw"";a.ui={B:!1,c:null,Oa:null,u:null,v:null,X:null,F:null,ha:null,i:null,R:null,s:null,m:[],l:null,W:[],C:[],j:"as",b:[],ba:"un",fa:0,Ea:1,Ca:null,w:null,G:"",Aa:0,Ba:0,languages:[],M:!1,I:0,P:""};var p=a.ui;p.name="toolbar";p.a={oa:"Languages",ta:"Turn off KeymanWeb keyboards",ra:"Off",va:"Show On Screen Keyboard",qa:"Select language"};p.a.SelectKeyboardPre="Select ";p.a.SelectKeyboardSuf="keyboard";p.a.AltKeyboardsPre=
"Alternate keyboards for ";p.a.AltKeyboardsSuf="";p.a.ca="Central America";p.a.sa="South America";p.a.na="Americas";p.a.eu="Europe";p.a.af="Africa";p.a.un="Undetermined";p.a.as="Asia";p.a.oc="Oceania";p.createNode=function(c,b,d,e){var f=document.createElement(c);b&&(f.id=b);d&&(f.className=d);e&&(f.innerHTML=e);if("a"==c||"area"==c||"map"==c)f.Sa=function(){return!1};return f};p.initialize=p.Qa=function(){if(a.initialized&&!p.B){var c=document.getElementById("KeymanWebControl");if(!c){if(null==document.body)return;
c=document.createElement("DIV");c.id="KeymanWebControl";document.body.insertBefore(c,document.body.firstChild);p.wa=c}c.style.visibility="hidden";c.style.maxHeight="35px";p.B=!0;if(!n.isTouchDevice()){n.linkStyleSheet(n.getOption("resources")+"ui/toolbar/kmwuitoolbar.css");p.g={};p.g.na={t:p.a.na,D:"0,3,0,37,24,32,35,37,43,47,49,52,65,54,68,57,71,56,73,59,75,60,93,61,93,57,103,49,118,41,126,41,136,23,148,17,156,14,164,5,164,0,57,0,35,5,25,9,5,8,49,52,65,54,68,57,71,56,73,59,75,60,93,61,94,58,97,58,101,59,107,60,114,64,115,68,114,77,104,74,98,75,96,78,95,82,90,81,85,80,82,76,78,74,74,73,65,68,57,61,82,82,95,82,96,78,98,75,104,74,114,77,120,79,124,83,126,87,141,90,142,97,138,103,135,113,127,116,123,124,115,131,112,132,109,138,117,139,140,141,141,146,134,148,114,145,109,148,100,148,91,143,91,130,96,111,89,102,83,95,77,89"};
p.g.eu={t:p.a.eu,D:"145,29,146,19,158,14,171,6,187,2,206,1,217,4,227,11,231,16,231,33,227,34,225,35,225,37,227,39,228,44,228,47,227,48,223,46,218,44,215,43,208,43,203,45,202,48,205,52,201,52,195,49,189,50,187,48,177,48,175,49,166,50,147,33"};p.g.af={t:p.a.af,D:"150,58,158,50,166,50,175,49,177,48,187,48,189,50,195,49,201,52,205,52,207,53,221,75,229,75,231,77,231,85,227,92,232,101,237,106,237,112,227,115,222,118,206,125,199,127,193,127,185,111,183,104,180,87,168,89,153,85,143,71,147,60"};p.g.as={t:p.a.as,
D:"219,1,221,6,228,12,231,16,231,33,227,34,225,35,225,37,227,39,229,45,232,48,239,48,240,49,239,53,242,60,243,65,249,70,252,81,259,87,271,87,278,95,289,100,303,101,311,98,320,98,323,98,323,84,311,81,308,73,307,65,317,57,330,50,334,44,348,36,364,38,375,34,375,8,355,8,336,5,292,1,285,0,219,0"};p.g.oc={t:p.a.oc,D:"288,117,289,107,303,101,311,98,323,98,323,84,333,77,344,73,362,80,369,88,375,96,375,141,352,143,323,142,316,136,310,130,291,130"};p.g.un={t:p.a.un,D:"205,52,202,48,203,45,208,43,215,43,218,44,223,46,227,48,232,48,239,48,240,49,239,53,242,60,243,65,237,76,231,77,229,75,221,75,207,53"};
p.c=p.createNode("div","kmw_controls");p.c.style.display="block";var b=p.createNode("a","kmw_controls_start",null," ");b.href="https://keyman.com/developer/keymanweb/";b.target="_blank";p.c.appendChild(b);p.v=p.createNode("div","kmw_btn_keyboards","kmw_button");p.v.title=p.a.qa;b=p.createNode("a",null,"kmw_button_a");b.href="#";b.onclick=p.La;b.appendChild(p.createNode("div","kmw_img_keyboards","kmw_img"));b.appendChild(p.createNode("div",null,"kmw_a",p.a.oa));b.appendChild(p.createNode("div",null,
"kmw_drop"));p.v.appendChild(b);p.s=p.createNode("div","kmw_selector");p.o=p.createNode("div","kmw_selector_regions");p.u=p.createNode("div","kmw_browsemap");b=p.createNode("img","kmw_region_browsemap");b.src=n.getOption("resources")+"ui/toolbar/blank.gif";b.useMap="#kmw_worldgrey16";p.u.appendChild(b);var d=p.createNode("map","kmw_worldgrey16");d.name="kmw_worldgrey16";for(var e in p.g)b=p.createNode("area"),b.shape="poly",b.alt="",b.href="#",b.title=p.g[e].t,b.Pa="true",b.onclick=function(f){return function(g){return p.Y(g,
f)}}(e),b.onmouseover=function(f){return function(g){return p.ea(g,f)}}(e),b.onmouseout=function(f){return function(g){return p.ka(g,f)}}(e),b.coords=p.g[e].D,d.appendChild(b);b=p.createNode("area");b.shape="default";b.Ra="true";b.alt="";b.onclick=p.h;d.appendChild(b);p.u.appendChild(d);p.o.appendChild(p.u);p.l={};b=p.createNode("ul");for(e in p.g)d=p.createNode("li"),p.l[e]=p.createNode("a",null,null,p.g[e].t),p.l[e].href="#",p.l[e].onclick=function(f){return function(g){return p.Y(g,f)}}(e),p.l[e].onmouseover=
function(f){return function(g){return p.ea(g,f)}}(e),p.l[e].onmouseout=function(f){return function(g){return p.ka(g,f)}}(e),d.appendChild(p.l[e]),b.appendChild(d);p.o.appendChild(b);p.s.appendChild(p.o);p.v.appendChild(p.s);p.c.appendChild(p.v);p.c.appendChild(p.ha=p.createNode("div","kmw_bar_off","kmw_bar"));p.F=p.createNode("div","kmw_btn_off","kmw_button_selected");b=p.createNode("a",null,"kmw_button_a");b.href="#";b.onclick=p.Fa;b.title=p.a.ta;b.appendChild(p.createNode("div","kmw_img_off","kmw_img"));
b.appendChild(p.createNode("div",null,"kmw_a",p.a.ra));p.F.appendChild(b);p.c.appendChild(p.F);p.c.appendChild(p.X=p.createNode("div","kmw_control_keyboards","kmw_button"));p.c.appendChild(p.R=p.createNode("div","kmw_bar_osk","kmw_bar"));p.i=p.createNode("div","kmw_btn_osk","kmw_button");b=p.createNode("a",null,"kmw_button_a");b.href="#";b.onclick=p.Ma;b.title=p.a.va;b.appendChild(p.createNode("div","kmw_img_osk","kmw_img"));p.i.appendChild(b);p.c.appendChild(p.i);p.c.appendChild(p.createNode("div",
"kmw_controls_end",null," "));e=p.createNode("div");e.id="kmw_map_preload";p.c.appendChild(e);p.c.appendChild(p.createNode("br",null,"kmw_clear"));c.appendChild(p.c);p.M=!0;p.I&&clearTimeout(p.I);p.I=setTimeout(p.N,2E3);n.attachDOMEvent(document.body,"click",p.da,!1);p.j="eu";a.focusLastActiveElement()}}};p.Ta=function(){var c=p.c;c&&c.parentNode.removeChild(c);(c=p.wa)&&c.parentNode.removeChild(c)};p.N=function(){if(p.M){p.M=!1;var c=0;p.m={};var b=a.getKeyboards();b.sort(p.Na);for(c=p.o.childNodes.length;0<
c;c--)"kmw_selector_region"==p.o.childNodes[c-1].className&&p.o.removeChild(p.o.childNodes[c-1]);for(var d in p.g){p.m[d]=p.createNode("div",null,"kmw_selector_region");for(var e=p.createNode("div",null,"kmw_keyboard_col"),f=0,g=0,m="",l=0;l<b.length;l++){var h=b[l].RegionCode;if(!p.g[h]){if(d!=p.ba)continue}else if(h!=d)continue;h=a.util.getLanguageCodes(b[l].LanguageCode);h[0]!=m&&(m=h[0],f++)}f=Number(((f+3)/4).toFixed(0));m="";for(l=0;l<b.length;l++){h=b[l].RegionCode;if(!p.g[h]){if(d!=p.ba)continue}else if(h!=
d)continue;h=a.util.getLanguageCodes(b[l].LanguageCode);if(h[0]==m)h=p.languages[m].f,h.push?h.push(b[l]):p.languages[m].f=h.concat(b[l]);else{m=h[0];p.languages[m]={id:b[l].LanguageCode,name:b[l].LanguageName,f:[b[l]]};0==g%f&&0<g&&(p.m[d].appendChild(e),e=p.createNode("div",null,3==g/f?"kmw_keyboard_col_right":"kmw_keyboard_col"));g++;h=p.createNode("div",null,"kmw_language");var q=p.createNode("a",null,null,b[l].LanguageName);q.href="#";q.onclick=function(r){return function(w){return p.ja(w,r)}}(p.languages[m]);
h.appendChild(q);e.appendChild(h);c++}}p.m[d].appendChild(e);p.m[d].appendChild(p.createNode("div",null,"kmw_clear"));p.o.appendChild(p.m[d])}p.Da();p.Y(null,p.j);p.U();a.focusLastActiveElement()}};p.Na=function(c,b){return c.RegionCode<b.RegionCode?-2:c.RegionCode>b.RegionCode?2:c.LanguageName<b.LanguageName?-1:c.LanguageName>b.LanguageName?1:0};p.J=function(c){for(var b=0;b<p.b.length;b++)if(p.b[b].lang.id==c.id)return b;return null};p.aa=function(c,b){var d=p.J(c);if(null==d){if(p.b.length>=p.Ea){var e=
2147483647;d=null;for(var f=0;f<p.b.length;f++)p.b[f].priority<e&&(d=f,e=p.b[f].priority);null!=d&&(e=p.b[d],p.C[e.lang.id]=null,p.W[e.lang.id]=null,p.X.removeChild(e.O),p.b=0==d?p.b.slice(d+1):d==p.b.length-1?p.b.slice(0,d):p.b.slice(0,d).concat(p.b.slice(d+1)))}d=p.createNode("div",null,"kmw_button");e=p.createNode("a",null,"kmw_button_a"+(1<c.f.length?" kmw_norightgap":""));e.href="#";f=p.a.SelectKeyboardPre+b.Name;var g=p.a.SelectKeyboardSuf;0>f.toLowerCase().indexOf(g.toLowerCase())&&(f=f+" "+
g);e.title=f;e.onclick=function(h){return p.ja(h,c)};e.appendChild(p.createNode("div","kmw_img_kbd","kmw_img"));p.P=p.truncate(c.name,28);e.appendChild(p.createNode("div",null,"kmw_a",p.P));d.appendChild(e);g=e;if(1<c.f.length){e=p.createNode("a",null,"kmw_button_a kmw_noleftgap");e.href="#";e.title=p.a.AltKeyboardsPre+c.name+p.a.AltKeyboardsSuf;e.onclick=function(h){return p.Ka(h,c)};var m=p.createNode("div",null,"kmw_a");f=p.truncate(b.Name.replace(/\s?keyboard/i,""),40-p.P.length);m.appendChild(p.W[c.id]=
p.createNode("span",null,"kmw_kbd",f));e.appendChild(m);e.appendChild(p.createNode("div",null,"kmw_drop"));d.appendChild(e);p.C[c.id]=p.createNode("ul",null,"kmw_selector_kbd");p.C[c.id].style.display="none";for(var l in c.f)m=p.createNode("li"),f=c.f[l].Name.replace(/\s?keyboard/i,""),f=f+" ["+c.f[l].pa+"]",e=p.createNode("a",null,null,f),e.href="#",e.title="",e.onclick=function(h,q){return function(r){return p.L(r,h,q)}}(c,c.f[l]),m.appendChild(e),p.C[c.id].appendChild(m);d.appendChild(p.C[c.id])}p.X.appendChild(d);
p.b.push({priority:p.fa++,lang:c,V:b,O:d,$:g})}else{p.b[d].priority=p.fa++;p.b[d].V=b;if(l=p.W[c.id])f=b.Name.replace(/\s?keyboard/i,""),l.innerHTML=p.truncate(f,40-p.P.length);p.b[d].$&&(f=p.a.SelectKeyboardPre+b.Name,g=p.a.SelectKeyboardSuf,0>f.toLowerCase().indexOf(g.toLowerCase())&&(f=f+" "+g),p.b[d].$.title=f)}};p.truncate=function(c,b){return c.length<=b?c:c.substr(0,b-1)+"\u2026"};p.Ja=function(){p.M=!0;p.I&&clearTimeout(p.I);p.I=setTimeout(p.N,2E3)};a.addEventListener("keyboardregistered",
p.Ja);p.A=function(c){var b=p.ga;b&&(b.style.display="none");p.S();return p.h(c)};p.Ka=function(c,b){p.K(c);if(b=p.C[b.id]){if("block"==b.style.display)return p.A(c);b.style.display="block";p.ga=b;p.Z(b,p.A)}return p.h(c)};p.ja=function(c,b){var d=p.J(b);return(d=null==d?b.f[0]:p.b[d].V)?p.L(c,b,d):!1};p.L=function(c,b,d){if(p.G){var e=p.J(p.G);null!=e&&(p.b[e].O.className="kmw_button")}p.F.className="kmw_button";p.G=b;p.w=d;p.ua=d.pa;p.H();p.aa(b,d);a.setActiveKeyboard(d.InternalName,d.LanguageCode);
p.b[p.J(b)].O.className="kmw_button_selected";p.ia();p.U();return p.K(c)||p.A(c)};p.U=function(){var c=[p.F,p.ha,p.i,p.R],b=!1;a.isCJK(p.w)?b=!0:null==p.w&&(b="none"==c[2].style.display);if(null!=p.w||0<p.b.length)for(var d=0;d<c.length;d++)c[d].style.display="";else for(d=0;d<c.length;d++)c[d].style.display="none";b?p.i.style.display=p.R.style.display="none":null==p.w&&(p.i.className="kmw_button_disabled");p.c.parentNode.style.visibility="visible"};p.H=function(){a.focusLastActiveElement()};p.Ma=
function(c){k&&""!=a.getActiveKeyboard()&&(k.isEnabled()?k.hide():k.show(!0));p.H();return p.h(c)};p.Fa=function(c){if("kmw_controls_disabled"!=p.c.className){p.A(null);if(p.G){var b=p.J(p.G);null!=b&&(p.b[b].O.className="kmw_button")}p.w=null;p.G=null;p.ua="";p.F.className="kmw_button_selected"}p.H();a.setActiveKeyboard("","");p.ia();p.U();return p.h(c)};p.h=function(c){c||(c=window.event);window.event&&(window.event.returnValue=!1);c&&(c.cancelBubble=!0);return!1};p.Y=function(c,b){var d=p.u;if(!d)return p.h(c);
d.className="kmw_browsemap_"+b;"undefined"==typeof p.m[b]&&(p.M=!0,p.N());p.m[b].style.display="block";p.l[b].className="selected";null!=p.j&&p.j!=b&&(p.m[p.j].style.display="none",p.l[p.j].className="");p.j=b;return p.h(c)};p.ka=function(c,b){p.u.className=null==p.j?"":"kmw_browsemap_"+p.j;p.l[b].className=p.j==b?"selected":"";return p.h(c)};p.ea=function(c,b){p.u.className="kmw_browsemap_"+b+"_sel";p.l[b].className="hover";return p.h(c)};p.Ia=function(c){return c.getAttribute?c.getAttribute("kmw_disable")||
c.kmw_disable:c.kmw_disable};p.za=function(c){if(!p.B)return!0;c=c.target;if("textarea"==c.tagName.toLowerCase()||"input"==c.tagName.toLowerCase()&&"text"==c.type.toLowerCase())if(p.Ca=c,p.Ia(c))"kmw_controls_disabled"!=p.c.className&&(p.c.className="kmw_controls_disabled");else{null!=p.w&&(a.isCJK()?p.i.style.display=p.R.style.display="none":p.i.className=k&&k.isEnabled()?"kmw_button_selected":"kmw_button");""!=p.c.className&&(p.c.className="");var b=c.la?c.la:64;var d=c.ma?c.ma:0;p.Aa=n.getAbsoluteX(c)+
b;p.Ba=n.getAbsoluteY(c)+c.offsetHeight+d}return!0};a.addEventListener("controlfocused",p.za);p.xa=function(){if(!p.B)return!0;"none"!=p.i.style.display&&(p.i.className="kmw_button_disabled");return!0};a.addEventListener("controlblurred",p.xa);p.ya=function(c){var b=c.internalName;c=c.languageCode;if(""!=c&&""!=b&&(c=p.languages[c],null!=c))for(var d=0;d<c.f.length;d++)c.f[d].InternalName==b&&(p.L(null,c,c.f[d]),window.focus(),p.H());return!0};a.addEventListener("keyboardchange",p.ya);p.Ha=function(c){p.B&&
(p.i.className="kmw_button_selected");return c};k.addEventListener("show",p.Ha);p.Ga=function(c){p.B&&c.HiddenByUser&&(p.i.className="kmw_button")};k.addEventListener("hide",p.Ga);p.La=function(c){p.N();if("kmw_controls_disabled"==p.c.className)return p.h(c);p.A(null);if("kmw_over"==p.s.className)return p.K(c);p.s.className="kmw_over";p.v.className="kmw_button_selected";p.Z(p.s,p.K);return p.h(c)};p.K=function(c){p.s.className="";p.v.className="kmw_button";p.S();return p.h(c)};p.da=function(c){var b=
p.ga;if((!b||"none"==b.style.display)&&""==p.s.className)return!0;p.K(c);p.A(c);return p.h(c)};var t=null,u=null,v=null;p.T=function(c){var b=c&&c.target||window.event&&window.event.srcElement;if(b)for(;b.parentNode;){if(b==u)return null;b=b.parentNode}"#document"==b.nodeName&&p.da(c);return t};p.Z=function(c,b){p.T==document.onclick&&p.S();t=b;u=c;v=document.onclick;document.onclick=p.T};p.S=function(){p.T==document.onclick&&(document.onclick=v,u=t=v=null)};p.Da=function(){var c="",b=n.loadCookie("KeymanWeb_Keyboard");
void 0!=b.current&&(c=b.current.split(":")[0]);b=n.loadCookie("KeymanWeb_Toolbar");void 0!=b.region&&(p.j=b.region);if(void 0!=b.maxrecent)for(var d=0;d<b.maxrecent;d++){if(void 0!=b["recent"+d]){var e=b["recent"+d].split(",");if(2==e.length){var f=p.languages[e[0]];if(null!=f)for(var g=0;g<f.f.length;g++)if(f.f[g].InternalName==e[1]){p.aa(f,f.f[g]);if(f.f[g].InternalName==c){p.L(null,f,f.f[g]);window.focus();p.H();break}break}}}}else if(c=a.getActiveKeyboard(),g=a.getActiveLanguage(),""!=g&&""!=
c&&(b=p.languages[g],null!=b))for(g=0;g<b.f.length;g++)b.f[g].InternalName==c&&(p.L(null,b,b.f[g]),window.focus(),p.H())};p.ia=function(){var c={};c.region=p.j;c.maxrecent=""+p.b.length;for(var b=0;b<p.b.length;b++)c["recent"+b]=p.b[b].lang.id+","+p.b[b].V.InternalName;n.saveCookie("KeymanWeb_Toolbar",c)}}catch(c){};}());
//# sourceMappingURL=kmwuitoolbar.js.map
