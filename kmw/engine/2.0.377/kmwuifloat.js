(function() {var a=!0,d=null,e=!1;
try{var g=window.tavultesoft.keymanweb,h=g.util,i=g.osk;if(h.isTouchDevice())throw"";g.ui={};var k=g.ui;k.name="float";k.a=d;k.b=d;k.f=d;k.g=d;k.d=d;k.n=e;k.o=a;k.p=d;k.l=e;k.c=e;k.B=function(){g.focusLastActiveElement();i.show&&(i.isEnabled()?i.hide():i.show(a));window.event&&(window.event.returnValue=e);return e};k.h=function(){if(g.initialized){if(!k.c&&!h.isTouchDevice()){var b=h.getOption("resources")+"ui/float/";k.b=h.createElement("DIV");k.f=h.createElement("DIV");k.d=h.createElement("IMG");
k.b.innerHTML="<a href='http://keyman.com/web/' target='KeymanWebHelp'><img src='"+b+"kmicon.gif' border='0' style='padding: 0px 2px 0 1px; margin:0px;' title='KeymanWeb' alt='KeymanWeb' /></a>";var c=k.b.style;c.backgroundColor="white";c.border="solid 1px black";c.position="absolute";c.height="18px";c.font="bold 8pt sans-serif";c.display="none";c.textAlign="left";c.overflow="hidden";h.attachDOMEvent(k.b,"mousedown",k.v);h.attachDOMEvent(k.b,"mouseover",k.z);h.attachDOMEvent(k.b,"mouseout",k.w);k.A();
window.createPopup&&!("XmlHttpRequest"in window)&&(k.j=h.createShim());k.d.src=b+"kbdicon.gif";k.d.title="Display visual keyboard";k.m(e);b=h.createElement("DIV");k.g=b;b.onclick=k.B;b.appendChild(k.d);k.f.appendChild(b);k.b.appendChild(k.f);document.body.appendChild(k.b);k.j&&document.body.appendChild(k.j);k.a=h.createElement("SELECT");c=k.a.style;c.font="8pt sans-serif";c.backgroundColor="#f3e5de";c.border="solid 1px #7B9EBD";c.height="16px";c.margin="1px 2px 0px 2px";c.left="20px";c.top="0px";
c.position="absolute";c.maxWidth="150px";h.attachDOMEvent(k.a,"change",k.u);h.attachDOMEvent(k.a,"blur",k.t);k.f.appendChild(k.a);c=h.getOption("ui");b="English";"object"==typeof c&&("string"==typeof c.position&&"right"==c.position&&(k.l=a),"string"==typeof c["default"]&&(b=c["default"]));c=h.createElement("OPTION");c.value="-";c.innerHTML=b;k.a.appendChild(c);k.c=a;k.s()}}else window.setTimeout(k.h,50)};g.addEventListener("unloaduserinterface",function(){k.a=k.f=k.b=k.d=d});k.s=function(){if(k.o){k.c||
k.h();var b,c=k.a.getElementsByTagName("OPTION");for(b=c.length;1<b;b--)k.a.removeChild(c[b-1]);var f=g.getKeyboards();for(b=0;b<f.length;b++){c=h.createElement("OPTION");c.value=f[b].InternalName+":"+f[b].LanguageCode;c.innerHTML=f[b].Name.replace(/\s?keyboard/i,"");if(f[b].LanguageName){var j=f[b].LanguageName,j=j.split(",")[0];-1==f[b].Name.search(j)&&(c.innerHTML=j+" ("+c.innerHTML+")")}k.a.appendChild(c)}}k.o=e;b=g.getSavedKeyboard().split(":");2>b.length&&(b[1]="");k.i(b[0],b[1]);g.getLastActiveElement()&&
(k.q(),k.e())};k.i=function(b,c){var f=0;if(k.c){var j=b;""!=c&&(j+=":"+c);if(""==b)k.a.selectedIndex=0;else for(var m=k.a.getElementsByTagName("OPTION"),f=0;f<m.length;f++){var l=m[f].value;""==c&&(l=l.split(":")[0]);if(l==j){k.a.selectedIndex=f;break}}}};k.m=function(b){var c=k.d.style;c.width="24px";c.height="13px";c.top="1px";c.verticalAlign="bottom";c.padding="2px 2px 1px 2px";c.position="absolute";c.border=b?"inset 1px #808080":"none";c.background=b?"#f7e7de":"white";c.display="block";k.c&&
(k.g.style.display="block")};k.A=function(){g.addEventListener("keyboardregistered",function(){k.o=a;k.p&&clearTimeout(k.p);k.p=setTimeout(k.s,200)});g.addEventListener("keyboardloaded",function(){var b=g.getSavedKeyboard().split(":");1<b.length&&k.i(b[0],b[1])});g.addEventListener("keyboardchange",function(b){k.i(b.internalName,b.languageCode);k.k()});i.addEventListener("show",function(b){k.k();return b});i.addEventListener("hide",function(){k.c&&k.m(e)})};k.v=function(){g.activatingUI&&g.activatingUI(1)};
k.z=function(){g.activatingUI&&g.activatingUI(1)};k.w=function(){g.activatingUI&&g.activatingUI(0)};k.u=function(){if("-"!=k.a.value){var b=k.a.options[k.a.selectedIndex].value.split(":");g.setActiveKeyboard(b[0],b[1])}else g.setActiveKeyboard("");g.focusLastActiveElement();k.n=a};k.t=function(){k.n||g.focusLastActiveElement();k.n=e};k.e=function(b,c){if(k.c){var f=k.b.style;b&&c&&(f.left=b+"px",f.top=c+"px");f.display="block";k.d.style.left=k.a.offsetWidth+24+"px";k.k();k.i(g.getActiveKeyboard(),
g.getActiveLanguage())}};k.q=function(){k.c&&(k.b.style.display="none",h.hideShim(k.j))};k.k=function(){k.g!=d&&(g.isCJK()||0==k.a.selectedIndex?(k.g.style.display="none",k.b.style.width=k.a.offsetWidth+30+"px"):(k.g.style.display="block",k.m(i.isEnabled()),k.b.style.width=k.a.offsetWidth+56+"px"))};g.addEventListener("controlfocused",function(b){if(b.activeControl==d||b.activeControl.LEnabled)k.l?k.e(h.getAbsoluteX(b.target)+b.target.offsetWidth+1,h.getAbsoluteY(b.target)+1):k.e(h.getAbsoluteX(b.target),
h.getAbsoluteY(b.target)-parseInt(h.getStyleValue(k.b,"height"),10)-2);return a});g.addEventListener("controlblurred",function(b){if(!b.event)return a;b.isActivating||k.q();return a});k.r=function(){if("block"==k.b.style.display){var b=g.getLastActiveElement();k.l?k.e(h.getAbsoluteX(b)+b.offsetWidth+1,h.getAbsoluteY(b)+1):k.e(h.getAbsoluteX(b)+1,h.getAbsoluteY(b)+b.offsetHeight+1)}return a};window.addEventListener?window.addEventListener("resize",k.r,e):window.attachEvent("onresize",k.r);g.addEventListener("loaduserinterface",
k.h);k.h()}catch(n){};}());
