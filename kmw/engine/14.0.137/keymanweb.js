/*
 https://github.com/paulmillr/es6-shim
 @license es6-shim Copyright 2013-2016 by Paul Miller (http://paulmillr.com)
   and contributors,  MIT License
 es6-shim: v0.35.4
 see https://github.com/paulmillr/es6-shim/blob/0.35.3/LICENSE
 Details and documentation:
 https://github.com/paulmillr/es6-shim/
 https://mths.be/codepointat v0.2.0 by @mathias  http://mths.be/startswith v0.2.0 by @mathias */
var com;(function(f){f=f.keyman||(f.keyman={});f=f.environment||(f.environment={});f.VERSION="14.0";f.BUILD=137;f.SENTRY_RELEASE="release-14.0.137-alpha"})(com||(com={}));(function(f){(function(f){(function(f){function h(g,c){c=c||{};for(var b in g)"object"===typeof g[b]&&null!=g[b]?(c[b]=g[b].constructor===Array?[]:{},h(g[b],c[b])):c[b]=g[b];return c}f.deepCopy=h})(f.utils||(f.utils={}))})(f.keyman||(f.keyman={}))})(com||(com={}));
(function(f){(function(f){(function(f){f.getGlobalObject=function(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof self?self:global}})(f.utils||(f.utils={}))})(f.keyman||(f.keyman={}))})(com||(com={}));
(function(f){(function(h){(function(h){var l=function(){function g(c){if(void 0===c||null===c)this.components=[].concat(g.DEVELOPER_VERSION_FALLBACK.components);else if(Array.isArray(c)){if(2>c.length)throw Error("Version string must have at least a major and minor component!");this.components=[].concat(c)}else{c=c.split(".");var b=[];if(2>c.length)throw Error("Version string must have at least a major and minor component!");for(var e=0;e<c.length;e++){var a=parseInt(c[e],10);if(isNaN(a))throw Error("Version string components must be numerical!");
b.push(a)}this.components=b}}Object.defineProperty(g.prototype,"major",{get:function(){return this.components[0]},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"minor",{get:function(){return this.components[1]},enumerable:!0,configurable:!0});g.prototype.toString=function(){return this.components.join(".")};g.prototype.toJSON=function(){return this.toString()};g.prototype.equals=function(c){return 0==this.compareTo(c)};g.prototype.precedes=function(c){return 0>this.compareTo(c)};
g.prototype.compareTo=function(c){var b=this.components.length<c.components.length,e=this.components.length<c.components.length?this.components.length:c.components.length,a;for(a=0;a<e;a++){var d=this.components[a]-c.components[a];if(0!=d)return d}c=b?c.components:this.components;do{if(0<c[a])return b?-1:1;a++}while(a<c.length);return 0};g.CURRENT=new g(f.keyman.environment.VERSION);g.DEVELOPER_VERSION_FALLBACK=new g([9,0,0]);g.NO_DEFAULT_KEYCAPS=new g([12,0]);g.MAC_POSSIBLE_IPAD_ALIAS=new g([10,
15]);return g}();h.Version=l})(h.utils||(h.utils={}))})(f.keyman||(f.keyman={}))})(com||(com={}));String.kmwFromCharCode=function(f){var h=[],l;for(l=0;l<arguments.length;l++){var r=Number(arguments[l]);if(!isFinite(r)||0>r||1114111<r||Math.floor(r)!==r)throw new RangeError("Invalid code point "+r);65536>r?h.push(r):(r-=65536,h.push((r>>10)+55296),h.push(r%1024+56320))}return String.fromCharCode.apply(void 0,h)};
String.prototype.kmwCharCodeAt=function(f){var h=String(this),l=0;if(0>f||f>=h.length)return NaN;for(var r=0;r<f;r++)if(l=h.kmwNextChar(l),null===l)return NaN;f=h.charCodeAt(l);return 55296<=f&&56319>=f&&h.length>l+1&&(h=h.charCodeAt(l+1),56320<=h&&57343>=h)?(f-55296<<10)+(h-56320)+65536:f};String.prototype.kmwIndexOf=function(f,h){var l=String(this);f=l.indexOf(f,h);if(0>f)return f;for(var r=h=0;null!==r&&r<f;r=l.kmwNextChar(r))h++;return h};
String.prototype.kmwLastIndexOf=function(f,h){var l=String(this);f=l.lastIndexOf(f,h);if(0>f)return f;for(var r=h=0;null!==r&&r<f;r=l.kmwNextChar(r))h++;return h};String.prototype.kmwLength=function(){var f=String(this);if(0==f.length)return 0;for(var h=0,l=0;null!==l;h++)l=f.kmwNextChar(l);return h};String.prototype.kmwSlice=function(f,h){var l=String(this);f=l.kmwCodePointToCodeUnit(f);h=l.kmwCodePointToCodeUnit(h);return null===f||null===h?"":l.slice(f,h)};
String.prototype.kmwSubstr=function(f,h){var l=String(this);0>f&&(f=l.kmwLength()+f);0>f&&(f=0);var r=l.kmwCodePointToCodeUnit(f),g=r;if(null===r)return"";if(2>arguments.length)g=l.length;else for(var c=0;c<h;c++)g=l.kmwNextChar(g);return null===g?l.substring(r):l.substring(r,g)};
String.prototype.kmwSubstring=function(f,h){var l=String(this);if("undefined"==typeof h)f=l.kmwCodePointToCodeUnit(f),h=l.length;else{if(f>h){var r=f;f=h;h=r}f=l.kmwCodePointToCodeUnit(f);h=l.kmwCodePointToCodeUnit(h)}if(isNaN(f)||null===f)f=0;if(isNaN(h)||null===h)h=l.length;return l.substring(f,h)};
String.prototype.kmwNextChar=function(f){var h=String(this);if(null===f||0>f||f>=h.length-1)return null;var l=h.charCodeAt(f);return 55296<=l&&56319>=l&&h.length>f+1&&(l=h.charCodeAt(f+1),56320<=l&&57343>=l)?f==h.length-2?null:f+2:f+1};String.prototype.kmwPrevChar=function(f){var h=String(this);if(null==f||0>=f||f>h.length)return null;var l=h.charCodeAt(f-1);return 56320<=l&&57343>=l&&1<f&&(h=h.charCodeAt(f-2),55296<=h&&56319>=h)?f-2:f-1};
String.prototype.kmwCodePointToCodeUnit=function(f){if(null===f)return null;var h=String(this),l=0;if(0>f){l=h.length;for(var r=0;r>f;r--)l=h.kmwPrevChar(l);return l}if(f==h.kmwLength())return h.length;for(r=0;r<f;r++)l=h.kmwNextChar(l);return l};String.prototype.kmwCodeUnitToCodePoint=function(f){var h=String(this);return null===f?null:0==f?0:0>f?h.substr(f).kmwLength():h.substr(0,f).kmwLength()};String.prototype.kmwCharAt=function(f){var h=String(this);return 0<=f?h.kmwSubstr(f,1):""};
String.prototype.kmwBMPNextChar=function(f){var h=String(this);return 0>f||f>=h.length-1?null:f+1};String.prototype.kmwBMPPrevChar=function(f){var h=String(this);return 0>=f||f>h.length?null:f-1};String.prototype.kmwBMPCodePointToCodeUnit=function(f){return f};String.prototype.kmwBMPCodeUnitToCodePoint=function(f){return f};String.prototype.kmwBMPLength=function(){return String(this).length};
String.prototype.kmwBMPSubstr=function(f,h){var l=String(this);return-1<f?l.substr(f,h):l.substr(l.length+f,-f)};
String.kmwEnableSupplementaryPlane=function(f){var h=String.prototype;String._kmwFromCharCode=f?String.kmwFromCharCode:String.fromCharCode;h._kmwCharAt=f?h.kmwCharAt:h.charAt;h._kmwCharCodeAt=f?h.kmwCharCodeAt:h.charCodeAt;h._kmwIndexOf=f?h.kmwIndexOf:h.indexOf;h._kmwLastIndexOf=f?h.kmwLastIndexOf:h.lastIndexOf;h._kmwSlice=f?h.kmwSlice:h.slice;h._kmwSubstring=f?h.kmwSubstring:h.substring;h._kmwSubstr=f?h.kmwSubstr:h.kmwBMPSubstr;h._kmwLength=f?h.kmwLength:h.kmwBMPLength;h._kmwNextChar=f?h.kmwNextChar:
h.kmwBMPNextChar;h._kmwPrevChar=f?h.kmwPrevChar:h.kmwBMPPrevChar;h._kmwCodePointToCodeUnit=f?h.kmwCodePointToCodeUnit:h.kmwBMPCodePointToCodeUnit;h._kmwCodeUnitToCodePoint=f?h.kmwCodeUnitToCodePoint:h.kmwBMPCodeUnitToCodePoint};
(function(f){(function(f){(function(f){var h;(function(b){b.Chrome="chrome";b.Edge="edge";b.Firefox="firefox";b.Native="native";b.Opera="opera";b.Safari="safari";b.Other="other"})(h=f.Browser||(f.Browser={}));var g;(function(b){b.Windows="windows";b.macOS="macosx";b.Linux="linux";b.Android="android";b.iOS="ios";b.Other="other"})(g=f.OperatingSystem||(f.OperatingSystem={}));var c;(function(b){b.Desktop="desktop";b.Phone="phone";b.Tablet="tablet"})(c=f.FormFactor||(f.FormFactor={}));var b=function(){return function(b,
a,d,k){switch(b.toLowerCase()){case h.Chrome:case h.Edge:case h.Firefox:case h.Native:case h.Opera:case h.Safari:this.browser=b.toLowerCase();break;default:this.browser=h.Other}switch(a.toLowerCase()){case c.Desktop:case c.Phone:case c.Tablet:this.formFactor=a.toLowerCase();break;default:throw"Invalid form factor specified for device: "+a;}switch(d.toLowerCase()){case g.Windows.toLowerCase():case g.macOS.toLowerCase():case g.Linux.toLowerCase():case g.Android.toLowerCase():case g.iOS.toLowerCase():this.OS=
d.toLowerCase();break;default:this.OS=g.Other}this.touchable=k}}();f.DeviceSpec=b})(f.utils||(f.utils={}))})(f.keyman||(f.keyman={}))})(com||(com={}));
(function(f){(function(f){(function(f){(function(f){var g=function(){function c(){}c.constructInstance=function(){return new Worker(this.asBlobURI(LMLayerWorkerCode))};c.asBlobURI=function(b){b=f.LMLayer.unwrap(b);b=new Blob([b],{type:"text/javascript"});return URL.createObjectURL(b)};return c}();f.DefaultWorker=g})(f.prediction||(f.prediction={}))})(f.text||(f.text={}))})(f.keyman||(f.keyman={}))})(com||(com={}));
(function(f){(function(f){var h=function(){return function(f,g,c){this.interface=f;this.keyboard=g;this.touchEnabled=c||!1}}();f.AttachmentInfo=h})(f.keyman||(f.keyman={}))})(com||(com={}));
(function(f,h){"function"===typeof define&&define.amd?define(h):"object"===typeof exports?module.exports=h():f.returnExports=h()})(this,function(){var f=Function.call.bind(Function.apply),h=Function.call.bind(Function.call),l=Array.isArray,r=Object.keys,g=function(a){try{return a(),!1}catch(A){return!0}},c=function(a){try{return a()}catch(A){return!1}},b=function(a){return function(){return!f(a,this,arguments)}}(g),e=function(){return!g(function(){return Object.defineProperty({},"x",{get:function(){}})})},
a=!!Object.defineProperty&&e(),d="foo"===function(){}.name,k=Function.call.bind(Array.prototype.forEach),p=Function.call.bind(Array.prototype.reduce),x=Function.call.bind(Array.prototype.filter),y=Function.call.bind(Array.prototype.some),n=function(b,d,c,e){!e&&d in b||(a?Object.defineProperty(b,d,{configurable:!0,enumerable:!1,writable:!0,value:c}):b[d]=c)},u=function(a,b,d){k(r(b),function(c){n(a,c,b[c],!!d)})},w=Function.call.bind(Object.prototype.toString),la="function"===typeof/abc/?function(a){return"function"===
typeof a&&"[object Function]"===w(a)}:function(a){return"function"===typeof a},t={getter:function(b,d,c){if(!a)throw new TypeError("getters require true ES5 support");Object.defineProperty(b,d,{configurable:!0,enumerable:!1,get:c})},proxy:function(b,d,c){if(!a)throw new TypeError("getters require true ES5 support");var e=Object.getOwnPropertyDescriptor(b,d);Object.defineProperty(c,d,{configurable:e.configurable,enumerable:e.enumerable,get:function(){return b[d]},set:function(a){b[d]=a}})},redefine:function(b,
d,c){if(a){var e=Object.getOwnPropertyDescriptor(b,d);e.value=c;Object.defineProperty(b,d,e)}else b[d]=c},defineByDescriptor:function(b,d,c){a?Object.defineProperty(b,d,c):"value"in c&&(b[d]=c.value)},preserveToString:function(a,b){b&&la(b.toString)&&n(a,"toString",b.toString.bind(b),!0)}},H=Object.create||function(a,b){var d=function(){};d.prototype=a;var c=new d;"undefined"!==typeof b&&r(b).forEach(function(a){t.defineByDescriptor(c,a,b[a])});return c},L=function(a,b){return Object.setPrototypeOf?
c(function(){var d=function sa(b){b=new a(b);Object.setPrototypeOf(b,sa.prototype);return b};Object.setPrototypeOf(d,a);d.prototype=H(a.prototype,{constructor:{value:d}});return b(d)}):!1},q=function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof global)return global;throw Error("unable to locate global object");}(),ea=q.isFinite,Da=Function.call.bind(String.prototype.indexOf),Ga=Function.apply.bind(Array.prototype.indexOf),ma=Function.call.bind(Array.prototype.concat),
N=Function.call.bind(String.prototype.slice),U=Function.call.bind(Array.prototype.push),W=Function.apply.bind(Array.prototype.push),fa=Function.call.bind(Array.prototype.shift),B=Math.max,R=Math.min,E=Math.floor,F=Math.abs,G=Math.exp,V=Math.log,X=Math.sqrt,ta=Function.call.bind(Object.prototype.hasOwnProperty),ha=function(){},D=q.Map,Xb=D&&D.prototype["delete"],na=D&&D.prototype.get,oa=D&&D.prototype.has,db=D&&D.prototype.set,z=q.Symbol||{},Ha=z.species||"@@species",I=Number.isNaN||function(a){return a!==
a},Ia=Number.isFinite||function(a){return"number"===typeof a&&ea(a)},ia=la(Math.sign)?Math.sign:function(a){a=Number(a);return 0===a||I(a)?a:0>a?-1:1},ja=function(a){a=Number(a);return-1>a||I(a)?NaN:0===a||Infinity===a?a:-1===a?-Infinity:0===1+a-1?a:a*(V(1+a)/(1+a-1))},eb=function(a){return"[object Arguments]"===w(a)},Yb=function(a){return null!==a&&"object"===typeof a&&"number"===typeof a.length&&0<=a.length&&"[object Array]"!==w(a)&&"[object Function]"===w(a.callee)},Ja=eb(arguments)?eb:Yb,C={primitive:function(a){return null===
a||"function"!==typeof a&&"object"!==typeof a},string:function(a){return"[object String]"===w(a)},regex:function(a){return"[object RegExp]"===w(a)},symbol:function(a){return"function"===typeof q.Symbol&&"symbol"===typeof a}},v=function(a,b,d){var c=a[b];n(a,b,d,!0);t.preserveToString(a[b],c)},pa="function"===typeof z&&"function"===typeof z["for"]&&C.symbol(z()),O=C.symbol(z.iterator)?z.iterator:"_es6-shim iterator_";q.Set&&"function"===typeof(new q.Set)["@@iterator"]&&(O="@@iterator");q.Reflect||
n(q,"Reflect",{},!0);var Y=q.Reflect,Ka=String,La="undefined"!==typeof document&&document?document.all:null,S=null==La?function(a){return null==a}:function(a){return null==a&&a!==La},m={Call:function(a,b){var d=2<arguments.length?arguments[2]:[];if(!m.IsCallable(a))throw new TypeError(a+" is not a function");return f(a,b,d)},RequireObjectCoercible:function(a,b){if(S(a))throw new TypeError(b||"Cannot call method on "+a);return a},TypeIsObject:function(a){return void 0===a||null===a||!0===a||!1===a?
!1:"function"===typeof a||"object"===typeof a||a===La},ToObject:function(a,b){return Object(m.RequireObjectCoercible(a,b))},IsCallable:la,IsConstructor:function(a){return m.IsCallable(a)},ToInt32:function(a){return m.ToNumber(a)>>0},ToUint32:function(a){return m.ToNumber(a)>>>0},ToNumber:function(a){if("[object Symbol]"===w(a))throw new TypeError("Cannot convert a Symbol value to a number");return+a},ToInteger:function(a){a=m.ToNumber(a);return I(a)?0:0!==a&&Ia(a)?(0<a?1:-1)*E(F(a)):a},ToLength:function(a){a=
m.ToInteger(a);return 0>=a?0:a>Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:a},SameValue:function(a,b){return a===b?0===a?1/a===1/b:!0:I(a)&&I(b)},SameValueZero:function(a,b){return a===b||I(a)&&I(b)},IsIterable:function(a){return m.TypeIsObject(a)&&("undefined"!==typeof a[O]||Ja(a))},GetIterator:function(a){if(Ja(a))return new Z(a,"value");var b=m.GetMethod(a,O);if(!m.IsCallable(b))throw new TypeError("value is not an iterable");a=m.Call(b,a);if(!m.TypeIsObject(a))throw new TypeError("bad iterator");
return a},GetMethod:function(a,b){a=m.ToObject(a)[b];if(!S(a)){if(!m.IsCallable(a))throw new TypeError("Method not callable: "+b);return a}},IteratorComplete:function(a){return!!a.done},IteratorClose:function(a,b){var d=m.GetMethod(a,"return");if(void 0!==d){try{var c=m.Call(d,a)}catch(sa){var e=sa}if(!b){if(e)throw e;if(!m.TypeIsObject(c))throw new TypeError("Iterator's return method returned a non-object.");}}},IteratorNext:function(a){var b=1<arguments.length?a.next(arguments[1]):a.next();if(!m.TypeIsObject(b))throw new TypeError("bad iterator");
return b},IteratorStep:function(a){a=m.IteratorNext(a);return m.IteratorComplete(a)?!1:a},Construct:function(a,b,d,c){d="undefined"===typeof d?a:d;if(!c&&Y.construct)return Y.construct(a,b,d);c=d.prototype;m.TypeIsObject(c)||(c=Object.prototype);c=H(c);a=m.Call(a,c,b);return m.TypeIsObject(a)?a:c},SpeciesConstructor:function(a,b){a=a.constructor;if(void 0===a)return b;if(!m.TypeIsObject(a))throw new TypeError("Bad constructor");a=a[Ha];if(S(a))return b;if(!m.IsConstructor(a))throw new TypeError("Bad @@species");
return a},CreateHTML:function(a,b,d,c){a=m.ToString(a);var e="<"+b;""!==d&&(c=m.ToString(c).replace(/"/g,"&quot;"),e+=" "+d+'="'+c+'"');return e+">"+a+"</"+b+">"},IsRegExp:function(a){if(!m.TypeIsObject(a))return!1;var b=a[z.match];return"undefined"!==typeof b?!!b:C.regex(a)},ToString:function(a){return Ka(a)}};if(a&&pa){var ua=function(a){if(C.symbol(z[a]))return z[a];var b=z["for"]("Symbol."+a);Object.defineProperty(z,a,{configurable:!1,enumerable:!1,writable:!1,value:b});return b};if(!C.symbol(z.search)){var fb=
ua("search"),gb=String.prototype.search;n(RegExp.prototype,fb,function(a){return m.Call(gb,a,[this])});v(String.prototype,"search",function(a){var b=m.RequireObjectCoercible(this);if(!S(a)){var d=m.GetMethod(a,fb);if("undefined"!==typeof d)return m.Call(d,a,[b])}return m.Call(gb,b,[m.ToString(a)])})}if(!C.symbol(z.replace)){var hb=ua("replace"),ib=String.prototype.replace;n(RegExp.prototype,hb,function(a,b){return m.Call(ib,a,[this,b])});v(String.prototype,"replace",function(a,b){var d=m.RequireObjectCoercible(this);
if(!S(a)){var c=m.GetMethod(a,hb);if("undefined"!==typeof c)return m.Call(c,a,[d,b])}return m.Call(ib,d,[m.ToString(a),b])})}if(!C.symbol(z.split)){var jb=ua("split"),kb=String.prototype.split;n(RegExp.prototype,jb,function(a,b){return m.Call(kb,a,[this,b])});v(String.prototype,"split",function(a,b){var d=m.RequireObjectCoercible(this);if(!S(a)){var c=m.GetMethod(a,jb);if("undefined"!==typeof c)return m.Call(c,a,[d,b])}return m.Call(kb,d,[m.ToString(a),b])})}var lb=C.symbol(z.match),Zb=lb&&function(){var a=
{};a[z.match]=function(){return 42};return 42!=="a".match(a)}();if(!lb||Zb){var mb=ua("match"),nb=String.prototype.match;n(RegExp.prototype,mb,function(a){return m.Call(nb,a,[this])});v(String.prototype,"match",function(a){var b=m.RequireObjectCoercible(this);if(!S(a)){var d=m.GetMethod(a,mb);if("undefined"!==typeof d)return m.Call(d,a,[b])}return m.Call(nb,b,[m.ToString(a)])})}}var ob=function(b,d,c){t.preserveToString(d,b);Object.setPrototypeOf&&Object.setPrototypeOf(b,d);a?k(Object.getOwnPropertyNames(b),
function(a){a in ha||c[a]||t.proxy(b,a,d)}):k(Object.keys(b),function(a){a in ha||c[a]||(d[a]=b[a])});d.prototype=b.prototype;t.redefine(b.prototype,"constructor",d)},$b=function(){return this},qa=function(b){a&&!ta(b,Ha)&&t.getter(b,Ha,$b)},P=function(a,b){b=b||function(){return this};n(a,O,b);!a[O]&&C.symbol(O)&&(a[O]=b)},pb=function(b,d,c){a?Object.defineProperty(b,d,{configurable:!0,enumerable:!0,writable:!0,value:c}):b[d]=c;if(!m.SameValue(b[d],c))throw new TypeError("property is nonconfigurable");
},Ma=function(a,b,d,c){if(!m.TypeIsObject(a))throw new TypeError("Constructor requires `new`: "+b.name);a=b.prototype;m.TypeIsObject(a)||(a=d);d=H(a);for(var e in c)ta(c,e)&&n(d,e,c[e],!0);return d};if(String.fromCodePoint&&1!==String.fromCodePoint.length){var ac=String.fromCodePoint;v(String,"fromCodePoint",function(a){return m.Call(ac,this,arguments)})}var qb={fromCodePoint:function(a){for(var b=[],d,c=0,e=arguments.length;c<e;c++){d=Number(arguments[c]);if(!m.SameValue(d,m.ToInteger(d))||0>d||
1114111<d)throw new RangeError("Invalid code point "+d);65536>d?U(b,String.fromCharCode(d)):(d-=65536,U(b,String.fromCharCode((d>>10)+55296)),U(b,String.fromCharCode(d%1024+56320)))}return b.join("")},raw:function(a){var b=m.ToObject(a,"bad callSite");b=m.ToObject(b.raw,"bad raw value");var d=m.ToLength(b.length);if(0>=d)return"";for(var c=[],e=0,k;e<d;){k=m.ToString(e);k=m.ToString(b[k]);U(c,k);if(e+1>=d)break;k=e+1<arguments.length?arguments[e+1]:"";k=m.ToString(k);U(c,k);e+=1}return c.join("")}};
String.raw&&"xy"!==String.raw({raw:{0:"x",1:"y",length:2}})&&v(String,"raw",qb.raw);u(String,qb);var bc=function Ea(a,b){if(1>b)return"";if(b%2)return Ea(a,b-1)+a;a=Ea(a,b/2);return a+a},aa={repeat:function(a){var b=m.ToString(m.RequireObjectCoercible(this));a=m.ToInteger(a);if(0>a||Infinity<=a)throw new RangeError("repeat count must be less than infinity and not overflow maximum string size");return bc(b,a)},startsWith:function(a){var b=m.ToString(m.RequireObjectCoercible(this));if(m.IsRegExp(a))throw new TypeError('Cannot call method "startsWith" with a regex');
var d=m.ToString(a),c;1<arguments.length&&(c=arguments[1]);c=B(m.ToInteger(c),0);return N(b,c,c+d.length)===d},endsWith:function(a){var b=m.ToString(m.RequireObjectCoercible(this));if(m.IsRegExp(a))throw new TypeError('Cannot call method "endsWith" with a regex');var d=m.ToString(a),c=b.length,e;1<arguments.length&&(e=arguments[1]);e="undefined"===typeof e?c:m.ToInteger(e);c=R(B(e,0),c);return N(b,c-d.length,c)===d},includes:function(a){if(m.IsRegExp(a))throw new TypeError('"includes" does not accept a RegExp');
var b=m.ToString(a),d;1<arguments.length&&(d=arguments[1]);return-1!==Da(this,b,d)},codePointAt:function(a){var b=m.ToString(m.RequireObjectCoercible(this)),d=m.ToInteger(a),c=b.length;if(0<=d&&d<c){a=b.charCodeAt(d);if(55296>a||56319<a||d+1===c)return a;b=b.charCodeAt(d+1);return 56320>b||57343<b?a:1024*(a-55296)+(b-56320)+65536}}};String.prototype.includes&&!1!=="a".includes("a",Infinity)&&v(String.prototype,"includes",aa.includes);if(String.prototype.startsWith&&String.prototype.endsWith){var cc=
g(function(){return"/a/".startsWith(/a/)}),dc=c(function(){return!1==="abc".startsWith("a",Infinity)});cc&&dc||(v(String.prototype,"startsWith",aa.startsWith),v(String.prototype,"endsWith",aa.endsWith))}pa&&(c(function(){var a=/a/;a[z.match]=!1;return"/a/".startsWith(a)})||v(String.prototype,"startsWith",aa.startsWith),c(function(){var a=/a/;a[z.match]=!1;return"/a/".endsWith(a)})||v(String.prototype,"endsWith",aa.endsWith),c(function(){var a=/a/;a[z.match]=!1;return"/a/".includes(a)})||v(String.prototype,
"includes",aa.includes));u(String.prototype,aa);var ec=/(^[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff]+)|([\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff]+$)/g,rb=function(){return m.ToString(m.RequireObjectCoercible(this)).replace(ec,"")},sb=/[\u0085\u200b\ufffe]/g,tb=/^[-+]0x[0-9a-f]+$/i;n(String.prototype,"trim",rb,!0);
var ba=function(a){return{value:a,done:0===arguments.length}},Na=function(a){m.RequireObjectCoercible(a);this._s=m.ToString(a);this._i=0};Na.prototype.next=function(){var a=this._s,b=this._i;if("undefined"===typeof a||b>=a.length)return this._s=void 0,ba();var d=a.charCodeAt(b);55296>d||56319<d||b+1===a.length?d=1:(d=a.charCodeAt(b+1),d=56320>d||57343<d?1:2);this._i=b+d;return ba(a.substr(b,d))};P(Na.prototype);P(String.prototype,function(){return new Na(this)});var va={from:function(a){var b;1<arguments.length&&
(b=arguments[1]);var d;if("undefined"===typeof b)var c=!1;else{if(!m.IsCallable(b))throw new TypeError("Array.from: when provided, the second argument must be a function");2<arguments.length&&(d=arguments[2]);c=!0}var e;if("undefined"!==typeof(Ja(a)||m.GetMethod(a,O))){var k=m.IsConstructor(this)?Object(new this):[];var A=m.GetIterator(a);for(e=0;;){var p=m.IteratorStep(A);if(!1===p)break;p=p.value;try{c&&(p="undefined"===typeof d?b(p,e):h(b,d,p,e)),k[e]=p}catch(fc){throw m.IteratorClose(A,!0),fc;
}e+=1}A=e}else for(p=m.ToObject(a),A=m.ToLength(p.length),k=m.IsConstructor(this)?Object(new this(A)):Array(A),e=0;e<A;++e){var n=p[e];c&&(n="undefined"===typeof d?b(n,e):h(b,d,n,e));pb(k,e,n)}k.length=A;return k},of:function(){for(var a=arguments.length,b=l(this)||!m.IsCallable(this)?Array(a):m.Construct(this,[a]),d=0;d<a;++d)pb(b,d,arguments[d]);b.length=a;return b}};u(Array,va);qa(Array);var Z=function(a,b){this.i=0;this.array=a;this.kind=b};u(Z.prototype,{next:function(){var a=this.i,b=this.array;
if(!(this instanceof Z))throw new TypeError("Not an ArrayIterator");if("undefined"!==typeof b)for(var d=m.ToLength(b.length);a<d;){d=this.kind;var c;"key"===d?c=a:"value"===d?c=b[a]:"entry"===d&&(c=[a,b[a]]);this.i=a+1;return ba(c)}this.array=void 0;return ba()}});P(Z.prototype);Array.of===va.of||function(){var a=function(a){this.length=a};a.prototype=[];var b=Array.of.apply(a,[1,2]);return b instanceof a&&2===b.length}()||v(Array,"of",va.of);var Ra={copyWithin:function(a,b){var d=m.ToObject(this),
c=m.ToLength(d.length),e=m.ToInteger(a),k=m.ToInteger(b);e=0>e?B(c+e,0):R(e,c);k=0>k?B(c+k,0):R(k,c);var A;2<arguments.length&&(A=arguments[2]);A="undefined"===typeof A?c:m.ToInteger(A);A=0>A?B(c+A,0):R(A,c);c=R(A-k,c-e);A=1;k<e&&e<k+c&&(A=-1,k+=c-1,e+=c-1);for(;0<c;)k in d?d[e]=d[k]:delete d[e],k+=A,e+=A,--c;return d},fill:function(a){var b;1<arguments.length&&(b=arguments[1]);var d;2<arguments.length&&(d=arguments[2]);var c=m.ToObject(this),e=m.ToLength(c.length);b=m.ToInteger("undefined"===typeof b?
0:b);d=m.ToInteger("undefined"===typeof d?e:d);b=0>b?B(e+b,0):R(b,e);for(d=0>d?e+d:d;b<e&&b<d;++b)c[b]=a;return c},find:function(a){var b=m.ToObject(this),d=m.ToLength(b.length);if(!m.IsCallable(a))throw new TypeError("Array#find: predicate must be a function");for(var c=1<arguments.length?arguments[1]:null,e=0,k;e<d;e++)if(k=b[e],c){if(h(a,c,k,e,b))return k}else if(a(k,e,b))return k},findIndex:function(a){var b=m.ToObject(this),d=m.ToLength(b.length);if(!m.IsCallable(a))throw new TypeError("Array#findIndex: predicate must be a function");
for(var c=1<arguments.length?arguments[1]:null,e=0;e<d;e++)if(c){if(h(a,c,b[e],e,b))return e}else if(a(b[e],e,b))return e;return-1},keys:function(){return new Z(this,"key")},values:function(){return new Z(this,"value")},entries:function(){return new Z(this,"entry")}};Array.prototype.keys&&!m.IsCallable([1].keys().next)&&delete Array.prototype.keys;Array.prototype.entries&&!m.IsCallable([1].entries().next)&&delete Array.prototype.entries;Array.prototype.keys&&Array.prototype.entries&&!Array.prototype.values&&
Array.prototype[O]&&(u(Array.prototype,{values:Array.prototype[O]}),C.symbol(z.unscopables)&&(Array.prototype[z.unscopables].values=!0));if(d&&Array.prototype.values&&"values"!==Array.prototype.values.name){var gc=Array.prototype.values;v(Array.prototype,"values",function(){return m.Call(gc,this,arguments)});n(Array.prototype,O,Array.prototype.values,!0)}u(Array.prototype,Ra);0>1/[!0].indexOf(!0,-0)&&n(Array.prototype,"indexOf",function(a){var b=Ga(this,arguments);return 0===b&&0>1/b?0:b},!0);P(Array.prototype,
function(){return this.values()});Object.getPrototypeOf&&P(Object.getPrototypeOf([].values()));var hc=function(){return c(function(){return 0===Array.from({length:-1}).length})}(),ic=function(){var a=Array.from([0].entries());return 1===a.length&&l(a[0])&&0===a[0][0]&&0===a[0][1]}();hc&&ic||v(Array,"from",va.from);if(!function(){return c(function(){return Array.from([0],void 0)})}()){var ub=Array.from;v(Array,"from",function(a){return 1<arguments.length&&"undefined"!==typeof arguments[1]?m.Call(ub,
this,arguments):h(ub,this,a)})}var jc=-(Math.pow(2,32)-1),ca=function(a,b){var d={length:jc};d[b?(d.length>>>0)-1:0]=!0;return c(function(){h(a,d,function(){throw new RangeError("should not reach here");},[]);return!0})};if(!ca(Array.prototype.forEach)){var kc=Array.prototype.forEach;v(Array.prototype,"forEach",function(a){return m.Call(kc,0<=this.length?this:[],arguments)},!0)}if(!ca(Array.prototype.map)){var lc=Array.prototype.map;v(Array.prototype,"map",function(a){return m.Call(lc,0<=this.length?
this:[],arguments)},!0)}if(!ca(Array.prototype.filter)){var mc=Array.prototype.filter;v(Array.prototype,"filter",function(a){return m.Call(mc,0<=this.length?this:[],arguments)},!0)}if(!ca(Array.prototype.some)){var nc=Array.prototype.some;v(Array.prototype,"some",function(a){return m.Call(nc,0<=this.length?this:[],arguments)},!0)}if(!ca(Array.prototype.every)){var oc=Array.prototype.every;v(Array.prototype,"every",function(a){return m.Call(oc,0<=this.length?this:[],arguments)},!0)}if(!ca(Array.prototype.reduce)){var pc=
Array.prototype.reduce;v(Array.prototype,"reduce",function(a){return m.Call(pc,0<=this.length?this:[],arguments)},!0)}if(!ca(Array.prototype.reduceRight,!0)){var qc=Array.prototype.reduceRight;v(Array.prototype,"reduceRight",function(a){return m.Call(qc,0<=this.length?this:[],arguments)},!0)}var rc=8!==Number("0o10"),sc=2!==Number("0b10"),tc=y("\u0085\u200b\ufffe",function(a){return 0===Number(a+0+a)});if(rc||sc||tc){var T=Number,vb=/^0b[01]+$/i,wb=/^0o[0-7]+$/i,uc=vb.test.bind(vb),vc=wb.test.bind(wb),
wc=function(a){if("function"===typeof a.valueOf){var b=a.valueOf();if(C.primitive(b))return b}if("function"===typeof a.toString&&(b=a.toString(),C.primitive(b)))return b;throw new TypeError("No default value");},xc=sb.test.bind(sb),yc=tb.test.bind(tb),wa=function(){var a=function(b){var d=0<arguments.length?C.primitive(b)?b:wc(b,"number"):0;if("string"===typeof d)if(d=m.Call(rb,d),uc(d))d=parseInt(N(d,2),2);else if(vc(d))d=parseInt(N(d,2),8);else if(xc(d)||yc(d))d=NaN;var e=this,k=c(function(){T.prototype.valueOf.call(e);
return!0});return e instanceof a&&!k?new T(d):T(d)};return a}();ob(T,wa,{});u(wa,{NaN:T.NaN,MAX_VALUE:T.MAX_VALUE,MIN_VALUE:T.MIN_VALUE,NEGATIVE_INFINITY:T.NEGATIVE_INFINITY,POSITIVE_INFINITY:T.POSITIVE_INFINITY});Number=wa;t.redefine(q,"Number",wa)}var xb=Math.pow(2,53)-1;u(Number,{MAX_SAFE_INTEGER:xb,MIN_SAFE_INTEGER:-xb,EPSILON:2.220446049250313E-16,parseInt:q.parseInt,parseFloat:q.parseFloat,isFinite:Ia,isInteger:function(a){return Ia(a)&&m.ToInteger(a)===a},isSafeInteger:function(a){return Number.isInteger(a)&&
F(a)<=Number.MAX_SAFE_INTEGER},isNaN:I});n(Number,"parseInt",q.parseInt,Number.parseInt!==q.parseInt);1===[,1].find(function(){return!0})&&v(Array.prototype,"find",Ra.find);0!==[,1].findIndex(function(){return!0})&&v(Array.prototype,"findIndex",Ra.findIndex);var yb=Function.bind.call(Function.bind,Object.prototype.propertyIsEnumerable),xa=function(b,d){a&&yb(b,d)&&Object.defineProperty(b,d,{enumerable:!1})},zc=function(){var a=Number(this),b=arguments.length,d=b-a;d=Array(0>d?0:d);for(var c=a;c<b;++c)d[c-
a]=arguments[c];return d},zb=function(a){return function(b,d){b[d]=a[d];return b}},Ac=function(a,b){var d=r(Object(b)),c;m.IsCallable(Object.getOwnPropertySymbols)&&(c=x(Object.getOwnPropertySymbols(Object(b)),yb(b)));return p(ma(d,c||[]),zb(b),a)},Ab={assign:function(a,b){var d=m.ToObject(a,"Cannot convert undefined or null to object");return p(m.Call(zc,1,arguments),Ac,d)},is:function(a,b){return m.SameValue(a,b)}};Object.assign&&Object.preventExtensions&&function(){var a=Object.preventExtensions({1:2});
try{Object.assign(a,"xy")}catch(K){return"y"===a[1]}}()&&v(Object,"assign",Ab.assign);u(Object,Ab);if(a){var Bc={setPrototypeOf:function(a,b){var d=function(a,b){if(!m.TypeIsObject(a))throw new TypeError("cannot set prototype on a non-object");if(null!==b&&!m.TypeIsObject(b))throw new TypeError("can only set prototype to an object or null"+b);h(c,a,b);return a};try{var c=a.getOwnPropertyDescriptor(a.prototype,b).set;h(c,{},null)}catch(sa){if(a.prototype!=={}[b])return;c=function(a){this[b]=a};d.polyfill=
d(d({},null),a.prototype)instanceof a}return d}(Object,"__proto__")};u(Object,Bc)}Object.setPrototypeOf&&Object.getPrototypeOf&&null!==Object.getPrototypeOf(Object.setPrototypeOf({},null))&&null===Object.getPrototypeOf(Object.create(null))&&function(){var a=Object.create(null),b=Object.getPrototypeOf,d=Object.setPrototypeOf;Object.getPrototypeOf=function(d){d=b(d);return d===a?null:d};Object.setPrototypeOf=function(b,c){return d(b,null===c?a:c)};Object.setPrototypeOf.polyfill=!1}();if(g(function(){return Object.keys("foo")})){var Cc=
Object.keys;v(Object,"keys",function(a){return Cc(m.ToObject(a))});r=Object.keys}if(g(function(){return Object.keys(/a/g)})){var Dc=Object.keys;v(Object,"keys",function(a){if(C.regex(a)){var b=[],d;for(d in a)ta(a,d)&&U(b,d);return b}return Dc(a)});r=Object.keys}if(Object.getOwnPropertyNames&&g(function(){return Object.getOwnPropertyNames("foo")})){var Ec="object"===typeof window?Object.getOwnPropertyNames(window):[],Bb=Object.getOwnPropertyNames;v(Object,"getOwnPropertyNames",function(a){a=m.ToObject(a);
if("[object Window]"===w(a))try{return Bb(a)}catch(K){return ma([],Ec)}return Bb(a)})}if(Object.getOwnPropertyDescriptor&&g(function(){return Object.getOwnPropertyDescriptor("foo","bar")})){var Fc=Object.getOwnPropertyDescriptor;v(Object,"getOwnPropertyDescriptor",function(a,b){return Fc(m.ToObject(a),b)})}if(Object.seal&&g(function(){return Object.seal("foo")})){var Gc=Object.seal;v(Object,"seal",function(a){return m.TypeIsObject(a)?Gc(a):a})}if(Object.isSealed&&g(function(){return Object.isSealed("foo")})){var Hc=
Object.isSealed;v(Object,"isSealed",function(a){return m.TypeIsObject(a)?Hc(a):!0})}if(Object.freeze&&g(function(){return Object.freeze("foo")})){var Ic=Object.freeze;v(Object,"freeze",function(a){return m.TypeIsObject(a)?Ic(a):a})}if(Object.isFrozen&&g(function(){return Object.isFrozen("foo")})){var Jc=Object.isFrozen;v(Object,"isFrozen",function(a){return m.TypeIsObject(a)?Jc(a):!0})}if(Object.preventExtensions&&g(function(){return Object.preventExtensions("foo")})){var Kc=Object.preventExtensions;
v(Object,"preventExtensions",function(a){return m.TypeIsObject(a)?Kc(a):a})}if(Object.isExtensible&&g(function(){return Object.isExtensible("foo")})){var Lc=Object.isExtensible;v(Object,"isExtensible",function(a){return m.TypeIsObject(a)?Lc(a):!1})}if(Object.getPrototypeOf&&g(function(){return Object.getPrototypeOf("foo")})){var Mc=Object.getPrototypeOf;v(Object,"getPrototypeOf",function(a){return Mc(m.ToObject(a))})}var Nc=a&&function(){var a=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags");
return a&&m.IsCallable(a.get)}();a&&!Nc&&t.getter(RegExp.prototype,"flags",function(){if(!m.TypeIsObject(this))throw new TypeError("Method called on incompatible type: must be an object.");var a="";this.global&&(a+="g");this.ignoreCase&&(a+="i");this.multiline&&(a+="m");this.unicode&&(a+="u");this.sticky&&(a+="y");return a});var Oc=a&&c(function(){return"/a/i"===String(new RegExp(/a/g,"i"))}),Pc=pa&&a&&function(){var a=/./;a[z.match]=!1;return RegExp(a)===a}(),Cb=c(function(){return"/abc/"===RegExp.prototype.toString.call({source:"abc"})}),
Qc=Cb&&c(function(){return"/a/b"===RegExp.prototype.toString.call({source:"a",flags:"b"})});if(!Cb||!Qc){var Db=RegExp.prototype.toString;n(RegExp.prototype,"toString",function(){var a=m.RequireObjectCoercible(this);if(C.regex(a))return h(Db,a);var b=Ka(a.source);a=Ka(a.flags);return"/"+b+"/"+a},!0);t.preserveToString(RegExp.prototype.toString,Db)}if(a&&(!Oc||Pc)){var Rc=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags").get,Eb=Object.getOwnPropertyDescriptor(RegExp.prototype,"source")||{},
Sc=function(){return this.source},Tc=m.IsCallable(Eb.get)?Eb.get:Sc,Fb=RegExp,Sa=function(){return function Fa(a,b){var d=m.IsRegExp(a);return this instanceof Fa||!d||"undefined"!==typeof b||a.constructor!==Fa?C.regex(a)?(d=m.Call(Tc,a),a="undefined"===typeof b?m.Call(Rc,a):b,new Fa(d,a)):new Fb(a,b):a}}();ob(Fb,Sa,{$input:!0});RegExp=Sa;t.redefine(q,"RegExp",Sa)}if(a){var Ta={input:"$_",lastMatch:"$&",lastParen:"$+",leftContext:"$`",rightContext:"$'"};k(r(Ta),function(a){a in RegExp&&!(Ta[a]in RegExp)&&
t.getter(RegExp,Ta[a],function(){return RegExp[a]})})}qa(RegExp);var ya=1/Number.EPSILON,za=Math.pow(2,-23),Uc=Math.pow(2,127)*(2-za),Ua=Math.pow(2,-126),ka=Math.E,Aa=Math.LOG2E,Vc=Math.LOG10E,Gb=Number.prototype.clz;delete Number.prototype.clz;var J={acosh:function(a){var b=Number(a);if(I(b)||1>a)return NaN;if(1===b)return 0;if(Infinity===b)return b;a=1/(b*b);if(2>b)return ja(b-1+X(1-a)*b);b/=2;return ja(b+X(1-a)*b-1)+1/Aa},asinh:function(a){var b=Number(a);if(0===b||!ea(b))return b;a=F(b);var d=
a*a;b=ia(b);return 1>a?b*ja(a+d/(X(d+1)+1)):b*(ja(a/2+X(1+1/d)*a/2-1)+1/Aa)},atanh:function(a){a=Number(a);if(0===a)return a;if(-1===a)return-Infinity;if(1===a)return Infinity;if(I(a)||-1>a||1<a)return NaN;var b=F(a);return ia(a)*ja(2*b/(1-b))/2},cbrt:function(a){a=Number(a);if(0===a)return a;var b=0>a;b&&(a=-a);if(Infinity===a)var d=Infinity;else d=G(V(a)/3),d=(a/(d*d)+2*d)/3;return b?-d:d},clz32:function(a){a=m.ToUint32(Number(a));return 0===a?32:Gb?m.Call(Gb,a):31-E(V(a+.5)*Aa)},cosh:function(a){a=
Number(a);if(0===a)return 1;if(I(a))return NaN;if(!ea(a))return Infinity;a=G(F(a)-1);return ka/2*(a+1/(a*ka*ka))},expm1:function(a){a=Number(a);if(-Infinity===a)return-1;if(!ea(a)||0===a)return a;if(.5<F(a))return G(a)-1;for(var b=a,d=0,c=1;d+b!==d;)d+=b,c+=1,b*=a/c;return d},hypot:function(a,b){for(var d=0,c=0,e=0;e<arguments.length;++e){var k=F(Number(arguments[e]));c<k?(d*=c/k*(c/k),d+=1,c=k):d+=0<k?k/c*(k/c):k}return Infinity===c?Infinity:c*X(d)},log2:function(a){return V(a)*Aa},log10:function(a){return V(a)*
Vc},log1p:ja,sign:ia,sinh:function(a){a=Number(a);if(!ea(a)||0===a)return a;var b=F(a);if(1>b)return b=Math.expm1(b),ia(a)*b*(1+1/(b+1))/2;b=G(b-1);return ia(a)*(b-1/(b*ka*ka))*(ka/2)},tanh:function(a){a=Number(a);return I(a)||0===a?a:20<=a?1:-20>=a?-1:(Math.expm1(a)-Math.expm1(-a))/(G(a)+G(-a))},trunc:function(a){a=Number(a);return 0>a?-E(-a):E(a)},imul:function(a,b){a=m.ToUint32(a);b=m.ToUint32(b);var d=a&65535,c=b&65535;return d*c+((a>>>16&65535)*c+d*(b>>>16&65535)<<16>>>0)|0},fround:function(a){var b=
Number(a);if(0===b||Infinity===b||-Infinity===b||I(b))return b;a=ia(b);b=F(b);if(b<Ua)return a*(b/Ua/za+ya-ya)*Ua*za;var d=(1+za/Number.EPSILON)*b;b=d-(d-b);return b>Uc||I(b)?Infinity*a:a*b}};u(Math,J);n(Math,"sinh",J.sinh,Infinity===Math.sinh(710));n(Math,"cosh",J.cosh,Infinity===Math.cosh(710));n(Math,"log1p",J.log1p,-1E-17!==Math.log1p(-1E-17));n(Math,"asinh",J.asinh,Math.asinh(-1E7)!==-Math.asinh(1E7));n(Math,"asinh",J.asinh,Infinity===Math.asinh(1E300));n(Math,"atanh",J.atanh,0===Math.atanh(1E-300));
n(Math,"tanh",J.tanh,-2E-17!==Math.tanh(-2E-17));n(Math,"acosh",J.acosh,Infinity===Math.acosh(Number.MAX_VALUE));n(Math,"acosh",J.acosh,!(8>F(1-Math.acosh(1+Number.EPSILON)/Math.sqrt(2*Number.EPSILON))/Number.EPSILON));n(Math,"cbrt",J.cbrt,!(8>F(1-Math.cbrt(1E-300)/1E-100)/Number.EPSILON));n(Math,"sinh",J.sinh,-2E-17!==Math.sinh(-2E-17));var Hb=Math.expm1(10);n(Math,"expm1",J.expm1,22025.465794806718<Hb||22025.465794806718>Hb);var Wc=Math.round,Xc=0===Math.round(.5-Number.EPSILON/4)&&1===Math.round(-.5+
Number.EPSILON/3.99),Yc=[ya+1,2*ya-1].every(function(a){return Math.round(a)===a});n(Math,"round",function(a){var b=E(a);return.5>a-b?b:-1===b?-0:b+1},!Xc||!Yc);t.preserveToString(Math.round,Wc);var Ib=Math.imul;-5!==Math.imul(4294967295,5)&&(Math.imul=J.imul,t.preserveToString(Math.imul,Ib));2!==Math.imul.length&&v(Math,"imul",function(a,b){return m.Call(Ib,Math,arguments)});var Ba=function(){var a=q.setTimeout;if("function"===typeof a||"object"===typeof a){m.IsPromise=function(a){return m.TypeIsObject(a)&&
"undefined"!==typeof a._promise?!0:!1};var b=function(a){if(!m.IsConstructor(a))throw new TypeError("Bad promise constructor");var b=this;b.resolve=void 0;b.reject=void 0;b.promise=new a(function(a,d){if(void 0!==b.resolve||void 0!==b.reject)throw new TypeError("Bad Promise implementation!");b.resolve=a;b.reject=d});if(!m.IsCallable(b.resolve)||!m.IsCallable(b.reject))throw new TypeError("Bad promise constructor");},d;"undefined"!==typeof window&&m.IsCallable(window.postMessage)&&(d=function(){var a=
[];window.addEventListener("message",function(b){b.source===window&&"zero-timeout-message"===b.data&&(b.stopPropagation(),0!==a.length&&fa(a)())},!0);return function(b){U(a,b);window.postMessage("zero-timeout-message","*")}});var c=function(){var a=q.Promise,b=a&&a.resolve&&a.resolve();return b&&function(a){return b.then(a)}},e=m.IsCallable(q.setImmediate)?q.setImmediate:"object"===typeof process&&process.nextTick?process.nextTick:c()||(m.IsCallable(d)?d():function(b){a(b,0)}),k=function(a){return a},
p=function(a){throw a;},n={},g=function(a,b,d){e(function(){if(b===n)a(d);else{try{var c=a(d);var e=b.resolve}catch(Va){c=Va,e=b.reject}e(c)}})},f=function(a,b){var d=a._promise,c=d.reactionLength;if(0<c&&(g(d.fulfillReactionHandler0,d.reactionCapability0,b),d.fulfillReactionHandler0=void 0,d.rejectReactions0=void 0,d.reactionCapability0=void 0,1<c))for(var e=1,k=0;e<c;e++,k+=3)g(d[k+0],d[k+2],b),a[k+0]=void 0,a[k+1]=void 0,a[k+2]=void 0;d.result=b;d.state=1;d.reactionLength=0},x=function(a,b){var d=
a._promise,c=d.reactionLength;if(0<c&&(g(d.rejectReactionHandler0,d.reactionCapability0,b),d.fulfillReactionHandler0=void 0,d.rejectReactions0=void 0,d.reactionCapability0=void 0,1<c))for(var e=1,k=0;e<c;e++,k+=3)g(d[k+1],d[k+2],b),a[k+0]=void 0,a[k+1]=void 0,a[k+2]=void 0;d.result=b;d.state=2;d.reactionLength=0},y=function(a){var b=!1;return{resolve:function(d){if(!b){b=!0;if(d===a)return x(a,new TypeError("Self resolution"));if(!m.TypeIsObject(d))return f(a,d);try{var c=d.then}catch(Zc){return x(a,
Zc)}if(!m.IsCallable(c))return f(a,d);e(function(){var b=c,e=y(a),k=e.resolve;e=e.reject;try{l(b,d,k,e)}catch($c){e($c)}})}},reject:function(d){if(!b)return b=!0,x(a,d)}}},l=function(a,b,d,c){a===la?h(a,b,d,c,n):h(a,b,d,c)},w=function(){var a=function(b){if(!(this instanceof a))throw new TypeError('Constructor Promise requires "new"');if(this&&this._promise)throw new TypeError("Bad construction");if(!m.IsCallable(b))throw new TypeError("not a valid resolver");var d=Ma(this,a,t,{_promise:{result:void 0,
state:0,reactionLength:0,fulfillReactionHandler0:void 0,rejectReactionHandler0:void 0,reactionCapability0:void 0}}),c=y(d),e=c.reject;try{b(c.resolve,e)}catch(Va){e(Va)}return d};return a}();var t=w.prototype;var r=function(a,b,d,c){var e=!1;return function(k){e||(e=!0,b[a]=k,0===--c.count&&(k=d.resolve,k(b)))}};u(w,{all:function(a){if(!m.TypeIsObject(this))throw new TypeError("Promise is not object");var d=new b(this),c;try{var e=m.GetIterator(a);a=c={iterator:e,done:!1};for(var k=a.iterator,A=[],
p={count:1},n,g,f=0;;){try{n=m.IteratorStep(k);if(!1===n){a.done=!0;break}g=n.value}catch(Xa){throw a.done=!0,Xa;}A[f]=void 0;var x=this.resolve(g),y=r(f,A,d,p);p.count+=1;l(x.then,x,y,d.reject);f+=1}if(0===--p.count){var h=d.resolve;h(A)}return d.promise}catch(Xa){k=Xa;if(c&&!c.done)try{m.IteratorClose(e,!0)}catch(bd){k=bd}e=d.reject;e(k);return d.promise}},race:function(a){if(!m.TypeIsObject(this))throw new TypeError("Promise is not object");var d=new b(this),c;try{var e=m.GetIterator(a);a=c={iterator:e,
done:!1};for(var k=a.iterator,A,p,n;;){try{A=m.IteratorStep(k);if(!1===A){a.done=!0;break}p=A.value}catch(Wa){throw a.done=!0,Wa;}n=this.resolve(p);l(n.then,n,d.resolve,d.reject)}return d.promise}catch(Wa){k=Wa;if(c&&!c.done)try{m.IteratorClose(e,!0)}catch(ad){k=ad}e=d.reject;e(k);return d.promise}},reject:function(a){if(!m.TypeIsObject(this))throw new TypeError("Bad promise constructor");var d=new b(this),c=d.reject;c(a);return d.promise},resolve:function(a){if(!m.TypeIsObject(this))throw new TypeError("Bad promise constructor");
if(m.IsPromise(a)&&a.constructor===this)return a;var d=new b(this),c=d.resolve;c(a);return d.promise}});u(t,{"catch":function(a){return this.then(null,a)},then:function(a,d){if(!m.IsPromise(this))throw new TypeError("not a promise");var c=m.SpeciesConstructor(this,w);c=2<arguments.length&&arguments[2]===n&&c===w?n:new b(c);var e=m.IsCallable(a)?a:k,A=m.IsCallable(d)?d:p,f=this._promise;if(0===f.state){if(0===f.reactionLength)f.fulfillReactionHandler0=e,f.rejectReactionHandler0=A,f.reactionCapability0=
c;else{var x=3*(f.reactionLength-1);f[x+0]=e;f[x+1]=A;f[x+2]=c}f.reactionLength+=1}else if(1===f.state)f=f.result,g(e,c,f);else if(2===f.state)f=f.result,g(A,c,f);else throw new TypeError("unexpected Promise state");return c.promise}});n=new b(w);var la=t.then;return w}}();q.Promise&&(delete q.Promise.accept,delete q.Promise.defer,delete q.Promise.prototype.chain);if("function"===typeof Ba){u(q,{Promise:Ba});var cd=L(q.Promise,function(a){return a.resolve(42).then(function(){})instanceof a}),dd=!g(function(){return q.Promise.reject(42).then(null,
5).then(null,ha)}),ed=g(function(){return q.Promise.call(3,ha)}),fd=function(a){var b=a.resolve(5);b.constructor={};a=a.resolve(b);try{a.then(null,ha).then(null,ha)}catch(Ea){return!0}return b===a}(q.Promise),gd=a&&function(){var a=0,b=Object.defineProperty({},"then",{get:function(){a+=1}});Promise.resolve(b);return 1===a}(),Ya=function(a){var b=new Promise(a);a(3,function(){});this.then=b.then;this.constructor=BadResolverPromise_1};Ya.prototype=Promise.prototype;Ya.all=Promise.all;var hd=c(function(){return!!Ya.all([1,
2])});cd&&dd&&ed&&!fd&&gd&&!hd||(Promise=Ba,v(q,"Promise",Ba));if(1!==Promise.all.length){var id=Promise.all;v(Promise,"all",function(a){return m.Call(id,this,arguments)})}if(1!==Promise.race.length){var jd=Promise.race;v(Promise,"race",function(a){return m.Call(jd,this,arguments)})}if(1!==Promise.resolve.length){var kd=Promise.resolve;v(Promise,"resolve",function(a){return m.Call(kd,this,arguments)})}if(1!==Promise.reject.length){var ld=Promise.reject;v(Promise,"reject",function(a){return m.Call(ld,
this,arguments)})}xa(Promise,"all");xa(Promise,"race");xa(Promise,"resolve");xa(Promise,"reject");qa(Promise)}var Jb=function(a){var b=r(p(a,function(a,b){a[b]=!0;return a},{}));return a.join(":")===b.join(":")},md=Jb(["z","a","bb"]),nd=Jb(["z",1,"a","3",2]);if(a){var da=function(a,b){return b||md?S(a)?"^"+m.ToString(a):"string"===typeof a?"$"+a:"number"===typeof a?nd?a:"n"+a:"boolean"===typeof a?"b"+a:null:null},Ca=function(){return Object.create?Object.create(null):{}},Za=function(a,b,d){if(l(d)||
C.string(d))k(d,function(a){if(!m.TypeIsObject(a))throw new TypeError("Iterator value "+a+" is not an entry object");b.set(a[0],a[1])});else if(d instanceof a)h(a.prototype.forEach,d,function(a,d){b.set(d,a)});else{if(!S(d)){var c=b.set;if(!m.IsCallable(c))throw new TypeError("bad map");var e=m.GetIterator(d)}if("undefined"!==typeof e)for(;;){a=m.IteratorStep(e);if(!1===a)break;a=a.value;try{if(!m.TypeIsObject(a))throw new TypeError("Iterator value "+a+" is not an entry object");h(c,b,a[0],a[1])}catch(Oa){throw m.IteratorClose(e,
!0),Oa;}}}},Kb=function(a,b,d){if(l(d)||C.string(d))k(d,function(a){b.add(a)});else if(d instanceof a)h(a.prototype.forEach,d,function(a){b.add(a)});else{if(!S(d)){var c=b.add;if(!m.IsCallable(c))throw new TypeError("bad set");var e=m.GetIterator(d)}if("undefined"!==typeof e)for(;;){a=m.IteratorStep(e);if(!1===a)break;a=a.value;try{h(c,b,a)}catch(Oa){throw m.IteratorClose(e,!0),Oa;}}}},ra={Map:function(){var a={},b=function(a,b){this.key=a;this.value=b;this.prev=this.next=null};b.prototype.isRemoved=
function(){return this.key===a};var d=function(a,b){if(!m.TypeIsObject(a)||!a._es6map)throw new TypeError("Method Map.prototype."+b+" called on incompatible receiver "+m.ToString(a));},c=function(a,b){d(a,"[[MapIterator]]");this.i=this.head=a._head;this.kind=b};c.prototype={isMapIterator:!0,next:function(){if(!this.isMapIterator)throw new TypeError("Not a MapIterator");var a=this.i,b=this.kind,d=this.head;if("undefined"===typeof this.i)return ba();for(;a.isRemoved()&&a!==d;)a=a.prev;for(;a.next!==
d;)if(a=a.next,!a.isRemoved())return b="key"===b?a.key:"value"===b?a.value:[a.key,a.value],this.i=a,ba(b);this.i=void 0;return ba()}};P(c.prototype);var e=function Qa(){if(!(this instanceof Qa))throw new TypeError('Constructor Map requires "new"');if(this&&this._es6map)throw new TypeError("Bad construction");var a=Ma(this,Qa,k,{_es6map:!0,_head:null,_map:D?new D:null,_size:0,_storage:Ca()}),d=new b(null,null);d.next=d.prev=d;a._head=d;0<arguments.length&&Za(Qa,a,arguments[0]);return a};var k=e.prototype;
t.getter(k,"size",function(){if("undefined"===typeof this._size)throw new TypeError("size method called on incompatible Map");return this._size});u(k,{get:function(a){d(this,"get");var b=da(a,!0);if(null!==b){if(a=this._storage[b])return a.value}else if(this._map){if(a=na.call(this._map,a))return a.value}else for(var c=b=this._head;(c=c.next)!==b;)if(m.SameValueZero(c.key,a))return c.value},has:function(a){d(this,"has");var b=da(a,!0);if(null!==b)return"undefined"!==typeof this._storage[b];if(this._map)return oa.call(this._map,
a);for(var c=b=this._head;(c=c.next)!==b;)if(m.SameValueZero(c.key,a))return!0;return!1},set:function(a,c){d(this,"set");var e=this._head,k=e,A=da(a,!0);if(null!==A){if("undefined"!==typeof this._storage[A])return this._storage[A].value=c,this;var p=this._storage[A]=new b(a,c);k=e.prev}else this._map&&(oa.call(this._map,a)?na.call(this._map,a).value=c:(p=new b(a,c),db.call(this._map,a,p),k=e.prev));for(;(k=k.next)!==e;)if(m.SameValueZero(k.key,a))return k.value=c,this;p=p||new b(a,c);m.SameValue(-0,
a)&&(p.key=0);p.next=this._head;p.prev=this._head.prev;p.prev.next=p;p.next.prev=p;this._size+=1;return this},"delete":function(b){d(this,"delete");var c=this._head,e=c,k=da(b,!0);if(null!==k){if("undefined"===typeof this._storage[k])return!1;e=this._storage[k].prev;delete this._storage[k]}else if(this._map){if(!oa.call(this._map,b))return!1;e=na.call(this._map,b).prev;Xb.call(this._map,b)}for(;(e=e.next)!==c;)if(m.SameValueZero(e.key,b))return e.key=a,e.value=a,e.prev.next=e.next,e.next.prev=e.prev,
--this._size,!0;return!1},clear:function(){d(this,"clear");this._map=D?new D:null;this._size=0;this._storage=Ca();for(var b=this._head,c,e=b.next;(c=e)!==b;)c.key=a,c.value=a,e=c.next,c.next=c.prev=b;b.next=b.prev=b},keys:function(){d(this,"keys");return new c(this,"key")},values:function(){d(this,"values");return new c(this,"value")},entries:function(){d(this,"entries");return new c(this,"key+value")},forEach:function(a){d(this,"forEach");for(var b=1<arguments.length?arguments[1]:null,c=this.entries(),
e=c.next();!e.done;e=c.next())b?h(a,b,e.value[1],e.value[0],this):a(e.value[1],e.value[0],this)}});P(k,k.entries);return e}(),Set:function(){var a=function(a,b){if(!m.TypeIsObject(a)||!a._es6set||"undefined"===typeof a._storage)throw new TypeError("Set.prototype."+b+" called on incompatible receiver "+m.ToString(a));},b=function Pa(){if(!(this instanceof Pa))throw new TypeError('Constructor Set requires "new"');if(this&&this._es6set)throw new TypeError("Bad construction");var a=Ma(this,Pa,d,{_es6set:!0,
"[[SetData]]":null,_storage:Ca()});if(!a._es6set)throw new TypeError("bad set");0<arguments.length&&Kb(Pa,a,arguments[0]);return a};var d=b.prototype;var c=function(a){if(!a["[[SetData]]"]){var b=new ra.Map;a["[[SetData]]"]=b;k(r(a._storage),function(a){if("^null"===a)a=null;else if("^undefined"!==a){var d=a.charAt(0);a="$"===d?N(a,1):"n"===d?+N(a,1):"b"===d?"btrue"===a:+a}else a=void 0;b.set(a,a)});a["[[SetData]]"]=b}a._storage=null};t.getter(b.prototype,"size",function(){a(this,"size");if(this._storage)return r(this._storage).length;
c(this);return this["[[SetData]]"].size});u(b.prototype,{has:function(b){a(this,"has");var d;if(this._storage&&null!==(d=da(b)))return!!this._storage[d];c(this);return this["[[SetData]]"].has(b)},add:function(b){a(this,"add");var d;if(this._storage&&null!==(d=da(b)))return this._storage[d]=!0,this;c(this);this["[[SetData]]"].set(b,b);return this},"delete":function(b){a(this,"delete");var d;if(this._storage&&null!==(d=da(b)))return b=ta(this._storage,d),delete this._storage[d]&&b;c(this);return this["[[SetData]]"]["delete"](b)},
clear:function(){a(this,"clear");this._storage&&(this._storage=Ca());this["[[SetData]]"]&&this["[[SetData]]"].clear()},values:function(){a(this,"values");c(this);return new e(this["[[SetData]]"].values())},entries:function(){a(this,"entries");c(this);return new e(this["[[SetData]]"].entries())},forEach:function(b){a(this,"forEach");var d=1<arguments.length?arguments[1]:null,e=this;c(e);this["[[SetData]]"].forEach(function(a,c){d?h(b,d,c,c,e):b(c,c,e)})}});n(b.prototype,"keys",b.prototype.values,!0);
P(b.prototype,b.prototype.values);var e=function(a){this.it=a};e.prototype={isSetIterator:!0,next:function(){if(!this.isSetIterator)throw new TypeError("Not a SetIterator");return this.it.next()}};P(e.prototype);return b}()};q.Set&&!Set.prototype["delete"]&&Set.prototype.remove&&Set.prototype.items&&Set.prototype.map&&Array.isArray((new Set).keys)&&(q.Set=ra.Set);if(q.Map||q.Set){c(function(){return 2===(new Map([[1,2]])).get(1)})||(q.Map=function K(){if(!(this instanceof K))throw new TypeError('Constructor Map requires "new"');
var a=new D;0<arguments.length&&Za(K,a,arguments[0]);delete a.constructor;Object.setPrototypeOf(a,q.Map.prototype);return a},q.Map.prototype=H(D.prototype),n(q.Map.prototype,"constructor",q.Map,!0),t.preserveToString(q.Map,D));var Lb=new Map,Mb=function(){var a=new Map([[1,0],[2,0],[3,0],[4,0]]);a.set(-0,a);return a.get(0)===a&&a.get(-0)===a&&a.has(0)&&a.has(-0)}(),od=Lb.set(1,2)===Lb;Mb&&od||v(Map.prototype,"set",function(a,b){h(db,this,0===a?0:a,b);return this});Mb||(u(Map.prototype,{get:function(a){return h(na,
this,0===a?0:a)},has:function(a){return h(oa,this,0===a?0:a)}},!0),t.preserveToString(Map.prototype.get,na),t.preserveToString(Map.prototype.has,oa));var $a=new Set,Nb=Set.prototype["delete"]&&Set.prototype.add&&Set.prototype.has&&function(a){a["delete"](0);a.add(-0);return!a.has(0)}($a),pd=$a.add(1)===$a;if(!Nb||!pd){var Ob=Set.prototype.add;Set.prototype.add=function(a){h(Ob,this,0===a?0:a);return this};t.preserveToString(Set.prototype.add,Ob)}if(!Nb){var Pb=Set.prototype.has;Set.prototype.has=
function(a){return h(Pb,this,0===a?0:a)};t.preserveToString(Set.prototype.has,Pb);var Qb=Set.prototype["delete"];Set.prototype["delete"]=function(a){return h(Qb,this,0===a?0:a)};t.preserveToString(Set.prototype["delete"],Qb)}var Rb=L(q.Map,function(a){var b=new a([]);b.set(42,42);return b instanceof a}),qd=Object.setPrototypeOf&&!Rb;try{var Sb=!(q.Map()instanceof q.Map)}catch(A){Sb=A instanceof TypeError}if(0!==q.Map.length||qd||!Sb)q.Map=function K(){if(!(this instanceof K))throw new TypeError('Constructor Map requires "new"');
var a=new D;0<arguments.length&&Za(K,a,arguments[0]);delete a.constructor;Object.setPrototypeOf(a,K.prototype);return a},q.Map.prototype=D.prototype,n(q.Map.prototype,"constructor",q.Map,!0),t.preserveToString(q.Map,D);var rd=L(q.Set,function(a){var b=new a([]);b.add(42,42);return b instanceof a}),sd=Object.setPrototypeOf&&!rd;try{var Tb=!(q.Set()instanceof q.Set)}catch(A){Tb=A instanceof TypeError}if(0!==q.Set.length||sd||!Tb){var ab=q.Set;q.Set=function K(){if(!(this instanceof K))throw new TypeError('Constructor Set requires "new"');
var a=new ab;0<arguments.length&&Kb(K,a,arguments[0]);delete a.constructor;Object.setPrototypeOf(a,K.prototype);return a};q.Set.prototype=ab.prototype;n(q.Set.prototype,"constructor",q.Set,!0);t.preserveToString(q.Set,ab)}var bb=new q.Map,td=!c(function(){return bb.keys().next().done});("function"!==typeof q.Map.prototype.clear||0!==(new q.Set).size||0!==bb.size||"function"!==typeof q.Map.prototype.keys||"function"!==typeof q.Set.prototype.keys||"function"!==typeof q.Map.prototype.forEach||"function"!==
typeof q.Set.prototype.forEach||b(q.Map)||b(q.Set)||"function"!==typeof bb.keys().next||td||!Rb)&&u(q,{Map:ra.Map,Set:ra.Set},!0);q.Set.prototype.keys!==q.Set.prototype.values&&n(q.Set.prototype,"keys",q.Set.prototype.values,!0);P(Object.getPrototypeOf((new q.Map).keys()));P(Object.getPrototypeOf((new q.Set).keys()));if(d&&"has"!==q.Set.prototype.has.name){var ud=q.Set.prototype.has;v(q.Set.prototype,"has",function(a){return h(ud,this,a)})}}u(q,ra);qa(q.Map);qa(q.Set)}var Q=function(a){if(!m.TypeIsObject(a))throw new TypeError("target must be an object");
},M={apply:function(){return m.Call(m.Call,null,arguments)},construct:function(a,b){if(!m.IsConstructor(a))throw new TypeError("First argument must be a constructor.");var d=2<arguments.length?arguments[2]:a;if(!m.IsConstructor(d))throw new TypeError("new.target must be a constructor.");return m.Construct(a,b,d,"internal")},deleteProperty:function(b,d){Q(b);if(a){var c=Object.getOwnPropertyDescriptor(b,d);if(c&&!c.configurable)return!1}return delete b[d]},has:function(a,b){Q(a);return b in a}};Object.getOwnPropertyNames&&
Object.assign(M,{ownKeys:function(a){Q(a);var b=Object.getOwnPropertyNames(a);m.IsCallable(Object.getOwnPropertySymbols)&&W(b,Object.getOwnPropertySymbols(a));return b}});Object.preventExtensions&&Object.assign(M,{isExtensible:function(a){Q(a);return Object.isExtensible(a)},preventExtensions:function(a){Q(a);return!g(function(){return Object.preventExtensions(a)})}});if(a){var Ub=function(a,b,d){var c=Object.getOwnPropertyDescriptor(a,b);if(!c)return a=Object.getPrototypeOf(a),null===a?void 0:Ub(a,
b,d);if("value"in c)return c.value;if(c.get)return m.Call(c.get,d)},Vb=function(a,b,d,c){var e=Object.getOwnPropertyDescriptor(a,b);if(!e){a=Object.getPrototypeOf(a);if(null!==a)return Vb(a,b,d,c);e={value:void 0,writable:!0,enumerable:!0,configurable:!0}}return"value"in e?e.writable&&m.TypeIsObject(c)?Object.getOwnPropertyDescriptor(c,b)?Y.defineProperty(c,b,{value:d}):Y.defineProperty(c,b,{value:d,writable:!0,enumerable:!0,configurable:!0}):!1:e.set?(h(e.set,c,d),!0):!1};Object.assign(M,{defineProperty:function(a,
b,d){Q(a);return!g(function(){return Object.defineProperty(a,b,d)})},getOwnPropertyDescriptor:function(a,b){Q(a);return Object.getOwnPropertyDescriptor(a,b)},get:function(a,b){Q(a);return Ub(a,b,2<arguments.length?arguments[2]:a)},set:function(a,b,d){Q(a);return Vb(a,b,d,3<arguments.length?arguments[3]:a)}})}if(Object.getPrototypeOf){var vd=Object.getPrototypeOf;M.getPrototypeOf=function(a){Q(a);return vd(a)}}Object.setPrototypeOf&&M.getPrototypeOf&&Object.assign(M,{setPrototypeOf:function(a,b){Q(a);
if(null!==b&&!m.TypeIsObject(b))throw new TypeError("proto must be an object or null");if(b===Y.getPrototypeOf(a))return!0;if(Y.isExtensible&&!Y.isExtensible(a))return!1;var d;a:{for(d=b;d;){if(a===d){d=!0;break a}d=M.getPrototypeOf(d)}d=!1}if(d)return!1;Object.setPrototypeOf(a,b);return!0}});var wd=function(a,b){m.IsCallable(q.Reflect[a])?c(function(){q.Reflect[a](1);q.Reflect[a](NaN);q.Reflect[a](!0);return!0})&&v(q.Reflect,a,b):n(q.Reflect,a,b)};Object.keys(M).forEach(function(a){wd(a,M[a])});
var cb=q.Reflect.getPrototypeOf;d&&cb&&"getPrototypeOf"!==cb.name&&v(q.Reflect,"getPrototypeOf",function(a){return h(cb,q.Reflect,a)});q.Reflect.setPrototypeOf&&c(function(){q.Reflect.setPrototypeOf(1,{});return!0})&&v(q.Reflect,"setPrototypeOf",M.setPrototypeOf);q.Reflect.defineProperty&&(c(function(){var a=!q.Reflect.defineProperty(1,"test",{value:1}),b="function"!==typeof Object.preventExtensions||!q.Reflect.defineProperty(Object.preventExtensions({}),"test",{});return a&&b})||v(q.Reflect,"defineProperty",
M.defineProperty));q.Reflect.construct&&(c(function(){var a=function(){};return q.Reflect.construct(function(){},[],a)instanceof a})||v(q.Reflect,"construct",M.construct));if("Invalid Date"!==String(new Date(NaN))){var xd=Date.prototype.toString;v(Date.prototype,"toString",function(){var a=+this;return a!==a?"Invalid Date":m.Call(xd,this)})}var Wb={anchor:function(a){return m.CreateHTML(this,"a","name",a)},big:function(){return m.CreateHTML(this,"big","","")},blink:function(){return m.CreateHTML(this,
"blink","","")},bold:function(){return m.CreateHTML(this,"b","","")},fixed:function(){return m.CreateHTML(this,"tt","","")},fontcolor:function(a){return m.CreateHTML(this,"font","color",a)},fontsize:function(a){return m.CreateHTML(this,"font","size",a)},italics:function(){return m.CreateHTML(this,"i","","")},link:function(a){return m.CreateHTML(this,"a","href",a)},small:function(){return m.CreateHTML(this,"small","","")},strike:function(){return m.CreateHTML(this,"strike","","")},sub:function(){return m.CreateHTML(this,
"sub","","")},sup:function(){return m.CreateHTML(this,"sup","","")}};k(Object.keys(Wb),function(a){var b=String.prototype[a];if(m.IsCallable(b)){b=h(b,"",' " ');var d=ma([],b.match(/"/g)).length;b=b!==b.toLowerCase()||2<d}else b=!0;b&&v(String.prototype,a,Wb[a])});var yd=function(){if(!pa)return!1;var a="object"===typeof JSON&&"function"===typeof JSON.stringify?JSON.stringify:null;if(!a)return!1;if("undefined"!==typeof a(z())||"[null]"!==a([z()]))return!0;var b={a:z()};b[z()]=!0;return"{}"!==a(b)?
!0:!1}(),zd=c(function(){return pa?"{}"===JSON.stringify(Object(z()))&&"[{}]"===JSON.stringify([Object(z())]):!0});if(yd||!zd){var Ad=JSON.stringify;v(JSON,"stringify",function(a){if("symbol"!==typeof a){var b;1<arguments.length&&(b=arguments[1]);var d=[a];if(l(b))d.push(b);else{var c=m.IsCallable(b)?b:null;d.push(function(a,b){a=c?h(c,this,a,b):b;if("symbol"!==typeof a)return C.symbol(a)?zb({})(a):a})}2<arguments.length&&d.push(arguments[2]);return Ad.apply(this,d)}})}return q});
(function(f){f.keyman||(f.keyman={})})(com||(com={}));var has=Object.prototype.hasOwnProperty,prefix="~";function Events(){}Object.create&&(Events.prototype=Object.create(null),(new Events).__proto__||(prefix=!1));function EE(f,h,l){this.fn=f;this.context=h;this.once=l||!1}
function addListener(f,h,l,r,g){if("function"!==typeof l)throw new TypeError("The listener must be a function");l=new EE(l,r||f,g);h=prefix?prefix+h:h;f._events[h]?f._events[h].fn?f._events[h]=[f._events[h],l]:f._events[h].push(l):(f._events[h]=l,f._eventsCount++);return f}function clearEvent(f,h){0===--f._eventsCount?f._events=new Events:delete f._events[h]}function EventEmitter(){this._events=new Events;this._eventsCount=0}
EventEmitter.prototype.eventNames=function(){var f=[],h,l;if(0===this._eventsCount)return f;for(l in h=this._events)has.call(h,l)&&f.push(prefix?l.slice(1):l);return Object.getOwnPropertySymbols?f.concat(Object.getOwnPropertySymbols(h)):f};EventEmitter.prototype.listeners=function(f){f=this._events[prefix?prefix+f:f];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,l=f.length,r=Array(l);h<l;h++)r[h]=f[h].fn;return r};
EventEmitter.prototype.listenerCount=function(f){return(f=this._events[prefix?prefix+f:f])?f.fn?1:f.length:0};
EventEmitter.prototype.emit=function(f,h,l,r,g,c){var b=prefix?prefix+f:f;if(!this._events[b])return!1;b=this._events[b];var e=arguments.length,a;if(b.fn){b.once&&this.removeListener(f,b.fn,void 0,!0);switch(e){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,h),!0;case 3:return b.fn.call(b.context,h,l),!0;case 4:return b.fn.call(b.context,h,l,r),!0;case 5:return b.fn.call(b.context,h,l,r,g),!0;case 6:return b.fn.call(b.context,h,l,r,g,c),!0}var d=1;for(a=Array(e-1);d<e;d++)a[d-
1]=arguments[d];b.fn.apply(b.context,a)}else{var k=b.length;for(d=0;d<k;d++)switch(b[d].once&&this.removeListener(f,b[d].fn,void 0,!0),e){case 1:b[d].fn.call(b[d].context);break;case 2:b[d].fn.call(b[d].context,h);break;case 3:b[d].fn.call(b[d].context,h,l);break;case 4:b[d].fn.call(b[d].context,h,l,r);break;default:if(!a){var p=1;for(a=Array(e-1);p<e;p++)a[p-1]=arguments[p]}b[d].fn.apply(b[d].context,a)}}return!0};EventEmitter.prototype.on=function(f,h,l){return addListener(this,f,h,l,!1)};
EventEmitter.prototype.once=function(f,h,l){return addListener(this,f,h,l,!0)};EventEmitter.prototype.removeListener=function(f,h,l,r){f=prefix?prefix+f:f;if(!this._events[f])return this;if(!h)return clearEvent(this,f),this;var g=this._events[f];if(g.fn)g.fn!==h||r&&!g.once||l&&g.context!==l||clearEvent(this,f);else{for(var c=0,b=[],e=g.length;c<e;c++)(g[c].fn!==h||r&&!g[c].once||l&&g[c].context!==l)&&b.push(g[c]);b.length?this._events[f]=1===b.length?b[0]:b:clearEvent(this,f)}return this};
EventEmitter.prototype.removeAllListeners=function(f){f?(f=prefix?prefix+f:f,this._events[f]&&clearEvent(this,f)):(this._events=new Events,this._eventsCount=0);return this};EventEmitter.prototype.off=EventEmitter.prototype.removeListener;EventEmitter.prototype.addListener=EventEmitter.prototype.on;EventEmitter.prefixed=prefix;EventEmitter.EventEmitter=EventEmitter;"undefined"!==typeof module&&(module.exports=EventEmitter);
(function(f){f=f.keyman||(f.keyman={});(f.text||(f.text={})).Codes={modifierCodes:{LCTRL:1,RCTRL:2,LALT:4,RALT:8,SHIFT:16,CTRL:32,ALT:64,CAPS:256,NO_CAPS:512,NUM_LOCK:1024,NO_NUM_LOCK:2048,SCROLL_LOCK:4096,NO_SCROLL_LOCK:8192,VIRTUAL_KEY:16384},modifierBitmasks:{ALL:127,ALT_GR_SIM:5,CHIRAL:31,IS_CHIRAL:15,NON_CHIRAL:112},stateBitmasks:{ALL:16128,CAPS:768,NUM_LOCK:3072,SCROLL_LOCK:12288},keyCodes:{K_BKSP:8,K_TAB:9,K_ENTER:13,K_SHIFT:16,K_CONTROL:17,K_ALT:18,K_PAUSE:19,K_CAPS:20,K_ESC:27,K_SPACE:32,
K_PGUP:33,K_PGDN:34,K_END:35,K_HOME:36,K_LEFT:37,K_UP:38,K_RIGHT:39,K_DOWN:40,K_SEL:41,K_PRINT:42,K_EXEC:43,K_INS:45,K_DEL:46,K_HELP:47,K_0:48,K_1:49,K_2:50,K_3:51,K_4:52,K_5:53,K_6:54,K_7:55,K_8:56,K_9:57,K_A:65,K_B:66,K_C:67,K_D:68,K_E:69,K_F:70,K_G:71,K_H:72,K_I:73,K_J:74,K_K:75,K_L:76,K_M:77,K_N:78,K_O:79,K_P:80,K_Q:81,K_R:82,K_S:83,K_T:84,K_U:85,K_V:86,K_W:87,K_X:88,K_Y:89,K_Z:90,K_NP0:96,K_NP1:97,K_NP2:98,K_NP3:99,K_NP4:100,K_NP5:101,K_NP6:102,K_NP7:103,K_NP8:104,K_NP9:105,K_NPSTAR:106,K_NPPLUS:107,
K_SEPARATOR:108,K_NPMINUS:109,K_NPDOT:110,K_NPSLASH:111,K_F1:112,K_F2:113,K_F3:114,K_F4:115,K_F5:116,K_F6:117,K_F7:118,K_F8:119,K_F9:120,K_F10:121,K_F11:122,K_F12:123,K_NUMLOCK:144,K_SCROLL:145,K_LSHIFT:160,K_RSHIFT:161,K_LCONTROL:162,K_RCONTROL:163,K_LALT:164,K_RALT:165,K_COLON:186,K_EQUAL:187,K_COMMA:188,K_HYPHEN:189,K_PERIOD:190,K_SLASH:191,K_BKQUOTE:192,K_LBRKT:219,K_BKSLASH:220,K_RBRKT:221,K_QUOTE:222,K_oE2:226,K_OE2:226,K_LOPT:50001,K_ROPT:50002,K_NUMERALS:50003,K_SYMBOLS:50004,K_CURRENCIES:50005,
K_UPPER:50006,K_LOWER:50007,K_ALPHA:50008,K_SHIFTED:50009,K_ALTGR:50010,K_TABBACK:50011,K_TABFWD:50012},codesUS:[["0123456789",";=,-./`","[\\]'"],[")!@#$%^&*(",":+<_>?~",'{|}"']]}})(com||(com={}));
(function(f){(function(f){(function(f){var h=function(){function c(b,e){this.p=b;this.d=e;this.o=c.ordinalSeed++}c.prototype.match=function(b,c){return this.p==b&&this.d==c};c.prototype.set=function(){this.matched=1};c.prototype.reset=function(){this.matched=0};c.prototype.before=function(b){return this.o<b.o};c.prototype.clone=function(){var b=new c(this.p,this.d);b.o=this.o;return b};c.ordinalSeed=0;c.sortFunc=function(b,c){return b.p!=c.p?c.p-b.p:c.o-b.o};return c}();f.Deadkey=h;var g=function(){function c(){this.dks=
[]}c.prototype.toSortedArray=function(){this.dks=this.dks.sort(h.sortFunc);return[].concat(this.dks)};c.prototype.clone=function(){var b=new c,e=this.toSortedArray();b.dks=[];e.forEach(function(a){b.dks.push(a.clone())});return b};c.prototype.isMatch=function(b,c,a){if(0==this.dks.length)return!1;c=b-c;for(b=0;b<this.dks.length;b++)if(this.dks[b].match(c,a)&&!this.dks[b].matched)return this.dks[b].set(),!0;this.resetMatched();return!1};c.prototype.add=function(b){this.dks=this.dks.concat(b)};c.prototype.remove=
function(b){b=this.dks.indexOf(b);this.dks.splice(b,1)};c.prototype.clear=function(){this.dks=[]};c.prototype.resetMatched=function(){for(var b=0,c=this.dks;b<c.length;b++)c[b].reset()};c.prototype.deleteMatched=function(){for(var b=0;b<this.dks.length;b++)this.dks[b].matched&&this.dks.splice(b--,1)};c.prototype.adjustPositions=function(b,c){if(0!=c)for(var a=0,d=this.dks;a<d.length;a++){var e=d[a];e.p>b&&(e.p+=c)}};c.prototype.count=function(){return this.dks.length};return c}();f.DeadkeyTracker=
g})(f.text||(f.text={}))})(f.keyman||(f.keyman={}))})(com||(com={}));var __extends=this&&this.__extends||function(){var f=function(h,l){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,g){f.__proto__=g}||function(f,g){for(var c in g)g.hasOwnProperty(c)&&(f[c]=g[c])};return f(h,l)};return function(h,l){function r(){this.constructor=h}f(h,l);h.prototype=null===l?Object.create(l):(r.prototype=l.prototype,new r)}}();
(function(f){(function(f){var h;(function(f){var g=function(){function a(a,b,c){this.insert=a;this.deleteLeft=b;this.deleteRight=c||0}a.nil=new a("",0,0);return a}();f.TextTransform=g;var c=function(){function a(b,c,e,f){var d=this.token=a.tokenSeed++;this.keystroke=b;this.transform=c;this.alternates=f;this.preInput=e;this.transform.id=this.token;f&&f.forEach(function(a){a.sample.id=d})}a.tokenSeed=0;return a}();f.Transcription=c;var b=function(){function a(){this._dks=new h.DeadkeyTracker}Object.defineProperty(a.prototype,
"isSynthetic",{get:function(){return!0},enumerable:!0,configurable:!0});a.prototype.resetContext=function(){this.deadkeys().clear()};a.prototype.deadkeys=function(){return this._dks};a.prototype.hasDeadkeyMatch=function(a,b){return this.deadkeys().isMatch(this.getDeadkeyCaret(),a,b)};a.prototype.insertDeadkeyBeforeCaret=function(a){a=new f.Deadkey(this.getDeadkeyCaret(),a);this.deadkeys().add(a)};a.prototype.adjustDeadkeys=function(a){this.deadkeys().adjustPositions(this.getDeadkeyCaret(),a)};a.prototype.setDeadkeys=
function(a){this._dks=a.clone()};a.prototype.buildTransformFrom=function(a){for(var b=this.getText(),d=a.getText(),c=a.getDeadkeyCaret(),e=this.getDeadkeyCaret(),n=0;n<c&&d._kmwCharAt(n)==b._kmwCharAt(n);n++);a=c-n;n=b._kmwSubstr(n,e-n);b=b._kmwLength()-e;d=d._kmwLength()-c;return new g(n,a,d-b)};a.prototype.buildTranscriptionFrom=function(a,b,p){var d=this.buildTransformFrom(a);return new c(b,d,e.from(a),p)};a.prototype.restoreTo=function(a){this.setTextBeforeCaret(a.getTextBeforeCaret());this.setTextAfterCaret(a.getTextAfterCaret());
this._dks=a._dks.clone()};a.prototype.apply=function(a){a.deleteRight&&this.setTextAfterCaret(this.getTextAfterCaret()._kmwSubstr(a.deleteRight));a.deleteLeft&&this.deleteCharsBeforeCaret(a.deleteLeft);a.insert&&this.insertTextBeforeCaret(a.insert);this._dks.clear()};a.prototype.setTextBeforeCaret=function(a){this.deleteCharsBeforeCaret(this.getTextBeforeCaret()._kmwLength());this.insertTextBeforeCaret(a)};a.prototype.saveProperties=function(){};a.prototype.restoreProperties=function(){};return a}();
f.OutputTarget=b;var e=function(a){function b(b,d){var c=a.call(this)||this;c.text=b?b:"";b=c.text._kmwLength();c.caretIndex=d?d:b;return c}__extends(b,a);b.from=function(a){var d=a.getTextBeforeCaret(),c=d._kmwLength();d=new b(d+a.getTextAfterCaret(),c);d.setDeadkeys(a.deadkeys());return d};b.prototype.clearSelection=function(){};b.prototype.invalidateSelection=function(){};b.prototype.hasSelection=function(){return!0};b.prototype.getDeadkeyCaret=function(){return this.caretIndex};b.prototype.setDeadkeyCaret=
function(a){if(0>a||a>this.text._kmwLength())throw Error("Provided caret index is out of range.");this.caretIndex=a};b.prototype.getTextBeforeCaret=function(){return this.text.kmwSubstr(0,this.caretIndex)};b.prototype.getTextAfterCaret=function(){return this.text.kmwSubstr(this.caretIndex)};b.prototype.getText=function(){return this.text};b.prototype.deleteCharsBeforeCaret=function(a){0<=a&&(a>this.caretIndex&&(a=this.caretIndex),this.text=this.text.kmwSubstr(0,this.caretIndex-a)+this.getTextAfterCaret(),
this.caretIndex-=a)};b.prototype.insertTextBeforeCaret=function(a){this.text=this.getTextBeforeCaret()+a+this.getTextAfterCaret();this.caretIndex+=a.kmwLength()};b.prototype.handleNewlineAtCaret=function(){this.insertTextBeforeCaret("\n")};b.prototype.setTextAfterCaret=function(a){this.text=this.getTextBeforeCaret()+a};b.prototype.doInputEvent=function(){};return b}(b);f.Mock=e})(h=f.text||(f.text={}))})(f.keyman||(f.keyman={}))})(com||(com={}));
(function(f){(function(f){(function(f){var h=function(){return function(){this.isSynthetic=!0}}();f.KeyEvent=h})(f.text||(f.text={}))})(f.keyman||(f.keyman={}))})(com||(com={}));
(function(f){(function(f){(function(f){var h=function(){function g(){this.setStore={};this.saveStore={}}g.prototype.finalize=function(c){var b=this.transcription.keystroke.Ltarg;c.beepHandler&&this.beep&&c.beepHandler(b);for(var e in this.setStore)if(b=c.keyboardInterface.systemStores[e])try{b.set(this.setStore[e])}catch(a){c.errorLogger&&c.errorLogger("Rule attempted to perform illegal operation - 'platform' may not be changed.")}else c.warningLogger&&c.warningLogger("Unknown store affected by keyboard rule: "+
e);if(c.keyboardInterface.variableStoreSerializer)for(e in this.saveStore)c.keyboardInterface.variableStoreSerializer.saveStore(c.activeKeyboard.id,e,this.saveStore[e]);this.triggersDefaultCommand&&f.DefaultOutput.applyCommand(this.transcription.keystroke);c.warningLogger&&this.warningLog?c.warningLogger(this.warningLog):c.errorLogger&&this.errorLog&&c.errorLogger(this.errorLog)};return g}();f.RuleBehavior=h})(f.text||(f.text={}))})(f.keyman||(f.keyman={}))})(com||(com={}));
(function(f){(function(f){(function(f){var h;(function(c){c.Space=" ";c.Enter="\n";c.Backspace="\b"})(h=f.EmulationKeystrokes||(f.EmulationKeystrokes={}));var g=function(){function c(){}c.codeForEvent=function(b){return f.Codes.keyCodes[b.kName]||b.Lcode};c.forAny=function(b,e){var a;if(null!=(a=c.forSpecialEmulation(b)))return a;if(e||null==(a=c.forNumpadKeys(b))){if(null!=(a=c.forUnicodeKeynames(b))||null!=(a=c.forBaseKeys(b)))return a;c.codeForEvent(b);return""}return a};c.isCommand=function(b){c.codeForEvent(b);
return!1};c.applyCommand=function(b){};c.forSpecialEmulation=function(b){switch(c.codeForEvent(b)){case f.Codes.keyCodes.K_BKSP:return h.Backspace;case f.Codes.keyCodes.K_ENTER:return h.Enter;case f.Codes.keyCodes.K_SPACE:return h.Space;default:return null}};c.forNumpadKeys=function(b){return b.Lcode>=f.Codes.keyCodes.K_NP0&&b.Lcode<=f.Codes.keyCodes.K_NPSLASH?String._kmwFromCharCode(106>b.Lcode?b.Lcode-48:b.Lcode-64):null};c.forUnicodeKeynames=function(b,c){b=b.kName;if(!b||"U_"!=b.substr(0,2))return null;
b=parseInt(b.substr(2,6),16);return 0<=b&&31>=b||128<=b&&159>=b?(c&&(c.errorLog="Suppressing Unicode control code: U_00"+b.toString(16)),null):String.kmwFromCharCode(b)};c.forBaseKeys=function(b,c){var a=b.Lcode;b=b.Lmodifiers;if(b==f.Codes.modifierCodes.SHIFT)b=1;else if(0!=b)return c&&(c.warningLog="KMW only defines default key output for the 'default' and 'shift' layers!"),null;try{if(a>=f.Codes.keyCodes.K_0&&a<=f.Codes.keyCodes.K_9)return f.Codes.codesUS[b][0][a-f.Codes.keyCodes.K_0];if(a>=f.Codes.keyCodes.K_A&&
a<=f.Codes.keyCodes.K_Z)return String.fromCharCode(a+(b?0:32));if(a>=f.Codes.keyCodes.K_COLON&&a<=f.Codes.keyCodes.K_BKQUOTE)return f.Codes.codesUS[b][1][a-f.Codes.keyCodes.K_COLON];if(a>=f.Codes.keyCodes.K_LBRKT&&a<=f.Codes.keyCodes.K_QUOTE)return f.Codes.codesUS[b][2][a-f.Codes.keyCodes.K_LBRKT]}catch(d){c&&(c.errorLog="Error detected with default mapping for key:  code = "+a+", shift state = "+(1==b?"shift":"default"))}return null};return c}();f.DefaultOutput=g})(f.text||(f.text={}))})(f.keyman||
(f.keyman={}))})(com||(com={}));
(function(f){(function(h){(function(l){var r=f.keyman.text.Codes,g=function(){function c(){}c.buildDefaultLayout=function(b,e,a){var d=a;"object"!=typeof c.dfltLayout[d]&&(d="desktop");var k=r.modifierBitmasks.NON_CHIRAL,p=h.utils.Version.CURRENT;e&&(k=e.modifierBitmask,p=e.compilerVersion);b||(b=this.DEFAULT_RAW_SPEC);d=h.utils.deepCopy(c.dfltLayout[d]);var f=d.layer,g=b.KLS,n=b.K102,u,w,l=0!=(k&r.modifierBitmasks.IS_CHIRAL);(w=!("undefined"==typeof g||!g))||(g=b.KLS=c.processLegacyDefinitions(b.BK));
b=Object.getOwnPropertyNames(g);var t=[];b.splice(b.indexOf("default"),1);b=["default"].concat(b);e&&e.emulatesAltGr&&(-1==b.indexOf("leftctrl-leftalt")&&-1!=b.indexOf("rightalt")&&(b.push("leftctrl-leftalt"),g["leftctrl-leftalt"]=g.rightalt),-1==b.indexOf("leftctrl-leftalt-shift")&&-1!=b.indexOf("rightalt-shift")&&(b.push("leftctrl-leftalt-shift"),g["leftctrl-leftalt-shift"]=g["rightalt-shift"]));if("desktop"==a)for(t=c.generateLayerIds(l),k=0;k<t.length;k++)-1!=b.indexOf(t[k])&&t.splice(k--,1);
var H=b.concat(t);if(w&&"desktop"!=a){e=null;w=f[0].row;for(k=0;k<w.length;k++){var L=w[k].key;for(var q=0;q<L.length;q++)t=L[q],"K_SHIFT"==t.id&&(e=t)}if(e)for(u in e.sk=[],g)"default"!=u&&"shift"!=u&&(k=c.modifierSpecials[u],e.sk.push({id:"K_"+k,text:k,sp:"1",nextlayer:u}));else console.warn("Error in default layout - cannot find default Shift key!")}for(k=0;k<H.length;k++)0<k&&(f[k]=h.utils.deepCopy(f[0])),f[k].id=H[k],f[k].nextlayer=H[k],c.formatDefaultLayer(f[k],l,a,!!n);for(k=0;k<f.length;k++){l=
f[k];var ea=q=H=e=null,Da=g[l.id],Ga="shift"==l.id?1:0,ma="default"==l.id||Ga?1:0;w=l.row;for(u=0;u<w.length;u++)for(L=w[u].key,n=0;n<L.length;n++){t=L[n];var N=c.dfltCodes.indexOf(t.id);if(Da||ma)Da&&0<=N&&N<Da.length&&(t.text=Da[N]),ma&&p.precedes(h.utils.Version.NO_DEFAULT_KEYCAPS)&&"K_SPACE"!=t.id&&N+65*Ga<c.dfltText.length&&null!==t.text&&(t.text=t.text||c.dfltText[N+65*Ga]);null!==t.text&&(t.text=t.text||"");switch(t.id){case "K_SHIFT":e=t;break;case "K_CAPS":H=t;break;case "K_NUMLOCK":q=t;
break;case "K_SCROLL":ea=t}if(null!=t.sk){for(N=0;N<t.sk.length;N++)-1==b.indexOf(t.sk[N].nextlayer)&&t.sk.splice(N--,1);0==t.sk.length&&(t.sk=null)}}l.shiftKey=e;l.capsKey=H;l.numKey=q;l.scrollKey=ea;"desktop"!=a&&0<k&&null!=e&&(e.sp=c.buttonClasses["SHIFT-ON"],e.sk=null,e.text=c.modifierSpecials[f[k].id]?c.modifierSpecials[f[k].id]:"*Shift*")}return d};c.getLayerId=function(b){var c=r.modifierCodes,a="";if(0==b)return"default";b&c.LCTRL&&(a=(0<a.length?a+"-":"")+"leftctrl");b&c.RCTRL&&(a=(0<a.length?
a+"-":"")+"rightctrl");b&c.LALT&&(a=(0<a.length?a+"-":"")+"leftalt");b&c.RALT&&(a=(0<a.length?a+"-":"")+"rightalt");b&c.SHIFT&&(a=(0<a.length?a+"-":"")+"shift");b&c.CTRL&&(a=(0<a.length?a+"-":"")+"ctrl");b&c.ALT&&(a=(0<a.length?a+"-":"")+"alt");return a};c.generateLayerIds=function(b){if(b){b=32;var e=1}else b=8,e=16;for(var a=[],d=0;d<b;d++)a.push(c.getLayerId(d*e));return a};c.formatDefaultLayer=function(b,e,a,d){for(var k=b.id,p=c.buttonClasses,f=0;f<b.row.length;f++)for(var g=b.row[f].key,n=0;n<
g.length;n++){var h=g[n];switch(h.id){case "K_SHIFT":case "K_LSHIFT":case "K_RSHIFT":-1!=k.indexOf("shift")&&(h.sp=p["SHIFT-ON"]);"desktop"!=a&&"default"!=k&&(h.nextlayer="default");break;case "K_LCTRL":case "K_LCONTROL":if(e){-1!=k.indexOf("leftctrl")&&(h.sp=p["SHIFT-ON"]);break}case "K_RCTRL":case "K_RCONTROL":if(e){-1!=k.indexOf("rightctrl")&&(h.sp=p["SHIFT-ON"]);break}case "K_CONTROL":-1==k.indexOf("ctrl")||e&&(-1==k.indexOf("leftctrl")||-1==k.indexOf("rightctrl"))||(h.sp=p["SHIFT-ON"]);break;
case "K_LALT":if(e){-1!=k.indexOf("leftalt")&&(h.sp=p["SHIFT-ON"]);break}case "K_RALT":if(e){-1!=k.indexOf("rightalt")&&(h.sp=p["SHIFT-ON"]);break}case "K_ALT":-1==k.indexOf("alt")||e&&(-1==k.indexOf("leftalt")||-1==k.indexOf("rightalt"))||(h.sp=p["SHIFT-ON"]);break;case "K_oE2":"undefined"!=typeof d&&d||("desktop"==a?(g.splice(n--,1),g[0].width="200"):g[n].sp=p.HIDDEN)}}};c.processLegacyDefinitions=function(b){for(var e=c.generateLayerIds(!1),a={},d=0;d<e.length;d++){for(var k=e[d],p=[],f=!1,g=0;65>
g;g++){var n=g+65*d;p.push(b[n]);n<b.length&&""!=b[n]&&g!=c.dfltCodes.indexOf("K_SPACE")&&(f=!0)}f&&(a[k]=p)}"undefined"!=typeof a["default"]&&a["default"]||(a["default"]=[""]);"undefined"!=typeof a.shift&&a.shift||(a.shift=[""]);return a};c.dfltCodes="K_BKQUOTE K_1 K_2 K_3 K_4 K_5 K_6 K_7 K_8 K_9 K_0 K_HYPHEN K_EQUAL K_* K_* K_* K_Q K_W K_E K_R K_T K_Y K_U K_I K_O K_P K_LBRKT K_RBRKT K_BKSLASH K_* K_* K_* K_A K_S K_D K_F K_G K_H K_J K_K K_L K_COLON K_QUOTE K_* K_* K_* K_* K_* K_oE2 K_Z K_X K_C K_V K_B K_N K_M K_COMMA K_PERIOD K_SLASH K_* K_* K_* K_* K_* K_SPACE".split(" ");
c.dfltText="`1234567890-=\u00a7~~qwertyuiop[]\\~~~asdfghjkl;'~~~~~?zxcvbnm,./~~~~~ ~!@#$%^&*()_+\u00a7~~QWERTYUIOP{}\\~~~ASDFGHJKL:\"~~~~~?ZXCVBNM<>?~~~~~ ";c.DEFAULT_RAW_SPEC={F:"Tahoma",BK:c.dfltText};c.buttonClasses={DEFAULT:"0",SHIFT:"1","SHIFT-ON":"2",SPECIAL:"3","SPECIAL-ON":"4",DEADKEY:"8",BLANK:"9",HIDDEN:"10"};c.modifierSpecials={leftalt:"*LAlt*",rightalt:"*RAlt*",alt:"*Alt*",leftctrl:"*LCtrl*",rightctrl:"*RCtrl*",ctrl:"*Ctrl*","ctrl-alt":"*AltGr*","leftctrl-leftalt":"*LAltCtrl*","rightctrl-rightalt":"*RAltCtrl*",
"leftctrl-leftalt-shift":"*LAltCtrlShift*","rightctrl-rightalt-shift":"*RAltCtrlShift*",shift:"*Shift*","shift-alt":"*AltShift*","shift-ctrl":"*CtrlShift*","shift-ctrl-alt":"*AltCtrlShift*","leftalt-shift":"*LAltShift*","rightalt-shift":"*RAltShift*","leftctrl-shift":"*LCtrlShift*","rightctrl-shift":"*RCtrlShift*"};c.dfltLayout={desktop:{font:"Tahoma,Helvetica",layer:[{id:"default",row:[{id:"1",key:[{id:"K_BKQUOTE"},{id:"K_1"},{id:"K_2"},{id:"K_3"},{id:"K_4"},{id:"K_5"},{id:"K_6"},{id:"K_7"},{id:"K_8"},
{id:"K_9"},{id:"K_0"},{id:"K_HYPHEN"},{id:"K_EQUAL"},{id:"K_BKSP",text:"*BkSp*",sp:"1",width:"130"}]},{id:"2",key:[{id:"K_TAB",text:"*Tab*",sp:"1",width:"130"},{id:"K_Q"},{id:"K_W"},{id:"K_E"},{id:"K_R"},{id:"K_T"},{id:"K_Y"},{id:"K_U"},{id:"K_I"},{id:"K_O"},{id:"K_P"},{id:"K_LBRKT"},{id:"K_RBRKT"},{id:"K_BKSLASH"}]},{id:"3",key:[{id:"K_CAPS",text:"*Caps*",sp:"1",width:"165"},{id:"K_A"},{id:"K_S"},{id:"K_D"},{id:"K_F"},{id:"K_G"},{id:"K_H"},{id:"K_J"},{id:"K_K"},{id:"K_L"},{id:"K_COLON"},{id:"K_QUOTE"},
{id:"K_ENTER",text:"*Enter*",sp:"1",width:"165"}]},{id:"4",key:[{id:"K_SHIFT",text:"*Shift*",sp:"1",width:"130"},{id:"K_oE2"},{id:"K_Z"},{id:"K_X"},{id:"K_C"},{id:"K_V"},{id:"K_B"},{id:"K_N"},{id:"K_M"},{id:"K_COMMA"},{id:"K_PERIOD"},{id:"K_SLASH"},{id:"K_RSHIFT",text:"*Shift*",sp:"1",width:"130"}]},{id:"5",key:[{id:"K_LCONTROL",text:"*Ctrl*",sp:"1",width:"170"},{id:"K_LALT",text:"*Alt*",sp:"1",width:"160"},{id:"K_SPACE",text:"",width:"770"},{id:"K_RALT",text:"*Alt*",sp:"1",width:"160"},{id:"K_RCONTROL",
text:"*Ctrl*",sp:"1",width:"170"}]}]}]},tablet:{font:"Tahoma,Helvetica",layer:[{id:"default",row:[{id:"0",key:[{id:"K_1"},{id:"K_2"},{id:"K_3"},{id:"K_4"},{id:"K_5"},{id:"K_6"},{id:"K_7"},{id:"K_8"},{id:"K_9"},{id:"K_0"},{id:"K_HYPHEN"},{id:"K_EQUAL"},{sp:"10",width:"1"}]},{id:"1",key:[{id:"K_Q",pad:"25"},{id:"K_W"},{id:"K_E"},{id:"K_R"},{id:"K_T"},{id:"K_Y"},{id:"K_U"},{id:"K_I"},{id:"K_O"},{id:"K_P"},{id:"K_LBRKT"},{id:"K_RBRKT"},{sp:"10",width:"1"}]},{id:"2",key:[{id:"K_A",pad:"50"},{id:"K_S"},
{id:"K_D"},{id:"K_F"},{id:"K_G"},{id:"K_H"},{id:"K_J"},{id:"K_K"},{id:"K_L"},{id:"K_COLON"},{id:"K_QUOTE"},{id:"K_BKSLASH",width:"90"}]},{id:"3",key:[{id:"K_oE2",width:"90"},{id:"K_Z"},{id:"K_X"},{id:"K_C"},{id:"K_V"},{id:"K_B"},{id:"K_N"},{id:"K_M"},{id:"K_COMMA"},{id:"K_PERIOD"},{id:"K_SLASH"},{id:"K_BKQUOTE"},{sp:"10",width:"1"}]},{id:"4",key:[{id:"K_SHIFT",text:"*Shift*",sp:"1",width:"200",sk:[{id:"K_LCONTROL",text:"*Ctrl*",sp:"1",width:"50",nextlayer:"ctrl"},{id:"K_LCONTROL",text:"*LCtrl*",sp:"1",
width:"50",nextlayer:"leftctrl"},{id:"K_RCONTROL",text:"*RCtrl*",sp:"1",width:"50",nextlayer:"rightctrl"},{id:"K_LALT",text:"*Alt*",sp:"1",width:"50",nextlayer:"alt"},{id:"K_LALT",text:"*LAlt*",sp:"1",width:"50",nextlayer:"leftalt"},{id:"K_RALT",text:"*RAlt*",sp:"1",width:"50",nextlayer:"rightalt"},{id:"K_ALTGR",text:"*AltGr*",sp:"1",width:"50",nextlayer:"ctrl-alt"}]},{id:"K_LOPT",text:"*Menu*",sp:"1",width:"150"},{id:"K_SPACE",text:"",width:"570"},{id:"K_BKSP",text:"*BkSp*",sp:"1",width:"150"},{id:"K_ENTER",
text:"*Enter*",sp:"1",width:"200"}]}]}]},phone:{font:"Tahoma,Helvetica",layer:[{id:"default",row:[{id:"0",key:[{id:"K_1"},{id:"K_2"},{id:"K_3"},{id:"K_4"},{id:"K_5"},{id:"K_6"},{id:"K_7"},{id:"K_8"},{id:"K_9"},{id:"K_0"},{id:"K_HYPHEN"},{id:"K_EQUAL"},{sp:"10",width:"1"}]},{id:"1",key:[{id:"K_Q",pad:"25"},{id:"K_W"},{id:"K_E"},{id:"K_R"},{id:"K_T"},{id:"K_Y"},{id:"K_U"},{id:"K_I"},{id:"K_O"},{id:"K_P"},{id:"K_LBRKT"},{id:"K_RBRKT"},{sp:"10",width:"1"}]},{id:"2",key:[{id:"K_A",pad:"50"},{id:"K_S"},
{id:"K_D"},{id:"K_F"},{id:"K_G"},{id:"K_H"},{id:"K_J"},{id:"K_K"},{id:"K_L"},{id:"K_COLON"},{id:"K_QUOTE"},{id:"K_BKSLASH",width:"90"}]},{id:"3",key:[{id:"K_oE2",width:"90"},{id:"K_Z"},{id:"K_X"},{id:"K_C"},{id:"K_V"},{id:"K_B"},{id:"K_N"},{id:"K_M"},{id:"K_COMMA"},{id:"K_PERIOD"},{id:"K_SLASH"},{id:"K_BKQUOTE"},{sp:"10",width:"1"}]},{id:"4",key:[{id:"K_SHIFT",text:"*Shift*",sp:"1",width:"200",sk:[{id:"K_LCONTROL",text:"*Ctrl*",sp:"1",width:"50",nextlayer:"ctrl"},{id:"K_LCONTROL",text:"*LCtrl*",sp:"1",
width:"50",nextlayer:"leftctrl"},{id:"K_RCONTROL",text:"*RCtrl*",sp:"1",width:"50",nextlayer:"rightctrl"},{id:"K_LALT",text:"*Alt*",sp:"1",width:"50",nextlayer:"alt"},{id:"K_LALT",text:"*LAlt*",sp:"1",width:"50",nextlayer:"leftalt"},{id:"K_RALT",text:"*RAlt*",sp:"1",width:"50",nextlayer:"rightalt"},{id:"K_ALTGR",text:"*AltGr*",sp:"1",width:"50",nextlayer:"ctrl-alt"}]},{id:"K_LOPT",text:"*Menu*",width:"150",sp:"1"},{id:"K_SPACE",width:"570",text:""},{id:"K_BKSP",text:"*BkSp*",width:"150",sp:"1"},{id:"K_ENTER",
text:"*Enter*",width:"200",sp:"1"}]}]}]}};return c}();l.Layouts=g})(h.keyboards||(h.keyboards={}))})(f.keyman||(f.keyman={}))})(com||(com={}));
(function(f){(function(f){(function(h){var l=function(){function b(){this.isMnemonic=!1}b.polyfill=function(a,d,c){var e=new b,k;for(k in e)a.hasOwnProperty(k)||(a[k]=e[k]);if(a.sk)for(e=0,k=a.sk;e<k.length;e++)b.polyfill(k[e],d,c);a.displayLayer=c;a.layer=a.layer||c;a.constructBaseKeyEvent(d,c)};b.prototype.constructBaseKeyEvent=function(a,b){var d=this.layer||b||"",c=this.id?this.id.toUpperCase():null;b={Ltarg:null,Lmodifiers:f.text.KeyboardProcessor.getModifierState(d),Lstates:0,Lcode:c?f.text.Codes.keyCodes[c]:
0,LisVirtualKey:!0,vkCode:0,kName:c,kLayer:d,kbdLayer:b,kNextLayer:this.nextlayer,device:null,isSynthetic:!0};a.keyboard&&(d=a.keyboard,!d.isMnemonic||a.isDefault&&"desktop"!=a.formFactor?b.vkCode=b.Lcode:b.Lcode!=f.text.Codes.keyCodes.K_SPACE&&(b.vkCode=b.Lcode,this.isMnemonic=!0),d.definesPositionalOrMnemonic||(b.Lcode=f.KeyMapping._USKeyCodeToCharCode(this.constructKeyEvent(null,null,null)),b.LisVirtualKey=!1));this.baseKeyEvent=b};b.prototype.constructKeyEvent=function(a,b,c){var d=f.utils.deepCopy(this.baseKeyEvent);
d.Ltarg=b;d.device=c;this.isMnemonic&&f.text.KeyboardProcessor.setMnemonicCode(d,-1!=this.layer.indexOf("shift"),a?a.stateKeys.K_CAPS:!1);a&&a.setSyntheticEventDefaults(d);return d};b.DEFAULT_PAD=15;b.DEFAULT_RIGHT_MARGIN=15;b.DEFAULT_KEY_WIDTH=100;b.DEFAULT_KEY={text:"",width:b.DEFAULT_KEY_WIDTH.toString(),sp:"0",pad:b.DEFAULT_PAD.toString()};return b}();h.ActiveKey=l;var g=function(){function b(){}b.polyfill=function(a,d,c,e,f){for(var k=a.key,p=0;p<k.length;p++){var g=k[p],h;for(h in l.DEFAULT_KEY)"string"!=
typeof g[h]&&(g[h]=l.DEFAULT_KEY[h]);switch(g.sp){case "1":b.SPECIAL_LABEL.test(g.text)||""==g.text||(g.sp="3");break;case "2":b.SPECIAL_LABEL.test(g.text)||""==g.text||(g.sp="4")}l.polyfill(g,d,c)}for(p=h=0;p<k.length-1;p++)d=parseInt(k[p].width,10)/e,k[p].widthpc=d,c=parseInt(k[p].pad,10)/e,k[p].padpc=c,k[p].proportionalX=h+c+d/2,k[p].proportionalWidth=d,h+=c+d;var x=l.DEFAULT_RIGHT_MARGIN/e;h+=x;1==k.length&&0>parseInt(k[0].pad,10)?(d=parseInt(k[0].width,10)/e,k[0].widthpc=d,h+=d,k[0].padpc=1-
h,k[0].proportionalX=h-x-d/2,k[0].proportionalWidth=d):0<k.length&&(p=k.length-1,c=parseInt(k[p].pad,10)/e,k[p].padpc=c,k[p].widthpc=d=1-(h+c),k[p].proportionalX=1-x-d/2,k[p].proportionalWidth=d);e=new b;for(g in e)a.hasOwnProperty(g)||(a[g]=e[g]);a.proportionalY=f};b.prototype.populateKeyMap=function(a){this.key.forEach(function(b){b.id&&(a[b.id]=b)})};b.SPECIAL_LABEL=/\*\w+\*/;return b}(),c=function(){function b(){}b.polyfill=function(a,d){a.aligned=!1;for(var c=a.row,e=0,f=0;f<a.row.length;f++){for(var h=
0,n=c[f].key,u=0;u<n.length;u++){var w=n[u];if(null==w)--n.length;else{var r="string"==typeof w.width&&""!=w.width?parseInt(w.width,10):l.DEFAULT_KEY_WIDTH;if(isNaN(r)||0==r)r=l.DEFAULT_KEY_WIDTH;w.width=r.toString();var t="string"==typeof w.pad&&""!=w.pad?parseInt(w.pad,10):l.DEFAULT_PAD;if(isNaN(t)||0==t)t=l.DEFAULT_PAD;w.pad=t.toString();h+=r+t}}h>e&&(e=h)}e="desktop"==d.formFactor?e+5:e+l.DEFAULT_RIGHT_MARGIN;c=a.row.length;for(f=0;f<c;f++)g.polyfill(a.row[f],d,a.id,e,(f+.5)/c);d=new b;for(w in d)a.hasOwnProperty(w)||
(a[w]=d[w]);a.totalWidth=e;a.defaultKeyProportionalWidth=parseInt(l.DEFAULT_KEY.width,10)/e;a.rowProportionalHeight=1/c;a.keyMap=a.constructKeyMap()};b.prototype.constructKeyMap=function(){var a={};this.row.forEach(function(b){b.populateKeyMap(a)});return a};b.prototype.getTouchProbabilities=function(a,b){a=this.simpleTouchDistribution(a,b);b=[];for(var d in a)b.push({keyId:d,p:a[d]});return b.sort(function(a,b){return b.p-a.p})};b.prototype.simpleTouchDistribution=function(a,b){a=this.keyTouchDistances(a,
b);b={};var d=0,c;for(c in a)d+=b[c]=1/(a[c]+1E-6);for(c in b)b[c]/=d;return b};b.prototype.keyTouchDistances=function(a,b){var d=this,c={};this.row.forEach(function(e){e.key.forEach(function(k){if(k.id){var p=Math.abs(a.x-k.proportionalX),f=Math.abs(a.y-e.proportionalY);if(p>.5*k.proportionalWidth){var g=p-.5*k.proportionalWidth;p=.5}else g=0,p/=k.proportionalWidth;if(f>.5*d.rowProportionalHeight){var h=f-.5*d.rowProportionalHeight;f=.5}else h=0,f/=d.rowProportionalHeight;g*=b;g+=p*d.rowProportionalHeight;
h+=f*d.rowProportionalHeight;c[k.id]=g*g+h*h}})});return c};b.prototype.getKey=function(a){0==a.indexOf(this.id+"-")&&(a=a.replace(this.id+"-",""));return this.keyMap[a]};return b}();h.ActiveLayer=c;var b=function(){function b(){}b.prototype.getLayer=function(a){return this.layerMap[a]};b.polyfill=function(a,d,e){if(null==a)throw Error("Cannot build an ActiveLayout for a null specification.");var k,f={};var g=a.layer;for(k=0;k<g.length;k++){var n=g[k];var h=n.row;for(n=h.length;0<n&&!(0<h[n-1].key.length);n--);
n<h.length&&h.splice(n-h.length,h.length-n)}k=new b;for(var l in k)a.hasOwnProperty(l)||(a[l]=k[l]);a.keyboard=d;a.formFactor=e;for(k=0;k<g.length;k++)c.polyfill(g[k],a),f[g[k].id]=g[k];a.layerMap=f;return a};return b}();h.ActiveLayout=b})(f.keyboards||(f.keyboards={}))})(f.keyman||(f.keyman={}))})(com||(com={}));
(function(f){(function(f){(function(f){var h=function(){function c(b){this.id=b}c.prototype.set=function(b){throw Error("System store with ID "+this.id+" may not be directly set.");};return c}();f.SystemStore=h;var g=function(c){function b(b,a){b=c.call(this,b)||this;b.handler=null;b._value=a;return b}__extends(b,c);Object.defineProperty(b.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0});b.prototype.matches=function(b){return this._value==b};b.prototype.set=function(b){this.handler&&
this.handler(this,b)||(this._value=b)};return b}(h);f.MutableSystemStore=g;h=function(c){function b(b){var a=c.call(this,f.KeyboardInterface.TSS_PLATFORM)||this;a.kbdInterface=b;return a}__extends(b,c);b.prototype.matches=function(b){var a=b.split(" "),d=this.kbdInterface.activeDevice;for(b=0;b<a.length;b++){var c=a[b].toLowerCase();switch(c){case "touch":case "hardware":if(d.touchable!=("touch"==c))return!1;break;case "macos":case "mac":c="macosx";case "macosx":case "windows":case "android":case "ios":case "linux":if(d.OS!=
c)return!1;break;case "tablet":case "phone":case "desktop":if(d.formFactor!=c)return!1;break;case "web":if("native"==d.browser)return!1;break;case "native":case "ie":case "chrome":case "firefox":case "safari":case "edge":case "opera":if(d.browser!=c)return!1;break;default:return!1}}return!0};return b}(h);f.PlatformSystemStore=h})(f.text||(f.text={}))})(f.keyman||(f.keyman={}))})(com||(com={}));
(function(f){(function(h){(function(l){var r=function(){return function(){}}();l.KeyInformation=r;(function(){return function(){}})();(function(){return function(){}})();(function(){return function(){}})();(function(){return function(){}})();(function(){return function(){}})();(function(){return function(){}})();var g=function(){function b(){}b.prototype.reset=function(){this._cache=[]};b.prototype.get=function(a,b){return"undefined"==typeof this._cache[a]||"undefined"==typeof this._cache[a][b]?null:
this._cache[a][b]};b.prototype.set=function(a,b,c){"undefined"==typeof this._cache[a]&&(this._cache[a]=[]);this._cache[a][b]=c};return b}(),c=function(){function b(){}b.prototype.reset=function(){this._cache=[]};b.prototype.get=function(a,b){return"undefined"==typeof this._cache[a]||"undefined"==typeof this._cache[a][b]?null:this._cache[a][b]};b.prototype.set=function(a,b,c){"undefined"==typeof this._cache[a]&&(this._cache[a]=[]);this._cache[a][b]=c};return b}(),b=function(){function b(a){void 0===
a&&(a=null);this.cachedContext=new g;this.cachedContextEx=new c;this._AnyIndices=[];this.systemStores={};this.systemStores[b.TSS_PLATFORM]=new l.PlatformSystemStore(this);this.systemStores[b.TSS_LAYER]=new l.MutableSystemStore(b.TSS_LAYER,"default");this.variableStoreSerializer=a}b.prototype.saveFocus=function(){};b.prototype.registerKeyboard=function(a){this.activeKeyboard=new h.keyboards.Keyboard(a)};b.prototype.context=function(a,b,c){var d=this.cachedContext.get(a,b);if(null!==d)return d;c=this.KC_(a,
b,c);this.cachedContext.set(a,b,c);return c};b.prototype.KC_=function(a,b,c){c=c.getTextBeforeCaret();c._kmwLength()<a&&(c=Array(a-c._kmwLength()+1).join("\ufffe")+c);return c._kmwSubstr(-a)._kmwSubstr(0,b)};b.prototype.nul=function(a,b){return"\ufffe"===this.context(a+1,1,b)};b.prototype.contextMatch=function(a,b,c,e){if(this.context(a,e,b)===c)return!0;b.deadkeys().resetMatched();return!1};b.prototype._BuildExtendedContext=function(a,b,c){var d=this.cachedContextEx.get(a,b);if(null!==d)return d;
d=this.cachedContextEx.get(a,a);if(null===d){var e=c.deadkeys().toSortedArray(),k=0;for(d={valContext:[],deadContext:[]};d.valContext.length<a;){var f=c.getDeadkeyCaret()-k;0<e.length&&e[0].p>f?e.splice(0,1):0<e.length&&e[0].p==f?(d.deadContext[a-d.valContext.length-1]=e[0],d.valContext=[e[0].d].concat(d.valContext),e.splice(0,1)):(f=this.context(++k,1,c),d.valContext=[f].concat(d.valContext))}this.cachedContextEx.set(a,a,d)}c=d;c.valContext=c.valContext.slice(0,b);for(d=0;d<c.valContext.length;d++)"\ufffe"==
c[d]&&(c.valContext.splice(0,1),c.deadContext.splice(0,1));0==c.valContext.length&&(c.valContext=["\ufffe"],c.deadContext=[]);this.cachedContextEx.set(a,b,c);return c};b.prototype.fullContextMatch=function(a,b,c){var d=this._BuildExtendedContext(a,c.length,b);a=d.valContext;d=d.deadContext;for(var e=!1,k=0;k<c.length;k++)if("string"==typeof c[k]){if(c[k]!==a[k]){e=!0;break}}else{var f=c[k];switch(f.t){case "d":f.d!==a[k]?e=!0:d[k].set();break;case "a":var g=this.any(k,"string"==typeof a[k]?a[k]:{t:"d",
d:a[k]},f.a);f.n?f.n&&(g||"\ufffe"!==a[k])&&(e=!0):g?void 0!==d[k]&&d[k].set():e=!0;break;case "i":f=this._Index(f.i,f.o);void 0!==f&&("string"==typeof f?f:f.d)!==a[k]?e=!0:void 0!==d[k]&&d[k].set();break;case "c":a[f.c-1]!==a[k]?e=!0:void 0!==d[k]&&d[k].set();break;case "n":"\ufffe"!=a[k]&&(e=!0);break;default:throw Error("Unexpected object in fullContextMatch specification: "+f);}}e&&(b.deadkeys().resetMatched(),this._AnyIndices=[]);return!e};b.prototype.isKeypress=function(a){return this.activeKeyboard.isMnemonic?
!a.LisVirtualKey:h.KeyMapping._USKeyCodeToCharCode(a)?!0:!1};b.prototype.keyMatch=function(a,b,c){var d=!1,e=173==a.Lcode?189:a.Lcode,k=this.activeKeyboard.modifierBitmask,n=f.keyman.text.Codes,g=k&n.modifierBitmasks.ALL;k&=n.stateBitmasks.ALL;255<a.vkCode&&(e=a.vkCode);if(a.LisVirtualKey||255<e){if(16384==(b&16384)||255<e)d=(d=c==e&&(b&g)==a.Lmodifiers)&&this.stateMatch(a,b&k)}else 0==(b&16384)&&(d=e==c);d||this.activeTargetOutput.deadkeys().resetMatched();return d};b.prototype.stateMatch=function(a,
b){return(b&a.Lstates)==b};b.prototype.keyInformation=function(a){var b=new r;b.vk=a.LisVirtualKey;b.code=a.Lcode;b.modifiers=a.Lmodifiers;return b};b.prototype.deadkeyMatch=function(a,b,c){return b.hasDeadkeyMatch(a,c)};b.prototype.beep=function(a){this.resetContextCache();this.ruleBehavior.beep=!0};b.prototype._ExplodeStore=function(a){if("string"==typeof a){var b=this.activeKeyboard.explodedStores;if(b[a])return b[a];for(var c=[],e=0;e<a._kmwLength();e++)c.push(a._kmwCharAt(e));return b[a]=c}return a};
b.prototype.any=function(a,b,c){if(""==b)return!1;c=this._ExplodeStore(c);for(var d=-1,e=0;e<c.length;e++)if("string"==typeof c[e]){if(c[e]==b){d=e;break}}else if(c[e].d===b.d){d=e;break}this._AnyIndices[a]=d;return 0<=d};b.prototype._Index=function(a,b){a=this._ExplodeStore(a);if(this._AnyIndices[b-1]<a.length)return a[this._AnyIndices[b-1]];console.warn("Unmatched contextual index() statement detected in rule with index "+b+"!");return""};b.prototype.indexOutput=function(a,b,c,e){this.resetContextCache();
b=this._Index(b,c);if(""!==b)if("string"==typeof b)this.output(a,e,b);else if(b.t)switch(b.t){case "b":this.beep(e);break;case "d":this.deadkeyOutput(a,e,b.d);break;default:throw Error("Unexpected object in fullContextMatch specification: "+b);}else this.deadkeyOutput(a,e,b.d)};b.prototype.deleteContext=function(a,b){if(0<a){var c=this._BuildExtendedContext(a,a,b);for(var d=0,e=0;e<c.valContext.length;e++){var f=c.deadContext[e];f?(b.deadkeys().remove(f),a--):"\ufffe"==c.valContext[e]&&d++}c=c.valContext.length-
d;a>c&&(a=c)}b.deadkeys().resetMatched();this.output(a,b,"")};b.prototype.output=function(a,b,c){this.resetContextCache();b.saveProperties();b.clearSelection();b.deadkeys().deleteMatched();0<=a&&b.deleteCharsBeforeCaret(a);b.insertTextBeforeCaret(c);b.restoreProperties()};b.prototype.deadkeyOutput=function(a,b,c){this.resetContextCache();0<=a&&this.output(a,b,"");b.insertDeadkeyBeforeCaret(c)};b.prototype.ifStore=function(a,b,c){c=!0;(a=this.systemStores[a])&&(c=a.matches(b));return c};b.prototype.setStore=
function(a,c,e){this.resetContextCache();if(a==b.TSS_LAYER)this.ruleBehavior.setStore[a]=c;else return!1};b.prototype.loadStore=function(a,b,c){this.resetContextCache();return this.variableStoreSerializer?this.variableStoreSerializer.loadStore(a,b)[b]||c:c};b.prototype.saveStore=function(a,b){this.resetContextCache();var c=this.activeKeyboard;if(!c||"undefined"==typeof c.id||""==c.id)return!1;c={};c[a]=b;this.ruleBehavior?this.ruleBehavior.saveStore[a]=c:this.variableStoreSerializer.saveStore(this.activeKeyboard.id,
a,c);return!0};b.prototype.resetContextCache=function(){this.cachedContext.reset();this.cachedContextEx.reset()};b.prototype.defaultBackspace=function(a){this.output(1,a,"")};b.prototype.processKeystroke=function(a,b){if(!a)throw"No target specified for keyboard output!";if(!this.activeKeyboard)throw"No active keyboard for keystroke processing!";a.invalidateSelection();a.deadkeys().resetMatched();this.resetContextCache();var c=l.Mock.from(a);this.ruleBehavior=new l.RuleBehavior;this.activeDevice=
b.device;this.activeTargetOutput=a;var d=this.activeKeyboard.process(a,b);this.activeTargetOutput=null;if(!d)return null;this.ruleBehavior.transcription=a.buildTranscriptionFrom(c,b);a=this.ruleBehavior;this.ruleBehavior=null;return a};b.__publishShorthandAPI=function(){var a=this.prototype,b=function(b,c){a[b]=a[c]};b("KSF","saveFocus");b("KBR","beepReset");b("KT","insertText");b("KR","registerKeyboard");b("KRS","registerStub");b("KC","context");b("KN","nul");b("KCM","contextMatch");b("KFCM","fullContextMatch");
b("KIK","isKeypress");b("KKM","keyMatch");b("KSM","stateMatch");b("KKI","keyInformation");b("KDM","deadkeyMatch");b("KB","beep");b("KA","any");b("KDC","deleteContext");b("KO","output");b("KDO","deadkeyOutput");b("KIO","indexOutput");b("KIFS","ifStore");b("KSETS","setStore");b("KLOAD","loadStore");b("KSAVE","saveStore")};b.GLOBAL_NAME="KeymanWeb";b.TSS_LAYER=33;b.TSS_PLATFORM=31;return b}();l.KeyboardInterface=b;b.__publishShorthandAPI()})(h.text||(h.text={}))})(f.keyman||(f.keyman={}))})(com||(com=
{}));
(function(f){(function(f){(function(h){var l=function(){return function(){this.stores={}}}(),g;(function(b){b[b.NOT_LOADED=void 0]="NOT_LOADED";b[b.POLYFILLED=1]="POLYFILLED";b[b.CALIBRATED=2]="CALIBRATED"})(g=h.LayoutState||(h.LayoutState={}));var c=function(){function b(c){this.scriptObject=c?c:b.DEFAULT_SCRIPT_OBJECT;this.layoutStates={}}b.prototype.process=function(b,a){return this.scriptObject.gs(b,a)};Object.defineProperty(b.prototype,"isHollow",{get:function(){return this.scriptObject==b.DEFAULT_SCRIPT_OBJECT},
enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"id",{get:function(){return this.scriptObject.KI},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"name",{get:function(){return this.scriptObject.KN},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"displaysUnderlyingKeys",{get:function(){return!!this.scriptObject.KDU},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"_legacyLayoutSpec",{get:function(){return this.scriptObject.KV},
enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"_layouts",{get:function(){return this.scriptObject.KVKL},set:function(b){this.scriptObject.KVKL=b},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"compilerVersion",{get:function(){return new f.utils.Version(this.scriptObject.KVER)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"isMnemonic",{get:function(){return!!this.scriptObject.KM},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,
"definesPositionalOrMnemonic",{get:function(){return"undefined"!=typeof this.scriptObject.KM},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"helpText",{get:function(){return this.scriptObject.KH},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"hasHelpHTML",{get:function(){return!!this.scriptObject.KHF},enumerable:!0,configurable:!0});b.prototype.insertHelpHTML=function(b){this.scriptObject.KHF(b)};Object.defineProperty(b.prototype,"oskStyling",{get:function(){return this.scriptObject.KCSS},
enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"isCJK",{get:function(){var b;"undefined"!=typeof this.scriptObject.KLC?b=this.scriptObject.KLC:"undefined"!=typeof this.scriptObject.LanguageCode&&(b=this.scriptObject.LanguageCode);return"cmn"==b||"jpn"==b||"kor"==b},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"isRTL",{get:function(){return!!this.scriptObject.KRTL},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"modifierBitmask",{get:function(){return this.scriptObject.KMBM||
f.text.Codes.modifierBitmasks.NON_CHIRAL},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"isChiral",{get:function(){return!!(this.modifierBitmask&f.text.Codes.modifierBitmasks.IS_CHIRAL)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"desktopFont",{get:function(){return this.scriptObject.KV?this.scriptObject.KV.F:null},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"cacheTag",{get:function(){var b=this.scriptObject._kmw;b||(b=new l,this.scriptObject._kmw=
b);return b},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"explodedStores",{get:function(){return this.cacheTag.stores},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"emulatesAltGr",{get:function(){var b=f.text.Codes.modifierCodes;if(!this.isChiral||null==this._legacyLayoutSpec)return!1;var a=this._legacyLayoutSpec.KLS;if(!a)return!1;var c=b.LCTRL|b.LALT,k=a[h.Layouts.getLayerId(c)];c=a[h.Layouts.getLayerId(b.SHIFT|c)];return null!=k&&k!=a[h.Layouts.getLayerId(b.RALT)]||
null!=c&&c!=a[h.Layouts.getLayerId(b.RALT|b.SHIFT)]?!1:!0},enumerable:!0,configurable:!0});b.prototype.usesDesktopLayoutOnDevice=function(b){return this.scriptObject.KVKL?b.formFactor==f.utils.FormFactor.Desktop:!0};b.prototype.notify=function(b,a,c){"function"==typeof this.scriptObject.KNS&&this.scriptObject.KNS(b,a,c)};b.prototype.findOrConstructLayout=function(b){if(this._layouts){if(void 0!==this._layouts[b])return this._layouts[b];if(b==f.utils.FormFactor.Phone&&this._layouts[f.utils.FormFactor.Tablet])return this._layouts[f.utils.FormFactor.Phone]=
this._layouts[f.utils.FormFactor.Tablet];if(b==f.utils.FormFactor.Tablet&&this._layouts[f.utils.FormFactor.Phone])return this._layouts[f.utils.FormFactor.Tablet]=this._layouts[f.utils.FormFactor.Phone]}var a=null;if(null!=this._legacyLayoutSpec&&this._legacyLayoutSpec.KLS)a=this._legacyLayoutSpec;else if(null!=this._legacyLayoutSpec&&null!=this._legacyLayoutSpec.BK)for(var c=this._legacyLayoutSpec.BK,e=0;e<c.length;e++)if(0<c[e].length){a=this._legacyLayoutSpec;break}a||""!=this.helpText&&b==f.utils.FormFactor.Desktop||
(a={F:"Tahoma",BK:h.Layouts.dfltText});this._layouts||(this._layouts={});return a?(b=this._layouts[b]=h.Layouts.buildDefaultLayout(a,this,b),b.isDefault=!0,b):this._layouts[b]=null};b.prototype.layout=function(b){var a=this.findOrConstructLayout(b);return a?(this.layoutStates[b]==g.NOT_LOADED&&(a=h.ActiveLayout.polyfill(a,this,b),this.layoutStates[b]=g.POLYFILLED),a):null};b.prototype.markLayoutCalibrated=function(b){this.layoutStates[b]!=g.NOT_LOADED&&(this.layoutStates[b]=g.CALIBRATED)};b.prototype.getLayoutState=
function(b){return this.layoutStates[b]};b.DEFAULT_SCRIPT_OBJECT={gs:function(b,a){return!1},KI:"",KN:"",KV:h.Layouts.DEFAULT_RAW_SPEC,KM:0};return b}();h.Keyboard=c})(f.keyboards||(f.keyboards={}))})(f.keyman||(f.keyman={}))})(com||(com={}));
(function(f){(function(f){var h=function(){return function(){}}(),r=function(){return function(){this.FF=new h;this.Safari=new h;this.Opera=new h;this.FF.k61=187;this.FF.k59=186}}(),g=function(){return function(){this.se=new h;this.se.k220=192;this.se.k187=189;this.se.k219=187;this.se.k221=219;this.se.k186=221;this.se.k191=220;this.se.k192=186;this.se.k189=191;this.uk=new h;this.uk.k223=192;this.uk.k192=222;this.uk.k222=226;this.uk.k220=220}}(),c=function(){function b(){}b._usCodeInit=function(){var c=
new h,a=new h;c.k192=96;c.k49=49;c.k50=50;c.k51=51;c.k52=52;c.k53=53;c.k54=54;c.k55=55;c.k56=56;c.k57=57;c.k48=48;c.k189=45;c.k187=61;c.k81=113;c.k87=119;c.k69=101;c.k82=114;c.k84=116;c.k89=121;c.k85=117;c.k73=105;c.k79=111;c.k80=112;c.k219=91;c.k221=93;c.k220=92;c.k65=97;c.k83=115;c.k68=100;c.k70=102;c.k71=103;c.k72=104;c.k74=106;c.k75=107;c.k76=108;c.k186=59;c.k222=39;c.k90=122;c.k88=120;c.k67=99;c.k86=118;c.k66=98;c.k78=110;c.k77=109;c.k188=44;c.k190=46;c.k191=47;a.k192=126;a.k49=33;a.k50=64;a.k51=
35;a.k52=36;a.k53=37;a.k54=94;a.k55=38;a.k56=42;a.k57=40;a.k48=41;a.k189=95;a.k187=43;a.k81=81;a.k87=87;a.k69=69;a.k82=82;a.k84=84;a.k89=89;a.k85=85;a.k73=73;a.k79=79;a.k80=80;a.k219=123;a.k221=125;a.k220=124;a.k65=65;a.k83=83;a.k68=68;a.k70=70;a.k71=71;a.k72=72;a.k74=74;a.k75=75;a.k76=76;a.k186=58;a.k222=34;a.k90=90;a.k88=88;a.k67=67;a.k86=86;a.k66=66;a.k78=78;a.k77=77;a.k188=60;a.k190=62;a.k191=63;b._usCharCodes=[c,a]};b._USKeyCodeToCharCode=function(c){return b.usCharCodes[c.Lmodifiers&16?1:0]["k"+
c.Lcode]};Object.defineProperty(b,"usCharCodes",{get:function(){b._usCharCodes||b._usCodeInit();return b._usCharCodes},enumerable:!0,configurable:!0});b.browserMap=new r;b.languageMap=new g;return b}();f.KeyMapping=c})(f.keyman||(f.keyman={}))})(com||(com={}));
(function(f){(function(f){(function(h){var l=function(){function g(c){this.stateKeys={K_CAPS:!1,K_NUMLOCK:!1,K_SCROLL:!1};this.modStateFlags=0;c||(c=g.DEFAULT_OPTIONS);this.baseLayout=c.baseLayout||g.DEFAULT_OPTIONS.baseLayout;this.keyboardInterface=new h.KeyboardInterface(c.variableStoreSerializer);this.installInterface()}g.prototype.installInterface=function(){f.utils.getGlobalObject()[h.KeyboardInterface.GLOBAL_NAME]=this.keyboardInterface;this.activeKeyboard&&(this.keyboardInterface.activeKeyboard=
this.activeKeyboard)};Object.defineProperty(g.prototype,"activeKeyboard",{get:function(){return this.keyboardInterface.activeKeyboard},set:function(c){this.keyboardInterface.activeKeyboard=c;this.resetContext()},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"layerStore",{get:function(){return this.keyboardInterface.systemStores[h.KeyboardInterface.TSS_LAYER]},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"layerId",{get:function(){return this.layerStore.value},
set:function(c){this.layerStore.set(c)},enumerable:!0,configurable:!0});g.prototype.defaultRuleBehavior=function(c){var b=c.Ltarg,e=h.Mock.from(b),a=new h.RuleBehavior,d=!1,k;if(c.isSynthetic||b.isSynthetic)if(d=!0,h.DefaultOutput.isCommand(c))a.triggersDefaultCommand=!0;else if(null!=(k=h.DefaultOutput.forSpecialEmulation(c)))switch(k){case h.EmulationKeystrokes.Backspace:this.keyboardInterface.defaultBackspace(b);break;case h.EmulationKeystrokes.Enter:b.handleNewlineAtCaret();break;case h.EmulationKeystrokes.Space:this.keyboardInterface.output(0,
b," ");break;default:a.errorLog="Unexpected 'special emulation' character (\\u"+k.kmwCharCodeAt(0).toString(16)+") went unhandled!"}else d=!1;k=this.activeKeyboard&&this.activeKeyboard.isMnemonic;if(!d)if(null!=(d=h.DefaultOutput.forAny(c,k)))if(k=h.DefaultOutput.forSpecialEmulation(c),k==h.EmulationKeystrokes.Backspace)this.keyboardInterface.defaultBackspace(c.Ltarg);else{if(k||h.DefaultOutput.isCommand(c))return null;this.keyboardInterface.output(0,b,d)}else return null;if(a.errorLog)return a;c=
b.buildTranscriptionFrom(e,c);a.transcription=c;return a};g.prototype.setSyntheticEventDefaults=function(c){c.Lstates|=this.stateKeys.K_CAPS?h.Codes.modifierCodes.CAPS:h.Codes.modifierCodes.NO_CAPS;c.Lstates|=this.stateKeys.K_NUMLOCK?h.Codes.modifierCodes.NUM_LOCK:h.Codes.modifierCodes.NO_NUM_LOCK;c.Lstates|=this.stateKeys.K_SCROLL?h.Codes.modifierCodes.SCROLL_LOCK:h.Codes.modifierCodes.NO_SCROLL_LOCK;"U_"==c.kName.substr(0,2)&&(c.LisVirtualKey=!1);"undefined"==typeof c.Lcode&&(c.Lcode=this.getVKDictionaryCode(c.kName),
c.Lcode||(c.Lcode=1));(c.Lmodifiers&h.Codes.modifierBitmasks.ALT_GR_SIM)==h.Codes.modifierBitmasks.ALT_GR_SIM&&this.activeKeyboard.emulatesAltGr&&(c.Lmodifiers&=~h.Codes.modifierBitmasks.ALT_GR_SIM,c.Lmodifiers|=h.Codes.modifierCodes.RALT)};g.prototype.processKeystroke=function(c,b){if(this.activeKeyboard&&0!=c.Lcode){this.installInterface();var e=this.keyboardInterface.processKeystroke(b,c)}e||(c.Lcode=c.vkCode||c.Lcode,this.keyboardInterface.activeTargetOutput=b,e=this.defaultRuleBehavior(c),this.keyboardInterface.activeTargetOutput=
null);return e};g.setMnemonicCode=function(c,b,e){if(c.Lcode!=h.Codes.keyCodes.K_SPACE){var a=new h.KeyEvent,d;for(d in c)a[d]=c[d];a.kName="K_xxxx";a.Ltarg=new h.Mock;a.Lmodifiers=b?16:0;b=h.DefaultOutput.forAny(a,!0);c.vkCode=c.Lcode;b?c.Lcode=b.charCodeAt(0):delete c.Lcode}e&&(65<=c.Lcode&&90>=c.Lcode||97<=c.Lcode&&122>=c.Lcode)&&(c.Lmodifiers^=16,c.Lcode^=32)};g.getModifierState=function(c){var b=0;0<=c.indexOf("shift")&&(b|=h.Codes.modifierCodes.SHIFT);var e=!1;0<=c.indexOf("leftctrl")&&(b|=
h.Codes.modifierCodes.LCTRL,e=!0);0<=c.indexOf("rightctrl")&&(b|=h.Codes.modifierCodes.RCTRL,e=!0);0<=c.indexOf("ctrl")&&!e&&(b|=h.Codes.modifierCodes.CTRL);e=!1;0<=c.indexOf("leftalt")&&(b|=h.Codes.modifierCodes.LALT,e=!0);0<=c.indexOf("rightalt")&&(b|=h.Codes.modifierCodes.RALT,e=!0);0<=c.indexOf("alt")&&!e&&(b|=h.Codes.modifierCodes.ALT);return b};g.prototype.getVKDictionaryCode=function(c){var b=this.activeKeyboard;if(!b.scriptObject.VKDictionary){var e=[];if("string"==typeof b.scriptObject.KVKD)for(var a=
b.scriptObject.KVKD.split(" "),d=0;d<a.length;d++)e[a[d].toUpperCase()]=d+256;b.scriptObject.VKDictionary=e}return(c=b.scriptObject.VKDictionary[c.toUpperCase()])?c:0};g.prototype._UpdateVKShift=function(c,b,e){var a=0,d=["CAPS","NUM_LOCK","SCROLL_LOCK"],k=["K_CAPS","K_NUMLOCK","K_SCROLL"];if(!this.activeKeyboard)return!0;if(c)for(a=c.Lmodifiers,b=c.Lstates,this.activeKeyboard.isChiral&&this.activeKeyboard.emulatesAltGr&&(this.modStateFlags&h.Codes.modifierBitmasks.ALT_GR_SIM)==h.Codes.modifierBitmasks.ALT_GR_SIM&&
(a|=h.Codes.modifierBitmasks.ALT_GR_SIM,a&=~h.Codes.modifierCodes.RALT),c=0;c<d.length;c++)b&h.Codes.stateBitmasks[d[c]]&&(this.stateKeys[k[c]]=b&h.Codes.modifierCodes[d[c]]);else if(e)for(a|=b,c=0;c<d.length;c++)b&h.Codes.stateBitmasks[d[c]]&&(this.stateKeys[k[c]]=!0);else for(a&=~b,c=0;c<d.length;c++)b&h.Codes.stateBitmasks[d[c]]&&(this.stateKeys[k[c]]=!1);this.layerId=this.getLayerId(a);return!0};g.prototype.getLayerId=function(c){return f.keyboards.Layouts.getLayerId(c)};g.prototype.selectLayer=
function(c,b){void 0===b&&(b=!1);var e=c.kName;b=b?null:c.kNextLayer;var a=this.activeKeyboard&&this.activeKeyboard.isChiral;"number"==typeof b&&(b=this.getLayerId(16*b));if(!b)switch(e){case "K_LSHIFT":case "K_RSHIFT":case "K_SHIFT":b="shift";break;case "K_LCONTROL":case "K_LCTRL":if(a){b="leftctrl";break}case "K_RCONTROL":case "K_RCTRL":if(a){b="rightctrl";break}case "K_CTRL":b="ctrl";break;case "K_LMENU":case "K_LALT":if(a){b="leftalt";break}case "K_RMENU":case "K_RALT":if(a){b="rightalt";break}case "K_ALT":b=
"alt";break;case "K_ALTGR":b=a?"leftctrl-rightalt":"ctrl-alt";break;case "K_CURRENCIES":case "K_NUMERALS":case "K_SHIFTED":case "K_UPPER":case "K_LOWER":case "K_SYMBOLS":b="default"}if(!b)return!1;this.updateLayer(c,b);return!0};g.prototype.updateLayer=function(c,b){var e=this.layerId,a=e;if(b==e&&c.device.formFactor!=f.utils.FormFactor.Desktop)return!1;var d=b,k;if(c.device.formFactor==f.utils.FormFactor.Desktop){var p="leftctrl rightctrl ctrl leftalt rightalt alt shift".split(" ");for(k=0;k<p.length;k++)d=
d.replace(p[k]+"-",""),d=d.replace(p[k],"");if("default"==e||"numeric"==e||"symbol"==e||"currency"==e||""!=d)a=b;else{e=g.getModifierState(a);for(k=0;k<p.length;k++)a=a.replace(p[k]+"-",""),a=a.replace(p[k],"");switch(b){case "shift":e^=h.Codes.modifierCodes.SHIFT;break;case "leftctrl":e^=h.Codes.modifierCodes.LCTRL;break;case "rightctrl":e^=h.Codes.modifierCodes.RCTRL;break;case "ctrl":e^=h.Codes.modifierCodes.CTRL;break;case "leftalt":e^=h.Codes.modifierCodes.LALT;break;case "rightalt":e^=h.Codes.modifierCodes.RALT;
break;case "alt":e^=h.Codes.modifierCodes.ALT;break;default:a=b}"default"!=a&&(a=""==a?this.getLayerId(e):this.getLayerId(e)+"-"+a)}""==a&&(a="default")}else a=b;this.activeKeyboard.layout(c.device.formFactor).getLayer(a)?this.layerId=a:this.layerId="default"};g.prototype.doModifierPress=function(c,b){var e=c.Ltarg;if(!this.activeKeyboard)return!1;switch(c.Lcode){case 8:e.deadkeys().clear();break;case 16:case 17:case 18:case 20:case 144:case 145:return this.activeKeyboard.notify(c.Lcode,e,b?1:0),
c.device.touchable?!0:this._UpdateVKShift(c,c.Lcode-15,1)}c.LmodifierChange&&(this.activeKeyboard.notify(0,e,1),this._UpdateVKShift(c,0,1));return!1};g.prototype.resetContext=function(){this.layerId="default";this.keyboardInterface.resetContextCache();this._UpdateVKShift(null,15,0)};g.prototype.setNumericLayer=function(c){this.activeKeyboard.layout(c.formFactor).getLayer("numeric")&&(this.layerId="numeric")};g.DEFAULT_OPTIONS={baseLayout:"us"};return g}();h.KeyboardProcessor=l})(f.text||(f.text={}))})(f.keyman||
(f.keyman={}))})(com||(com={}));(function(){var f=com.keyman.text;"undefined"!==typeof module&&"undefined"!==typeof module.exports&&(module.exports=f.KeyboardProcessor,f.KeyboardProcessor.com=com)})();
function LMLayerWorkerCode(){String.prototype.codePointAt||function(){var b=function(){try{var a={},b=Object.defineProperty,c=b(a,a,a)&&b}catch(x){}return c}(),a=function(a){if(null==this)throw TypeError();var b=String(this),c=b.length,d=a?Number(a):0;d!=d&&(d=0);if(!(0>d||d>=c))return a=b.charCodeAt(d),55296<=a&&56319>=a&&c>d+1&&(b=b.charCodeAt(d+1),56320<=b&&57343>=b)?1024*(a-55296)+b-56320+65536:a};b?b(String.prototype,"codePointAt",{value:a,configurable:!0,writable:!0}):String.prototype.codePointAt=
a}();String.prototype.startsWith||function(){var b=function(){try{var a={},b=Object.defineProperty,c=b(a,a,a)&&b}catch(y){}return c}(),a={}.toString,c=function(b){if(null==this)throw TypeError();var c=String(this);if(b&&"[object RegExp]"==a.call(b))throw TypeError();var d=c.length,e=String(b),k=e.length,f=1<arguments.length?arguments[1]:void 0;f=f?Number(f):0;f!=f&&(f=0);f=Math.min(Math.max(f,0),d);if(k+f>d)return!1;for(d=-1;++d<k;)if(c.charCodeAt(f+d)!=e.charCodeAt(d))return!1;return!0};b?b(String.prototype,
"startsWith",{value:c,configurable:!0,writable:!0}):String.prototype.startsWith=c}();Array.from||(Array.from=function(){var b=Object.prototype.toString,a=function(a){return"function"===typeof a||"[object Function]"===b.call(a)},c=Math.pow(2,53)-1;return function(b){var d=Object(b);if(null==b)throw new TypeError("Array.from requires an array-like object - not null or undefined");var e=1<arguments.length?arguments[1]:void 0,k;if("undefined"!==typeof e){if(!a(e))throw new TypeError("Array.from: when provided, the second argument must be a function");
2<arguments.length&&(k=arguments[2])}var f=Number(d.length);f=isNaN(f)?0:0!==f&&isFinite(f)?(0<f?1:-1)*Math.floor(Math.abs(f)):f;f=Math.min(Math.max(f,0),c);for(var g=a(this)?Object(new this(f)):Array(f),h=0,l;h<f;)l=d[h],g[h]=e?"undefined"===typeof k?e(l,h):e.call(k,l,h):l,h+=1;g.length=f;return g}}());var f;(function(b){b=b.keyman||(b.keyman={});b=b.environment||(b.environment={});b.VERSION="14.0";b.BUILD=137;b.SENTRY_RELEASE="release-14.0.137-alpha"})(f||(f={}));(function(b){(function(a){(function(a){function b(a,
c){c=c||{};for(var d in a)"object"===typeof a[d]&&null!=a[d]?(c[d]=a[d].constructor===Array?[]:{},b(a[d],c[d])):c[d]=a[d];return c}a.deepCopy=b})(a.utils||(a.utils={}))})(b.keyman||(b.keyman={}))})(f||(f={}));(function(b){(function(a){(function(a){a.getGlobalObject=function(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof self?self:global}})(a.utils||(a.utils={}))})(b.keyman||(b.keyman={}))})(f||(f={}));(function(b){(function(a){(function(a){var c=
function(){function a(b){if(void 0===b||null===b)this.components=[].concat(a.DEVELOPER_VERSION_FALLBACK.components);else if(Array.isArray(b)){if(2>b.length)throw Error("Version string must have at least a major and minor component!");this.components=[].concat(b)}else{b=b.split(".");var c=[];if(2>b.length)throw Error("Version string must have at least a major and minor component!");for(var d=0;d<b.length;d++){var e=parseInt(b[d],10);if(isNaN(e))throw Error("Version string components must be numerical!");
c.push(e)}this.components=c}}Object.defineProperty(a.prototype,"major",{get:function(){return this.components[0]},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"minor",{get:function(){return this.components[1]},enumerable:!0,configurable:!0});a.prototype.toString=function(){return this.components.join(".")};a.prototype.toJSON=function(){return this.toString()};a.prototype.equals=function(a){return 0==this.compareTo(a)};a.prototype.precedes=function(a){return 0>this.compareTo(a)};
a.prototype.compareTo=function(a){var b=this.components.length<a.components.length,c=this.components.length<a.components.length?this.components.length:a.components.length,d;for(d=0;d<c;d++){var e=this.components[d]-a.components[d];if(0!=e)return e}a=b?a.components:this.components;do{if(0<a[d])return b?-1:1;d++}while(d<a.length);return 0};a.CURRENT=new a(b.keyman.environment.VERSION);a.DEVELOPER_VERSION_FALLBACK=new a([9,0,0]);a.NO_DEFAULT_KEYCAPS=new a([12,0]);a.MAC_POSSIBLE_IPAD_ALIAS=new a([10,
15]);return a}();a.Version=c})(a.utils||(a.utils={}))})(b.keyman||(b.keyman={}))})(f||(f={}));String.kmwFromCharCode=function(b){var a=[],c;for(c=0;c<arguments.length;c++){var e=Number(arguments[c]);if(!isFinite(e)||0>e||1114111<e||Math.floor(e)!==e)throw new RangeError("Invalid code point "+e);65536>e?a.push(e):(e-=65536,a.push((e>>10)+55296),a.push(e%1024+56320))}return String.fromCharCode.apply(void 0,a)};String.prototype.kmwCharCodeAt=function(b){var a=String(this),c=0;if(0>b||b>=a.length)return NaN;
for(var e=0;e<b;e++)if(c=a.kmwNextChar(c),null===c)return NaN;b=a.charCodeAt(c);return 55296<=b&&56319>=b&&a.length>c+1&&(a=a.charCodeAt(c+1),56320<=a&&57343>=a)?(b-55296<<10)+(a-56320)+65536:b};String.prototype.kmwIndexOf=function(b,a){var c=String(this);b=c.indexOf(b,a);if(0>b)return b;for(var e=a=0;null!==e&&e<b;e=c.kmwNextChar(e))a++;return a};String.prototype.kmwLastIndexOf=function(b,a){var c=String(this);b=c.lastIndexOf(b,a);if(0>b)return b;for(var e=a=0;null!==e&&e<b;e=c.kmwNextChar(e))a++;
return a};String.prototype.kmwLength=function(){var b=String(this);if(0==b.length)return 0;for(var a=0,c=0;null!==c;a++)c=b.kmwNextChar(c);return a};String.prototype.kmwSlice=function(b,a){var c=String(this);b=c.kmwCodePointToCodeUnit(b);a=c.kmwCodePointToCodeUnit(a);return null===b||null===a?"":c.slice(b,a)};String.prototype.kmwSubstr=function(b,a){var c=String(this);0>b&&(b=c.kmwLength()+b);0>b&&(b=0);var e=c.kmwCodePointToCodeUnit(b),f=e;if(null===e)return"";if(2>arguments.length)f=c.length;else for(var g=
0;g<a;g++)f=c.kmwNextChar(f);return null===f?c.substring(e):c.substring(e,f)};String.prototype.kmwSubstring=function(b,a){var c=String(this);if("undefined"==typeof a)b=c.kmwCodePointToCodeUnit(b),a=c.length;else{if(b>a){var e=b;b=a;a=e}b=c.kmwCodePointToCodeUnit(b);a=c.kmwCodePointToCodeUnit(a)}if(isNaN(b)||null===b)b=0;if(isNaN(a)||null===a)a=c.length;return c.substring(b,a)};String.prototype.kmwNextChar=function(b){var a=String(this);if(null===b||0>b||b>=a.length-1)return null;var c=a.charCodeAt(b);
return 55296<=c&&56319>=c&&a.length>b+1&&(c=a.charCodeAt(b+1),56320<=c&&57343>=c)?b==a.length-2?null:b+2:b+1};String.prototype.kmwPrevChar=function(b){var a=String(this);if(null==b||0>=b||b>a.length)return null;var c=a.charCodeAt(b-1);return 56320<=c&&57343>=c&&1<b&&(a=a.charCodeAt(b-2),55296<=a&&56319>=a)?b-2:b-1};String.prototype.kmwCodePointToCodeUnit=function(b){if(null===b)return null;var a=String(this),c=0;if(0>b){c=a.length;for(var e=0;e>b;e--)c=a.kmwPrevChar(c);return c}if(b==a.kmwLength())return a.length;
for(e=0;e<b;e++)c=a.kmwNextChar(c);return c};String.prototype.kmwCodeUnitToCodePoint=function(b){var a=String(this);return null===b?null:0==b?0:0>b?a.substr(b).kmwLength():a.substr(0,b).kmwLength()};String.prototype.kmwCharAt=function(b){var a=String(this);return 0<=b?a.kmwSubstr(b,1):""};String.prototype.kmwBMPNextChar=function(b){var a=String(this);return 0>b||b>=a.length-1?null:b+1};String.prototype.kmwBMPPrevChar=function(b){var a=String(this);return 0>=b||b>a.length?null:b-1};String.prototype.kmwBMPCodePointToCodeUnit=
function(b){return b};String.prototype.kmwBMPCodeUnitToCodePoint=function(b){return b};String.prototype.kmwBMPLength=function(){return String(this).length};String.prototype.kmwBMPSubstr=function(b,a){var c=String(this);return-1<b?c.substr(b,a):c.substr(c.length+b,-b)};String.kmwEnableSupplementaryPlane=function(b){var a=String.prototype;String._kmwFromCharCode=b?String.kmwFromCharCode:String.fromCharCode;a._kmwCharAt=b?a.kmwCharAt:a.charAt;a._kmwCharCodeAt=b?a.kmwCharCodeAt:a.charCodeAt;a._kmwIndexOf=
b?a.kmwIndexOf:a.indexOf;a._kmwLastIndexOf=b?a.kmwLastIndexOf:a.lastIndexOf;a._kmwSlice=b?a.kmwSlice:a.slice;a._kmwSubstring=b?a.kmwSubstring:a.substring;a._kmwSubstr=b?a.kmwSubstr:a.kmwBMPSubstr;a._kmwLength=b?a.kmwLength:a.kmwBMPLength;a._kmwNextChar=b?a.kmwNextChar:a.kmwBMPNextChar;a._kmwPrevChar=b?a.kmwPrevChar:a.kmwBMPPrevChar;a._kmwCodePointToCodeUnit=b?a.kmwCodePointToCodeUnit:a.kmwBMPCodePointToCodeUnit;a._kmwCodeUnitToCodePoint=b?a.kmwCodeUnitToCodePoint:a.kmwBMPCodeUnitToCodePoint};(function(b){(function(a){(function(a){var b;
(function(a){a.Chrome="chrome";a.Edge="edge";a.Firefox="firefox";a.Native="native";a.Opera="opera";a.Safari="safari";a.Other="other"})(b=a.Browser||(a.Browser={}));var c;(function(a){a.Windows="windows";a.macOS="macosx";a.Linux="linux";a.Android="android";a.iOS="ios";a.Other="other"})(c=a.OperatingSystem||(a.OperatingSystem={}));var d;(function(a){a.Desktop="desktop";a.Phone="phone";a.Tablet="tablet"})(d=a.FormFactor||(a.FormFactor={}));var e=function(){return function(a,e,k,f){switch(a.toLowerCase()){case b.Chrome:case b.Edge:case b.Firefox:case b.Native:case b.Opera:case b.Safari:this.browser=
a.toLowerCase();break;default:this.browser=b.Other}switch(e.toLowerCase()){case d.Desktop:case d.Phone:case d.Tablet:this.formFactor=e.toLowerCase();break;default:throw"Invalid form factor specified for device: "+e;}switch(k.toLowerCase()){case c.Windows.toLowerCase():case c.macOS.toLowerCase():case c.Linux.toLowerCase():case c.Android.toLowerCase():case c.iOS.toLowerCase():this.OS=k.toLowerCase();break;default:this.OS=c.Other}this.touchable=f}}();a.DeviceSpec=e})(a.utils||(a.utils={}))})(b.keyman||
(b.keyman={}))})(f||(f={}));var h;(function(b){var a=function(){function a(a){a=a||{};this._futureSuggestions=a.futureSuggestions?a.futureSuggestions.slice():[];a.punctuation&&(this.punctuation=a.punctuation)}a.prototype.configure=function(a){return this.configuration={leftContextCodePoints:a.maxLeftContextCodePoints,rightContextCodePoints:a.maxRightContextCodePoints}};a.prototype.predict=function(a,b,c){a=function(a){for(var b=[],c=0;c<a.length;c++)b.push({sample:a[c],p:1});return b};return c?a(c):
(c=this._futureSuggestions.shift())?a(c):[]};a.prototype.wordbreak=function(a){a=l.default_(a.left);return 0<a.length?a.pop().text:""};return a}();b.DummyModel=a})(h||(h={}));var l;(function(b){b.ascii=function(b){for(var c=/[A-Za-z0-9']+/g,d=[],e;null!==(e=c.exec(b));)d.push(new a(e[0],e.index));return d};var a=function(){function a(a,b){this.text=a;this.start=b}Object.defineProperty(a.prototype,"length",{get:function(){return this.text.length},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,
"end",{get:function(){return this.start+this.text.length},enumerable:!0,configurable:!0});return a}()})(l||(l={}));(function(b){(b.data||(b.data={})).WORD_BREAK_PROPERTY=[[0,0],[10,1],[11,2],[13,3],[14,0],[32,4],[33,0],[34,5],[35,0],[39,6],[40,0],[44,7],[45,0],[46,8],[47,0],[48,9],[58,10],[59,7],[60,0],[65,11],[91,0],[95,12],[96,0],[97,11],[123,0],[133,2],[134,0],[170,11],[171,0],[173,13],[174,0],[181,11],[182,0],[183,10],[184,0],[186,11],[187,0],[192,11],[215,0],[216,11],[247,0],[248,11],[728,0],
[734,11],[768,14],[880,11],[885,0],[886,11],[888,0],[890,11],[894,7],[895,11],[896,0],[902,11],[903,10],[904,11],[907,0],[908,11],[909,0],[910,11],[930,0],[931,11],[1014,0],[1015,11],[1154,0],[1155,14],[1162,11],[1328,0],[1329,11],[1367,0],[1369,11],[1373,0],[1374,11],[1375,10],[1376,11],[1417,7],[1418,11],[1419,0],[1425,14],[1470,0],[1471,14],[1472,0],[1473,14],[1475,0],[1476,14],[1478,0],[1479,14],[1480,0],[1488,15],[1515,0],[1519,15],[1523,11],[1524,10],[1525,0],[1536,13],[1542,0],[1548,7],[1550,
0],[1552,14],[1563,0],[1564,13],[1565,0],[1568,11],[1611,14],[1632,9],[1642,0],[1643,9],[1644,7],[1645,0],[1646,11],[1648,14],[1649,11],[1748,0],[1749,11],[1750,14],[1757,13],[1758,0],[1759,14],[1765,11],[1767,14],[1769,0],[1770,14],[1774,11],[1776,9],[1786,11],[1789,0],[1791,11],[1792,0],[1807,13],[1808,11],[1809,14],[1810,11],[1840,14],[1867,0],[1869,11],[1958,14],[1969,11],[1970,0],[1984,9],[1994,11],[2027,14],[2036,11],[2038,0],[2040,7],[2041,0],[2042,11],[2043,0],[2045,14],[2046,0],[2048,11],
[2070,14],[2074,11],[2075,14],[2084,11],[2085,14],[2088,11],[2089,14],[2094,0],[2112,11],[2137,14],[2140,0],[2144,11],[2155,0],[2208,11],[2229,0],[2230,11],[2248,0],[2259,14],[2274,13],[2275,14],[2308,11],[2362,14],[2365,11],[2366,14],[2384,11],[2385,14],[2392,11],[2402,14],[2404,0],[2406,9],[2416,0],[2417,11],[2433,14],[2436,0],[2437,11],[2445,0],[2447,11],[2449,0],[2451,11],[2473,0],[2474,11],[2481,0],[2482,11],[2483,0],[2486,11],[2490,0],[2492,14],[2493,11],[2494,14],[2501,0],[2503,14],[2505,0],
[2507,14],[2510,11],[2511,0],[2519,14],[2520,0],[2524,11],[2526,0],[2527,11],[2530,14],[2532,0],[2534,9],[2544,11],[2546,0],[2556,11],[2557,0],[2558,14],[2559,0],[2561,14],[2564,0],[2565,11],[2571,0],[2575,11],[2577,0],[2579,11],[2601,0],[2602,11],[2609,0],[2610,11],[2612,0],[2613,11],[2615,0],[2616,11],[2618,0],[2620,14],[2621,0],[2622,14],[2627,0],[2631,14],[2633,0],[2635,14],[2638,0],[2641,14],[2642,0],[2649,11],[2653,0],[2654,11],[2655,0],[2662,9],[2672,14],[2674,11],[2677,14],[2678,0],[2689,
14],[2692,0],[2693,11],[2702,0],[2703,11],[2706,0],[2707,11],[2729,0],[2730,11],[2737,0],[2738,11],[2740,0],[2741,11],[2746,0],[2748,14],[2749,11],[2750,14],[2758,0],[2759,14],[2762,0],[2763,14],[2766,0],[2768,11],[2769,0],[2784,11],[2786,14],[2788,0],[2790,9],[2800,0],[2809,11],[2810,14],[2816,0],[2817,14],[2820,0],[2821,11],[2829,0],[2831,11],[2833,0],[2835,11],[2857,0],[2858,11],[2865,0],[2866,11],[2868,0],[2869,11],[2874,0],[2876,14],[2877,11],[2878,14],[2885,0],[2887,14],[2889,0],[2891,14],[2894,
0],[2901,14],[2904,0],[2908,11],[2910,0],[2911,11],[2914,14],[2916,0],[2918,9],[2928,0],[2929,11],[2930,0],[2946,14],[2947,11],[2948,0],[2949,11],[2955,0],[2958,11],[2961,0],[2962,11],[2966,0],[2969,11],[2971,0],[2972,11],[2973,0],[2974,11],[2976,0],[2979,11],[2981,0],[2984,11],[2987,0],[2990,11],[3002,0],[3006,14],[3011,0],[3014,14],[3017,0],[3018,14],[3022,0],[3024,11],[3025,0],[3031,14],[3032,0],[3046,9],[3056,0],[3072,14],[3077,11],[3085,0],[3086,11],[3089,0],[3090,11],[3113,0],[3114,11],[3130,
0],[3133,11],[3134,14],[3141,0],[3142,14],[3145,0],[3146,14],[3150,0],[3157,14],[3159,0],[3160,11],[3163,0],[3168,11],[3170,14],[3172,0],[3174,9],[3184,0],[3200,11],[3201,14],[3204,0],[3205,11],[3213,0],[3214,11],[3217,0],[3218,11],[3241,0],[3242,11],[3252,0],[3253,11],[3258,0],[3260,14],[3261,11],[3262,14],[3269,0],[3270,14],[3273,0],[3274,14],[3278,0],[3285,14],[3287,0],[3294,11],[3295,0],[3296,11],[3298,14],[3300,0],[3302,9],[3312,0],[3313,11],[3315,0],[3328,14],[3332,11],[3341,0],[3342,11],[3345,
0],[3346,11],[3387,14],[3389,11],[3390,14],[3397,0],[3398,14],[3401,0],[3402,14],[3406,11],[3407,0],[3412,11],[3415,14],[3416,0],[3423,11],[3426,14],[3428,0],[3430,9],[3440,0],[3450,11],[3456,0],[3457,14],[3460,0],[3461,11],[3479,0],[3482,11],[3506,0],[3507,11],[3516,0],[3517,11],[3518,0],[3520,11],[3527,0],[3530,14],[3531,0],[3535,14],[3541,0],[3542,14],[3543,0],[3544,14],[3552,0],[3558,9],[3568,0],[3570,14],[3572,0],[3633,14],[3634,0],[3636,14],[3643,0],[3655,14],[3663,0],[3664,9],[3674,0],[3761,
14],[3762,0],[3764,14],[3773,0],[3784,14],[3790,0],[3792,9],[3802,0],[3840,11],[3841,0],[3864,14],[3866,0],[3872,9],[3882,0],[3893,14],[3894,0],[3895,14],[3896,0],[3897,14],[3898,0],[3902,14],[3904,11],[3912,0],[3913,11],[3949,0],[3953,14],[3973,0],[3974,14],[3976,11],[3981,14],[3992,0],[3993,14],[4029,0],[4038,14],[4039,0],[4139,14],[4159,0],[4160,9],[4170,0],[4182,14],[4186,0],[4190,14],[4193,0],[4194,14],[4197,0],[4199,14],[4206,0],[4209,14],[4213,0],[4226,14],[4238,0],[4239,14],[4240,9],[4250,
14],[4254,0],[4256,11],[4294,0],[4295,11],[4296,0],[4301,11],[4302,0],[4304,11],[4347,0],[4348,11],[4681,0],[4682,11],[4686,0],[4688,11],[4695,0],[4696,11],[4697,0],[4698,11],[4702,0],[4704,11],[4745,0],[4746,11],[4750,0],[4752,11],[4785,0],[4786,11],[4790,0],[4792,11],[4799,0],[4800,11],[4801,0],[4802,11],[4806,0],[4808,11],[4823,0],[4824,11],[4881,0],[4882,11],[4886,0],[4888,11],[4955,0],[4957,14],[4960,0],[4992,11],[5008,0],[5024,11],[5110,0],[5112,11],[5118,0],[5121,11],[5741,0],[5743,11],[5760,
4],[5761,11],[5787,0],[5792,11],[5867,0],[5870,11],[5881,0],[5888,11],[5901,0],[5902,11],[5906,14],[5909,0],[5920,11],[5938,14],[5941,0],[5952,11],[5970,14],[5972,0],[5984,11],[5997,0],[5998,11],[6001,0],[6002,14],[6004,0],[6068,14],[6100,0],[6109,14],[6110,0],[6112,9],[6122,0],[6155,14],[6158,13],[6159,0],[6160,9],[6170,0],[6176,11],[6265,0],[6272,11],[6277,14],[6279,11],[6313,14],[6314,11],[6315,0],[6320,11],[6390,0],[6400,11],[6431,0],[6432,14],[6444,0],[6448,14],[6460,0],[6470,9],[6480,0],[6608,
9],[6618,0],[6656,11],[6679,14],[6684,0],[6741,14],[6751,0],[6752,14],[6781,0],[6783,14],[6784,9],[6794,0],[6800,9],[6810,0],[6832,14],[6849,0],[6912,14],[6917,11],[6964,14],[6981,11],[6988,0],[6992,9],[7002,0],[7019,14],[7028,0],[7040,14],[7043,11],[7073,14],[7086,11],[7088,9],[7098,11],[7142,14],[7156,0],[7168,11],[7204,14],[7224,0],[7232,9],[7242,0],[7245,11],[7248,9],[7258,11],[7294,0],[7296,11],[7305,0],[7312,11],[7355,0],[7357,11],[7360,0],[7376,14],[7379,0],[7380,14],[7401,11],[7405,14],[7406,
11],[7412,14],[7413,11],[7415,14],[7418,11],[7419,0],[7424,11],[7616,14],[7674,0],[7675,14],[7680,11],[7958,0],[7960,11],[7966,0],[7968,11],[8006,0],[8008,11],[8014,0],[8016,11],[8024,0],[8025,11],[8026,0],[8027,11],[8028,0],[8029,11],[8030,0],[8031,11],[8062,0],[8064,11],[8117,0],[8118,11],[8125,0],[8126,11],[8127,0],[8130,11],[8133,0],[8134,11],[8141,0],[8144,11],[8148,0],[8150,11],[8156,0],[8160,11],[8173,0],[8178,11],[8181,0],[8182,11],[8189,0],[8192,4],[8199,0],[8200,4],[8203,0],[8204,14],[8205,
16],[8206,13],[8208,0],[8216,8],[8218,0],[8228,8],[8229,0],[8231,10],[8232,2],[8234,13],[8239,12],[8240,0],[8255,12],[8257,0],[8260,7],[8261,0],[8276,12],[8277,0],[8287,4],[8288,13],[8293,0],[8294,13],[8304,0],[8305,11],[8306,0],[8319,11],[8320,0],[8336,11],[8349,0],[8400,14],[8433,0],[8450,11],[8451,0],[8455,11],[8456,0],[8458,11],[8468,0],[8469,11],[8470,0],[8473,11],[8478,0],[8484,11],[8485,0],[8486,11],[8487,0],[8488,11],[8489,0],[8490,11],[8494,0],[8495,11],[8506,0],[8508,11],[8512,0],[8517,
11],[8522,0],[8526,11],[8527,0],[8544,11],[8585,0],[9398,11],[9450,0],[11264,11],[11311,0],[11312,11],[11359,0],[11360,11],[11493,0],[11499,11],[11503,14],[11506,11],[11508,0],[11520,11],[11558,0],[11559,11],[11560,0],[11565,11],[11566,0],[11568,11],[11624,0],[11631,11],[11632,0],[11647,14],[11648,11],[11671,0],[11680,11],[11687,0],[11688,11],[11695,0],[11696,11],[11703,0],[11704,11],[11711,0],[11712,11],[11719,0],[11720,11],[11727,0],[11728,11],[11735,0],[11736,11],[11743,0],[11744,14],[11776,0],
[11823,11],[11824,0],[12288,4],[12289,0],[12293,11],[12294,0],[12330,14],[12336,0],[12337,17],[12342,0],[12347,11],[12349,0],[12441,14],[12443,17],[12445,0],[12448,17],[12539,0],[12540,17],[12544,0],[12549,11],[12592,0],[12593,11],[12687,0],[12704,11],[12736,0],[12784,17],[12800,0],[13008,17],[13055,0],[13056,17],[13144,0],[40960,11],[42125,0],[42192,11],[42238,0],[42240,11],[42509,0],[42512,11],[42528,9],[42538,11],[42540,0],[42560,11],[42607,14],[42611,0],[42612,14],[42622,0],[42623,11],[42654,
14],[42656,11],[42736,14],[42738,0],[42760,11],[42944,0],[42946,11],[42955,0],[42997,11],[43010,14],[43011,11],[43014,14],[43015,11],[43019,14],[43020,11],[43043,14],[43048,0],[43052,14],[43053,0],[43072,11],[43124,0],[43136,14],[43138,11],[43188,14],[43206,0],[43216,9],[43226,0],[43232,14],[43250,11],[43256,0],[43259,11],[43260,0],[43261,11],[43263,14],[43264,9],[43274,11],[43302,14],[43310,0],[43312,11],[43335,14],[43348,0],[43360,11],[43389,0],[43392,14],[43396,11],[43443,14],[43457,0],[43471,
11],[43472,9],[43482,0],[43493,14],[43494,0],[43504,9],[43514,0],[43520,11],[43561,14],[43575,0],[43584,11],[43587,14],[43588,11],[43596,14],[43598,0],[43600,9],[43610,0],[43643,14],[43646,0],[43696,14],[43697,0],[43698,14],[43701,0],[43703,14],[43705,0],[43710,14],[43712,0],[43713,14],[43714,0],[43744,11],[43755,14],[43760,0],[43762,11],[43765,14],[43767,0],[43777,11],[43783,0],[43785,11],[43791,0],[43793,11],[43799,0],[43808,11],[43815,0],[43816,11],[43823,0],[43824,11],[43882,0],[43888,11],[44003,
14],[44011,0],[44012,14],[44014,0],[44016,9],[44026,0],[44032,11],[55204,0],[55216,11],[55239,0],[55243,11],[55292,0],[64256,11],[64263,0],[64275,11],[64280,0],[64285,15],[64286,14],[64287,15],[64297,0],[64298,15],[64311,0],[64312,15],[64317,0],[64318,15],[64319,0],[64320,15],[64322,0],[64323,15],[64325,0],[64326,15],[64336,11],[64434,0],[64467,11],[64830,0],[64848,11],[64912,0],[64914,11],[64968,0],[65008,11],[65020,0],[65024,14],[65040,7],[65041,0],[65043,10],[65044,7],[65045,0],[65056,14],[65072,
0],[65075,12],[65077,0],[65101,12],[65104,7],[65105,0],[65106,8],[65107,0],[65108,7],[65109,10],[65110,0],[65136,11],[65141,0],[65142,11],[65277,0],[65279,13],[65280,0],[65287,8],[65288,0],[65292,7],[65293,0],[65294,8],[65295,0],[65296,9],[65306,10],[65307,7],[65308,0],[65313,11],[65339,0],[65343,12],[65344,0],[65345,11],[65371,0],[65382,17],[65438,14],[65440,11],[65471,0],[65474,11],[65480,0],[65482,11],[65488,0],[65490,11],[65496,0],[65498,11],[65501,0],[65529,13],[65532,0],[65536,11],[65548,0],
[65549,11],[65575,0],[65576,11],[65595,0],[65596,11],[65598,0],[65599,11],[65614,0],[65616,11],[65630,0],[65664,11],[65787,0],[65856,11],[65909,0],[66045,14],[66046,0],[66176,11],[66205,0],[66208,11],[66257,0],[66272,14],[66273,0],[66304,11],[66336,0],[66349,11],[66379,0],[66384,11],[66422,14],[66427,0],[66432,11],[66462,0],[66464,11],[66500,0],[66504,11],[66512,0],[66513,11],[66518,0],[66560,11],[66718,0],[66720,9],[66730,0],[66736,11],[66772,0],[66776,11],[66812,0],[66816,11],[66856,0],[66864,11],
[66916,0],[67072,11],[67383,0],[67392,11],[67414,0],[67424,11],[67432,0],[67584,11],[67590,0],[67592,11],[67593,0],[67594,11],[67638,0],[67639,11],[67641,0],[67644,11],[67645,0],[67647,11],[67670,0],[67680,11],[67703,0],[67712,11],[67743,0],[67808,11],[67827,0],[67828,11],[67830,0],[67840,11],[67862,0],[67872,11],[67898,0],[67968,11],[68024,0],[68030,11],[68032,0],[68096,11],[68097,14],[68100,0],[68101,14],[68103,0],[68108,14],[68112,11],[68116,0],[68117,11],[68120,0],[68121,11],[68150,0],[68152,
14],[68155,0],[68159,14],[68160,0],[68192,11],[68221,0],[68224,11],[68253,0],[68288,11],[68296,0],[68297,11],[68325,14],[68327,0],[68352,11],[68406,0],[68416,11],[68438,0],[68448,11],[68467,0],[68480,11],[68498,0],[68608,11],[68681,0],[68736,11],[68787,0],[68800,11],[68851,0],[68864,11],[68900,14],[68904,0],[68912,9],[68922,0],[69248,11],[69290,0],[69291,14],[69293,0],[69296,11],[69298,0],[69376,11],[69405,0],[69415,11],[69416,0],[69424,11],[69446,14],[69457,0],[69552,11],[69573,0],[69600,11],[69623,
0],[69632,14],[69635,11],[69688,14],[69703,0],[69734,9],[69744,0],[69759,14],[69763,11],[69808,14],[69819,0],[69821,13],[69822,0],[69837,13],[69838,0],[69840,11],[69865,0],[69872,9],[69882,0],[69888,14],[69891,11],[69927,14],[69941,0],[69942,9],[69952,0],[69956,11],[69957,14],[69959,11],[69960,0],[69968,11],[70003,14],[70004,0],[70006,11],[70007,0],[70016,14],[70019,11],[70067,14],[70081,11],[70085,0],[70089,14],[70093,0],[70094,14],[70096,9],[70106,11],[70107,0],[70108,11],[70109,0],[70144,11],[70162,
0],[70163,11],[70188,14],[70200,0],[70206,14],[70207,0],[70272,11],[70279,0],[70280,11],[70281,0],[70282,11],[70286,0],[70287,11],[70302,0],[70303,11],[70313,0],[70320,11],[70367,14],[70379,0],[70384,9],[70394,0],[70400,14],[70404,0],[70405,11],[70413,0],[70415,11],[70417,0],[70419,11],[70441,0],[70442,11],[70449,0],[70450,11],[70452,0],[70453,11],[70458,0],[70459,14],[70461,11],[70462,14],[70469,0],[70471,14],[70473,0],[70475,14],[70478,0],[70480,11],[70481,0],[70487,14],[70488,0],[70493,11],[70498,
14],[70500,0],[70502,14],[70509,0],[70512,14],[70517,0],[70656,11],[70709,14],[70727,11],[70731,0],[70736,9],[70746,0],[70750,14],[70751,11],[70754,0],[70784,11],[70832,14],[70852,11],[70854,0],[70855,11],[70856,0],[70864,9],[70874,0],[71040,11],[71087,14],[71094,0],[71096,14],[71105,0],[71128,11],[71132,14],[71134,0],[71168,11],[71216,14],[71233,0],[71236,11],[71237,0],[71248,9],[71258,0],[71296,11],[71339,14],[71352,11],[71353,0],[71360,9],[71370,0],[71453,14],[71468,0],[71472,9],[71482,0],[71680,
11],[71724,14],[71739,0],[71840,11],[71904,9],[71914,0],[71935,11],[71943,0],[71945,11],[71946,0],[71948,11],[71956,0],[71957,11],[71959,0],[71960,11],[71984,14],[71990,0],[71991,14],[71993,0],[71995,14],[71999,11],[72E3,14],[72001,11],[72002,14],[72004,0],[72016,9],[72026,0],[72096,11],[72104,0],[72106,11],[72145,14],[72152,0],[72154,14],[72161,11],[72162,0],[72163,11],[72164,14],[72165,0],[72192,11],[72193,14],[72203,11],[72243,14],[72250,11],[72251,14],[72255,0],[72263,14],[72264,0],[72272,11],
[72273,14],[72284,11],[72330,14],[72346,0],[72349,11],[72350,0],[72384,11],[72441,0],[72704,11],[72713,0],[72714,11],[72751,14],[72759,0],[72760,14],[72768,11],[72769,0],[72784,9],[72794,0],[72818,11],[72848,0],[72850,14],[72872,0],[72873,14],[72887,0],[72960,11],[72967,0],[72968,11],[72970,0],[72971,11],[73009,14],[73015,0],[73018,14],[73019,0],[73020,14],[73022,0],[73023,14],[73030,11],[73031,14],[73032,0],[73040,9],[73050,0],[73056,11],[73062,0],[73063,11],[73065,0],[73066,11],[73098,14],[73103,
0],[73104,14],[73106,0],[73107,14],[73112,11],[73113,0],[73120,9],[73130,0],[73440,11],[73459,14],[73463,0],[73648,11],[73649,0],[73728,11],[74650,0],[74752,11],[74863,0],[74880,11],[75076,0],[77824,11],[78895,0],[78896,13],[78905,0],[82944,11],[83527,0],[92160,11],[92729,0],[92736,11],[92767,0],[92768,9],[92778,0],[92880,11],[92910,0],[92912,14],[92917,0],[92928,11],[92976,14],[92983,0],[92992,11],[92996,0],[93008,9],[93018,0],[93027,11],[93048,0],[93053,11],[93072,0],[93760,11],[93824,0],[93952,
11],[94027,0],[94031,14],[94032,11],[94033,14],[94088,0],[94095,14],[94099,11],[94112,0],[94176,11],[94178,0],[94179,11],[94180,14],[94181,0],[94192,14],[94194,0],[110592,17],[110593,0],[110948,17],[110952,0],[113664,11],[113771,0],[113776,11],[113789,0],[113792,11],[113801,0],[113808,11],[113818,0],[113821,14],[113823,0],[113824,13],[113828,0],[119141,14],[119146,0],[119149,14],[119155,13],[119163,14],[119171,0],[119173,14],[119180,0],[119210,14],[119214,0],[119362,14],[119365,0],[119808,11],[119893,
0],[119894,11],[119965,0],[119966,11],[119968,0],[119970,11],[119971,0],[119973,11],[119975,0],[119977,11],[119981,0],[119982,11],[119994,0],[119995,11],[119996,0],[119997,11],[120004,0],[120005,11],[120070,0],[120071,11],[120075,0],[120077,11],[120085,0],[120086,11],[120093,0],[120094,11],[120122,0],[120123,11],[120127,0],[120128,11],[120133,0],[120134,11],[120135,0],[120138,11],[120145,0],[120146,11],[120486,0],[120488,11],[120513,0],[120514,11],[120539,0],[120540,11],[120571,0],[120572,11],[120597,
0],[120598,11],[120629,0],[120630,11],[120655,0],[120656,11],[120687,0],[120688,11],[120713,0],[120714,11],[120745,0],[120746,11],[120771,0],[120772,11],[120780,0],[120782,9],[120832,0],[121344,14],[121399,0],[121403,14],[121453,0],[121461,14],[121462,0],[121476,14],[121477,0],[121499,14],[121504,0],[121505,14],[121520,0],[122880,14],[122887,0],[122888,14],[122905,0],[122907,14],[122914,0],[122915,14],[122917,0],[122918,14],[122923,0],[123136,11],[123181,0],[123184,14],[123191,11],[123198,0],[123200,
9],[123210,0],[123214,11],[123215,0],[123584,11],[123628,14],[123632,9],[123642,0],[124928,11],[125125,0],[125136,14],[125143,0],[125184,11],[125252,14],[125259,11],[125260,0],[125264,9],[125274,0],[126464,11],[126468,0],[126469,11],[126496,0],[126497,11],[126499,0],[126500,11],[126501,0],[126503,11],[126504,0],[126505,11],[126515,0],[126516,11],[126520,0],[126521,11],[126522,0],[126523,11],[126524,0],[126530,11],[126531,0],[126535,11],[126536,0],[126537,11],[126538,0],[126539,11],[126540,0],[126541,
11],[126544,0],[126545,11],[126547,0],[126548,11],[126549,0],[126551,11],[126552,0],[126553,11],[126554,0],[126555,11],[126556,0],[126557,11],[126558,0],[126559,11],[126560,0],[126561,11],[126563,0],[126564,11],[126565,0],[126567,11],[126571,0],[126572,11],[126579,0],[126580,11],[126584,0],[126585,11],[126589,0],[126590,11],[126591,0],[126592,11],[126602,0],[126603,11],[126620,0],[126625,11],[126628,0],[126629,11],[126634,0],[126635,11],[126652,0],[127280,11],[127306,0],[127312,11],[127338,0],[127344,
11],[127370,0],[127462,18],[127488,0],[127995,14],[128E3,0],[130032,9],[130042,0],[917505,13],[917506,0],[917536,14],[917632,0],[917760,14],[918E3,0]]})(l||(l={}));(function(b){function a(a){return!Array.from(a).map(f).every(function(a){return 3===a||1===a||2===a||4===a})}function c(a){function b(b){return b>=a.length?a.length:e(a[b])?b+2:b+1}function c(b){return 0>b?19:b>=a.length?20:e(a[b])?f(a[b]+a[b+1]):f(a[b])}function d(a){return 11===a||15===a}if(0===a.length)return[];var k=[];var g=0;var p=
19,n=19;var h=c(0);var u=0;do{var l=g;g=b(g);h=[p,n,h,c(g)];var y=h[0];p=h[1];n=h[2];h=h[3];if(19===p)k.push(l);else{if(20===n){k.push(l);break}if(3!==p||1!==n)if(2===p||3===p||1===p)k.push(l);else if(2===n||3===n||1===n)k.push(l);else if(4!==p||4!=n){for(;13===n||14===n||16===n;)g=[g,b(g)],l=g[0],g=g[1],h=[h,c(g)],n=h[0],h=h[1];if(20===n){k.push(l);break}for(;13===h||14===h||16===h;)g=b(g),h=c(g);if(!d(p)||!d(n))if(!d(p)||!d(h)||10!==n&&8!==n&&6!==n)if(!d(y)||!d(n)||10!==p&&8!==p&&6!==p)if(15!==
p||6!==n)if(15!==p||5!==n||15!==h)if(15!==y||5!==p||15!==n)if(9!==p||9!==n)if(!d(p)||9!==n)if(9!==p||!d(n))if(9!==y||9!==n||7!==p&&8!==p&&6!==p)if(9!==p||9!==h||7!==n&&8!==n&&6!==n)if(17!==p||17!==n)if(!d(p)&&9!==p&&17!==p&&12!==p||12!==n)if(!d(n)&&9!==n&&17!==n||12!==p){if(18===n){if(u+=1,1==u%2)continue}else u=0;k.push(l)}}}}while(l<a.length);return k}function e(a){a=a.charCodeAt(0);return 55296<=a&&56319>=a}function f(a){a=a.codePointAt(0);return g(a,0,h.length-1)}function g(a,b,c){if(c<b)return 0;
var d=b+~~((c-b)/2),e=h[d],k=h[d+1];k=k?k[0]:Infinity;return a<e[0]?g(a,b,d-1):a>=k?g(a,d+1,c):e[1]}b.default_=function(b){var d=c(b);if(0==d.length)return[];for(var e=[],k=0;k<d.length-1;k++){var f=d[k+1],g=new n(b,d[k],f);a(g.text)?e.push(g):k==d.length-2&&(g=new n(b,f,f),e.push(g))}return e};var h=b.data.WORD_BREAK_PROPERTY,n=function(){function a(a,b,c){this._source=a;this.start=b;this.end=c}Object.defineProperty(a.prototype,"text",{get:function(){return this._source.substring(this.start,this.end)},
enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"length",{get:function(){return this.end-this.start},enumerable:!0,configurable:!0});return a}()})(l||(l={}));l["default"]=l.default_;(function(b){b.placeholder=function(a){var b=0;return a.split(/\s+/).map(function(a){a={start:b,end:b+a.length,text:a,length:a.length};b=a.end;return a})}})(l||(l={}));"undefined"!==typeof module&&module.exports&&(module.exports.wordBreakers=l);(function(b){b.SENTINEL_CODE_UNIT="\ufdd0";b.applyTransform=
function(a,b){var c=b.left||"",d=c.length;c=c.substring(0,d-(d<a.deleteLeft?d:a.deleteLeft))+(a.insert||"");d=b.right||"";var e=d.length;a=d.substring(e<a.deleteRight?e:a.deleteRight);return{left:c,right:a,startOfBuffer:b.startOfBuffer,endOfBuffer:b.endOfBuffer}};b.prependTransform=function(a,b){a.insert=b.insert+a.insert;a.deleteLeft+=b.deleteLeft;b.deleteRight&&(a.deleteRight=(a.deleteRight||0)+b.deleteRight)};b.isHighSurrogate=function(a){"string"==typeof a&&(a=a.charCodeAt(0));return 55296<=a&&
56319>=a};b.isSentinel=function(a){return a==b.SENTINEL_CODE_UNIT}})(h||(h={}));(function(b){var a=function(){function a(a,b){void 0===b&&(b=[]);this.comparator=a;this.heap=Array.from(b);this.heapify()}a.leftChildIndex=function(a){return 2*a+1};a.rightChildIndex=function(a){return 2*a+2};a.parentIndex=function(a){return Math.floor((a-1)/2)};a.prototype.heapify=function(b,c){void 0!=b&&void 0!=c||this.heapify(0,this.count-1);for(var d=[],e=-1,k=c;k>=b;k--)c=a.parentIndex(k),this.siftDown(k)&&c<b&&
e!=c&&(d.push(c),e=c);for(e=-1;0<d.length;)b=d.shift(),c=a.parentIndex(b),this.siftDown(b)&&0<=c&&e!=c&&(d.push(c),e=c)};Object.defineProperty(a.prototype,"count",{get:function(){return this.heap.length},enumerable:!0,configurable:!0});a.prototype.peek=function(){return this.heap[0]};a.prototype.enqueue=function(b){var c=this.heap.length;this.heap.push(b);b=a.parentIndex;for(var d=b(c);0!==c&&0>this.comparator(this.heap[c],this.heap[d]);){var e=this.heap[c];this.heap[c]=this.heap[d];this.heap[d]=
e;c=d;d=b(c)}};a.prototype.enqueueAll=function(b){var c=this.count;this.heap=this.heap.concat(b);b=a.parentIndex(c);this.heapify(0<=b?b:0,a.parentIndex(this.count-1))};a.prototype.dequeue=function(){if(0!=this.count){var a=this.heap[0],b=this.heap.pop();0<this.heap.length&&(this.heap[0]=b,this.siftDown(0));return a}};a.prototype.siftDown=function(b){var c=a.leftChildIndex(b),d=a.rightChildIndex(b),e=b;c<this.heap.length&&0>this.comparator(this.heap[c],this.heap[e])&&(e=c);d<this.heap.length&&0>this.comparator(this.heap[d],
this.heap[e])&&(e=d);return e!=b?(c=this.heap[b],this.heap[b]=this.heap[e],this.heap[e]=c,this.siftDown(e),!0):!1};return a}();b.PriorityQueue=a})(h||(h={}));var r=this&&this.__generator||function(b,a){function c(a){return function(b){return e([a,b])}}function e(c){if(g)throw new TypeError("Generator is already executing.");for(;f;)try{if(g=1,h&&(n=c[0]&2?h["return"]:c[0]?h["throw"]||((n=h["return"])&&n.call(h),0):h.next)&&!(n=n.call(h,c[1])).done)return n;if(h=0,n)c=[c[0]&2,n.value];switch(c[0]){case 0:case 1:n=
c;break;case 4:return f.label++,{value:c[1],done:!1};case 5:f.label++;h=c[1];c=[0];continue;case 7:c=f.ops.pop();f.trys.pop();continue;default:if(!(n=f.trys,n=0<n.length&&n[n.length-1])&&(6===c[0]||2===c[0])){f=0;continue}if(3===c[0]&&(!n||c[1]>n[0]&&c[1]<n[3]))f.label=c[1];else if(6===c[0]&&f.label<n[1])f.label=n[1],n=c;else if(n&&f.label<n[2])f.label=n[2],f.ops.push(c);else{n[2]&&f.ops.pop();f.trys.pop();continue}}c=a.call(b,f)}catch(la){c=[6,la],h=0}finally{g=n=0}if(c[0]&5)throw c[1];return{value:c[0]?
c[1]:void 0,done:!0}}var f={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},g,h,n,u;return u={next:c(0),"throw":c(1),"return":c(2)},"function"===typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u};(function(b){function a(b,c,d){void 0===d&&(d=0);if("leaf"===b.type||d===c.length)return b;var e=c[d];return b.children[e]?a(b.children[e],c,d+1):null}function c(a,c,d,e){void 0===e&&(e=12);var k=new b.PriorityQueue(function(a,b){return(b?b.weight:0)-(a?a.weight:0)}),
f=[];if("leaf"===a.type){var g=0;for(a=a.entries;g<a.length;g++){var n=a[g];if(n.key.startsWith(c)&&(f.push({text:n.content,p:n.weight/d}),f.length>=e))break}}else{k.enqueue(a);var h=void 0;c=function(){if("type"in h)if("leaf"===h.type)k.enqueueAll(h.entries);else{var a=h;k.enqueueAll(h.values.map(function(b){return a.children[b]}))}else if(f.push({text:h.content,p:h.weight/d}),f.length>=e)return{value:f}};for(;h=k.dequeue();)if(g=c(),"object"===typeof g)return g.value}return f}function e(a){return a.normalize("NFD").replace(/[\u0300-\u036f]/g,
"").toLowerCase()}var f=function(){function a(a,b){void 0===b&&(b={});this._trie=new g(a.root,a.totalWeight,b.searchTermToKey||e);(a=b.wordBreaker)||(a=("undefined"!==typeof l?l:require("@keymanapp/models-wordBreakers").wordBreakers)["default"]);this.breakWords=a;this.punctuation=b.punctuation}a.prototype.configure=function(a){return this.configuration={leftContextCodePoints:a.maxLeftContextCodePoints,rightContextCodePoints:a.maxRightContextCodePoints}};a.prototype.predict=function(a,c){function d(a){for(var b=
[],c=0;c<a.length;c++){var d=a[c];b.push({sample:d,p:d.p})}return b}if(!a.insert&&c.startOfBuffer&&c.endOfBuffer)return d(this._trie.firstN(12).map(function(a){var b=a.text;return{transform:{insert:b,deleteLeft:0},displayAs:b,p:a.p}}));c=b.applyTransform(a,c);var e=a.deleteLeft-a.insert.kmwLength(),k=this.getLastWord(c.left);return d(this._trie.lookup(k).map(function(a){var b=a.text;a=a.p;return{transform:{insert:b,deleteLeft:e+k.kmwLength()},displayAs:b,p:a}}))};a.prototype.getLastWord=function(a){a=
this.breakWords(a);return 0<a.length?a.pop().text:""};a.prototype.wordbreak=function(a){return this.getLastWord(a.left)};a.prototype.traverseFromRoot=function(){return new a.Traversal(this._trie.root,"")};a.Traversal=function(){function c(a,b){this.root=a;this.prefix=b}c.prototype.children=function(){var c,d,e,k,f,g,h,n,p,l,x,y;return r(this,function(u){switch(u.label){case 0:c=this.root;if("internal"!=c.type)return[3,5];d=function(d){var k,f,g,h,n,p,l,u,w;return r(this,function(x){switch(x.label){case 0:k=
c.children[d];if(!b.isHighSurrogate(d))return[3,8];if("internal"!=k.type)return[3,5];f=k;g=function(b){var c;return r(this,function(k){switch(k.label){case 0:return c=e.prefix+d+b,[4,{char:d+b,traversal:function(){return new a.Traversal(f.children[b],c)}}];case 1:return k.sent(),[2]}})};h=0;n=f.values;x.label=1;case 1:if(!(h<n.length))return[3,4];p=n[h];return[5,g(p)];case 2:x.sent(),x.label=3;case 3:return h++,[3,1];case 4:return[3,7];case 5:return l=k.entries[0].key,d+=l[e.prefix.length+1],u=e.prefix+
d,[4,{char:d,traversal:function(){return new a.Traversal(k,u)}}];case 6:x.sent(),x.label=7;case 7:return[3,11];case 8:return b.isSentinel(d)?[2,"continue"]:[3,9];case 9:return w=e.prefix+d,[4,{char:d,traversal:function(){return new a.Traversal(k,w)}}];case 10:x.sent(),x.label=11;case 11:return[2]}})};e=this;k=0;f=c.values;u.label=1;case 1:if(!(k<f.length))return[3,4];g=f[k];return[5,d(g)];case 2:u.sent(),u.label=3;case 3:return k++,[3,1];case 4:return[2];case 5:h=this.prefix,n=c.entries.filter(function(a){return a.key!=
h&&h.length<a.key.length}),p=function(d){var e;return r(this,function(k){switch(k.label){case 0:return e=d[h.length],b.isHighSurrogate(e)&&(e+=d[h.length+1]),[4,{char:e,traversal:function(){return new a.Traversal(c,h+e)}}];case 1:return k.sent(),[2]}})},l=0,x=n,u.label=6;case 6:if(!(l<x.length))return[3,9];y=x[l].key;return[5,p(y)];case 7:u.sent(),u.label=8;case 8:return l++,[3,6];case 9:return[2]}})};Object.defineProperty(c.prototype,"entries",{get:function(){if("leaf"==this.root.type){var a=this.prefix;
return this.root.entries.filter(function(b){return b.key==a}).map(function(a){return a.content})}var c=this.root.children[b.SENTINEL_CODE_UNIT];return c&&"leaf"==c.type?c.entries.map(function(a){return a.content}):[]},enumerable:!0,configurable:!0});return c}();return a}();b.TrieModel=f;var g=function(){function b(a,b,c){this.root=a;this.toKey=c;this.totalWeight=b}b.prototype.lookup=function(b){b=this.toKey(b);var d=a(this.root,b);return null===d?[]:c(d,b,this.totalWeight)};b.prototype.firstN=function(a){return c(this.root,
"",this.totalWeight,a)};return b}()})(h||(h={}));"undefined"!=typeof module&&"undefined"!=typeof module.exports&&(module.exports.models=h);var g=function(){function b(a){this.lexicalModel=a;this.punctuation=b.determinePunctuationFromModel(a)}b.prototype.isWhitespace=function(a){if(""==a.insert)return!1;a=a.insert;a=a.replace(/.*[\u0009\u000A\u000D\u0020\u00a0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u200b\u2028\u2029\u202f\u205f\u3000]/i,"");return""==a};b.prototype.isBackspace=
function(a){return""==a.insert&&0<a.deleteLeft};b.prototype.predict=function(a,c){var d=[],e=this.punctuation,f={};a instanceof Array||(a=[{sample:a,p:1}]);var g=a.sort(function(a,b){return b.p-a.p})[0].sample,n=this.isWhitespace(g),l=this.isBackspace(g),w=h.applyTransform(g,c),r=this.lexicalModel.wordbreak(w),t=null;w=function(a){var b=a.sample;if(H.isWhitespace(b)&&!n||H.isBackspace(b)&&!l)return"continue";var d=!1;if(H.isWhitespace(b)){var k=h.applyTransform(b,c);d=""==H.lexicalModel.wordbreak(k)}H.lexicalModel.predict(b,
c).forEach(function(c){void 0!==b.id&&(c.sample.transformId=b.id);d&&h.prependTransform(c.sample.transform,b);0<c.sample.transform.insert.length&&(c.sample.transform.insert+=e.insertAfterWord);var k=c.sample.displayAs;if(k==r)t=c.sample,t.tag="keep";else{var g=f[k];g?g.p+=c.p*a.p:f[k]={sample:c.sample,p:c.p*a.p}}})};for(var H=this,L=0;L<a.length;L++)w(a[L]);t||""==r||(t={displayAs:r,transformId:g.id,transform:{insert:g.insert+e.insertAfterWord,deleteLeft:g.deleteLeft,deleteRight:g.deleteRight,id:g.id},
tag:"keep"});t&&(a=e.quotesForKeepSuggestion,g=a.open,a=a.close,t.displayAs=e.isRTL?a+t.displayAs+g:g+t.displayAs+a);for(var q in f)d.push(f[q]);d=d.sort(function(a,b){return b.p-a.p});d=d.splice(0,b.MAX_SUGGESTIONS).map(function(a){return a.sample});t&&(d=[t].concat(d));return d};b.determinePunctuationFromModel=function(a){var b=c;if(!a.punctuation)return b;a=a.punctuation;var e=a.insertAfterWord;""===e||e||(e=b.insertAfterWord);var f=a.quotesForKeepSuggestion;f||(f=b.quotesForKeepSuggestion);return{insertAfterWord:e,
quotesForKeepSuggestion:f,isRTL:a.isRTL}};b.MAX_SUGGESTIONS=12;return b}(),c={quotesForKeepSuggestion:{open:"\u201c",close:"\u201d"},insertAfterWord:" "},b=this&&this.__assign||function(){b=Object.assign||function(b){for(var a,c=1,e=arguments.length;c<e;c++){a=arguments[c];for(var f in a)Object.prototype.hasOwnProperty.call(a,f)&&(b[f]=a[f])}return b};return b.apply(this,arguments)};f=function(){function c(a){void 0===a&&(a={importScripts:null,postMessage:null});this._postMessage=a.postMessage||postMessage;
this._importScripts=a.importScripts||importScripts;this.setupConfigState()}c.prototype.error=function(a,b){this.cast("error",{log:a,error:b&&b.stack?b.stack:void 0})};c.prototype.onMessage=function(a){if(!a.data.message)throw Error("Missing required 'message' property: "+a.data);a=a.data;if("load"==a.message){if(a.model==this._currentModelSource){"undefined"!==typeof console&&console.warn("Duplicate model load message detected - squashing!");return}this._currentModelSource=a.model}else"unload"==a.message&&
(this._currentModelSource=null);this.state.handleMessage(a)};c.prototype.cast=function(a,c){var d=this._postMessage;d(b({message:a},c))};c.prototype.loadModel=function(a){try{var b=a.configure(this._platformCapabilities);b.leftContextCodePoints||(b.leftContextCodePoints=b.leftContextCodeUnits);b.rightContextCodePoints||(b.rightContextCodePoints=b.rightContextCodeUnits);b.leftContextCodePoints||(b.leftContextCodePoints=this._platformCapabilities.maxLeftContextCodePoints);b.rightContextCodePoints||
(b.rightContextCodePoints=this._platformCapabilities.maxRightContextCodePoints||0);this.transitionToReadyState(a);this.cast("ready",{configuration:b})}catch(k){this.error("loadModel failed!",k)}};c.prototype.loadModelFile=function(a){try{this._importScripts(a)}catch(d){this.error("Error occurred when attempting to load dictionary",d)}};c.prototype.unloadModel=function(){this.transitionToLoadingState()};c.prototype.setupConfigState=function(){var a=this;this.state={name:"unconfigured",handleMessage:function(b){if("config"!==
b.message)throw Error("invalid message; expected 'config' but got "+b.message);a._platformCapabilities=b.capabilities;a.transitionToLoadingState()}}};c.prototype.transitionToLoadingState=function(){var a=this;this.state={name:"modelless",handleMessage:function(b){if("load"!==b.message)throw Error("invalid message; expected 'load' but got "+b.message);a.loadModelFile(b.model)}}};c.prototype.transitionToReadyState=function(a){var b=this,c=new g(a);this.state={name:"ready",handleMessage:function(d){switch(d.message){case "predict":var e=
c.predict(d.transform,d.context);b.cast("suggestions",{token:d.token,suggestions:e});break;case "wordbreak":e=a.wordbreak(d.context);b.cast("currentword",{token:d.token,word:e});break;case "unload":b.unloadModel();break;default:throw Error("invalid message; expected one of {'predict', 'unload'} but got "+d.message);}},compositor:c}};c.install=function(a){var b=new c({postMessage:a.postMessage,importScripts:a.importScripts.bind(a)});a.onmessage=b.onMessage.bind(b);a.LMLayerWorker=b;a.models=h;a.wordBreakers=
l;return b};return c}();"undefined"!==typeof module&&"undefined"!==typeof module.exports?(module.exports=f,module.exports.models=h,module.exports.wordBreakers=l,module.exports.ModelCompositor=g):"undefined"!==typeof self&&"postMessage"in self?f.install(self):window.LMLayerWorker=f}
(function(f,h){"function"===typeof define&&define.amd?define(h):"object"===typeof exports?module.exports=h():f.returnExports=h()})(this,function(){var f=Function.call.bind(Function.apply),h=Function.call.bind(Function.call),l=Array.isArray,r=Object.keys,g=function(a){try{return a(),!1}catch(A){return!0}},c=function(a){try{return a()}catch(A){return!1}},b=function(a){return function(){return!f(a,this,arguments)}}(g),e=function(){return!g(function(){return Object.defineProperty({},"x",{get:function(){}})})},
a=!!Object.defineProperty&&e(),d="foo"===function(){}.name,k=Function.call.bind(Array.prototype.forEach),p=Function.call.bind(Array.prototype.reduce),x=Function.call.bind(Array.prototype.filter),y=Function.call.bind(Array.prototype.some),n=function(b,c,d,e){!e&&c in b||(a?Object.defineProperty(b,c,{configurable:!0,enumerable:!1,writable:!0,value:d}):b[c]=d)},u=function(a,b,c){k(r(b),function(d){n(a,d,b[d],!!c)})},w=Function.call.bind(Object.prototype.toString),la="function"===typeof/abc/?function(a){return"function"===
typeof a&&"[object Function]"===w(a)}:function(a){return"function"===typeof a},t={getter:function(b,c,d){if(!a)throw new TypeError("getters require true ES5 support");Object.defineProperty(b,c,{configurable:!0,enumerable:!1,get:d})},proxy:function(b,c,d){if(!a)throw new TypeError("getters require true ES5 support");var e=Object.getOwnPropertyDescriptor(b,c);Object.defineProperty(d,c,{configurable:e.configurable,enumerable:e.enumerable,get:function(){return b[c]},set:function(a){b[c]=a}})},redefine:function(b,
c,d){if(a){var e=Object.getOwnPropertyDescriptor(b,c);e.value=d;Object.defineProperty(b,c,e)}else b[c]=d},defineByDescriptor:function(b,c,d){a?Object.defineProperty(b,c,d):"value"in d&&(b[c]=d.value)},preserveToString:function(a,b){b&&la(b.toString)&&n(a,"toString",b.toString.bind(b),!0)}},H=Object.create||function(a,b){var c=function(){};c.prototype=a;var d=new c;"undefined"!==typeof b&&r(b).forEach(function(a){t.defineByDescriptor(d,a,b[a])});return d},L=function(a,b){return Object.setPrototypeOf?
c(function(){var c=function sa(b){b=new a(b);Object.setPrototypeOf(b,sa.prototype);return b};Object.setPrototypeOf(c,a);c.prototype=H(a.prototype,{constructor:{value:c}});return b(c)}):!1},q=function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof global)return global;throw Error("unable to locate global object");}(),ea=q.isFinite,Da=Function.call.bind(String.prototype.indexOf),Ga=Function.apply.bind(Array.prototype.indexOf),ma=Function.call.bind(Array.prototype.concat),
N=Function.call.bind(String.prototype.slice),U=Function.call.bind(Array.prototype.push),W=Function.apply.bind(Array.prototype.push),fa=Function.call.bind(Array.prototype.shift),B=Math.max,R=Math.min,E=Math.floor,F=Math.abs,G=Math.exp,V=Math.log,X=Math.sqrt,ta=Function.call.bind(Object.prototype.hasOwnProperty),ha=function(){},D=q.Map,Xb=D&&D.prototype["delete"],na=D&&D.prototype.get,oa=D&&D.prototype.has,db=D&&D.prototype.set,z=q.Symbol||{},Ha=z.species||"@@species",I=Number.isNaN||function(a){return a!==
a},Ia=Number.isFinite||function(a){return"number"===typeof a&&ea(a)},ia=la(Math.sign)?Math.sign:function(a){a=Number(a);return 0===a||I(a)?a:0>a?-1:1},ja=function(a){a=Number(a);return-1>a||I(a)?NaN:0===a||Infinity===a?a:-1===a?-Infinity:0===1+a-1?a:a*(V(1+a)/(1+a-1))},eb=function(a){return"[object Arguments]"===w(a)},Yb=function(a){return null!==a&&"object"===typeof a&&"number"===typeof a.length&&0<=a.length&&"[object Array]"!==w(a)&&"[object Function]"===w(a.callee)},Ja=eb(arguments)?eb:Yb,C={primitive:function(a){return null===
a||"function"!==typeof a&&"object"!==typeof a},string:function(a){return"[object String]"===w(a)},regex:function(a){return"[object RegExp]"===w(a)},symbol:function(a){return"function"===typeof q.Symbol&&"symbol"===typeof a}},v=function(a,b,c){var d=a[b];n(a,b,c,!0);t.preserveToString(a[b],d)},pa="function"===typeof z&&"function"===typeof z["for"]&&C.symbol(z()),O=C.symbol(z.iterator)?z.iterator:"_es6-shim iterator_";q.Set&&"function"===typeof(new q.Set)["@@iterator"]&&(O="@@iterator");q.Reflect||
n(q,"Reflect",{},!0);var Y=q.Reflect,Ka=String,La="undefined"!==typeof document&&document?document.all:null,S=null==La?function(a){return null==a}:function(a){return null==a&&a!==La},m={Call:function(a,b){var c=2<arguments.length?arguments[2]:[];if(!m.IsCallable(a))throw new TypeError(a+" is not a function");return f(a,b,c)},RequireObjectCoercible:function(a,b){if(S(a))throw new TypeError(b||"Cannot call method on "+a);return a},TypeIsObject:function(a){return void 0===a||null===a||!0===a||!1===a?
!1:"function"===typeof a||"object"===typeof a||a===La},ToObject:function(a,b){return Object(m.RequireObjectCoercible(a,b))},IsCallable:la,IsConstructor:function(a){return m.IsCallable(a)},ToInt32:function(a){return m.ToNumber(a)>>0},ToUint32:function(a){return m.ToNumber(a)>>>0},ToNumber:function(a){if("[object Symbol]"===w(a))throw new TypeError("Cannot convert a Symbol value to a number");return+a},ToInteger:function(a){a=m.ToNumber(a);return I(a)?0:0!==a&&Ia(a)?(0<a?1:-1)*E(F(a)):a},ToLength:function(a){a=
m.ToInteger(a);return 0>=a?0:a>Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:a},SameValue:function(a,b){return a===b?0===a?1/a===1/b:!0:I(a)&&I(b)},SameValueZero:function(a,b){return a===b||I(a)&&I(b)},IsIterable:function(a){return m.TypeIsObject(a)&&("undefined"!==typeof a[O]||Ja(a))},GetIterator:function(a){if(Ja(a))return new Z(a,"value");var b=m.GetMethod(a,O);if(!m.IsCallable(b))throw new TypeError("value is not an iterable");a=m.Call(b,a);if(!m.TypeIsObject(a))throw new TypeError("bad iterator");
return a},GetMethod:function(a,b){a=m.ToObject(a)[b];if(!S(a)){if(!m.IsCallable(a))throw new TypeError("Method not callable: "+b);return a}},IteratorComplete:function(a){return!!a.done},IteratorClose:function(a,b){var c=m.GetMethod(a,"return");if(void 0!==c){try{var d=m.Call(c,a)}catch(sa){var e=sa}if(!b){if(e)throw e;if(!m.TypeIsObject(d))throw new TypeError("Iterator's return method returned a non-object.");}}},IteratorNext:function(a){var b=1<arguments.length?a.next(arguments[1]):a.next();if(!m.TypeIsObject(b))throw new TypeError("bad iterator");
return b},IteratorStep:function(a){a=m.IteratorNext(a);return m.IteratorComplete(a)?!1:a},Construct:function(a,b,c,d){c="undefined"===typeof c?a:c;if(!d&&Y.construct)return Y.construct(a,b,c);d=c.prototype;m.TypeIsObject(d)||(d=Object.prototype);d=H(d);a=m.Call(a,d,b);return m.TypeIsObject(a)?a:d},SpeciesConstructor:function(a,b){a=a.constructor;if(void 0===a)return b;if(!m.TypeIsObject(a))throw new TypeError("Bad constructor");a=a[Ha];if(S(a))return b;if(!m.IsConstructor(a))throw new TypeError("Bad @@species");
return a},CreateHTML:function(a,b,c,d){a=m.ToString(a);var e="<"+b;""!==c&&(d=m.ToString(d).replace(/"/g,"&quot;"),e+=" "+c+'="'+d+'"');return e+">"+a+"</"+b+">"},IsRegExp:function(a){if(!m.TypeIsObject(a))return!1;var b=a[z.match];return"undefined"!==typeof b?!!b:C.regex(a)},ToString:function(a){return Ka(a)}};if(a&&pa){var ua=function(a){if(C.symbol(z[a]))return z[a];var b=z["for"]("Symbol."+a);Object.defineProperty(z,a,{configurable:!1,enumerable:!1,writable:!1,value:b});return b};if(!C.symbol(z.search)){var fb=
ua("search"),gb=String.prototype.search;n(RegExp.prototype,fb,function(a){return m.Call(gb,a,[this])});v(String.prototype,"search",function(a){var b=m.RequireObjectCoercible(this);if(!S(a)){var c=m.GetMethod(a,fb);if("undefined"!==typeof c)return m.Call(c,a,[b])}return m.Call(gb,b,[m.ToString(a)])})}if(!C.symbol(z.replace)){var hb=ua("replace"),ib=String.prototype.replace;n(RegExp.prototype,hb,function(a,b){return m.Call(ib,a,[this,b])});v(String.prototype,"replace",function(a,b){var c=m.RequireObjectCoercible(this);
if(!S(a)){var d=m.GetMethod(a,hb);if("undefined"!==typeof d)return m.Call(d,a,[c,b])}return m.Call(ib,c,[m.ToString(a),b])})}if(!C.symbol(z.split)){var jb=ua("split"),kb=String.prototype.split;n(RegExp.prototype,jb,function(a,b){return m.Call(kb,a,[this,b])});v(String.prototype,"split",function(a,b){var c=m.RequireObjectCoercible(this);if(!S(a)){var d=m.GetMethod(a,jb);if("undefined"!==typeof d)return m.Call(d,a,[c,b])}return m.Call(kb,c,[m.ToString(a),b])})}var lb=C.symbol(z.match),Zb=lb&&function(){var a=
{};a[z.match]=function(){return 42};return 42!=="a".match(a)}();if(!lb||Zb){var mb=ua("match"),nb=String.prototype.match;n(RegExp.prototype,mb,function(a){return m.Call(nb,a,[this])});v(String.prototype,"match",function(a){var b=m.RequireObjectCoercible(this);if(!S(a)){var c=m.GetMethod(a,mb);if("undefined"!==typeof c)return m.Call(c,a,[b])}return m.Call(nb,b,[m.ToString(a)])})}}var ob=function(b,c,d){t.preserveToString(c,b);Object.setPrototypeOf&&Object.setPrototypeOf(b,c);a?k(Object.getOwnPropertyNames(b),
function(a){a in ha||d[a]||t.proxy(b,a,c)}):k(Object.keys(b),function(a){a in ha||d[a]||(c[a]=b[a])});c.prototype=b.prototype;t.redefine(b.prototype,"constructor",c)},$b=function(){return this},qa=function(b){a&&!ta(b,Ha)&&t.getter(b,Ha,$b)},P=function(a,b){b=b||function(){return this};n(a,O,b);!a[O]&&C.symbol(O)&&(a[O]=b)},pb=function(b,c,d){a?Object.defineProperty(b,c,{configurable:!0,enumerable:!0,writable:!0,value:d}):b[c]=d;if(!m.SameValue(b[c],d))throw new TypeError("property is nonconfigurable");
},Ma=function(a,b,c,d){if(!m.TypeIsObject(a))throw new TypeError("Constructor requires `new`: "+b.name);a=b.prototype;m.TypeIsObject(a)||(a=c);c=H(a);for(var e in d)ta(d,e)&&n(c,e,d[e],!0);return c};if(String.fromCodePoint&&1!==String.fromCodePoint.length){var ac=String.fromCodePoint;v(String,"fromCodePoint",function(a){return m.Call(ac,this,arguments)})}var qb={fromCodePoint:function(a){for(var b=[],c,d=0,e=arguments.length;d<e;d++){c=Number(arguments[d]);if(!m.SameValue(c,m.ToInteger(c))||0>c||
1114111<c)throw new RangeError("Invalid code point "+c);65536>c?U(b,String.fromCharCode(c)):(c-=65536,U(b,String.fromCharCode((c>>10)+55296)),U(b,String.fromCharCode(c%1024+56320)))}return b.join("")},raw:function(a){var b=m.ToObject(a,"bad callSite");b=m.ToObject(b.raw,"bad raw value");var c=m.ToLength(b.length);if(0>=c)return"";for(var d=[],e=0,k;e<c;){k=m.ToString(e);k=m.ToString(b[k]);U(d,k);if(e+1>=c)break;k=e+1<arguments.length?arguments[e+1]:"";k=m.ToString(k);U(d,k);e+=1}return d.join("")}};
String.raw&&"xy"!==String.raw({raw:{0:"x",1:"y",length:2}})&&v(String,"raw",qb.raw);u(String,qb);var bc=function Ea(a,b){if(1>b)return"";if(b%2)return Ea(a,b-1)+a;a=Ea(a,b/2);return a+a},aa={repeat:function(a){var b=m.ToString(m.RequireObjectCoercible(this));a=m.ToInteger(a);if(0>a||Infinity<=a)throw new RangeError("repeat count must be less than infinity and not overflow maximum string size");return bc(b,a)},startsWith:function(a){var b=m.ToString(m.RequireObjectCoercible(this));if(m.IsRegExp(a))throw new TypeError('Cannot call method "startsWith" with a regex');
var c=m.ToString(a),d;1<arguments.length&&(d=arguments[1]);d=B(m.ToInteger(d),0);return N(b,d,d+c.length)===c},endsWith:function(a){var b=m.ToString(m.RequireObjectCoercible(this));if(m.IsRegExp(a))throw new TypeError('Cannot call method "endsWith" with a regex');var c=m.ToString(a),d=b.length,e;1<arguments.length&&(e=arguments[1]);e="undefined"===typeof e?d:m.ToInteger(e);d=R(B(e,0),d);return N(b,d-c.length,d)===c},includes:function(a){if(m.IsRegExp(a))throw new TypeError('"includes" does not accept a RegExp');
var b=m.ToString(a),c;1<arguments.length&&(c=arguments[1]);return-1!==Da(this,b,c)},codePointAt:function(a){var b=m.ToString(m.RequireObjectCoercible(this)),c=m.ToInteger(a),d=b.length;if(0<=c&&c<d){a=b.charCodeAt(c);if(55296>a||56319<a||c+1===d)return a;b=b.charCodeAt(c+1);return 56320>b||57343<b?a:1024*(a-55296)+(b-56320)+65536}}};String.prototype.includes&&!1!=="a".includes("a",Infinity)&&v(String.prototype,"includes",aa.includes);if(String.prototype.startsWith&&String.prototype.endsWith){var cc=
g(function(){return"/a/".startsWith(/a/)}),dc=c(function(){return!1==="abc".startsWith("a",Infinity)});cc&&dc||(v(String.prototype,"startsWith",aa.startsWith),v(String.prototype,"endsWith",aa.endsWith))}pa&&(c(function(){var a=/a/;a[z.match]=!1;return"/a/".startsWith(a)})||v(String.prototype,"startsWith",aa.startsWith),c(function(){var a=/a/;a[z.match]=!1;return"/a/".endsWith(a)})||v(String.prototype,"endsWith",aa.endsWith),c(function(){var a=/a/;a[z.match]=!1;return"/a/".includes(a)})||v(String.prototype,
"includes",aa.includes));u(String.prototype,aa);var ec=/(^[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff]+)|([\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff]+$)/g,rb=function(){return m.ToString(m.RequireObjectCoercible(this)).replace(ec,"")},sb=/[\u0085\u200b\ufffe]/g,tb=/^[-+]0x[0-9a-f]+$/i;n(String.prototype,"trim",rb,!0);
var ba=function(a){return{value:a,done:0===arguments.length}},Na=function(a){m.RequireObjectCoercible(a);this._s=m.ToString(a);this._i=0};Na.prototype.next=function(){var a=this._s,b=this._i;if("undefined"===typeof a||b>=a.length)return this._s=void 0,ba();var c=a.charCodeAt(b);55296>c||56319<c||b+1===a.length?c=1:(c=a.charCodeAt(b+1),c=56320>c||57343<c?1:2);this._i=b+c;return ba(a.substr(b,c))};P(Na.prototype);P(String.prototype,function(){return new Na(this)});var va={from:function(a){var b;1<arguments.length&&
(b=arguments[1]);var c;if("undefined"===typeof b)var d=!1;else{if(!m.IsCallable(b))throw new TypeError("Array.from: when provided, the second argument must be a function");2<arguments.length&&(c=arguments[2]);d=!0}var e;if("undefined"!==typeof(Ja(a)||m.GetMethod(a,O))){var k=m.IsConstructor(this)?Object(new this):[];var f=m.GetIterator(a);for(e=0;;){var g=m.IteratorStep(f);if(!1===g)break;g=g.value;try{d&&(g="undefined"===typeof c?b(g,e):h(b,c,g,e)),k[e]=g}catch(fc){throw m.IteratorClose(f,!0),fc;
}e+=1}f=e}else for(g=m.ToObject(a),f=m.ToLength(g.length),k=m.IsConstructor(this)?Object(new this(f)):Array(f),e=0;e<f;++e){var n=g[e];d&&(n="undefined"===typeof c?b(n,e):h(b,c,n,e));pb(k,e,n)}k.length=f;return k},of:function(){for(var a=arguments.length,b=l(this)||!m.IsCallable(this)?Array(a):m.Construct(this,[a]),c=0;c<a;++c)pb(b,c,arguments[c]);b.length=a;return b}};u(Array,va);qa(Array);var Z=function(a,b){this.i=0;this.array=a;this.kind=b};u(Z.prototype,{next:function(){var a=this.i,b=this.array;
if(!(this instanceof Z))throw new TypeError("Not an ArrayIterator");if("undefined"!==typeof b)for(var c=m.ToLength(b.length);a<c;){c=this.kind;var d;"key"===c?d=a:"value"===c?d=b[a]:"entry"===c&&(d=[a,b[a]]);this.i=a+1;return ba(d)}this.array=void 0;return ba()}});P(Z.prototype);Array.of===va.of||function(){var a=function(a){this.length=a};a.prototype=[];var b=Array.of.apply(a,[1,2]);return b instanceof a&&2===b.length}()||v(Array,"of",va.of);var Ra={copyWithin:function(a,b){var c=m.ToObject(this),
d=m.ToLength(c.length),e=m.ToInteger(a),k=m.ToInteger(b);e=0>e?B(d+e,0):R(e,d);k=0>k?B(d+k,0):R(k,d);var f;2<arguments.length&&(f=arguments[2]);f="undefined"===typeof f?d:m.ToInteger(f);f=0>f?B(d+f,0):R(f,d);d=R(f-k,d-e);f=1;k<e&&e<k+d&&(f=-1,k+=d-1,e+=d-1);for(;0<d;)k in c?c[e]=c[k]:delete c[e],k+=f,e+=f,--d;return c},fill:function(a){var b;1<arguments.length&&(b=arguments[1]);var c;2<arguments.length&&(c=arguments[2]);var d=m.ToObject(this),e=m.ToLength(d.length);b=m.ToInteger("undefined"===typeof b?
0:b);c=m.ToInteger("undefined"===typeof c?e:c);b=0>b?B(e+b,0):R(b,e);for(c=0>c?e+c:c;b<e&&b<c;++b)d[b]=a;return d},find:function(a){var b=m.ToObject(this),c=m.ToLength(b.length);if(!m.IsCallable(a))throw new TypeError("Array#find: predicate must be a function");for(var d=1<arguments.length?arguments[1]:null,e=0,k;e<c;e++)if(k=b[e],d){if(h(a,d,k,e,b))return k}else if(a(k,e,b))return k},findIndex:function(a){var b=m.ToObject(this),c=m.ToLength(b.length);if(!m.IsCallable(a))throw new TypeError("Array#findIndex: predicate must be a function");
for(var d=1<arguments.length?arguments[1]:null,e=0;e<c;e++)if(d){if(h(a,d,b[e],e,b))return e}else if(a(b[e],e,b))return e;return-1},keys:function(){return new Z(this,"key")},values:function(){return new Z(this,"value")},entries:function(){return new Z(this,"entry")}};Array.prototype.keys&&!m.IsCallable([1].keys().next)&&delete Array.prototype.keys;Array.prototype.entries&&!m.IsCallable([1].entries().next)&&delete Array.prototype.entries;Array.prototype.keys&&Array.prototype.entries&&!Array.prototype.values&&
Array.prototype[O]&&(u(Array.prototype,{values:Array.prototype[O]}),C.symbol(z.unscopables)&&(Array.prototype[z.unscopables].values=!0));if(d&&Array.prototype.values&&"values"!==Array.prototype.values.name){var gc=Array.prototype.values;v(Array.prototype,"values",function(){return m.Call(gc,this,arguments)});n(Array.prototype,O,Array.prototype.values,!0)}u(Array.prototype,Ra);0>1/[!0].indexOf(!0,-0)&&n(Array.prototype,"indexOf",function(a){var b=Ga(this,arguments);return 0===b&&0>1/b?0:b},!0);P(Array.prototype,
function(){return this.values()});Object.getPrototypeOf&&P(Object.getPrototypeOf([].values()));var hc=function(){return c(function(){return 0===Array.from({length:-1}).length})}(),ic=function(){var a=Array.from([0].entries());return 1===a.length&&l(a[0])&&0===a[0][0]&&0===a[0][1]}();hc&&ic||v(Array,"from",va.from);if(!function(){return c(function(){return Array.from([0],void 0)})}()){var ub=Array.from;v(Array,"from",function(a){return 1<arguments.length&&"undefined"!==typeof arguments[1]?m.Call(ub,
this,arguments):h(ub,this,a)})}var jc=-(Math.pow(2,32)-1),ca=function(a,b){var d={length:jc};d[b?(d.length>>>0)-1:0]=!0;return c(function(){h(a,d,function(){throw new RangeError("should not reach here");},[]);return!0})};if(!ca(Array.prototype.forEach)){var kc=Array.prototype.forEach;v(Array.prototype,"forEach",function(a){return m.Call(kc,0<=this.length?this:[],arguments)},!0)}if(!ca(Array.prototype.map)){var lc=Array.prototype.map;v(Array.prototype,"map",function(a){return m.Call(lc,0<=this.length?
this:[],arguments)},!0)}if(!ca(Array.prototype.filter)){var mc=Array.prototype.filter;v(Array.prototype,"filter",function(a){return m.Call(mc,0<=this.length?this:[],arguments)},!0)}if(!ca(Array.prototype.some)){var nc=Array.prototype.some;v(Array.prototype,"some",function(a){return m.Call(nc,0<=this.length?this:[],arguments)},!0)}if(!ca(Array.prototype.every)){var oc=Array.prototype.every;v(Array.prototype,"every",function(a){return m.Call(oc,0<=this.length?this:[],arguments)},!0)}if(!ca(Array.prototype.reduce)){var pc=
Array.prototype.reduce;v(Array.prototype,"reduce",function(a){return m.Call(pc,0<=this.length?this:[],arguments)},!0)}if(!ca(Array.prototype.reduceRight,!0)){var qc=Array.prototype.reduceRight;v(Array.prototype,"reduceRight",function(a){return m.Call(qc,0<=this.length?this:[],arguments)},!0)}var rc=8!==Number("0o10"),sc=2!==Number("0b10"),tc=y("\u0085\u200b\ufffe",function(a){return 0===Number(a+0+a)});if(rc||sc||tc){var T=Number,vb=/^0b[01]+$/i,wb=/^0o[0-7]+$/i,uc=vb.test.bind(vb),vc=wb.test.bind(wb),
wc=function(a){if("function"===typeof a.valueOf){var b=a.valueOf();if(C.primitive(b))return b}if("function"===typeof a.toString&&(b=a.toString(),C.primitive(b)))return b;throw new TypeError("No default value");},xc=sb.test.bind(sb),yc=tb.test.bind(tb),wa=function(){var a=function(b){var d=0<arguments.length?C.primitive(b)?b:wc(b,"number"):0;if("string"===typeof d)if(d=m.Call(rb,d),uc(d))d=parseInt(N(d,2),2);else if(vc(d))d=parseInt(N(d,2),8);else if(xc(d)||yc(d))d=NaN;var e=this,k=c(function(){T.prototype.valueOf.call(e);
return!0});return e instanceof a&&!k?new T(d):T(d)};return a}();ob(T,wa,{});u(wa,{NaN:T.NaN,MAX_VALUE:T.MAX_VALUE,MIN_VALUE:T.MIN_VALUE,NEGATIVE_INFINITY:T.NEGATIVE_INFINITY,POSITIVE_INFINITY:T.POSITIVE_INFINITY});Number=wa;t.redefine(q,"Number",wa)}var xb=Math.pow(2,53)-1;u(Number,{MAX_SAFE_INTEGER:xb,MIN_SAFE_INTEGER:-xb,EPSILON:2.220446049250313E-16,parseInt:q.parseInt,parseFloat:q.parseFloat,isFinite:Ia,isInteger:function(a){return Ia(a)&&m.ToInteger(a)===a},isSafeInteger:function(a){return Number.isInteger(a)&&
F(a)<=Number.MAX_SAFE_INTEGER},isNaN:I});n(Number,"parseInt",q.parseInt,Number.parseInt!==q.parseInt);1===[,1].find(function(){return!0})&&v(Array.prototype,"find",Ra.find);0!==[,1].findIndex(function(){return!0})&&v(Array.prototype,"findIndex",Ra.findIndex);var yb=Function.bind.call(Function.bind,Object.prototype.propertyIsEnumerable),xa=function(b,c){a&&yb(b,c)&&Object.defineProperty(b,c,{enumerable:!1})},zc=function(){var a=Number(this),b=arguments.length,c=b-a;c=Array(0>c?0:c);for(var d=a;d<b;++d)c[d-
a]=arguments[d];return c},zb=function(a){return function(b,c){b[c]=a[c];return b}},Ac=function(a,b){var c=r(Object(b)),d;m.IsCallable(Object.getOwnPropertySymbols)&&(d=x(Object.getOwnPropertySymbols(Object(b)),yb(b)));return p(ma(c,d||[]),zb(b),a)},Ab={assign:function(a,b){var c=m.ToObject(a,"Cannot convert undefined or null to object");return p(m.Call(zc,1,arguments),Ac,c)},is:function(a,b){return m.SameValue(a,b)}};Object.assign&&Object.preventExtensions&&function(){var a=Object.preventExtensions({1:2});
try{Object.assign(a,"xy")}catch(K){return"y"===a[1]}}()&&v(Object,"assign",Ab.assign);u(Object,Ab);if(a){var Bc={setPrototypeOf:function(a,b){var c=function(a,b){if(!m.TypeIsObject(a))throw new TypeError("cannot set prototype on a non-object");if(null!==b&&!m.TypeIsObject(b))throw new TypeError("can only set prototype to an object or null"+b);h(d,a,b);return a};try{var d=a.getOwnPropertyDescriptor(a.prototype,b).set;h(d,{},null)}catch(sa){if(a.prototype!=={}[b])return;d=function(a){this[b]=a};c.polyfill=
c(c({},null),a.prototype)instanceof a}return c}(Object,"__proto__")};u(Object,Bc)}Object.setPrototypeOf&&Object.getPrototypeOf&&null!==Object.getPrototypeOf(Object.setPrototypeOf({},null))&&null===Object.getPrototypeOf(Object.create(null))&&function(){var a=Object.create(null),b=Object.getPrototypeOf,c=Object.setPrototypeOf;Object.getPrototypeOf=function(c){c=b(c);return c===a?null:c};Object.setPrototypeOf=function(b,d){return c(b,null===d?a:d)};Object.setPrototypeOf.polyfill=!1}();if(g(function(){return Object.keys("foo")})){var Cc=
Object.keys;v(Object,"keys",function(a){return Cc(m.ToObject(a))});r=Object.keys}if(g(function(){return Object.keys(/a/g)})){var Dc=Object.keys;v(Object,"keys",function(a){if(C.regex(a)){var b=[],c;for(c in a)ta(a,c)&&U(b,c);return b}return Dc(a)});r=Object.keys}if(Object.getOwnPropertyNames&&g(function(){return Object.getOwnPropertyNames("foo")})){var Ec="object"===typeof window?Object.getOwnPropertyNames(window):[],Bb=Object.getOwnPropertyNames;v(Object,"getOwnPropertyNames",function(a){a=m.ToObject(a);
if("[object Window]"===w(a))try{return Bb(a)}catch(K){return ma([],Ec)}return Bb(a)})}if(Object.getOwnPropertyDescriptor&&g(function(){return Object.getOwnPropertyDescriptor("foo","bar")})){var Fc=Object.getOwnPropertyDescriptor;v(Object,"getOwnPropertyDescriptor",function(a,b){return Fc(m.ToObject(a),b)})}if(Object.seal&&g(function(){return Object.seal("foo")})){var Gc=Object.seal;v(Object,"seal",function(a){return m.TypeIsObject(a)?Gc(a):a})}if(Object.isSealed&&g(function(){return Object.isSealed("foo")})){var Hc=
Object.isSealed;v(Object,"isSealed",function(a){return m.TypeIsObject(a)?Hc(a):!0})}if(Object.freeze&&g(function(){return Object.freeze("foo")})){var Ic=Object.freeze;v(Object,"freeze",function(a){return m.TypeIsObject(a)?Ic(a):a})}if(Object.isFrozen&&g(function(){return Object.isFrozen("foo")})){var Jc=Object.isFrozen;v(Object,"isFrozen",function(a){return m.TypeIsObject(a)?Jc(a):!0})}if(Object.preventExtensions&&g(function(){return Object.preventExtensions("foo")})){var Kc=Object.preventExtensions;
v(Object,"preventExtensions",function(a){return m.TypeIsObject(a)?Kc(a):a})}if(Object.isExtensible&&g(function(){return Object.isExtensible("foo")})){var Lc=Object.isExtensible;v(Object,"isExtensible",function(a){return m.TypeIsObject(a)?Lc(a):!1})}if(Object.getPrototypeOf&&g(function(){return Object.getPrototypeOf("foo")})){var Mc=Object.getPrototypeOf;v(Object,"getPrototypeOf",function(a){return Mc(m.ToObject(a))})}var Nc=a&&function(){var a=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags");
return a&&m.IsCallable(a.get)}();a&&!Nc&&t.getter(RegExp.prototype,"flags",function(){if(!m.TypeIsObject(this))throw new TypeError("Method called on incompatible type: must be an object.");var a="";this.global&&(a+="g");this.ignoreCase&&(a+="i");this.multiline&&(a+="m");this.unicode&&(a+="u");this.sticky&&(a+="y");return a});var Oc=a&&c(function(){return"/a/i"===String(new RegExp(/a/g,"i"))}),Pc=pa&&a&&function(){var a=/./;a[z.match]=!1;return RegExp(a)===a}(),Cb=c(function(){return"/abc/"===RegExp.prototype.toString.call({source:"abc"})}),
Qc=Cb&&c(function(){return"/a/b"===RegExp.prototype.toString.call({source:"a",flags:"b"})});if(!Cb||!Qc){var Db=RegExp.prototype.toString;n(RegExp.prototype,"toString",function(){var a=m.RequireObjectCoercible(this);if(C.regex(a))return h(Db,a);var b=Ka(a.source);a=Ka(a.flags);return"/"+b+"/"+a},!0);t.preserveToString(RegExp.prototype.toString,Db)}if(a&&(!Oc||Pc)){var Rc=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags").get,Eb=Object.getOwnPropertyDescriptor(RegExp.prototype,"source")||{},
Sc=function(){return this.source},Tc=m.IsCallable(Eb.get)?Eb.get:Sc,Fb=RegExp,Sa=function(){return function Fa(a,b){var c=m.IsRegExp(a);return this instanceof Fa||!c||"undefined"!==typeof b||a.constructor!==Fa?C.regex(a)?(c=m.Call(Tc,a),a="undefined"===typeof b?m.Call(Rc,a):b,new Fa(c,a)):new Fb(a,b):a}}();ob(Fb,Sa,{$input:!0});RegExp=Sa;t.redefine(q,"RegExp",Sa)}if(a){var Ta={input:"$_",lastMatch:"$&",lastParen:"$+",leftContext:"$`",rightContext:"$'"};k(r(Ta),function(a){a in RegExp&&!(Ta[a]in RegExp)&&
t.getter(RegExp,Ta[a],function(){return RegExp[a]})})}qa(RegExp);var ya=1/Number.EPSILON,za=Math.pow(2,-23),Uc=Math.pow(2,127)*(2-za),Ua=Math.pow(2,-126),ka=Math.E,Aa=Math.LOG2E,Vc=Math.LOG10E,Gb=Number.prototype.clz;delete Number.prototype.clz;var J={acosh:function(a){var b=Number(a);if(I(b)||1>a)return NaN;if(1===b)return 0;if(Infinity===b)return b;a=1/(b*b);if(2>b)return ja(b-1+X(1-a)*b);b/=2;return ja(b+X(1-a)*b-1)+1/Aa},asinh:function(a){var b=Number(a);if(0===b||!ea(b))return b;a=F(b);var c=
a*a;b=ia(b);return 1>a?b*ja(a+c/(X(c+1)+1)):b*(ja(a/2+X(1+1/c)*a/2-1)+1/Aa)},atanh:function(a){a=Number(a);if(0===a)return a;if(-1===a)return-Infinity;if(1===a)return Infinity;if(I(a)||-1>a||1<a)return NaN;var b=F(a);return ia(a)*ja(2*b/(1-b))/2},cbrt:function(a){a=Number(a);if(0===a)return a;var b=0>a;b&&(a=-a);if(Infinity===a)var c=Infinity;else c=G(V(a)/3),c=(a/(c*c)+2*c)/3;return b?-c:c},clz32:function(a){a=m.ToUint32(Number(a));return 0===a?32:Gb?m.Call(Gb,a):31-E(V(a+.5)*Aa)},cosh:function(a){a=
Number(a);if(0===a)return 1;if(I(a))return NaN;if(!ea(a))return Infinity;a=G(F(a)-1);return ka/2*(a+1/(a*ka*ka))},expm1:function(a){a=Number(a);if(-Infinity===a)return-1;if(!ea(a)||0===a)return a;if(.5<F(a))return G(a)-1;for(var b=a,c=0,d=1;c+b!==c;)c+=b,d+=1,b*=a/d;return c},hypot:function(a,b){for(var c=0,d=0,e=0;e<arguments.length;++e){var k=F(Number(arguments[e]));d<k?(c*=d/k*(d/k),c+=1,d=k):c+=0<k?k/d*(k/d):k}return Infinity===d?Infinity:d*X(c)},log2:function(a){return V(a)*Aa},log10:function(a){return V(a)*
Vc},log1p:ja,sign:ia,sinh:function(a){a=Number(a);if(!ea(a)||0===a)return a;var b=F(a);if(1>b)return b=Math.expm1(b),ia(a)*b*(1+1/(b+1))/2;b=G(b-1);return ia(a)*(b-1/(b*ka*ka))*(ka/2)},tanh:function(a){a=Number(a);return I(a)||0===a?a:20<=a?1:-20>=a?-1:(Math.expm1(a)-Math.expm1(-a))/(G(a)+G(-a))},trunc:function(a){a=Number(a);return 0>a?-E(-a):E(a)},imul:function(a,b){a=m.ToUint32(a);b=m.ToUint32(b);var c=a&65535,d=b&65535;return c*d+((a>>>16&65535)*d+c*(b>>>16&65535)<<16>>>0)|0},fround:function(a){var b=
Number(a);if(0===b||Infinity===b||-Infinity===b||I(b))return b;a=ia(b);b=F(b);if(b<Ua)return a*(b/Ua/za+ya-ya)*Ua*za;var c=(1+za/Number.EPSILON)*b;b=c-(c-b);return b>Uc||I(b)?Infinity*a:a*b}};u(Math,J);n(Math,"sinh",J.sinh,Infinity===Math.sinh(710));n(Math,"cosh",J.cosh,Infinity===Math.cosh(710));n(Math,"log1p",J.log1p,-1E-17!==Math.log1p(-1E-17));n(Math,"asinh",J.asinh,Math.asinh(-1E7)!==-Math.asinh(1E7));n(Math,"asinh",J.asinh,Infinity===Math.asinh(1E300));n(Math,"atanh",J.atanh,0===Math.atanh(1E-300));
n(Math,"tanh",J.tanh,-2E-17!==Math.tanh(-2E-17));n(Math,"acosh",J.acosh,Infinity===Math.acosh(Number.MAX_VALUE));n(Math,"acosh",J.acosh,!(8>F(1-Math.acosh(1+Number.EPSILON)/Math.sqrt(2*Number.EPSILON))/Number.EPSILON));n(Math,"cbrt",J.cbrt,!(8>F(1-Math.cbrt(1E-300)/1E-100)/Number.EPSILON));n(Math,"sinh",J.sinh,-2E-17!==Math.sinh(-2E-17));var Hb=Math.expm1(10);n(Math,"expm1",J.expm1,22025.465794806718<Hb||22025.465794806718>Hb);var Wc=Math.round,Xc=0===Math.round(.5-Number.EPSILON/4)&&1===Math.round(-.5+
Number.EPSILON/3.99),Yc=[ya+1,2*ya-1].every(function(a){return Math.round(a)===a});n(Math,"round",function(a){var b=E(a);return.5>a-b?b:-1===b?-0:b+1},!Xc||!Yc);t.preserveToString(Math.round,Wc);var Ib=Math.imul;-5!==Math.imul(4294967295,5)&&(Math.imul=J.imul,t.preserveToString(Math.imul,Ib));2!==Math.imul.length&&v(Math,"imul",function(a,b){return m.Call(Ib,Math,arguments)});var Ba=function(){var a=q.setTimeout;if("function"===typeof a||"object"===typeof a){m.IsPromise=function(a){return m.TypeIsObject(a)&&
"undefined"!==typeof a._promise?!0:!1};var b=function(a){if(!m.IsConstructor(a))throw new TypeError("Bad promise constructor");var b=this;b.resolve=void 0;b.reject=void 0;b.promise=new a(function(a,c){if(void 0!==b.resolve||void 0!==b.reject)throw new TypeError("Bad Promise implementation!");b.resolve=a;b.reject=c});if(!m.IsCallable(b.resolve)||!m.IsCallable(b.reject))throw new TypeError("Bad promise constructor");},c;"undefined"!==typeof window&&m.IsCallable(window.postMessage)&&(c=function(){var a=
[];window.addEventListener("message",function(b){b.source===window&&"zero-timeout-message"===b.data&&(b.stopPropagation(),0!==a.length&&fa(a)())},!0);return function(b){U(a,b);window.postMessage("zero-timeout-message","*")}});var d=function(){var a=q.Promise,b=a&&a.resolve&&a.resolve();return b&&function(a){return b.then(a)}},e=m.IsCallable(q.setImmediate)?q.setImmediate:"object"===typeof process&&process.nextTick?process.nextTick:d()||(m.IsCallable(c)?c():function(b){a(b,0)}),k=function(a){return a},
f=function(a){throw a;},g={},n=function(a,b,c){e(function(){if(b===g)a(c);else{try{var d=a(c);var e=b.resolve}catch(Va){d=Va,e=b.reject}e(d)}})},p=function(a,b){var c=a._promise,d=c.reactionLength;if(0<d&&(n(c.fulfillReactionHandler0,c.reactionCapability0,b),c.fulfillReactionHandler0=void 0,c.rejectReactions0=void 0,c.reactionCapability0=void 0,1<d))for(var e=1,k=0;e<d;e++,k+=3)n(c[k+0],c[k+2],b),a[k+0]=void 0,a[k+1]=void 0,a[k+2]=void 0;c.result=b;c.state=1;c.reactionLength=0},l=function(a,b){var c=
a._promise,d=c.reactionLength;if(0<d&&(n(c.rejectReactionHandler0,c.reactionCapability0,b),c.fulfillReactionHandler0=void 0,c.rejectReactions0=void 0,c.reactionCapability0=void 0,1<d))for(var e=1,k=0;e<d;e++,k+=3)n(c[k+1],c[k+2],b),a[k+0]=void 0,a[k+1]=void 0,a[k+2]=void 0;c.result=b;c.state=2;c.reactionLength=0},x=function(a){var b=!1;return{resolve:function(c){if(!b){b=!0;if(c===a)return l(a,new TypeError("Self resolution"));if(!m.TypeIsObject(c))return p(a,c);try{var d=c.then}catch(Zc){return l(a,
Zc)}if(!m.IsCallable(d))return p(a,c);e(function(){var b=d,e=x(a),k=e.resolve;e=e.reject;try{w(b,c,k,e)}catch($c){e($c)}})}},reject:function(c){if(!b)return b=!0,l(a,c)}}},w=function(a,b,c,d){a===H?h(a,b,c,d,g):h(a,b,c,d)},y=function(){var a=function(b){if(!(this instanceof a))throw new TypeError('Constructor Promise requires "new"');if(this&&this._promise)throw new TypeError("Bad construction");if(!m.IsCallable(b))throw new TypeError("not a valid resolver");var c=Ma(this,a,t,{_promise:{result:void 0,
state:0,reactionLength:0,fulfillReactionHandler0:void 0,rejectReactionHandler0:void 0,reactionCapability0:void 0}}),d=x(c),e=d.reject;try{b(d.resolve,e)}catch(Va){e(Va)}return c};return a}();var t=y.prototype;var r=function(a,b,c,d){var e=!1;return function(k){e||(e=!0,b[a]=k,0===--d.count&&(k=c.resolve,k(b)))}};u(y,{all:function(a){if(!m.TypeIsObject(this))throw new TypeError("Promise is not object");var c=new b(this),d;try{var e=m.GetIterator(a);a=d={iterator:e,done:!1};for(var k=a.iterator,f=[],
g={count:1},h,n,p=0;;){try{h=m.IteratorStep(k);if(!1===h){a.done=!0;break}n=h.value}catch(Xa){throw a.done=!0,Xa;}f[p]=void 0;var l=this.resolve(n),u=r(p,f,c,g);g.count+=1;w(l.then,l,u,c.reject);p+=1}if(0===--g.count){var x=c.resolve;x(f)}return c.promise}catch(Xa){k=Xa;if(d&&!d.done)try{m.IteratorClose(e,!0)}catch(bd){k=bd}e=c.reject;e(k);return c.promise}},race:function(a){if(!m.TypeIsObject(this))throw new TypeError("Promise is not object");var c=new b(this),d;try{var e=m.GetIterator(a);a=d={iterator:e,
done:!1};for(var k=a.iterator,f,g,h;;){try{f=m.IteratorStep(k);if(!1===f){a.done=!0;break}g=f.value}catch(Wa){throw a.done=!0,Wa;}h=this.resolve(g);w(h.then,h,c.resolve,c.reject)}return c.promise}catch(Wa){k=Wa;if(d&&!d.done)try{m.IteratorClose(e,!0)}catch(ad){k=ad}e=c.reject;e(k);return c.promise}},reject:function(a){if(!m.TypeIsObject(this))throw new TypeError("Bad promise constructor");var c=new b(this),d=c.reject;d(a);return c.promise},resolve:function(a){if(!m.TypeIsObject(this))throw new TypeError("Bad promise constructor");
if(m.IsPromise(a)&&a.constructor===this)return a;var c=new b(this),d=c.resolve;d(a);return c.promise}});u(t,{"catch":function(a){return this.then(null,a)},then:function(a,c){if(!m.IsPromise(this))throw new TypeError("not a promise");var d=m.SpeciesConstructor(this,y);d=2<arguments.length&&arguments[2]===g&&d===y?g:new b(d);var e=m.IsCallable(a)?a:k,h=m.IsCallable(c)?c:f,p=this._promise;if(0===p.state){if(0===p.reactionLength)p.fulfillReactionHandler0=e,p.rejectReactionHandler0=h,p.reactionCapability0=
d;else{var l=3*(p.reactionLength-1);p[l+0]=e;p[l+1]=h;p[l+2]=d}p.reactionLength+=1}else if(1===p.state)p=p.result,n(e,d,p);else if(2===p.state)p=p.result,n(h,d,p);else throw new TypeError("unexpected Promise state");return d.promise}});g=new b(y);var H=t.then;return y}}();q.Promise&&(delete q.Promise.accept,delete q.Promise.defer,delete q.Promise.prototype.chain);if("function"===typeof Ba){u(q,{Promise:Ba});var cd=L(q.Promise,function(a){return a.resolve(42).then(function(){})instanceof a}),dd=!g(function(){return q.Promise.reject(42).then(null,
5).then(null,ha)}),ed=g(function(){return q.Promise.call(3,ha)}),fd=function(a){var b=a.resolve(5);b.constructor={};a=a.resolve(b);try{a.then(null,ha).then(null,ha)}catch(Ea){return!0}return b===a}(q.Promise),gd=a&&function(){var a=0,b=Object.defineProperty({},"then",{get:function(){a+=1}});Promise.resolve(b);return 1===a}(),Ya=function(a){var b=new Promise(a);a(3,function(){});this.then=b.then;this.constructor=BadResolverPromise_2};Ya.prototype=Promise.prototype;Ya.all=Promise.all;var hd=c(function(){return!!Ya.all([1,
2])});cd&&dd&&ed&&!fd&&gd&&!hd||(Promise=Ba,v(q,"Promise",Ba));if(1!==Promise.all.length){var id=Promise.all;v(Promise,"all",function(a){return m.Call(id,this,arguments)})}if(1!==Promise.race.length){var jd=Promise.race;v(Promise,"race",function(a){return m.Call(jd,this,arguments)})}if(1!==Promise.resolve.length){var kd=Promise.resolve;v(Promise,"resolve",function(a){return m.Call(kd,this,arguments)})}if(1!==Promise.reject.length){var ld=Promise.reject;v(Promise,"reject",function(a){return m.Call(ld,
this,arguments)})}xa(Promise,"all");xa(Promise,"race");xa(Promise,"resolve");xa(Promise,"reject");qa(Promise)}var Jb=function(a){var b=r(p(a,function(a,b){a[b]=!0;return a},{}));return a.join(":")===b.join(":")},md=Jb(["z","a","bb"]),nd=Jb(["z",1,"a","3",2]);if(a){var da=function(a,b){return b||md?S(a)?"^"+m.ToString(a):"string"===typeof a?"$"+a:"number"===typeof a?nd?a:"n"+a:"boolean"===typeof a?"b"+a:null:null},Ca=function(){return Object.create?Object.create(null):{}},Za=function(a,b,c){if(l(c)||
C.string(c))k(c,function(a){if(!m.TypeIsObject(a))throw new TypeError("Iterator value "+a+" is not an entry object");b.set(a[0],a[1])});else if(c instanceof a)h(a.prototype.forEach,c,function(a,c){b.set(c,a)});else{if(!S(c)){var d=b.set;if(!m.IsCallable(d))throw new TypeError("bad map");var e=m.GetIterator(c)}if("undefined"!==typeof e)for(;;){a=m.IteratorStep(e);if(!1===a)break;a=a.value;try{if(!m.TypeIsObject(a))throw new TypeError("Iterator value "+a+" is not an entry object");h(d,b,a[0],a[1])}catch(Oa){throw m.IteratorClose(e,
!0),Oa;}}}},Kb=function(a,b,c){if(l(c)||C.string(c))k(c,function(a){b.add(a)});else if(c instanceof a)h(a.prototype.forEach,c,function(a){b.add(a)});else{if(!S(c)){var d=b.add;if(!m.IsCallable(d))throw new TypeError("bad set");var e=m.GetIterator(c)}if("undefined"!==typeof e)for(;;){a=m.IteratorStep(e);if(!1===a)break;a=a.value;try{h(d,b,a)}catch(Oa){throw m.IteratorClose(e,!0),Oa;}}}},ra={Map:function(){var a={},b=function(a,b){this.key=a;this.value=b;this.prev=this.next=null};b.prototype.isRemoved=
function(){return this.key===a};var c=function(a,b){if(!m.TypeIsObject(a)||!a._es6map)throw new TypeError("Method Map.prototype."+b+" called on incompatible receiver "+m.ToString(a));},d=function(a,b){c(a,"[[MapIterator]]");this.i=this.head=a._head;this.kind=b};d.prototype={isMapIterator:!0,next:function(){if(!this.isMapIterator)throw new TypeError("Not a MapIterator");var a=this.i,b=this.kind,c=this.head;if("undefined"===typeof this.i)return ba();for(;a.isRemoved()&&a!==c;)a=a.prev;for(;a.next!==
c;)if(a=a.next,!a.isRemoved())return b="key"===b?a.key:"value"===b?a.value:[a.key,a.value],this.i=a,ba(b);this.i=void 0;return ba()}};P(d.prototype);var e=function Qa(){if(!(this instanceof Qa))throw new TypeError('Constructor Map requires "new"');if(this&&this._es6map)throw new TypeError("Bad construction");var a=Ma(this,Qa,k,{_es6map:!0,_head:null,_map:D?new D:null,_size:0,_storage:Ca()}),c=new b(null,null);c.next=c.prev=c;a._head=c;0<arguments.length&&Za(Qa,a,arguments[0]);return a};var k=e.prototype;
t.getter(k,"size",function(){if("undefined"===typeof this._size)throw new TypeError("size method called on incompatible Map");return this._size});u(k,{get:function(a){c(this,"get");var b=da(a,!0);if(null!==b){if(a=this._storage[b])return a.value}else if(this._map){if(a=na.call(this._map,a))return a.value}else for(var d=b=this._head;(d=d.next)!==b;)if(m.SameValueZero(d.key,a))return d.value},has:function(a){c(this,"has");var b=da(a,!0);if(null!==b)return"undefined"!==typeof this._storage[b];if(this._map)return oa.call(this._map,
a);for(var d=b=this._head;(d=d.next)!==b;)if(m.SameValueZero(d.key,a))return!0;return!1},set:function(a,d){c(this,"set");var e=this._head,k=e,f=da(a,!0);if(null!==f){if("undefined"!==typeof this._storage[f])return this._storage[f].value=d,this;var g=this._storage[f]=new b(a,d);k=e.prev}else this._map&&(oa.call(this._map,a)?na.call(this._map,a).value=d:(g=new b(a,d),db.call(this._map,a,g),k=e.prev));for(;(k=k.next)!==e;)if(m.SameValueZero(k.key,a))return k.value=d,this;g=g||new b(a,d);m.SameValue(-0,
a)&&(g.key=0);g.next=this._head;g.prev=this._head.prev;g.prev.next=g;g.next.prev=g;this._size+=1;return this},"delete":function(b){c(this,"delete");var d=this._head,e=d,k=da(b,!0);if(null!==k){if("undefined"===typeof this._storage[k])return!1;e=this._storage[k].prev;delete this._storage[k]}else if(this._map){if(!oa.call(this._map,b))return!1;e=na.call(this._map,b).prev;Xb.call(this._map,b)}for(;(e=e.next)!==d;)if(m.SameValueZero(e.key,b))return e.key=a,e.value=a,e.prev.next=e.next,e.next.prev=e.prev,
--this._size,!0;return!1},clear:function(){c(this,"clear");this._map=D?new D:null;this._size=0;this._storage=Ca();for(var b=this._head,d,e=b.next;(d=e)!==b;)d.key=a,d.value=a,e=d.next,d.next=d.prev=b;b.next=b.prev=b},keys:function(){c(this,"keys");return new d(this,"key")},values:function(){c(this,"values");return new d(this,"value")},entries:function(){c(this,"entries");return new d(this,"key+value")},forEach:function(a){c(this,"forEach");for(var b=1<arguments.length?arguments[1]:null,d=this.entries(),
e=d.next();!e.done;e=d.next())b?h(a,b,e.value[1],e.value[0],this):a(e.value[1],e.value[0],this)}});P(k,k.entries);return e}(),Set:function(){var a=function(a,b){if(!m.TypeIsObject(a)||!a._es6set||"undefined"===typeof a._storage)throw new TypeError("Set.prototype."+b+" called on incompatible receiver "+m.ToString(a));},b=function Pa(){if(!(this instanceof Pa))throw new TypeError('Constructor Set requires "new"');if(this&&this._es6set)throw new TypeError("Bad construction");var a=Ma(this,Pa,c,{_es6set:!0,
"[[SetData]]":null,_storage:Ca()});if(!a._es6set)throw new TypeError("bad set");0<arguments.length&&Kb(Pa,a,arguments[0]);return a};var c=b.prototype;var d=function(a){if(!a["[[SetData]]"]){var b=new ra.Map;a["[[SetData]]"]=b;k(r(a._storage),function(a){if("^null"===a)a=null;else if("^undefined"!==a){var c=a.charAt(0);a="$"===c?N(a,1):"n"===c?+N(a,1):"b"===c?"btrue"===a:+a}else a=void 0;b.set(a,a)});a["[[SetData]]"]=b}a._storage=null};t.getter(b.prototype,"size",function(){a(this,"size");if(this._storage)return r(this._storage).length;
d(this);return this["[[SetData]]"].size});u(b.prototype,{has:function(b){a(this,"has");var c;if(this._storage&&null!==(c=da(b)))return!!this._storage[c];d(this);return this["[[SetData]]"].has(b)},add:function(b){a(this,"add");var c;if(this._storage&&null!==(c=da(b)))return this._storage[c]=!0,this;d(this);this["[[SetData]]"].set(b,b);return this},"delete":function(b){a(this,"delete");var c;if(this._storage&&null!==(c=da(b)))return b=ta(this._storage,c),delete this._storage[c]&&b;d(this);return this["[[SetData]]"]["delete"](b)},
clear:function(){a(this,"clear");this._storage&&(this._storage=Ca());this["[[SetData]]"]&&this["[[SetData]]"].clear()},values:function(){a(this,"values");d(this);return new e(this["[[SetData]]"].values())},entries:function(){a(this,"entries");d(this);return new e(this["[[SetData]]"].entries())},forEach:function(b){a(this,"forEach");var c=1<arguments.length?arguments[1]:null,e=this;d(e);this["[[SetData]]"].forEach(function(a,d){c?h(b,c,d,d,e):b(d,d,e)})}});n(b.prototype,"keys",b.prototype.values,!0);
P(b.prototype,b.prototype.values);var e=function(a){this.it=a};e.prototype={isSetIterator:!0,next:function(){if(!this.isSetIterator)throw new TypeError("Not a SetIterator");return this.it.next()}};P(e.prototype);return b}()};q.Set&&!Set.prototype["delete"]&&Set.prototype.remove&&Set.prototype.items&&Set.prototype.map&&Array.isArray((new Set).keys)&&(q.Set=ra.Set);if(q.Map||q.Set){c(function(){return 2===(new Map([[1,2]])).get(1)})||(q.Map=function K(){if(!(this instanceof K))throw new TypeError('Constructor Map requires "new"');
var a=new D;0<arguments.length&&Za(K,a,arguments[0]);delete a.constructor;Object.setPrototypeOf(a,q.Map.prototype);return a},q.Map.prototype=H(D.prototype),n(q.Map.prototype,"constructor",q.Map,!0),t.preserveToString(q.Map,D));var Lb=new Map,Mb=function(){var a=new Map([[1,0],[2,0],[3,0],[4,0]]);a.set(-0,a);return a.get(0)===a&&a.get(-0)===a&&a.has(0)&&a.has(-0)}(),od=Lb.set(1,2)===Lb;Mb&&od||v(Map.prototype,"set",function(a,b){h(db,this,0===a?0:a,b);return this});Mb||(u(Map.prototype,{get:function(a){return h(na,
this,0===a?0:a)},has:function(a){return h(oa,this,0===a?0:a)}},!0),t.preserveToString(Map.prototype.get,na),t.preserveToString(Map.prototype.has,oa));var $a=new Set,Nb=Set.prototype["delete"]&&Set.prototype.add&&Set.prototype.has&&function(a){a["delete"](0);a.add(-0);return!a.has(0)}($a),pd=$a.add(1)===$a;if(!Nb||!pd){var Ob=Set.prototype.add;Set.prototype.add=function(a){h(Ob,this,0===a?0:a);return this};t.preserveToString(Set.prototype.add,Ob)}if(!Nb){var Pb=Set.prototype.has;Set.prototype.has=
function(a){return h(Pb,this,0===a?0:a)};t.preserveToString(Set.prototype.has,Pb);var Qb=Set.prototype["delete"];Set.prototype["delete"]=function(a){return h(Qb,this,0===a?0:a)};t.preserveToString(Set.prototype["delete"],Qb)}var Rb=L(q.Map,function(a){var b=new a([]);b.set(42,42);return b instanceof a}),qd=Object.setPrototypeOf&&!Rb;try{var Sb=!(q.Map()instanceof q.Map)}catch(A){Sb=A instanceof TypeError}if(0!==q.Map.length||qd||!Sb)q.Map=function K(){if(!(this instanceof K))throw new TypeError('Constructor Map requires "new"');
var a=new D;0<arguments.length&&Za(K,a,arguments[0]);delete a.constructor;Object.setPrototypeOf(a,K.prototype);return a},q.Map.prototype=D.prototype,n(q.Map.prototype,"constructor",q.Map,!0),t.preserveToString(q.Map,D);var rd=L(q.Set,function(a){var b=new a([]);b.add(42,42);return b instanceof a}),sd=Object.setPrototypeOf&&!rd;try{var Tb=!(q.Set()instanceof q.Set)}catch(A){Tb=A instanceof TypeError}if(0!==q.Set.length||sd||!Tb){var ab=q.Set;q.Set=function K(){if(!(this instanceof K))throw new TypeError('Constructor Set requires "new"');
var a=new ab;0<arguments.length&&Kb(K,a,arguments[0]);delete a.constructor;Object.setPrototypeOf(a,K.prototype);return a};q.Set.prototype=ab.prototype;n(q.Set.prototype,"constructor",q.Set,!0);t.preserveToString(q.Set,ab)}var bb=new q.Map,td=!c(function(){return bb.keys().next().done});("function"!==typeof q.Map.prototype.clear||0!==(new q.Set).size||0!==bb.size||"function"!==typeof q.Map.prototype.keys||"function"!==typeof q.Set.prototype.keys||"function"!==typeof q.Map.prototype.forEach||"function"!==
typeof q.Set.prototype.forEach||b(q.Map)||b(q.Set)||"function"!==typeof bb.keys().next||td||!Rb)&&u(q,{Map:ra.Map,Set:ra.Set},!0);q.Set.prototype.keys!==q.Set.prototype.values&&n(q.Set.prototype,"keys",q.Set.prototype.values,!0);P(Object.getPrototypeOf((new q.Map).keys()));P(Object.getPrototypeOf((new q.Set).keys()));if(d&&"has"!==q.Set.prototype.has.name){var ud=q.Set.prototype.has;v(q.Set.prototype,"has",function(a){return h(ud,this,a)})}}u(q,ra);qa(q.Map);qa(q.Set)}var Q=function(a){if(!m.TypeIsObject(a))throw new TypeError("target must be an object");
},M={apply:function(){return m.Call(m.Call,null,arguments)},construct:function(a,b){if(!m.IsConstructor(a))throw new TypeError("First argument must be a constructor.");var c=2<arguments.length?arguments[2]:a;if(!m.IsConstructor(c))throw new TypeError("new.target must be a constructor.");return m.Construct(a,b,c,"internal")},deleteProperty:function(b,c){Q(b);if(a){var d=Object.getOwnPropertyDescriptor(b,c);if(d&&!d.configurable)return!1}return delete b[c]},has:function(a,b){Q(a);return b in a}};Object.getOwnPropertyNames&&
Object.assign(M,{ownKeys:function(a){Q(a);var b=Object.getOwnPropertyNames(a);m.IsCallable(Object.getOwnPropertySymbols)&&W(b,Object.getOwnPropertySymbols(a));return b}});Object.preventExtensions&&Object.assign(M,{isExtensible:function(a){Q(a);return Object.isExtensible(a)},preventExtensions:function(a){Q(a);return!g(function(){return Object.preventExtensions(a)})}});if(a){var Ub=function(a,b,c){var d=Object.getOwnPropertyDescriptor(a,b);if(!d)return a=Object.getPrototypeOf(a),null===a?void 0:Ub(a,
b,c);if("value"in d)return d.value;if(d.get)return m.Call(d.get,c)},Vb=function(a,b,c,d){var e=Object.getOwnPropertyDescriptor(a,b);if(!e){a=Object.getPrototypeOf(a);if(null!==a)return Vb(a,b,c,d);e={value:void 0,writable:!0,enumerable:!0,configurable:!0}}return"value"in e?e.writable&&m.TypeIsObject(d)?Object.getOwnPropertyDescriptor(d,b)?Y.defineProperty(d,b,{value:c}):Y.defineProperty(d,b,{value:c,writable:!0,enumerable:!0,configurable:!0}):!1:e.set?(h(e.set,d,c),!0):!1};Object.assign(M,{defineProperty:function(a,
b,c){Q(a);return!g(function(){return Object.defineProperty(a,b,c)})},getOwnPropertyDescriptor:function(a,b){Q(a);return Object.getOwnPropertyDescriptor(a,b)},get:function(a,b){Q(a);return Ub(a,b,2<arguments.length?arguments[2]:a)},set:function(a,b,c){Q(a);return Vb(a,b,c,3<arguments.length?arguments[3]:a)}})}if(Object.getPrototypeOf){var vd=Object.getPrototypeOf;M.getPrototypeOf=function(a){Q(a);return vd(a)}}Object.setPrototypeOf&&M.getPrototypeOf&&Object.assign(M,{setPrototypeOf:function(a,b){Q(a);
if(null!==b&&!m.TypeIsObject(b))throw new TypeError("proto must be an object or null");if(b===Y.getPrototypeOf(a))return!0;if(Y.isExtensible&&!Y.isExtensible(a))return!1;var c;a:{for(c=b;c;){if(a===c){c=!0;break a}c=M.getPrototypeOf(c)}c=!1}if(c)return!1;Object.setPrototypeOf(a,b);return!0}});var wd=function(a,b){m.IsCallable(q.Reflect[a])?c(function(){q.Reflect[a](1);q.Reflect[a](NaN);q.Reflect[a](!0);return!0})&&v(q.Reflect,a,b):n(q.Reflect,a,b)};Object.keys(M).forEach(function(a){wd(a,M[a])});
var cb=q.Reflect.getPrototypeOf;d&&cb&&"getPrototypeOf"!==cb.name&&v(q.Reflect,"getPrototypeOf",function(a){return h(cb,q.Reflect,a)});q.Reflect.setPrototypeOf&&c(function(){q.Reflect.setPrototypeOf(1,{});return!0})&&v(q.Reflect,"setPrototypeOf",M.setPrototypeOf);q.Reflect.defineProperty&&(c(function(){var a=!q.Reflect.defineProperty(1,"test",{value:1}),b="function"!==typeof Object.preventExtensions||!q.Reflect.defineProperty(Object.preventExtensions({}),"test",{});return a&&b})||v(q.Reflect,"defineProperty",
M.defineProperty));q.Reflect.construct&&(c(function(){var a=function(){};return q.Reflect.construct(function(){},[],a)instanceof a})||v(q.Reflect,"construct",M.construct));if("Invalid Date"!==String(new Date(NaN))){var xd=Date.prototype.toString;v(Date.prototype,"toString",function(){var a=+this;return a!==a?"Invalid Date":m.Call(xd,this)})}var Wb={anchor:function(a){return m.CreateHTML(this,"a","name",a)},big:function(){return m.CreateHTML(this,"big","","")},blink:function(){return m.CreateHTML(this,
"blink","","")},bold:function(){return m.CreateHTML(this,"b","","")},fixed:function(){return m.CreateHTML(this,"tt","","")},fontcolor:function(a){return m.CreateHTML(this,"font","color",a)},fontsize:function(a){return m.CreateHTML(this,"font","size",a)},italics:function(){return m.CreateHTML(this,"i","","")},link:function(a){return m.CreateHTML(this,"a","href",a)},small:function(){return m.CreateHTML(this,"small","","")},strike:function(){return m.CreateHTML(this,"strike","","")},sub:function(){return m.CreateHTML(this,
"sub","","")},sup:function(){return m.CreateHTML(this,"sup","","")}};k(Object.keys(Wb),function(a){var b=String.prototype[a];if(m.IsCallable(b)){b=h(b,"",' " ');var c=ma([],b.match(/"/g)).length;b=b!==b.toLowerCase()||2<c}else b=!0;b&&v(String.prototype,a,Wb[a])});var yd=function(){if(!pa)return!1;var a="object"===typeof JSON&&"function"===typeof JSON.stringify?JSON.stringify:null;if(!a)return!1;if("undefined"!==typeof a(z())||"[null]"!==a([z()]))return!0;var b={a:z()};b[z()]=!0;return"{}"!==a(b)?
!0:!1}(),zd=c(function(){return pa?"{}"===JSON.stringify(Object(z()))&&"[{}]"===JSON.stringify([Object(z())]):!0});if(yd||!zd){var Ad=JSON.stringify;v(JSON,"stringify",function(a){if("symbol"!==typeof a){var b;1<arguments.length&&(b=arguments[1]);var c=[a];if(l(b))c.push(b);else{var d=m.IsCallable(b)?b:null;c.push(function(a,b){a=d?h(d,this,a,b):b;if("symbol"!==typeof a)return C.symbol(a)?zb({})(a):a})}2<arguments.length&&c.push(arguments[2]);return Ad.apply(this,c)}})}return q});
(function(f){(function(f){(function(f){(function(f){var g=function(){function c(){this._promises=new Map}Object.defineProperty(c.prototype,"length",{get:function(){return this._promises.size},enumerable:!0,configurable:!0});c.prototype.make=function(b,c,a){if(this._promises.has(b))return a("Existing request with token "+b);this._promises.set(b,{reject:a,resolve:c})};c.prototype.keep=function(b,c){var a=this._promises.get(b);if(!a)throw Error("No promise associated with token: "+b);a=a.resolve;this._promises.delete(b);
return a(c)};c.prototype.break=function(b,c){var a=this._promises.get(b);if(!a)throw Error("No promise associated with token: "+b);this._promises.delete(b);a.reject(c)};return c}();f.PromiseStore=g})(f.prediction||(f.prediction={}))})(f.text||(f.text={}))})(f.keyman||(f.keyman={}))})(com||(com={}));
(function(f){(function(f){(function(f){(function(f){var g=function(){function c(b,c){this._worker=c||f.DefaultWorker.constructInstance();this._worker.onmessage=this.onMessage.bind(this);this._declareLMLayerReady=null;this._predictPromises=new f.PromiseStore;this._wordbreakPromises=new f.PromiseStore;this._nextToken=Number.MIN_SAFE_INTEGER;this.sendConfig(b)}c.prototype.sendConfig=function(b){this._worker.postMessage({message:"config",capabilities:b})};c.prototype.loadModel=function(b){var c=this;
return new Promise(function(a,d){c._declareLMLayerReady=a;c._worker.postMessage({message:"load",model:b})})};c.prototype.unloadModel=function(){this._worker.postMessage({message:"unload"})};c.prototype.predict=function(b,c){var a=this,d=this._nextToken++;return new Promise(function(e,f){a._predictPromises.make(d,e,f);a._worker.postMessage({message:"predict",token:d,transform:b,context:c})})};c.prototype.wordbreak=function(b){var c=this,a=this._nextToken++;return new Promise(function(d,e){c._wordbreakPromises.make(a,
d,e);c._worker.postMessage({message:"wordbreak",token:a,context:b})})};c.prototype.onMessage=function(b){var c=b.data;if("error"===c.message)console.error(c.log),c.error&&console.error(c.error);else if("ready"===c.message)this._declareLMLayerReady(b.data.configuration);else if("suggestions"===c.message)this._predictPromises.keep(c.token,c.suggestions);else if("currentword"===c.message)this._wordbreakPromises.keep(c.token,c.word);else throw Error("Message not implemented: "+c.message);};c.prototype.shutdown=
function(){this._worker.terminate()};c.unwrap=function(b){return b.toString().match(/function[^{]+{((?:.|\r|\n)+)}[^}]*$/)[1]};return c}();f.LMLayer=g})(f.prediction||(f.prediction={}))})(f.text||(f.text={}))})(f.keyman||(f.keyman={}))})(com||(com={}));(function(){var f=com.keyman.text.prediction;"undefined"!==typeof module&&"undefined"!==typeof module.exports?(module.exports=f.LMLayer,f.LMLayer.PromiseStore=f.PromiseStore):window.LMLayer=f.LMLayer})();
(function(f){(function(f){(function(f){(function(h){var g=function(){return function(b,a){this.left=b.getTextBeforeCaret();this.startOfBuffer=this.left._kmwLength()>a.leftContextCodePoints;this.startOfBuffer||(this.left=this.left._kmwSubstr(-a.leftContextCodePoints));this.right=b.getTextAfterCaret();this.endOfBuffer=this.right._kmwLength()>a.leftContextCodePoints;this.endOfBuffer||(this.right=this.right._kmwSubstr(0,a.leftContextCodePoints))}}();h.TranscriptionContext=g;var c=function(){return function(b,
a){this.suggestions=b;this.transcriptionID=a}}();h.ReadySuggestions=c;var b=function(b){function a(){var a=null!==b&&b.apply(this,arguments)||this;a.recentTranscriptions=[];a._mayPredict=!0;a._mayCorrect=!0;return a}__extends(a,b);a.prototype.init=function(a){void 0===a&&(a=!1);a={maxLeftContextCodePoints:64,maxRightContextCodePoints:a?0:64};this.canEnable()&&(this.lmEngine=new h.LMLayer(a))};Object.defineProperty(a.prototype,"activeModel",{get:function(){return this.currentModel},enumerable:!0,configurable:!0});
a.prototype.unloadModel=function(){this.lmEngine.unloadModel();delete this.currentModel;delete this.configuration;this.emit("statechange","inactive")};a.prototype.loadModel=function(a){if(!a)throw Error("Null reference not allowed.");var b=this;return this.lmEngine.loadModel(a.path).then(function(c){b.currentModel=a;b.configuration=c;try{b.emit("statechange","active")}catch(x){console.error("Could not load model '"+a.id+"': "+x.message)}})};a.prototype.invalidateContext=function(a){this.emit("invalidatesuggestions",
"context");this.currentModel&&this.configuration&&a&&this.predict_internal(a.buildTranscriptionFrom(a,null))};a.prototype.wordbreak=function(a){if(!this.isActive)return null;a=new g(f.Mock.from(a),this.configuration);return this.lmEngine.wordbreak(a)};a.prototype.predict=function(a){if(!this.isActive||!this.currentModel||!this.configuration)return null;this.emit("invalidatesuggestions","new");return this.predict_internal(a)};a.prototype.predictFromTarget=function(a){if(!a)return null;a=a.buildTranscriptionFrom(a,
null);return this.predict(a)};a.prototype.predict_internal=function(a){if(!a)return null;var b=new g(a.preInput,this.configuration);this.recordTranscription(a);var d=a.transform,e=this.currentPromise=this.lmEngine.predict(a.alternates||a.transform,b),f=this;return e.then(function(a){if(e==f.currentPromise){var b=new c(a,d.id);f.emit("suggestionsready",b);f.currentPromise=null}return a})};a.prototype.recordTranscription=function(b){this.recentTranscriptions.push(b);this.recentTranscriptions.length>
a.TRANSCRIPTION_BUFFER&&this.recentTranscriptions.splice(0,1)};a.prototype.getPredictionState=function(a){var b=this.recentTranscriptions.filter(function(b){return b.token==a});return 0==b.length?null:b[0]};a.prototype.shutdown=function(){this.lmEngine.shutdown()};Object.defineProperty(a.prototype,"isActive",{get:function(){return this.canEnable()?this.activeModel&&this._mayPredict:this._mayPredict=!1},enumerable:!0,configurable:!0});a.prototype.canEnable=function(){return!0};Object.defineProperty(a.prototype,
"mayPredict",{get:function(){return this._mayPredict},set:function(a){if(this.canEnable()){var b=this._mayPredict;this._mayPredict=a;b!=a&&this.emit("statechange",a?"active":"inactive")}},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"mayCorrect",{get:function(){return this._mayCorrect},set:function(a){this._mayCorrect=a},enumerable:!0,configurable:!0});a.prototype.tryAcceptSuggestion=function(a){return!this.emit("tryaccept",a)};a.prototype.tryRevertSuggestion=function(){return!this.emit("tryrevert",
null)};a.TRANSCRIPTION_BUFFER=10;return a}(EventEmitter);h.LanguageProcessor=b})(f.prediction||(f.prediction={}))})(f.text||(f.text={}))})(f.keyman||(f.keyman={}))})(com||(com={}));
(function(f){(function(f){(function(h){var l=function(){function g(c){c||(c=g.DEFAULT_OPTIONS);this.kbdProcessor=new h.KeyboardProcessor(c);this.lngProcessor=new h.prediction.LanguageProcessor}Object.defineProperty(g.prototype,"languageProcessor",{get:function(){return this.lngProcessor},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"keyboardProcessor",{get:function(){return this.kbdProcessor},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"keyboardInterface",
{get:function(){return this.keyboardProcessor.keyboardInterface},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"activeKeyboard",{get:function(){return this.keyboardInterface.activeKeyboard},set:function(c){this.keyboardInterface.activeKeyboard=c;this.resetContext()},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"activeModel",{get:function(){return this.languageProcessor.activeModel},enumerable:!0,configurable:!0});g.prototype.processKeyEvent=function(c){var b=
c.Ltarg,e=c.isSynthetic;if((c.device.formFactor==f.utils.FormFactor.Desktop||!this.activeKeyboard||this.activeKeyboard.usesDesktopLayoutOnDevice(c.device))&&e&&this.keyboardProcessor.selectLayer(c)||!e&&this.keyboardProcessor.doModifierPress(c,!e))return!0;if(!this.languageProcessor.isActive||("K_BKSP"!=c.kName&&c.Lcode!=h.Codes.keyCodes.K_BKSP||!this.languageProcessor.tryRevertSuggestion())&&("K_SPACE"!=c.kName&&c.Lcode!=h.Codes.keyCodes.K_SPACE||!this.languageProcessor.tryAcceptSuggestion("space"))){e=
h.Mock.from(b);var a=this.keyboardProcessor.processKeystroke(c,b);c.kNextLayer&&this.keyboardProcessor.selectLayer(c);if(null!=a){var d=void 0;if(this.languageProcessor.isActive&&!a.triggersDefaultCommand&&c.keyDistribution&&c.kbdLayer){var k=this.activeKeyboard.layout(c.device.formFactor);d=[];for(var g=0,l=c.keyDistribution;g<l.length;g++){var y=l[g],n=h.Mock.from(e),u=k.getLayer(c.kbdLayer).getKey(y.keyId);if(u){if(u=u.constructKeyEvent(this.keyboardProcessor,n,c.device),n=this.keyboardProcessor.processKeystroke(u,
n))n=n.transcription.transform,n.id=a.transcription.token,d.push({sample:n,p:y.p})}else console.warn("Potential fat-finger key could not be found in layer!")}}a.finalize(this.keyboardProcessor);a.transcription.alternates=d;a.predictionPromise=this.languageProcessor.predict(a.transcription);a.triggersDefaultCommand||b.doInputEvent()}return a}};g.prototype.resetContext=function(){this.keyboardProcessor.resetContext();this.languageProcessor.invalidateContext()};g.DEFAULT_OPTIONS={baseLayout:"us"};return g}();
h.InputProcessor=l})(f.text||(f.text={}))})(f.keyman||(f.keyman={}))})(com||(com={}));
(function(f){(function(h){(function(l){l.KeyboardInterface.prototype.registerKeyboard=function(h){f.keyman.singleton.keyboardManager._registerKeyboard(h)};l.KeyboardInterface.prototype.registerStub=function(h){return f.keyman.singleton.keyboardManager._registerStub(h)};l.KeyboardInterface.prototype.insertText=function(l,g){var c=f.keyman.singleton;this.resetContextCache();var b=this.activeTargetOutput?this.activeTargetOutput:h.dom.Utils.getOutputTarget();return null!=b?(c.uiManager.setActivatingUI(!0),
h.dom.DOMEventHandlers.states._IgnoreNextSelChange=100,c.domManager.focusLastActiveElement(),h.dom.DOMEventHandlers.states._IgnoreNextSelChange=0,null!=l&&this.output(0,b,l),"undefined"!==typeof g&&null!==g&&this.deadkeyOutput(0,b,g),b.invalidateSelection(),!0):!1};l.KeyboardInterface.prototype.saveFocus=function(){h.dom.DOMEventHandlers.states._IgnoreNextSelChange=1};l.KeyboardInterface.prototype.getLastActiveElement=function(){return h.dom.Utils.getOutputTarget()};l.KeyboardInterface.prototype.focusLastActiveElement=
function(){f.keyman.singleton.domManager.focusLastActiveElement()};l.KeyboardInterface.prototype.hideHelp=function(){f.keyman.singleton.osk._Hide(!0)};l.KeyboardInterface.prototype.showHelp=function(h,g){f.keyman.singleton.osk._Show(h,g)};l.KeyboardInterface.prototype.showPinnedHelp=function(){var h=f.keyman.singleton;h.osk.userPositioned=!0;h.osk._Show(-1,-1)};l.KeyboardInterface.prototype.GetLastActiveElement=l.KeyboardInterface.prototype.getLastActiveElement;l.KeyboardInterface.prototype.FocusLastActiveElement=
l.KeyboardInterface.prototype.focusLastActiveElement;l.KeyboardInterface.prototype.HideHelp=l.KeyboardInterface.prototype.hideHelp;l.KeyboardInterface.prototype.ShowHelp=l.KeyboardInterface.prototype.showHelp;l.KeyboardInterface.prototype.ShowPinnedHelp=l.KeyboardInterface.prototype.showPinnedHelp})(h.text||(h.text={}))})(f.keyman||(f.keyman={}))})(com||(com={}));
(function(f){(function(f){(function(f){var h=function(){return function(f){this.popupCanvasBackgroundColor="Android"==f.OS?"#999":"dark"==f.colorScheme?"#0f1319":"#ffffff"}}();f.StyleConstants=h})(f.utils||(f.utils={}))})(f.keyman||(f.keyman={}))})(com||(com={}));
(function(f){(function(f){var h=function(){function h(){this.detected=!1;this.touchable=!!("ontouchstart"in window);this.OS="";this.formFactor="desktop";this.dyLandscape=this.dyPortrait=0;this.version="0";this.orientation=window.orientation;this.browser=""}h.prototype.getDPI=function(){var f=document.createElement("DIV"),c=f.style,b=96;if("complete"!==document.readyState)return b;f.id="calculateDPI";c.position="absolute";c.display="block";c.visibility="hidden";c.left="10px";c.top="10px";c.width="1in";
c.height="10px";document.body.appendChild(f);b="undefined"==typeof window.devicePixelRatio?f.offsetWidth:f.offsetWidth*window.devicePixelRatio;document.body.removeChild(f);return b};h.prototype.detect=function(){var g=h._GetIEVersion(),c=!1;if(navigator&&navigator.userAgent){var b=navigator.userAgent;if(0<=b.indexOf("iPad"))this.OS="iOS",this.formFactor="tablet",this.dyPortrait=this.dyLandscape=0;else if(0<=b.indexOf("iPhone"))this.OS="iOS",this.formFactor="phone",this.dyPortrait=this.dyLandscape=
25;else if(0<=b.indexOf("Android")){this.OS="Android";this.formFactor="phone";this.dyPortrait=75;this.dyLandscape=25;try{this.version=b.match(/(?:Android\s+)(\d+\.\d+\.\d+)/)[1]}catch(e){}}else 0<=b.indexOf("Linux")?this.OS="Linux":0<=b.indexOf("Macintosh")?(b=/Intel Mac OS X (10(?:[_\.]\d+)+)/i.exec(b),1<b.length&&b[1]&&(c=b[1].replace("_","."),c=new f.utils.Version(c),c=0>=f.utils.Version.MAC_POSSIBLE_IPAD_ALIAS.compareTo(c),this.OS="MacOSX")):0<=b.indexOf("Windows NT")&&(this.OS="Windows",0<=b.indexOf("Touch")&&
(this.formFactor="phone"),"number"==typeof navigator.msMaxTouchPoints&&0<navigator.msMaxTouchPoints&&(this.touchable=!0))}"tablet"==this.formFactor&&400>Math.min(screen.width,screen.height)&&(this.formFactor="phone");"phone"==this.formFactor&&720<Math.max(screen.width,screen.height)&&"iOS"!=this.OS&&(this.formFactor="tablet");b="Win32"==navigator.platform||"MacIntel"==navigator.platform;"iOS"!=this.OS||"ongesturestart"in window||b||(this.OS="Android");this.browser="web";if(999>g)this.browser="ie";
else{if("iOS"==this.OS||"macosx"==this.OS.toLowerCase())this.browser="safari";/Firefox|Chrome|OPR|Safari|Edge/.test(navigator.userAgent)&&(0<=navigator.userAgent.indexOf("Firefox")&&"onmozorientationchange"in screen?this.browser="firefox":0<=navigator.userAgent.indexOf("OPR")?this.browser="opera":0<=navigator.userAgent.indexOf(" Edge/")?this.browser="edge":0<=navigator.userAgent.indexOf("Chrome")?this.browser="chrome":0<=navigator.userAgent.indexOf("Safari")&&(this.browser="safari"))}c&&"safari"==
this.browser&&window.TouchEvent&&(this.OS="iOS",this.formFactor="tablet",this.dyPortrait=this.dyLandscape=0,g=screen.height/screen.width,1>g&&(g=1/g),1.6<g&&(this.formFactor="phone",this.dyPortrait=this.dyLandscape=25));this.colorScheme=this.prefersDarkMode()?"dark":"light";this.detected=!0};h._GetIEVersion=function(){var f="";"userAgent"in navigator&&(f=navigator.userAgent);if("selection"in document){var c=navigator.appVersion;var b=c.indexOf("MSIE ");if(0<=b){if("BackCompat"==document.compatMode)return 6;
c=c.substr(b+5);b=c.indexOf(".");if(0<b)return parseInt(c.substr(0,b),10)}}b=f.indexOf("Trident/");if(0>b)return 999;f=f.substr(b+8);b=f.indexOf(".");return 0<b?parseInt(f.substr(0,b),10)+4:999};h.prototype.prefersDarkMode=function(){return window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches};Object.defineProperty(h.prototype,"styles",{get:function(){this._styles||(this.detected||this.detect(),this._styles=new f.utils.StyleConstants(this));return this._styles},enumerable:!0,
configurable:!0});Object.defineProperty(h.prototype,"coreSpec",{get:function(){return new f.utils.DeviceSpec(this.browser,this.formFactor,this.OS,this.touchable)},enumerable:!0,configurable:!0});return h}();f.Device=h})(f.keyman||(f.keyman={}))})(com||(com={}));
(function(f){(function(h){(function(h){var l=function(){function g(){}g.getOutputTarget=function(c){if(!c){var b=f.keyman.singleton;b&&(c=b.domManager.getLastActiveElement());if(!c)return null}if(c._kmwAttachment&&c._kmwAttachment.interface)return c._kmwAttachment.interface;throw Error("OSK could not find element output target data!");};g.getAbsoluteX=function(c){if(!c)return 0;var b=c.offsetLeft?c.offsetLeft:0;var e=c;if(e.offsetParent){for(;e.offsetParent;)e=e.offsetParent,b+=e.offsetLeft;var a=
e.ownerDocument;"fixed"==e.style.position&&a&&a.scrollingElement&&(b+=a.scrollingElement.scrollLeft)}return e&&e.ownerDocument&&c.ownerDocument!=window.document&&(c=e.ownerDocument)&&c.defaultView&&c.defaultView.frameElement?b+g.getAbsoluteX(c.defaultView.frameElement)-c.documentElement.scrollLeft:b};g.getAbsoluteY=function(c){if(!c)return 0;var b=c.offsetTop?c.offsetTop:0;var e=c;if(e.ownerDocument&&e instanceof e.ownerDocument.defaultView.HTMLElement){for(;e.offsetParent;)e=e.offsetParent,b+=e.offsetTop;
var a=e.ownerDocument;"fixed"==e.style.position&&a&&a.scrollingElement&&(b+=a.scrollingElement.scrollTop)}return e&&e.ownerDocument&&c.ownerDocument!=window.document&&(c=e.ownerDocument)&&c.defaultView&&c.defaultView.frameElement?b+g.getAbsoluteY(c.defaultView.frameElement):b};g.instanceof=function(c,b){if("TouchAliasElement"==b)return this.instanceof(c,"HTMLDivElement")?void 0!==c.base:!1;var e;if(!c)return!1;if(c.Window)return"Window"==b;c.defaultView?e=c.defaultView[b]:c.ownerDocument?e=c.ownerDocument.defaultView[b]:
c.target&&(this.instanceof(c.target,"Window")?e=c.target[b]:this.instanceof(c.target,"Document")?e=c.target.defaultView[b]:this.instanceof(c.target,"HTMLElement")&&(e=c.target.ownerDocument.defaultView[b]));return e?c instanceof e:!1};g.forceScroll=function(c){if(f&&f.keyman&&f.keyman.DOMEventHandlers&&!f.keyman.singleton.isEmbedded){var b=f.keyman.DOMEventHandlers,e=c.selectionStart,a=c.selectionEnd;b.states._IgnoreBlurFocus=!0;c.blur();c.focus();b.states._IgnoreBlurFocus=!1;c.selectionStart=e;c.selectionEnd=
a}};return g}();h.Utils=l})(h.dom||(h.dom={}))})(f.keyman||(f.keyman={}))})(com||(com={}));
(function(f){(function(h){(function(h){h.constructTouchAlias=function(f){var c=document.createElement("div"),b=new l,e;for(e in b)c.hasOwnProperty(e)||(c[e]=b[e]);f?c.initWithBase(f):c.init();return c};var l=function(){function g(){this.base=null;this.__activeCaret=!1}g.getDevice=function(){if(!g.device){var c=new f.keyman.Device;c.detect();g.device=c}return g.device};g.getOS=function(){return this.getDevice().OS};g.prototype.isMultiline=function(){return this.base&&"TEXTAREA"==this.base.nodeName};
g.prototype.initCaret=function(){this.__caretDiv=document.createElement("DIV");var c=this.__caretDiv.style;c.position="absolute";c.height="16px";c.width="2px";c.backgroundColor="blue";c.border="none";c.left=c.top="0px";c.display="block";c.visibility="hidden";c.zIndex="9998";this.__caretTimerId=window.setInterval(this.flashCaret.bind(this),500)};g.prototype.init=function(){this.className="keymanweb-input";var c=this.__scrollDiv=document.createElement("div"),b=this.style;b.overflow="hidden";b.position=
"absolute";b.border="hidden";b.border="none";b.borderRadius="5px";var e=this.__scrollBar=document.createElement("div"),a=e.style;a.position="absolute";a.height=a.width="4px";a.left=a.top="0";a.display="block";a.visibility="hidden";a.backgroundColor="#808080";a.borderRadius="2px";this.__preCaret=document.createElement("span");this.__postCaret=document.createElement("span");this.__caretSpan=document.createElement("span");this.__preCaret.innerHTML=this.__postCaret.innerHTML=this.__caretSpan.innerHTML=
"";this.__preCaret.className=this.__postCaret.className=this.__caretSpan.className="keymanweb-font";c.appendChild(this.__preCaret);c.appendChild(this.__caretSpan);c.appendChild(this.__postCaret);this.appendChild(c);this.appendChild(e);c=c.style;c.position="absolute";e=this.__preCaret.style;a=this.__postCaret.style;var d=this.__caretSpan.style;e.border=a.border="none";e.height=a.height="100%";d.border="1px solid red";d.visibility="hidden";d.marginLeft=d.marginRight="-1px";b.padding="8px";c.padding=
"0px 2px";this.tabIndex=0;this.style.msTouchAction="none";c.minWidth=b.width;c.height=b.height;this.initCaret()};g.prototype.initWithBase=function(c){this.base=c;this.init();this.base.kmw_ip=this;c.disabled=!0;var b=window.getComputedStyle(c,null),e=this.__scrollDiv.style,a=this.__preCaret.style,d=this.__postCaret.style;this.dir=c.dir;a.fontFamily=d.fontFamily=e.fontFamily=b.fontFamily;"input"!=c.nodeName.toLowerCase()||isNaN(parseInt(b.height,10))||(a.lineHeight=d.lineHeight=b.height);"Android"==
g.getOS()&&"transparent"==b.backgroundColor?e.backgroundColor="#fff":e.backgroundColor=b.backgroundColor;"textarea"==this.base.nodeName.toLowerCase()?a.whiteSpace=d.whiteSpace="pre-wrap":a.whiteSpace=d.whiteSpace="pre";this.base.parentNode.appendChild(this);this.updateInput();a=this.style;a.color=b.color;a.fontFamily=b.fontFamily;a.fontSize=b.fontSize;a.fontWeight=b.fontWeight;a.textDecoration=b.textDecoration;a.padding=b.padding;a.margin=b.margin;a.border=b.border;a.borderRadius=b.borderRadius;"webkitTapHighlightColor"in
a&&(a.webkitTapHighlightColor="rgba(0,0,0,0)");c instanceof c.ownerDocument.defaultView.HTMLTextAreaElement?(2==c.rows&&(d=parseInt(b.height,10)-parseInt(b.paddingTop,10)-parseInt(b.paddingBottom,10),b=parseInt(b.fontSize,10),b=Math.round(d/b),b>c.rows+1&&(c.rows=b)),e.width=a.width,e.minHeight=a.height):(e.minWidth=a.width,e.height=a.height);c.style.visibility="hidden";(function(a){a.__resizeHandler=function(){window.setTimeout(function(){a.updateInput()},1)};a.base.addEventListener("resize",a.__resizeHandler,
!1);a.base.addEventListener("orientationchange",a.__resizeHandler,!1)})(this);this.setText(c instanceof c.ownerDocument.defaultView.HTMLTextAreaElement||c instanceof c.ownerDocument.defaultView.HTMLInputElement?c.value:c.textContent,null)};g.prototype.setText=function(c,b){if(null===c){var e=this.__preCaret.textContent;c=this.__postCaret.textContent;c=e+c}0>b&&(b=0);e=c._kmwLength();if(null===b||void 0===b||b>e)b=e;e=c._kmwSubstr(0,b);c=c._kmwSubstr(b);this.__preCaret.textContent=e;this.__postCaret.textContent=
c;this.updateBaseElement()};g.prototype.getTextBeforeCaret=function(){return this.__preCaret.textContent};g.prototype.getTextAfterCaret=function(){return this.__postCaret.textContent};g.prototype.setTextBeforeCaret=function(c){this.isMultiline()||(c=c.replace(/\s+$/," "));this.__preCaret.textContent=c;this.updateBaseElement();this.scrollInput()};g.prototype.getTextCaret=function(){return this.getTextBeforeCaret()._kmwLength()};g.prototype.setTextCaret=function(c){this.setText(null,c);this.showCaret()};
g.prototype.updateBaseElement=function(){if(this.base){var c=this.base.ownerDocument.defaultView;this.base instanceof c.HTMLInputElement||this.base instanceof c.HTMLTextAreaElement?this.base.value=this.getText():this.base.textContent=this.getText();c=this.getText()._kmwLength();this.style.backgroundColor=0==c?"transparent":window.getComputedStyle(this.base,null).backgroundColor;"iOS"==g.getOS()&&(this.base.style.visibility=0==c?"visible":"hidden")}};g.prototype.flashCaret=function(){if(this.__activeCaret){var c=
this.__caretDiv.style;c.visibility="visible"!=c.visibility?"visible":"hidden"}};g.prototype.showCaret=function(){var c=this.__scrollDiv,b=this.__caretDiv.style,e=this.__caretSpan;this.__caretDiv.parentNode!=c&&c.appendChild(this.__caretDiv);b.left=e.offsetLeft+"px";b.top=e.offsetTop+"px";b.height=e.offsetHeight-1+"px";b.visibility="hidden";this.__activeCaret=!0;this.scrollBody();this.setScrollBar()};g.prototype.hideCaret=function(){if(this.base instanceof this.base.ownerDocument.defaultView.HTMLTextAreaElement||
this.base instanceof this.base.ownerDocument.defaultView.HTMLInputElement)this.base.value=this.getText();this.setText(null,1E5);var c=this.__scrollDiv.style;this.isMultiline()?c.top="0":c.left="rtl"==this.base.dir?this.offsetWidth-this.__scrollDiv.offsetWidth-8+"px":"0";this.__caretDiv.parentNode&&this.__caretDiv.parentNode.removeChild(this.__caretDiv);this.__caretDiv.style.visibility="hidden";this.__scrollBar.style.visibility="hidden";this.__activeCaret=!1};g.prototype.getText=function(){return this.textContent};
g.prototype.updateInput=function(){if(this.base){var c=this.style,b=this.base,e=window.getComputedStyle(b,null),a=parseInt(e.marginLeft,10),d=parseInt(e.marginTop,10),k=h.Utils.getAbsoluteX(b),f=h.Utils.getAbsoluteY(b),l=this.offsetParent;l&&(k-=h.Utils.getAbsoluteX(l),f-=h.Utils.getAbsoluteY(l));isNaN(a)&&(a=0);isNaN(d)&&(d=0);c.left=k-a+"px";c.top=f-d+"px";"undefined"!=typeof e.MozBoxSizing&&(c.left=k+"px",c.top=f+"px");a=b.offsetWidth;b=b.offsetHeight;d=parseInt(e.paddingLeft,10);k=parseInt(e.paddingRight,
10);f=parseInt(e.paddingTop,10);l=parseInt(e.paddingBottom,10);var y=parseInt(e.borderLeft,10),n=parseInt(e.borderRight,10),u=parseInt(e.borderTop,10),w=parseInt(e.borderBottom,10),r="undefined";"undefined"!=typeof e.boxSizing?r=e.boxSizing:"undefined"!=typeof e.MozBoxSizing&&(r=e.MozBoxSizing);"content-box"==r&&(isNaN(d)||(a-=d),isNaN(k)||(a-=k),isNaN(y)||(a-=y),isNaN(n)||(a-=n),isNaN(f)||(b-=f),isNaN(l)||(b-=l),isNaN(u)||(b-=u),isNaN(w)||(b-=w));"Android"==g.getOS()&&("undefined"!=typeof e.MozBoxSizing?
(c.paddingTop=f+1+"px",c.paddingLeft=d+"px",this.isMultiline()?c.marginTop="1px":c.marginLeft="1px",a--,b--):(a++,b++));c.width=a+"px";c.height=b+"px"}};g.prototype.scrollInput=function(){var c=this.__scrollDiv,b=this.__caretSpan,e=h.Utils.getAbsoluteX(b);b=h.Utils.getAbsoluteY(b);var a=h.Utils.getAbsoluteX(this),d=h.Utils.getAbsoluteY(this),k=parseInt(c.style.left,10),f=parseInt(c.style.top,10),g=0,l=0;isNaN(k)&&(k=0);isNaN(f)&&(f=0);this.isMultiline()?(e=Math.round(this.offsetHeight/this.base.rows),
b<d&&(l=b-d),b>d+this.offsetHeight-e&&(l=b-d-this.offsetHeight+e),0!=l&&(c.style.top=(f<l?f-l:0)+"px")):(e<a+8&&(g=e-a-12),e>a+this.offsetWidth-12&&(g=e-a-this.offsetWidth+12),0!=g&&(c.style.left=(k<g?k-g:0)+"px"));this.showCaret()};g.prototype.scrollBody=function(){var c=0;if(window.keyman){var b=window.keyman.osk;b&&b._Box&&(c=b._Box.offsetHeight)}b=this.__caretSpan;var e=h.Utils.getAbsoluteY(b),a=window.pageYOffset;e<a?c=e-a:(c=e-a-(window.innerHeight-c-b.offsetHeight-2),0>c&&(c=0));0!=c&&window.scrollTo(0,
c+window.pageYOffset)};g.prototype.setScrollBar=function(){var c=this.__scrollDiv,b=this.__scrollBar.style;(c.offsetWidth>this.offsetWidth||0>c.offsetLeft)&&!this.isMultiline()?(b.height="4px",b.width=this.offsetWidth/c.offsetWidth*100+"%",b.left=-c.offsetLeft/c.offsetWidth*100+"%",b.top="0",b.visibility="visible"):c.offsetHeight>this.offsetHeight||0>c.offsetTop?(b.width="4px",b.height=this.offsetHeight/c.offsetHeight*100+"%",b.top=-c.offsetTop/c.offsetHeight*100+"%",b.left="0",b.visibility="visible"):
b.visibility="hidden"};return g}()})(h.dom||(h.dom={}))})(f.keyman||(f.keyman={}))})(com||(com={}));
(function(f){(function(h){(function(l){var r=function(){function g(){}g._GetEventKeyCode=function(c){return c.keyCode?c.keyCode:c.which?c.which:null};g._GetKeyEventProperties=function(c,b){b=f.keyman.singleton;var e=b.core,a=new h.text.KeyEvent;c=b._GetEventObject(c);if(!0===c.cancelBubble)return null;var d=b.util.eventTarget(c);if(null==d)return null;3==d.nodeType&&(d=d.parentNode);a.Ltarg=l.Utils.getOutputTarget(d);a.Lcode=this._GetEventKeyCode(c);if(null==a.Lcode)return null;var k=e.keyboardProcessor.modStateFlags,
g=!1,x=!1;d=h.text.Codes.keyCodes;switch(a.Lcode){case d.K_CTRL:case d.K_LCTRL:case d.K_RCTRL:case d.K_CONTROL:case d.K_LCONTROL:case d.K_RCONTROL:g=!0;break;case d.K_LMENU:case d.K_RMENU:case d.K_ALT:case d.K_LALT:case d.K_RALT:x=!0}d=0|(c.getModifierState("Shift")?16:0);var y=h.text.Codes.modifierCodes;c.getModifierState("Control")&&(d|=0!=c.location&&g?1==c.location?y.LCTRL:y.RCTRL:k&3);c.getModifierState("Alt")&&(d|=0!=c.location&&x?1==c.location?y.LALT:y.RALT:k&12);a.Lstates=0;a.Lstates|=c.getModifierState("CapsLock")?
y.CAPS:y.NO_CAPS;a.Lstates|=c.getModifierState("NumLock")?y.NUM_LOCK:y.NO_NUM_LOCK;a.Lstates|=c.getModifierState("ScrollLock")||c.getModifierState("Scroll")?y.SCROLL_LOCK:y.NO_SCROLL_LOCK;d|=a.Lstates;a.LmodifierChange=e.keyboardProcessor.modStateFlags!=d;e.keyboardProcessor.modStateFlags=d;g=y.RALT|y.LCTRL;(k&g)==g&&(d&g)!=g&&(d&=~g);d&y.RALT&&(d&=~y.LCTRL);g=h.text.Codes.modifierBitmasks;(k=e.activeKeyboard)&&k.isChiral?(a.Lmodifiers=d&g.CHIRAL,k.emulatesAltGr&&(a.Lmodifiers&g.ALT_GR_SIM)==g.ALT_GR_SIM&&
(a.Lmodifiers^=g.ALT_GR_SIM,a.Lmodifiers|=y.RALT)):a.Lmodifiers=d&16|(d&(y.LCTRL|y.RCTRL)?32:0)|(d&(y.LALT|y.RALT)?64:0);k&&k.isMnemonic&&h.text.KeyboardProcessor.setMnemonicCode(a,c.getModifierState("Shift"),c.getModifierState("CapsLock"));a.LisVirtualKey="undefined"!=typeof c.charCode&&null!=c.charCode&&(0==c.charCode||0!=(a.Lmodifiers&111))||"keypress"!=c.type;a.device=b.util.physicalDevice.coreSpec;a.isSynthetic=!1;k&&!k.isMnemonic&&((c=h.KeyMapping.languageMap[e.keyboardProcessor.baseLayout])&&
c["k"+a.Lcode]&&(a.Lcode=c["k"+a.Lcode]),k.definesPositionalOrMnemonic||a.Lmodifiers&96||(a={Lcode:h.KeyMapping._USKeyCodeToCharCode(a),Ltarg:a.Ltarg,Lmodifiers:0,LisVirtualKey:!1,vkCode:a.Lcode,Lstates:a.Lstates,kName:"",device:b.util.physicalDevice.coreSpec,isSynthetic:!1}));!b.isEmbedded&&a.device.browser==h.utils.Browser.Firefox&&h.KeyMapping.browserMap.FF["k"+a.Lcode]&&(a.Lcode=h.KeyMapping.browserMap.FF["k"+a.Lcode]);return a};g.keyDown=function(c){var b=f.keyman.singleton.core;l.DOMEventHandlers.states.swallowKeypress=
!1;var e=this._GetKeyEventProperties(c,!0);if(null==e)return!0;(b=null!=b.processKeyEvent(e))?(c&&c.preventDefault&&(c.preventDefault(),c.stopPropagation()),l.DOMEventHandlers.states.swallowKeypress=!!e.Lcode,8==e.Lcode&&(l.DOMEventHandlers.states.swallowKeypress=!1)):l.DOMEventHandlers.states.swallowKeypress=!1;return!b};g.keyUp=function(c){var b=f.keyman.singleton.core;c=this._GetKeyEventProperties(c,!1);return null==c?!0:b.keyboardProcessor.doModifierPress(c,!1)};g.keyPress=function(c){var b=f.keyman.singleton,
e=b.core,a=this._GetKeyEventProperties(c);if(null==a||a.LisVirtualKey)return!0;if(!e.activeKeyboard.isMnemonic){if(!l.DOMEventHandlers.states.swallowKeypress||32>a.Lcode||b._BrowserIsSafari&&63232<a.Lcode&&63744>a.Lcode)return!0;if(c=b._GetEventObject(c))c.returnValue=!1;return!1}if(l.DOMEventHandlers.states.swallowKeypress||e.keyboardInterface.processKeystroke(a.Ltarg,a))return l.DOMEventHandlers.states.swallowKeypress=!1,c&&c.preventDefault&&(c.preventDefault(),c.stopPropagation()),!1;l.DOMEventHandlers.states.swallowKeypress=
!1;return!0};return g}();l.PreProcessor=r})(h.dom||(h.dom={}))})(f.keyman||(f.keyman={}))})(com||(com={}));
(function(f){(function(h){(function(h){var l=function(){function b(){this._DisableInput=!1;this._IgnoreNextSelChange=0;this._IgnoreBlurFocus=!1;this._SelectionControl=this._Selection=null}b.prototype.setFocusTimer=function(){this.focusing=!0;this.focusTimer=window.setTimeout(function(){this.focusing=!1}.bind(this),1E3)};return b}();h.CommonDOMStates=l;var g=function(){function b(e){this.setFocus=function(a){}.bind(this);this.setBlur=function(a){}.bind(this);this._ControlFocus=function(a){var d=this.keyman.util.device,
e=this.keyman.osk;a=this.keyman._GetEventObject(a);a=this.keyman.util.eventTarget(a);if(null==a)return!0;a.body&&(a=a.body);if(d.touchable&&(null==a.className||0>a.className.indexOf("keymanweb-input")))return!0;a.nodeName.toLowerCase();if(a.ownerDocument&&a instanceof a.ownerDocument.defaultView.HTMLInputElement){var f=a.type.toLowerCase();if("text"!=f&&"search"!=f)return!0}else if(!(a.ownerDocument&&"on"==a.ownerDocument.designMode||!d.touchable&&a.isContentEditable||a.ownerDocument&&a instanceof
a.ownerDocument.defaultView.HTMLTextAreaElement))return!0;c.states.activeElement=a;3==a.nodeType&&(a=a.parentNode);f=a;(null==a.className||0>a.className.indexOf("keymanweb-input"))&&this instanceof c&&this.scrollBody(a);a.ownerDocument&&a instanceof a.ownerDocument.defaultView.HTMLIFrameElement&&(this.keyman.domManager._AttachToIframe(a),a=a.contentWindow.document.body);var g=b.states.lastActiveElement;b.states.lastActiveElement=a;this.keyman.uiManager.justActivated?this._BlurKeyboardSettings():this._FocusKeyboardSettings(g?
!1:!0);if(this._CommonFocusHelper(a))return!0;a.ownerDocument&&a instanceof a.ownerDocument.defaultView.HTMLElement&&this.keyman.domManager._SetTargDir(a);this.doControlFocused(f,b.states.lastActiveElement);d.touchable?e._Enabled=!0:e.ready&&(this.keyman.isCJK()&&(e._Enabled=!0),e._Enabled?e._Show():e._Hide(!1));return!0}.bind(this);this._ControlBlur=function(a){a=this.keyman._GetEventObject(a);var c=this.keyman.util.eventTarget(a);if(null==c)return!0;c.body&&(c=c.body);if(b.states._IgnoreBlurFocus)return a.cancelBubble=
!0,a.stopPropagation(),!0;h.Utils.instanceof(b.states.activeElement,"TouchAliasElement")&&b.states.activeElement.hideCaret();b.states.activeElement=null;3==c.nodeType&&(c=c.parentNode);c.ownerDocument&&c instanceof c.ownerDocument.defaultView.HTMLIFrameElement&&(c=c.contentWindow.frameElement);this._BlurKeyboardSettings();b.states.lastActiveElement=c;this.keyman.uiManager.justActivated=!1;var e=this.keyman.uiManager.isActivating,g=f.keyman.singleton.core.activeKeyboard;!e&&g&&g.notify(0,h.Utils.getOutputTarget(c),
0);this.doControlBlurred(c,a,e);this.keyman.osk.ready&&!e&&this.keyman.osk._Hide(!1);this.doChangeEvent(c);this.keyman.resetContext();return!0}.bind(this);this._SelectionChange=function(){b.states._IgnoreNextSelChange&&b.states._IgnoreNextSelChange--;return!0}.bind(this);this._KeyDown=function(a){var c=this.keyman.core.activeKeyboard,e=this.keyman.osk,f=this.keyman.util;if(b.states._DisableInput||null==c)return!0;c=f.eventTarget(a);if(f.device.touchable){if(c&&"undefined"!=typeof c.kmwInput&&0==c.kmwInput)return!0}else if(c&&
0<=c.className.indexOf("kmw-disabled"))return!0;return e.ready?h.PreProcessor.keyDown(a):!0}.bind(this);this._KeyPress=function(a){return b.states._DisableInput||null==this.keyman.core.activeKeyboard?!0:h.PreProcessor.keyPress(a)}.bind(this);this._KeyUp=function(a){var b=this.keyman.osk,c=h.PreProcessor._GetKeyEventProperties(a,!1);if(null==c||!b.ready)return!0;b=c.Ltarg.getElement();if(13==c.Lcode){var e=!1;c.Ltarg instanceof b.ownerDocument.defaultView.HTMLTextAreaElement&&(e=!0);b.base&&b.base instanceof
b.base.ownerDocument.defaultView.HTMLTextAreaElement&&(e=!0);if(!e)return b instanceof b.ownerDocument.defaultView.HTMLInputElement&&("search"==b.type||"submit"==b.type?b.form.submit():this.keyman.domManager.moveToNext(!1)),!0}return h.PreProcessor.keyUp(a)}.bind(this);this.keyman=e}b.prototype.doControlFocused=function(b,a){var c={};c.target=b;c.activeControl=a;return this.keyman.util.callEvent("kmw.controlfocused",c)};b.prototype.doControlBlurred=function(b,a,c){var d={};d.target=b;d.event=a;d.isActivating=
c;return this.keyman.util.callEvent("kmw.controlblurred",d)};b.prototype._BlurKeyboardSettings=function(c,a){var d=this.keyman.core.activeKeyboard?this.keyman.core.activeKeyboard.id:"",e=this.keyman.keyboardManager.getActiveLanguage();void 0!==c&&void 0!==a&&(d=c,e=a);(c=b.states.lastActiveElement)&&null!=c._kmwAttachment.keyboard?(c._kmwAttachment.keyboard=d,c._kmwAttachment.languageCode=e):(this.keyman.globalKeyboard=d,this.keyman.globalLanguageCode=e)};b.prototype._FocusKeyboardSettings=function(c){var a=
b.states.lastActiveElement;a&&null!=a._kmwAttachment.keyboard?this.keyman.keyboardManager.setActiveKeyboard(a._kmwAttachment.keyboard,a._kmwAttachment.languageCode):c||this.keyman.keyboardManager.setActiveKeyboard(this.keyman.globalKeyboard,this.keyman.globalLanguageCode);this.keyman.modelManager&&this.keyman.core.languageProcessor.invalidateContext()};b.prototype._CommonFocusHelper=function(c){var a=f.keyman.singleton,d=this.keyman.uiManager;if(c.ownerDocument&&c instanceof c.ownerDocument.defaultView.HTMLIFrameElement&&
(!this.keyman.domManager._IsIEEditableIframe(c,1)||!this.keyman.domManager._IsMozillaEditableIframe(c,1)))return b.states._DisableInput=!0;b.states._DisableInput=!1;var e=a.core.activeKeyboard;d.justActivated||(c&&h.Utils.getOutputTarget(c)&&h.Utils.getOutputTarget(c).deadkeys().clear(),e&&e.notify(0,h.Utils.getOutputTarget(c),1));d.justActivated||b.states._SelectionControl==c||(d.isActivating=!1);d.justActivated=!1;b.states._SelectionControl=c;a.core.languageProcessor.isActive&&a.core.languageProcessor.predictFromTarget(h.Utils.getOutputTarget(c));
return!1};b.prototype.doChangeEvent=function(c){if(b.states.changed){if("function"==typeof Event)var a=new Event("change",{bubbles:!0,cancelable:!1});else a=document.createEvent("HTMLEvents"),a.initEvent("change",!0,!1);c.base&&c.base.kmw_ip&&(c=c.base);c.dispatchEvent(a)}b.states.changed=!1};b.states=new l;return b}();h.DOMEventHandlers=g;var c=function(b){function c(a){a=b.call(this,a)||this;a.setFocus=function(a){g.states.setFocusTimer();a&&h.Utils.instanceof(a,"TouchEvent")?a=a.touches[0]:(a=
{clientX:0,clientY:0},a.target=g.states.lastActiveElement?g.states.lastActiveElement.kmw_ip:this.keyman.domManager.sortedInputs[0].kmw_ip);this.setFocusWithTouch(a)}.bind(a);a.setBlur=function(a){if("relatedTarget"in a&&a.relatedTarget)var b=a.relatedTarget;this.keyman.resetContext();if(b&&(this.doChangeEvent(b),"DIV"!=b.nodeName||-1==b.className.indexOf("keymanweb-input"))){this.cancelInput();return}g.states.focusing||this.cancelInput()}.bind(a);a.dragInput=function(a){a.preventDefault();a.stopPropagation();
var b=h.Utils.instanceof(a,"TouchEvent")?a.targetTouches[0].target:a.target;if(null!=b){if(null==b.className||0>b.className.indexOf("keymanweb-input"))b=b.parentNode;if(null==b.className||0>b.className.indexOf("keymanweb-input"))b=b.parentNode;if(!(null==b.className||0>b.className.indexOf("keymanweb-input"))){if(h.Utils.instanceof(a,"TouchEvent")){var c=a.touches[0].screenX;var d=a.touches[0].screenY}else c=a.screenX,d=a.screenY;if("undefined"==typeof this.firstTouch||null==this.firstTouch)this.firstTouch=
{x:c,y:d};else{var e=this.firstTouch.x,f=this.firstTouch.y;a=b.firstChild;if("TEXTAREA"==b.base.nodeName){if(c=parseInt(a.style.top,10),isNaN(c)&&(c=0),e=f-d,-4>e||4<e)a.style.top=(c<e?c-e:0)+"px",this.firstTouch.y=d}else{d=parseInt(a.style.left,10);isNaN(d)&&(d=0);var g=e-c;if(-4>g||4<g)e=0,f=h.Utils.getAbsoluteX(b)+b.offsetWidth-a.offsetWidth-32,"rtl"==b.base.dir?e=16:f-=24,d-=g,d>e&&(d=e),d<f&&(d=f),a.style.left=d+"px",this.firstTouch.x=c}}this.setScrollBar(b)}}}.bind(a);return a}__extends(c,b);
c.prototype.setFocusWithTouch=function(a){var b=this.keyman.osk,c=a.clientX,e=a.clientY,f=a.target;var l=f&&h.Utils.instanceof(f,"HTMLSpanElement")?f.parentNode:f&&null!=f.className&&0<=f.className.indexOf("keymanweb-input")?f.firstChild:f;a=l.parentNode;if(g.states.activeElement!=a){var n=g.states.activeElement;n&&n.hideCaret();g.states.activeElement=a;a.focus()}this.keyman.domManager._SetTargDir(a);b.ready&&!b._Visible&&b._Show();if(f&&h.Utils.instanceof(f,"TouchAliasElement"))e=h.Utils.getAbsoluteX(l.firstChild),
"rtl"==a.dir?(e+=l.firstChild.offsetWidth,b=c>e?0:1E5):b=c<e?0:1E5,a.setTextCaret(b),a.scrollInput();else{var u;l=l.childNodes[1];f=0;n=a.getText()._kmwLength();b=a.getTextCaret();var w=document.body.scrollTop;if(a.base instanceof a.base.ownerDocument.defaultView.HTMLTextAreaElement){var r=Math.round(a.base.offsetHeight/a.base.rows);for(u=0;16>u;u++){var t=h.Utils.getAbsoluteY(l)-w;if(t>e&&b>f&&b!=n)n=b,b=Math.round((b+f)/2);else if(t<e-r&&b<n&&b!=f)f=b,b=Math.round((b+n)/2);else break;a.setTextCaret(b)}for(;h.Utils.getAbsoluteY(l)-
w>e&&b>f;)a.setTextCaret(--b);for(;h.Utils.getAbsoluteY(l)-w<e-r&&b<n;)a.setTextCaret(++b)}t="rtl"==a.dir?function(a,b){return a<b}:function(a,b){return a>b};for(u=0;16>u;u++){e=h.Utils.getAbsoluteX(l);if(t(e,c)&&b>f&&b!=n)n=b,b=Math.round((b+f)/2);else if(!t(e,c)&&b<n&&b!=f)f=b,b=Math.round((b+n)/2);else break;a.setTextCaret(b)}for(;t(h.Utils.getAbsoluteX(l),c)&&b>f;)a.setTextCaret(--b);for(;!t(h.Utils.getAbsoluteX(l),c)&&b<n;)a.setTextCaret(++b)}this._BlurKeyboardSettings();g.states.lastActiveElement=
a;a.showCaret();this._FocusKeyboardSettings(!1);this._CommonFocusHelper(a)};c.prototype.cancelInput=function(){g.states.activeElement&&h.Utils.instanceof(g.states.activeElement,"TouchAliasElement")&&g.states.activeElement.hideCaret();g.states.activeElement=null;this.keyman.osk.hideNow()};c.prototype.setScrollBar=function(a){var b=a.childNodes[0],c=a.childNodes[1].style;(b.offsetWidth>a.offsetWidth||0>b.offsetLeft)&&"TEXTAREA"!=a.base.nodeName?(c.height="4px",c.width=a.offsetWidth/b.offsetWidth*100+
"%",c.left=-b.offsetLeft/b.offsetWidth*100+"%",c.top="0",c.visibility="visible"):b.offsetHeight>a.offsetHeight||0>b.offsetTop?(c.width="4px",c.height=a.offsetHeight/b.offsetHeight*100+"%",c.top=-b.offsetTop/b.offsetHeight*100+"%",c.left="0",c.visibility="visible"):c.visibility="hidden"};c.prototype.scrollBody=function(a){var b=this.keyman.osk;if(a&&null!=a.className&&!(0>a.className.indexOf("keymanweb-input"))&&b.ready){a=a.firstChild.childNodes[1];var c=h.Utils.getAbsoluteY(a),e=window.pageYOffset;
c<e?b=c-e:(b=c-e-(window.innerHeight-b._Box.offsetHeight-a.offsetHeight-2),0>b&&(b=0));0!=b&&window.scrollTo(0,b+window.pageYOffset)}};return c}(g);h.DOMTouchHandlers=c})(h.dom||(h.dom={}))})(f.keyman||(f.keyman={}))})(com||(com={}));
(function(f){(function(h){(function(l){var r=h.text.DefaultOutput,g=h.text.Codes,c=r.isCommand,b=r.applyCommand;r.isCommand=function(b){switch(r.codeForEvent(b)){case g.keyCodes.K_TAB:case g.keyCodes.K_TABBACK:case g.keyCodes.K_TABFWD:return!0;default:return c(b)}};r.applyCommand=function(c){var a=r.codeForEvent(c),d=f.keyman.singleton.domManager;switch(a){case g.keyCodes.K_TAB:d.moveToNext(0!=(c.Lmodifiers&h.text.Codes.modifierCodes.SHIFT));break;case g.keyCodes.K_TABBACK:d.moveToNext(!0);break;
case g.keyCodes.K_TABFWD:d.moveToNext(!1)}b(c)}})(h.dom||(h.dom={}))})(f.keyman||(f.keyman={}))})(com||(com={}));
(function(f){(function(h){(function(l){h.text.prediction.LanguageProcessor.prototype.canEnable=function(){var g=f.keyman.singleton;return 10==g.util.getIEVersion()?(console.warn("KeymanWeb cannot properly initialize its WebWorker in this version of IE."),!1):10>g.util.getIEVersion()?(console.warn("WebWorkers are not supported in this version of IE."),!1):!0};var r=h.text.RuleBehavior.prototype.finalize;h.text.RuleBehavior.prototype.finalize=function(g){var c=this.transcription.keystroke.Ltarg;r.call(this,
g);g=this.transcription.transform;(""!=g.insert||0<g.deleteLeft||0<g.deleteRight)&&c instanceof l.targets.OutputTarget&&c.getElement()==l.DOMEventHandlers.states.activeElement&&(l.DOMEventHandlers.states.changed=!0);var b=f.keyman.singleton;b.isEmbedded&&(b.oninserttext(g.deleteLeft,g.insert,g.deleteRight),c instanceof l.targets.OutputTarget&&b.refreshElementContent(c.getElement()))}})(h.dom||(h.dom={}))})(f.keyman||(f.keyman={}))})(com||(com={}));
(function(f){(function(f){(function(h){(function(h){var g=function(c){function b(){return null!==c&&c.apply(this,arguments)||this}__extends(b,c);b.prototype.dispatchInputEventOn=function(b){var a;window.InputEvent&&(a=new InputEvent("input",{bubbles:!0,cancelable:!1}));b&&a&&b.dispatchEvent(a)};return b}(f.text.OutputTarget);h.OutputTarget=g})(h.targets||(h.targets={}))})(f.dom||(f.dom={}))})(f.keyman||(f.keyman={}))})(com||(com={}));
(function(f){(function(h){(function(l){(function(l){var g=function(c){function b(b){var a=c.call(this)||this;a.root=b;a._cachedSelectionStart=-1;return a}__extends(b,c);Object.defineProperty(b.prototype,"isSynthetic",{get:function(){return!1},enumerable:!0,configurable:!0});b.prototype.getElement=function(){return this.root};b.prototype.clearSelection=function(){var b=this.getCaret();this.root.value=this.root.value._kmwSubstring(0,b)+this.root.value._kmwSubstring(this.processedSelectionEnd);this.setCaret(b)};
b.prototype.hasSelection=function(){return!0};b.prototype.invalidateSelection=function(){this._cachedSelectionStart=-1};b.prototype.getCaret=function(){this.root.selectionStart!=this._cachedSelectionStart&&(this._cachedSelectionStart=this.root.selectionStart,this.processedSelectionStart=this.root.value._kmwCodeUnitToCodePoint(this.root.selectionStart),this.processedSelectionEnd=this.root.value._kmwCodeUnitToCodePoint(this.root.selectionEnd));return this.processedSelectionStart};b.prototype.getDeadkeyCaret=
function(){return this.getCaret()};b.prototype.setCaret=function(b){this.setSelection(b,b)};b.prototype.setSelection=function(b,a){var c=this.root.value._kmwCodePointToCodeUnit(b),e=this.root.value._kmwCodePointToCodeUnit(a);this.root.setSelectionRange(c,e);this.processedSelectionStart=b;this.processedSelectionEnd=a;h.dom.Utils.forceScroll(this.root)};b.prototype.getTextBeforeCaret=function(){return this.getText()._kmwSubstring(0,this.getCaret())};b.prototype.setTextBeforeCaret=function(b){this.getCaret();
var a=b._kmwLength();this.root.value=b+this.getText()._kmwSubstring(this.processedSelectionStart);this.setCaret(a)};b.prototype.setTextAfterCaret=function(b){var a=this.getCaret();this.root.value=this.getTextBeforeCaret()+b;this.setCaret(a)};b.prototype.getTextAfterCaret=function(){this.getCaret();return this.getText()._kmwSubstring(this.processedSelectionEnd)};b.prototype.getText=function(){return this.root.value};b.prototype.deleteCharsBeforeCaret=function(b){if(0<b){var a=this.getTextBeforeCaret(),
c=this.getCaret();b>c&&(b=c);this.adjustDeadkeys(-b);this.setTextBeforeCaret(a.kmwSubstring(0,this.getCaret()-b));this.setCaret(c-b)}};b.prototype.insertTextBeforeCaret=function(b){if(b){var a=this.getCaret(),c=this.getTextBeforeCaret(),e=this.getText()._kmwSubstring(this.processedSelectionStart);this.adjustDeadkeys(b._kmwLength());this.root.value=c+b+e;this.setCaret(a+b._kmwLength())}};b.prototype.handleNewlineAtCaret=function(){b.newlineHandler(this.root)};b.newlineHandler=function(b){!b||"search"!=
b.type&&"submit"!=b.type?f.keyman.singleton&&f.keyman.singleton.domManager.moveToNext(!1):(b.disabled=!1,b.form.submit())};b.prototype.doInputEvent=function(){this.dispatchInputEventOn(this.root)};return b}(l.OutputTarget);l.Input=g})(l.targets||(l.targets={}))})(h.dom||(h.dom={}))})(f.keyman||(f.keyman={}))})(com||(com={}));
(function(f){(function(f){(function(f){(function(h){var g=function(c){function b(b){var a=c.call(this)||this;a.root=b;a._cachedSelectionStart=-1;return a}__extends(b,c);Object.defineProperty(b.prototype,"isSynthetic",{get:function(){return!1},enumerable:!0,configurable:!0});b.prototype.getElement=function(){return this.root};b.prototype.clearSelection=function(){var b=this.getCaret();this.root.value=this.root.value._kmwSubstring(0,b)+this.root.value._kmwSubstring(this.processedSelectionEnd);this.setCaret(b)};
b.prototype.hasSelection=function(){return!0};b.prototype.invalidateSelection=function(){this._cachedSelectionStart=-1};b.prototype.getCaret=function(){this.root.selectionStart!=this._cachedSelectionStart&&(this._cachedSelectionStart=this.root.selectionStart,this.processedSelectionStart=this.root.value._kmwCodeUnitToCodePoint(this.root.selectionStart),this.processedSelectionEnd=this.root.value._kmwCodeUnitToCodePoint(this.root.selectionEnd));return this.processedSelectionStart};b.prototype.getDeadkeyCaret=
function(){return this.getCaret()};b.prototype.setCaret=function(b){this.setSelection(b,b)};b.prototype.setSelection=function(b,a){var c=this.root.value._kmwCodePointToCodeUnit(b),e=this.root.value._kmwCodePointToCodeUnit(a);this.root.setSelectionRange(c,e);this.processedSelectionStart=b;this.processedSelectionEnd=a;f.Utils.forceScroll(this.root)};b.prototype.getTextBeforeCaret=function(){return this.getText()._kmwSubstring(0,this.getCaret())};b.prototype.setTextBeforeCaret=function(b){this.getCaret();
var a=b._kmwLength();this.root.value=b+this.getText()._kmwSubstring(this.processedSelectionStart);this.setCaret(a)};b.prototype.setTextAfterCaret=function(b){var a=this.getCaret();this.root.value=this.getTextBeforeCaret()+b;this.setCaret(a)};b.prototype.getTextAfterCaret=function(){this.getCaret();return this.getText()._kmwSubstring(this.processedSelectionEnd)};b.prototype.getText=function(){return this.root.value};b.prototype.deleteCharsBeforeCaret=function(b){if(0<b){var a=this.getTextBeforeCaret(),
c=this.getCaret();b>c&&(b=c);this.adjustDeadkeys(-b);this.setTextBeforeCaret(a.kmwSubstring(0,this.getCaret()-b));this.setCaret(c-b)}};b.prototype.insertTextBeforeCaret=function(b){if(b){var a=this.getCaret(),c=this.getTextBeforeCaret(),e=this.getText()._kmwSubstring(this.processedSelectionStart);this.adjustDeadkeys(b._kmwLength());this.root.value=c+b+e;this.setCaret(a+b._kmwLength())}};b.prototype.handleNewlineAtCaret=function(){this.insertTextBeforeCaret("\n")};b.prototype.doInputEvent=function(){this.dispatchInputEventOn(this.root)};
return b}(h.OutputTarget);h.TextArea=g})(f.targets||(f.targets={}))})(f.dom||(f.dom={}))})(f.keyman||(f.keyman={}))})(com||(com={}));
(function(f){(function(f){(function(f){(function(f){var g=function(){return function(b,a){this.node=b;this.offset=a}}(),c=function(){return function(b,a){this.start=b;this.end=a}}(),b=function(b){function a(a){if(a.isContentEditable){var c=b.call(this)||this;c.root=a}else throw"Specified element is not already content-editable!";return c}__extends(a,b);Object.defineProperty(a.prototype,"isSynthetic",{get:function(){return!1},enumerable:!0,configurable:!0});a.prototype.getElement=function(){return this.root};
a.prototype.hasSelection=function(){var a=this.root.ownerDocument.getSelection(),b=function(a,b){return 3!=b.nodeType?null:0!=(b.compareDocumentPosition(a)&8)};return this.root!=a.anchorNode&&!this.root.contains(a.anchorNode)&&!b(this.root,a.anchorNode)||this.root!=a.focusNode&&!this.root.contains(a.focusNode)&&!b(this.root,a.anchorNode)?!1:!0};a.prototype.clearSelection=function(){if(this.hasSelection()){var a=this.root.ownerDocument.getSelection();a.isCollapsed||a.deleteFromDocument()}else console.warn("Attempted to clear an unowned Selection!")};
a.prototype.invalidateSelection=function(){};a.prototype.getCarets=function(){var a=this.root.ownerDocument.getSelection(),b=a.anchorNode.compareDocumentPosition(a.focusNode);if(a.isCollapsed)return b=new g(a.anchorNode,a.anchorOffset),new c(b,b);var e=new g(a.anchorNode,a.anchorOffset);a=new g(a.focusNode,a.focusOffset);e.node==a.node&&(b=0<a.offset-e.offset?2:4);return b&2?new c(e,a):new c(a,e)};a.prototype.getDeadkeyCaret=function(){return this.getTextBeforeCaret().kmwLength()};a.prototype.getTextBeforeCaret=
function(){if(this.hasSelection()){var a=this.getCarets().start;return 3!=a.node.nodeType?"":a.node.textContent.substr(0,a.offset)}};a.prototype.getTextAfterCaret=function(){if(this.hasSelection()){var a=this.getCarets().end;return 3!=a.node.nodeType?"":a.node.textContent.substr(a.offset)}};a.prototype.getText=function(){return this.root.innerText};a.prototype.deleteCharsBeforeCaret=function(a){if(this.hasSelection()&&!(0>=a)){var b=this.getCarets().start;a>b.offset&&(a=b.offset);if(3!=b.node.nodeType)console.warn("Deletion of characters requested without available context!");
else{var c=this.root.ownerDocument.createRange(),d=b.offset-b.node.nodeValue.substr(0,b.offset)._kmwSubstr(-a).length;c.setStart(b.node,d);c.setEnd(b.node,b.offset);this.adjustDeadkeys(-a);c.deleteContents()}}};a.prototype.insertTextBeforeCaret=function(a){if(this.hasSelection()){var b=this.getCarets().start,c=a._kmwLength(),d=this.root.ownerDocument.getSelection();if(0!=c){this.adjustDeadkeys(c);c=this.root.ownerDocument.createRange();if(3==b.node.nodeType){var e=b.node;e.insertData(b.offset,a);
c.setStart(e,b.offset+a.length)}else{e=b.node.ownerDocument.createTextNode(a);var f=this.root.ownerDocument.createRange();f.setStart(b.node,b.offset);f.collapse(!0);f.insertNode(e);c.setStart(e,a.length)}c.collapse(!0);d.removeAllRanges();try{d.addRange(c)}catch(u){b.node.parentElement.scrollIntoView(),d.addRange(c)}d.collapseToEnd()}}};a.prototype.handleNewlineAtCaret=function(){};a.prototype.setTextAfterCaret=function(a){if(this.hasSelection()){var b=this.getCarets().end,c=a._kmwLength();this.root.ownerDocument.getSelection();
0!=c&&(3==b.node.nodeType?(c=b.node,c.replaceData(b.offset,c.length,a)):(a=b.node.ownerDocument.createTextNode(a),c=this.root.ownerDocument.createRange(),c.setStart(b.node,b.offset),c.collapse(!0),c.insertNode(a)))}};a.prototype.doInputEvent=function(){this.dispatchInputEventOn(this.root)};return a}(f.OutputTarget);f.ContentEditable=b})(f.targets||(f.targets={}))})(f.dom||(f.dom={}))})(f.keyman||(f.keyman={}))})(com||(com={}));
(function(f){(function(f){(function(f){(function(f){var g=function(){return function(a,b){this.node=a;this.offset=b}}(),c=function(){return function(a,b){this.start=a;this.end=b}}(),b=function(){return function(a,b){this.cmd=a;this.stateType=b}}(),e=function(a){function d(b){var c=a.call(this)||this;c.root=b;if(b.contentWindow&&b.contentWindow.document&&"on"==b.contentWindow.document.designMode)c.doc=b.contentWindow.document,c.docRoot=b.contentWindow.document.documentElement;else throw"Specified IFrame is not in design-mode!";
return c}__extends(d,a);Object.defineProperty(d.prototype,"isSynthetic",{get:function(){return!1},enumerable:!0,configurable:!0});d.prototype.getElement=function(){return this.root};d.prototype.hasSelection=function(){this.doc.getSelection();document.getSelection();return!0};d.prototype.clearSelection=function(){if(this.hasSelection()){var a=this.doc.getSelection();a.isCollapsed||a.deleteFromDocument()}else console.warn("Attempted to clear an unowned Selection!")};d.prototype.invalidateSelection=
function(){};d.prototype.getCarets=function(){var a=this.doc.getSelection(),b=a.anchorNode.compareDocumentPosition(a.focusNode);if(a.isCollapsed)return b=new g(a.anchorNode,a.anchorOffset),new c(b,b);var d=new g(a.anchorNode,a.anchorOffset);a=new g(a.focusNode,a.focusOffset);d.node==a.node&&(b=0<a.offset-d.offset?2:4);return b&2?new c(d,a):new c(a,d)};d.prototype.getDeadkeyCaret=function(){return this.getTextBeforeCaret().kmwLength()};d.prototype.getTextBeforeCaret=function(){if(this.hasSelection()){var a=
this.getCarets().start;return 3!=a.node.nodeType?"":a.node.textContent.substr(0,a.offset)}};d.prototype.getTextAfterCaret=function(){if(this.hasSelection()){var a=this.getCarets().end;return 3!=a.node.nodeType?"":a.node.textContent.substr(a.offset)}};d.prototype.getText=function(){return this.docRoot.innerText};d.prototype.deleteCharsBeforeCaret=function(a){if(this.hasSelection()&&!(0>=a)){var b=this.getCarets().start;a>b.offset&&(a=b.offset);if(3!=b.node.nodeType)console.warn("Deletion of characters requested without available context!");
else{var c=this.doc.createRange(),d=b.offset-b.node.nodeValue.substr(0,b.offset)._kmwSubstr(-a).length;c.setStart(b.node,d);c.setEnd(b.node,b.offset);this.adjustDeadkeys(-a);c.deleteContents()}}};d.prototype.insertTextBeforeCaret=function(a){if(this.hasSelection()){var b=this.getCarets().start,c=a._kmwLength(),d=this.doc.getSelection();if(0!=c){this.adjustDeadkeys(c);c=this.root.ownerDocument.createRange();if(3==b.node.nodeType){var e=b.node;e.insertData(b.offset,a);c.setStart(e,b.offset+a.length)}else{e=
this.doc.createTextNode(a);var f=this.doc.createRange();f.setStart(b.node,b.offset);f.collapse(!0);f.insertNode(e);c.setStart(e,a.length)}c.collapse(!0);d.removeAllRanges();try{d.addRange(c)}catch(w){b.node.parentElement.scrollIntoView(),d.addRange(c)}d.collapseToEnd()}}};d.prototype.handleNewlineAtCaret=function(){};d.prototype.setTextAfterCaret=function(a){if(this.hasSelection()){var b=this.getCarets().end,c=a._kmwLength();this.doc.getSelection();0!=c&&(3==b.node.nodeType?(c=b.node,c.replaceData(b.offset,
c.length,a)):(a=b.node.ownerDocument.createTextNode(a),c=this.root.ownerDocument.createRange(),c.setStart(b.node,b.offset),c.collapse(!0),c.insertNode(a)))}};d.prototype.saveProperties=function(){var a=[new b("backcolor",1),new b("fontname",1),new b("fontsize",1),new b("forecolor",1),new b("bold",0),new b("italic",0),new b("strikethrough",0),new b("subscript",0),new b("superscript",0),new b("underline",0)];this.doc.defaultView&&a.push(new b("hilitecolor",1));for(var c=0;c<a.length;c++){var d=a[c];
d.cache=1==d.stateType?this.doc.queryCommandValue(d.cmd):this.doc.queryCommandState(d.cmd)}this.commandCache=a};d.prototype.restoreProperties=function(a){this.commandCache||console.error("No command cache exists to restore!");for(var b=0;b<this.commandCache.length;b++){var c=this.commandCache[b];1==c.stateType?this.doc.queryCommandValue(c.cmd)!=c.cache&&(a&&a(),this.doc.execCommand(c.cmd,!1,c.cache)):this.doc.queryCommandState(c.cmd)!=c.cache&&(a&&a(),this.doc.execCommand(c.cmd,!1,null))}};d.prototype.doInputEvent=
function(){this.dispatchInputEventOn(this.root)};return d}(f.OutputTarget);f.DesignIFrame=e})(f.targets||(f.targets={}))})(f.dom||(f.dom={}))})(f.keyman||(f.keyman={}))})(com||(com={}));
(function(f){(function(f){(function(f){(function(h){var g=function(c){function b(b){var a=c.call(this)||this;a.root=b;return a}__extends(b,c);b.prototype.getElement=function(){return this.root};b.prototype.clearSelection=function(){};b.prototype.invalidateSelection=function(){};b.prototype.hasSelection=function(){return!0};b.prototype.getDeadkeyCaret=function(){return this.root.getTextCaret()};b.prototype.getTextBeforeCaret=function(){return this.root.getTextBeforeCaret()};b.prototype.getTextAfterCaret=
function(){return this.root.getTextAfterCaret()};b.prototype.getText=function(){return this.root.getText()};b.prototype.deleteCharsBeforeCaret=function(b){if(0<b){var a=this.getTextBeforeCaret();this.getDeadkeyCaret()<b&&(b=this.getDeadkeyCaret());this.adjustDeadkeys(-b);this.root.setTextBeforeCaret(a.kmwSubstring(0,this.root.getTextCaret()-b))}};b.prototype.insertTextBeforeCaret=function(b){this.adjustDeadkeys(b._kmwLength());this.root.setTextBeforeCaret(this.root.getTextBeforeCaret()+b)};b.prototype.handleNewlineAtCaret=
function(){"TEXTAREA"==this.root.base.nodeName?this.insertTextBeforeCaret("\n"):f.Utils.instanceof(this.root.base,"HTMLInputElement")?h.Input.newlineHandler(this.root.base):console.warn("TouchAlias OutputTarget cannot output newlines for unexpected base element types!")};b.prototype.setTextAfterCaret=function(b){this.root.setText(this.getTextBeforeCaret()+b,this.getTextBeforeCaret()._kmwLength())};b.prototype.doInputEvent=function(){this.dispatchInputEventOn(this.root.base)};return b}(h.OutputTarget);
h.TouchAlias=g})(f.targets||(f.targets={}))})(f.dom||(f.dom={}))})(f.keyman||(f.keyman={}))})(com||(com={}));
(function(f){(function(f){(function(f){(function(h){h.wrapElement=function(g){return f.Utils.instanceof(g,"HTMLInputElement")?new h.Input(g):f.Utils.instanceof(g,"HTMLTextAreaElement")?new h.TextArea(g):f.Utils.instanceof(g,"TouchAliasElement")?new h.TouchAlias(g):f.Utils.instanceof(g,"HTMLIFrameElement")&&g.contentWindow&&g.contentWindow.document&&"on"==g.contentWindow.document.designMode?new h.DesignIFrame(g):g.isContentEditable?new h.ContentEditable(g):null}})(f.targets||(f.targets={}))})(f.dom||
(f.dom={}))})(f.keyman||(f.keyman={}))})(com||(com={}));
(function(f){(function(h){(function(h){var l=function(){function g(){}g.prototype.loadStore=function(c,b){c=f.keyman.singleton.util.loadCookie("KeymanWeb_"+c+"_Option_"+b);"undefined"!=typeof c[b]&&(c[b]=decodeURIComponent(c[b]));return c||{}};g.prototype.saveStore=function(c,b,e){c="KeymanWeb_"+c+"_Option_"+b;e[b]=encodeURIComponent(e[b]);f.keyman.singleton.util.saveCookie(c,e)};return g}();h.VariableStoreCookieSerializer=l})(h.dom||(h.dom={}))})(f.keyman||(f.keyman={}))})(com||(com={}));
(function(f){(function(h){(function(l){var r=function(){function c(b){this.e=b;this.c=b.style.backgroundColor}c.prototype.reset=function(){this.e.style.backgroundColor=this.c};return c}(),g=function(){function c(b){this.inputList=[];this.sortedInputs=[];this._BeepObjects=[];this._BeepTimeout=0;this.nonKMWTouchHandler=function(b){l.DOMEventHandlers.states.focusing=!1;clearTimeout(l.DOMEventHandlers.states.focusTimer);this.keyman.osk.hideNow()}.bind(this);this._EnablementMutationObserverCore=function(b){for(var a=
0;a<b.length;a++){var c=b[a],e=c.oldValue?0<=c.oldValue.indexOf("kmw-disabled"):!1,f=0<=c.target.className.indexOf("kmw-disabled");e&&!f?this._EnableControl(c.target):!e&&f&&this._DisableControl(c.target);!f&&"readonly"==c.attributeName&&(e=c.oldValue?null!=c.oldValue:!1,f=c.target,f instanceof f.ownerDocument.defaultView.HTMLInputElement||f instanceof f.ownerDocument.defaultView.HTMLTextAreaElement)&&(f=f.readOnly,e&&!f?this._EnableControl(c.target):!e&&f&&this._DisableControl(c.target))}}.bind(this);
this._AutoAttachObserverCore=function(b){for(var a=[],c=[],e=0;e<b.length;e++){for(var f=b[e],g=0;g<f.addedNodes.length;g++)a=a.concat(this._GetDocumentEditables(f.addedNodes[g]));for(g=0;g<f.removedNodes.length;g++)c=c.concat(this._GetDocumentEditables(f.removedNodes[g]))}for(b=0;b<a.length;b++)this.isKMWInput(a[b])&&this._MutationAdditionObserved(a[b]);for(b=0;b<c.length;b++)this.isKMWInput(c[b])&&this._MutationRemovalObserved(c[b]);if(a.length||c.length)if(!this.keyman.util.device.touchable)this.listInputs();
else if(this.keyman.util.device.touchable){var h=this;window.setTimeout(function(){h.listInputs();for(var a=0;a<this.sortedInputs.length;a++)this.sortedInputs[a].kmw_ip&&this.sortedInputs[a].kmw_ip.updateInput()}.bind(this),1)}}.bind(this);this._MutationAdditionObserved=function(b){if(b instanceof b.ownerDocument.defaultView.HTMLIFrameElement&&!this.keyman.util.device.touchable){var a=this;b.addEventListener("load",function(){window.setTimeout(function(){a.attachToControl(b)},1)})}else this.attachToControl(b)};
this._MutationRemovalObserved=function(b){this.keyman.util.device.touchable&&this.disableTouchElement(b);this.disableInputElement(b);this.clearElementAttachment(b)};this.enableControl=function(b){this.isAttached(b)||console.warn("KeymanWeb is not attached to element "+b);var a=b.className;0<=a.indexOf("kmw-disabled")&&(b.className=a.replace("kmw-disabled","").trim())};this._WindowLoad=function(b){document.body.scrollTop=0;"undefined"!=typeof document.documentElement&&(document.documentElement.scrollTop=
0)}.bind(this);this._WindowUnload=function(){this.keyman.uiManager.doUnload();this.keyman.osk.ready&&(this.keyman.osk.shutdown(),this.keyman.osk._Unload());this.clearLastActiveElement()}.bind(this);this.init=function(b){var a,d=this.keyman.osk;var e=this.keyman.util;var f=e.device;this.keyman.core.keyboardProcessor.beepHandler=this.doBeep.bind(this);this.keyman.core.keyboardProcessor.warningLogger=console.warn.bind(console);this.keyman.core.keyboardProcessor.errorLogger=console.error.bind(console);
var g=function(a){if(0==a.length)return a;"/"!=a.substr(a.length-1,1)&&(a+="/");return"http"==a.replace(/^(http)s?:.*/,"$1")||"file"==a.replace(/^(file):.*/,"$1")?a:"//"==a.substr(0,2)?this.keyman.protocol+a:"/"==a.substr(0,1)?this.keyman.rootPath+a.substr(1):this.keyman.srcPath+a}.bind(this);var h=this.keyman.options;if("object"==typeof b&&null!==b)for(a in h)b.hasOwnProperty(a)&&(h[a]=b[a]);""!=h.root&&(this.keyman.rootPath=g(h.root));""==h.resources&&(h.resources=this.keyman.srcPath);h.resources=
g(h.resources);h.keyboards=g(h.keyboards);h.fonts=g(h.fonts);""==h.attachType&&(h.attachType="auto");this.keyman.setDefaultDeviceOptions(h);if(this.keyman.initialized)return Promise.resolve();var n=this.keyman,l=this;if("complete"!==document.readyState)return new Promise(function(a){window.setTimeout(function(){l.init(b).then(function(){a()})},50)});n.modelManager.init();this.keyman._MasterDocument=window.document;"Android"==f.OS&&(h=f.getDPI(),f.formFactor=screen.height<4*h||screen.width<4*h?"phone":
"tablet");this.keyman.setInitialized(1);d.prepare();e.prepareWait();this.keyman.keyboardManager.registerDeferredStubs();this.initializeUI();this.keyman.keyboardManager.registerDeferredKeyboards();if(this.keyman.isEmbedded)return this.keyman.keyboardManager.setDefaultKeyboard()||console.error("No keyboard stubs exist - cannot initialize keyboard!"),Promise.resolve();this.keyman.appliedFont=this.keyman.baseFont=this.getBaseFont();f.touchable&&this.keyman.handleRotationEvents();"manual"!=this.keyman.options.attachType&&
this._SetupDocument(document.documentElement);this.listInputs();f.touchable&&(d._Box.addEventListener("touchend",function(a){a.stopPropagation()},!1),e=document.createElement("DIV"),h=e.style,h.width="100%",h.height=screen.width/2+"px",document.body.appendChild(e),"Android"==f.OS&&0<navigator.userAgent.indexOf("Chrome")?(this.keyman.hideOskWhileScrolling=function(b){if("undefined"!=typeof d._Box&&"undefined"!=typeof d._Box.style){a=b.target.parentNode;if("undefined"!=typeof a&&null!=a&&(0<=a.className.indexOf("keymanweb-input")||
0<=a.className.indexOf("kmw-key-")||"undefined"!=typeof a.parentNode&&(a=a.parentNode,0<=a.className.indexOf("keymanweb-input")||0<=a.className.indexOf("kmw-key-"))))return;d.hideNow()}},this.keyman.util.attachDOMEvent(document.body,"touchstart",this.keyman.hideOskWhileScrolling,!1)):(this.keyman.conditionallyHideOsk=function(){n.hideOnRelease&&!d.lgList&&d.hideNow();n.hideOnRelease=!1},this.keyman.hideOskIfOnBody=function(a){n.touchY=a.touches[0].screenY;n.hideOnRelease=!0},this.keyman.cancelHideIfScrolling=
function(a){a=a.touches[0].screenY;var b=n.touchY;if(5<a-b||5>b-a)n.hideOnRelease=!1},this.keyman.util.attachDOMEvent(document.body,"touchstart",this.keyman.hideOskIfOnBody,!1),this.keyman.util.attachDOMEvent(document.body,"touchmove",this.keyman.cancelHideIfScrolling,!1),this.keyman.util.attachDOMEvent(document.body,"touchend",this.keyman.conditionallyHideOsk,!1)));this.keyman.keyboardManager.restoreCurrentKeyboard();MutationObserver?(f=document.querySelector("body"),"manual"!=this.keyman.options.attachType&&
(e={childList:!0,subtree:!0},this.attachmentObserver=new MutationObserver(this._AutoAttachObserverCore),this.attachmentObserver.observe(f,e)),e={subtree:!0,attributes:!0,attributeOldValue:!0,attributeFilter:["class","readonly"]},this.enablementObserver=new MutationObserver(this._EnablementMutationObserverCore),this.enablementObserver.observe(f,e)):console.warn("Your browser is outdated and does not support MutationObservers, a web feature needed by KeymanWeb to support dynamically-added elements.");
this.keyman.util.attachDOMEvent(document.body,"focus",c.suppressFocusCheck,!0);this.keyman.util.attachDOMEvent(document.body,"blur",c.suppressFocusCheck,!0);this.keyman.setInitialized(2);return Promise.resolve()}.bind(this);this.keyman=b;b.util.device.touchable&&(this.touchHandlers=new l.DOMTouchHandlers(b));this.nonTouchHandlers=new l.DOMEventHandlers(b)}c.prototype.shutdown=function(){try{this.enablementObserver&&this.enablementObserver.disconnect();this.attachmentObserver&&this.attachmentObserver.disconnect();
for(var b=0,e=this.inputList;b<e.length;b++)this.disableInputElement(e[b]);this.keyman.util.detachDOMEvent(document.body,"focus",c.suppressFocusCheck,!0);this.keyman.util.detachDOMEvent(document.body,"blur",c.suppressFocusCheck,!0)}catch(a){console.error("Error occurred during shutdown"),console.error(a)}};c.prototype.doBeep=function(b){var c=f.keyman.singleton;if("beepKeyboard"in c)c.beepKeyboard();else if(b instanceof l.targets.OutputTarget&&(c=b.getElement(),b instanceof l.targets.DesignIFrame&&
(c=b.docRoot),c&&c.style&&"undefined"!=typeof c.style.backgroundColor)){for(b=0;b<this._BeepObjects.length;b++)if(this._BeepObjects[b].e==c)return;this._BeepObjects=f.keyman.singleton._push(this._BeepObjects,new r(c));c.style.backgroundColor="#000000";0==this._BeepTimeout&&(this._BeepTimeout=1,window.setTimeout(this.beepReset.bind(this),50))}};c.prototype.beepReset=function(){f.keyman.singleton.core.keyboardInterface.resetContextCache();var b;for(b=this._BeepTimeout=0;b<this._BeepObjects.length;b++)this._BeepObjects[b].reset();
this._BeepObjects=[]};c.prototype.getHandlers=function(b){return(b=b.base?b.base._kmwAttachment:b._kmwAttachment)?b.touchEnabled?this.touchHandlers:this.nonTouchHandlers:this.keyman.touchAliasing};c.prototype.enableTouchElement=function(b){if("iframe"==b.tagName.toLowerCase())return!1;if(this.isKMWDisabled(b))return this.setupNonKMWTouchElement(b),!1;b.kmwInput=!0;b.removeEventListener("touchstart",this.nonKMWTouchHandler);if(b.kmw_ip){if(-1!=this.inputList.indexOf(b.kmw_ip))return!1;this.inputList.push(b.kmw_ip);
console.log("Unexpected state - this element's simulated input DIV should have been removed from the page!");return!0}var c=l.constructTouchAlias(b);this.isAttached(c)?c._kmwAttachment.interface=l.targets.wrapElement(c):this.setupElementAttachment(c);b._kmwAttachment=c._kmwAttachment;this.enableInputElement(c,!0);var a=this.touchHandlers;c.addEventListener("touchstart",a.setFocus);c.onmspointerdown=function(b){b.preventDefault();b.stopPropagation();return a.setFocus(b)};c.addEventListener("touchend",
function(a){a.stopPropagation()});c.onmspointerup=function(a){a.stopPropagation()};c.addEventListener("touchmove",a.dragInput,!1);c.onmspointermove=a.dragInput;c.onblur=a.setBlur;return!0};c.prototype.disableTouchElement=function(b){if("iframe"!=b.tagName.toLowerCase()){if(b.kmw_ip){var c=this.inputList.indexOf(b.kmw_ip);-1!=c&&this.inputList.splice(c,1);b.style.visibility="visible";b.disabled=!1;b.removeEventListener("resize",b.kmw_ip._kmwResizeHandler);this.disableInputElement(b.kmw_ip);b._kmwAttachment.interface=
l.targets.wrapElement(b);b.parentNode&&b.parentNode.removeChild(b.kmw_ip);delete b.kmw_ip}this.setupNonKMWTouchElement(b)}};c.prototype.setupNonKMWTouchElement=function(b){this.keyman.util.attachDOMEvent(b,"touchstart",this.nonKMWTouchHandler,!1);this.isAttached(b)&&(b._kmwAttachment.touchEnabled=!1)};c.prototype.enableInputElement=function(b,c){var a=c?b.base:b;this.isKMWDisabled(a)||(b instanceof b.ownerDocument.defaultView.HTMLIFrameElement?this._AttachToIframe(b):(c||this.setupElementAttachment(b),
a.className=a.className?a.className+" keymanweb-font":"keymanweb-font",this.inputList.push(b),this.keyman.util.attachDOMEvent(a,"focus",this.getHandlers(b)._ControlFocus),this.keyman.util.attachDOMEvent(a,"blur",this.getHandlers(b)._ControlBlur),b.onkeypress=this.getHandlers(b)._KeyPress,b.onkeydown=this.getHandlers(b)._KeyDown,b.onkeyup=this.getHandlers(b)._KeyUp))};c.prototype.disableInputElement=function(b,c){if(b){var a=c?b.base:b;if(b.ownerDocument.defaultView&&b instanceof b.ownerDocument.defaultView.HTMLIFrameElement||
b instanceof HTMLIFrameElement)this._DetachFromIframe(b);else{0<a.className.indexOf("keymanweb-font")&&!c&&(a.className=a.className.replace("keymanweb-font","").trim());var d=this.inputList.indexOf(b);-1<d&&this.inputList.splice(d,1);c||(this.keyman.util.detachDOMEvent(a,"focus",this.getHandlers(b)._ControlFocus),this.keyman.util.detachDOMEvent(a,"blur",this.getHandlers(b)._ControlBlur));b.onkeypress=null;b.onkeydown=null;b.onkeyup=null}c&&(this.inputList.push(a),a.onkeypress=this.getHandlers(b)._KeyPress,
a.onkeydown=this.getHandlers(b)._KeyDown,a.onkeyup=this.getHandlers(b)._KeyUp);c=this.getLastActiveElement();if(c==b||c==b.kmw_ip)this.clearLastActiveElement(),this.keyman.osk._Hide(!1)}};c.prototype.isKMWDisabled=function(b){var c=b.className;return b.readOnly||c&&0<=c.indexOf("kmw-disabled")?!0:!1};c.prototype.attachToControl=function(b){var c=this.keyman.util.device.touchable;if(!this.isAttached(b)||b instanceof b.ownerDocument.defaultView.HTMLIFrameElement)this.isKMWInput(b)?this.isKMWDisabled(b)?
c&&this.setupNonKMWTouchElement(b):c&&!this.keyman.isEmbedded?this.enableTouchElement(b):this.enableInputElement(b):c&&this.setupNonKMWTouchElement(b)};c.prototype.detachFromControl=function(b){if(this.isAttached(b)||b instanceof b.ownerDocument.defaultView.HTMLIFrameElement)this.isKMWInput(b)&&(this.isKMWDisabled(b)||this._DisableControl(b)),this.clearElementAttachment(b)};c.prototype.isAttached=function(b){return b._kmwAttachment?!0:!1};c.prototype.isKMWInput=function(b){var c=this.keyman.util.device.touchable;
if(b instanceof b.ownerDocument.defaultView.HTMLTextAreaElement)return!0;if(b instanceof b.ownerDocument.defaultView.HTMLInputElement){if("text"==b.type||"search"==b.type)return!0}else if(b instanceof b.ownerDocument.defaultView.HTMLIFrameElement&&!c)try{if(b.contentWindow&&b.contentWindow.document)return!0}catch(a){console.warn("Error during attachment to / detachment from iframe: "),console.warn(a)}else if(b.isContentEditable&&!c)return!0;return!1};c.prototype.setupElementAttachment=function(b){if(!b._kmwAttachment){var c=
l.targets.wrapElement(b);c||l.Utils.instanceof(b,"HTMLIFrameElement")||console.warn("Could not create processing interface for newly-attached element!");b._kmwAttachment=new h.AttachmentInfo(c,null,this.keyman.util.device.touchable)}};c.prototype.clearElementAttachment=function(b){b._kmwAttachment=null};c.prototype._AttachToIframe=function(b){var c=this.keyman.util;try{var a=b.contentWindow.document;a&&("on"==a.designMode.toLowerCase()?("firefox"==c.device.browser?(c.attachDOMEvent(a,"focus",this.getHandlers(b)._ControlFocus),
c.attachDOMEvent(a,"blur",this.getHandlers(b)._ControlBlur)):(c.attachDOMEvent(a.body,"focus",this.getHandlers(b)._ControlFocus),c.attachDOMEvent(a.body,"blur",this.getHandlers(b)._ControlBlur)),c.attachDOMEvent(a.body,"keydown",this.getHandlers(b)._KeyDown),c.attachDOMEvent(a.body,"keypress",this.getHandlers(b)._KeyPress),c.attachDOMEvent(a.body,"keyup",this.getHandlers(b)._KeyUp),this.setupElementAttachment(b),a.body._kmwAttachment=b._kmwAttachment):this._SetupDocument(a.body))}catch(d){}};c.prototype._DetachFromIframe=
function(b){var c=this.keyman.util;try{var a=b.contentWindow.document;a&&("on"==a.designMode.toLowerCase()?("firefox"==c.device.browser?(c.detachDOMEvent(a,"focus",this.getHandlers(b)._ControlFocus),c.detachDOMEvent(a,"blur",this.getHandlers(b)._ControlBlur)):(c.detachDOMEvent(a.body,"focus",this.getHandlers(b)._ControlFocus),c.detachDOMEvent(a.body,"blur",this.getHandlers(b)._ControlBlur)),c.detachDOMEvent(a.body,"keydown",this.getHandlers(b)._KeyDown),c.detachDOMEvent(a.body,"keypress",this.getHandlers(b)._KeyPress),
c.detachDOMEvent(a.body,"keyup",this.getHandlers(b)._KeyUp),a.body._kmwAttachment=null):this._ClearDocument(a.body))}catch(d){}};c.prototype._GetDocumentEditables=function(b){var c=this.keyman.util,a=[];if(b.ownerDocument&&b instanceof b.ownerDocument.defaultView.HTMLElement){var d=b.ownerDocument.defaultView;b instanceof d.HTMLInputElement||b instanceof d.HTMLTextAreaElement?a.push(b):b instanceof d.HTMLIFrameElement&&a.push(b)}b.getElementsByTagName&&(a=a.concat(c.arrayFromNodeList(b.getElementsByTagName("INPUT")),
c.arrayFromNodeList(b.getElementsByTagName("TEXTAREA")),c.arrayFromNodeList(b.getElementsByTagName("IFRAME"))));b.querySelectorAll&&(a=a.concat(c.arrayFromNodeList(b.querySelectorAll("[contenteditable]"))));b.ownerDocument&&b instanceof b.ownerDocument.defaultView.HTMLElement&&b.isContentEditable&&a.push(b);return a};c.prototype._SetupDocument=function(b){b=this._GetDocumentEditables(b);for(var c=0;c<b.length;c++)this.attachToControl(b[c])};c.prototype._ClearDocument=function(b){b=this._GetDocumentEditables(b);
for(var c=0;c<b.length;c++)this.detachFromControl(b[c])};c.prototype._SetTargDir=function(b){var c=f.keyman.singleton.core.activeKeyboard;c=c&&c.isRTL?"rtl":"ltr";b&&(this.keyman.util.device.touchable?0==b.textContent.length&&(b.base.dir=b.dir=c,b.setTextCaret(1E4)):b instanceof b.ownerDocument.defaultView.HTMLInputElement||b instanceof b.ownerDocument.defaultView.HTMLTextAreaElement?0==b.value.length&&(b.dir=c):"string"==typeof b.textContent&&0==b.textContent.length&&(b.dir=c))};c.prototype._DisableControl=
function(b){if(this.isAttached(b)||b instanceof b.ownerDocument.defaultView.HTMLIFrameElement)this.keyman.util.device.touchable?(this.disableTouchElement(b),this.setupNonKMWTouchElement(b),window.setTimeout(function(){this.listInputs();for(var b=0;b<this.sortedInputs.length;b++)this.sortedInputs[b].kmw_ip&&this.sortedInputs[b].kmw_ip.updateInput(this.sortedInputs[b].kmw_ip)}.bind(this),1)):this.listInputs(),this.disableInputElement(b)};c.prototype._EnableControl=function(b){if(this.isAttached(b))if(this.keyman.util.device.touchable){this.enableTouchElement(b);
var c=this.keyman;window.setTimeout(function(){c.domManager.listInputs();for(var a=0;a<this.sortedInputs.length;a++)this.sortedInputs[a].kmw_ip&&this.sortedInputs[a].kmw_ip.updateInput(this.sortedInputs[a].kmw_ip)}.bind(this),1)}else this.enableInputElement(b)};c.prototype.listInputs=function(){var b,c=[],a=document.getElementsByTagName("input"),d=document.getElementsByTagName("textarea");for(b=0;b<a.length;b++)switch(a[b].type){case "text":case "search":case "email":case "url":0>a[b].className.indexOf("kmw-disabled")&&
c.push({ip:a[b],x:l.Utils.getAbsoluteX(a[b]),y:l.Utils.getAbsoluteY(a[b])})}for(b=0;b<d.length;b++)0>d[b].className.indexOf("kmw-disabled")&&c.push({ip:d[b],x:l.Utils.getAbsoluteX(d[b]),y:l.Utils.getAbsoluteY(d[b])});c.sort(function(a,b){return a.y!=b.y?a.y-b.y:a.x-b.x});a=[];for(b=0;b<c.length;b++)a.push(c[b].ip);this.sortedInputs=a};c.prototype.disableControl=function(b){this.isAttached(b)||console.warn("KeymanWeb is not attached to element "+b);var c=b.className;0>c.indexOf("kmw-disabled")&&(b.className=
c?c+" kmw-disabled":"kmw-disabled")};c.prototype.setKeyboardForControl=function(b,c,a){null!==c&&void 0!==c?0>c.indexOf("Keyboard_")&&""!=c&&(c="Keyboard_"+c):a=null;if(b instanceof b.ownerDocument.defaultView.HTMLIFrameElement)console.warn("'keymanweb.setKeyboardForControl' cannot set keyboard on iframes.");else if(this.isAttached(b)){b._kmwAttachment.keyboard=c;b._kmwAttachment.languageCode=a;var d=this.getLastActiveElement();!d||d!=b&&d!=b.kmw_ip||(null!=c&&null!=a?this.keyman.keyboardManager.setActiveKeyboard(c,
a):this.keyman.keyboardManager.setActiveKeyboard(this.keyman.globalKeyboard,this.keyman.globalLanguageCode))}else console.error("KeymanWeb is not attached to element "+b)};c.prototype.getKeyboardForControl=function(b){if(this.isAttached(b))return b._kmwAttachment.keyboard;console.error("KeymanWeb is not attached to element "+b);return null};c.prototype.getLanguageForControl=function(b){if(this.isAttached(b))return b._kmwAttachment.languageCode;console.error("KeymanWeb is not attached to element "+
b);return null};c.prototype.focusLastActiveElement=function(){var b=this.getLastActiveElement();b&&(this.keyman.uiManager.justActivated=!0,b.ownerDocument&&b instanceof b.ownerDocument.defaultView.HTMLIFrameElement&&this.keyman.domManager._IsMozillaEditableIframe(b,0)?b.ownerDocument.defaultView.focus():b.focus&&b.focus())};c.prototype.getLastActiveElement=function(){return l.DOMEventHandlers.states.lastActiveElement};c.prototype.clearLastActiveElement=function(){l.DOMEventHandlers.states.lastActiveElement=
null};c.prototype.getActiveElement=function(){return l.DOMEventHandlers.states.activeElement};c.prototype._setActiveElement=function(b){l.DOMEventHandlers.states.activeElement=b};c.prototype.setActiveElement=function(b,c){"string"==typeof b&&(b=document.getElementById(b));if(this.keyman.isEmbedded)this.isAttached(b)||this.attachToControl(b);else if(!this.isAttached(b)){console.warn("Cannot set an element KMW is not attached to as the active element.");return}b=b.kmw_ip?b.kmw_ip:b;this.keyman.isEmbedded||
this.keyman.touchAliasing._BlurKeyboardSettings();l.DOMEventHandlers.states.activeElement!=b&&this.keyman.resetContext(b);l.DOMEventHandlers.states.activeElement=l.DOMEventHandlers.states.lastActiveElement=b;this.keyman.isEmbedded||this.keyman.touchAliasing._FocusKeyboardSettings(!1);1<arguments.length&&c&&(this.keyman.util.device.touchable?this.keyman.touchAliasing.setFocusWithTouch({clientX:0,clientY:0,target:b}):this.focusLastActiveElement())};c.prototype.initActiveElement=function(b){null==l.DOMEventHandlers.states.activeElement&&
(l.DOMEventHandlers.states.activeElement=b)};c.prototype.moveToNext=function(b){var c,a=this.sortedInputs,d=this.getActiveElement(),f=this.keyman.util.device.touchable;if(0!=a.length){f&&(d=d.base);for(c=0;c<a.length&&a[c]!=d;c++);c=b?c-1:c+1;c=c>=a.length?c-a.length:c;c=0>c?c+a.length:c;f?(l.DOMEventHandlers.states.focusing=!0,b=a[c].kmw_ip,"undefined"==typeof b?a[c].focus():(this.keyman.domManager.setActiveElement(b),b.setTextCaret(1E4),b.scrollInput(),b.focus())):a[c].focus()}};c.prototype.moveToElement=
function(b){"string"==typeof b&&(b=document.getElementById(b));this.keyman.util.device.touchable&&b.kmw_ip?b.kmw_ip.focus():b.focus()};c.prototype._IsIEEditableIframe=function(b,c){var a,d=b&&(a=b.tagName)&&"body"==a.toLowerCase()&&(a=b.ownerDocument)&&a.parentWindow;return!c&&d||c&&(!d||b.isContentEditable)};c.prototype._IsMozillaEditableIframe=function(b,c){var a;b=b&&(a=b.defaultView)&&a.frameElement;return!c&&b||c&&(!b||"on"==a.document.designMode.toLowerCase())};c.prototype.getBaseFont=function(){var b=
this.keyman.util,c=document.getElementsByTagName("input"),a=document.getElementsByTagName("textarea"),d=0;if(0==c.length&&0==a.length)d=0;else if(0<c.length&&0==a.length)d=1;else if(0==c.length&&0<a.length)d=2;else{var f=c[0],g=a[0];f.offsetTop<g.offsetTop?d=1:f.offsetTop>g.offsetTop?d=2:f.offsetLeft<g.offsetLeft?d=1:f.offsetLeft>g.offsetLeft&&(d=2)}switch(d){case 0:case 1:b.getStyleValue(c[0],"font-family");case 2:var h=b.getStyleValue(a[0],"font-family")}if("undefined"==typeof h||"monospace"==h)h=
"Arial,sans-serif";return h};c.prototype.initializeUI=function(){this.keyman.ui&&this.keyman.ui.initialize instanceof Function?(this.keyman.ui.initialize(),this.keyman.osk._Show()):this.keyman.isEmbedded||window.setTimeout(this.initializeUI.bind(this),1E3)};c.suppressFocusCheck=function(b){l.DOMEventHandlers.states._IgnoreBlurFocus&&(b.stopPropagation(),b.cancelBubble=!0);return!0};return c}();l.DOMManager=g})(h.dom||(h.dom={}))})(f.keyman||(f.keyman={}))})(com||(com={}));
(function(f){(function(h){var l=function(){function f(c,b,e,a){this.Pelem=c;this.Peventname=b.toLowerCase();this.Phandler=e;this.PuseCapture=a}f.prototype.equals=function(c){return this.Pelem==c.Pelem&&this.Peventname==c.Peventname&&this.Phandler==c.Phandler&&this.PuseCapture==c.PuseCapture};return f}(),r=function(){function g(c){this.linkedStylesheets=[];this.events={};this.currentEvents=[];this.domEvents=[];this.embeddedFonts=[];this._GetAbsolute=this.getAbsolute;this.selectStartHandler=function(){return!1};
this._CancelMouse=function(b){(b=f.keyman.singleton._GetEventObject(b))&&b.preventDefault&&b.preventDefault();b&&(b.cancelBubble=!0,b.returnValue=!1);return!1};this.createElement=this._CreateElement;this.initDevices();this.keyman=c}g.prototype.getLanguageCodes=function(c){return-1==c.indexOf("-")?[c]:c.split("-")};g.prototype.initDevices=function(){this.device=new h.Device;this.physicalDevice=new h.Device;this.activeDevice=this.device;this.device.detect();"desktop"==this.device.formFactor&&(this.device.touchable=
!1);this.physicalDevice=new h.Device;this.physicalDevice.touchable=!1;this.physicalDevice.browser=this.device.browser;this.physicalDevice.formFactor="desktop";this.physicalDevice.OS=this.device.OS};g.prototype.arrayFromNodeList=function(c){for(var b=[],e=0;e<c.length;e++)b.push(c[e]);return b};g.prototype.addEventListener=function(c,b){this.removeEventListener(c,b);this.events[c].push(b);return!0};g.prototype.removeEventListener=function(c,b){"undefined"==typeof this.events[c]&&(this.events[c]=[]);
for(var e=0;e<this.events[c].length;e++)if(this.events[c][e]==b)return this.events[c].splice(e,1),!0;return!1};g.prototype.callEvent=function(c,b){if("undefined"==typeof this.events[c])return!0;if(-1!=this.currentEvents.indexOf(c))return!1;this.currentEvents.push(c);for(var e=0;e<this.events[c].length;e++){var a=this.events[c][e],d=!1;try{d=a(b)}catch(k){console.error(k),d=!1}if(!1===d)return this.currentEvents.pop(),!1}this.currentEvents.pop();return!0};g.prototype.attachDOMEvent=function(c,b,e,
a){this.detachDOMEvent(c,b,e,a);c.addEventListener(b,e,a?!0:!1);c=new l(c,b,e,a);this.domEvents.push(c)};g.prototype.detachDOMEvent=function(c,b,e,a){c.removeEventListener(b,e,a);c=new l(c,b,e,a);for(b=0;b<this.domEvents.length;b++)if(this.domEvents[b].equals(c)){this.domEvents.splice(b,1);break}};g.prototype.getOption=function(c,b){return c in this.keyman.options?this.keyman.options[c]:1<arguments.length?b:""};g.prototype.hasClass=function(c,b){b=" "+b+" ";return 0<=(" "+c.className+" ").replace(/[\n\t\r\f]/g,
" ").indexOf(b)};g.prototype.setOption=function(c,b){this.keyman.options[c]=b};g.prototype.getAbsoluteX=function(c){return h.dom.Utils.getAbsoluteX(c)};g.prototype.getAbsoluteY=function(c){return h.dom.Utils.getAbsoluteY(c)};g.prototype.getAbsolute=function(c){return{x:this.getAbsoluteX(c),y:this.getAbsoluteY(c)}};g.prototype.mouseDownPreventDefaultHandler=function(c){c&&c.preventDefault()};g.prototype._CreateElement=function(c){c=document.createElement(c);"undefined"!=typeof c.onselectstart?c.onselectstart=
this.selectStartHandler:(c.style.MozUserSelect="none",c.style.KhtmlUserSelect="none",c.style.UserSelect="none",c.style.WebkitUserSelect="none");return c};g.prototype.getIEVersion=function(){return h.Device._GetIEVersion()};g.prototype.getFontSizeStyle=function(c){var b="string"==typeof c?c:c.style.fontSize;return-1!=b.indexOf("em")?(c=parseFloat(b.substr(0,b.indexOf("em"))),{val:c,absolute:!1}):-1!=b.indexOf("px")?(c=parseFloat(b.substr(0,b.indexOf("px"))),{val:c,absolute:!0}):-1!=b.indexOf("pt")?
(c=parseFloat(b.substr(0,b.indexOf("pt"))),{val:4*c/3,absolute:!0}):-1!=b.indexOf("%")?(c=parseFloat(b.substr(0,b.indexOf("%"))),{val:c/100,absolute:!1}):isNaN(c=Number(b))?(console.error("Could not properly parse specified fontsize info: '"+b+"'."),null):{val:4*c/3,absolute:!0}};g.prototype.getStyleValue=function(c,b){try{if(c&&"undefined"!=typeof window.getComputedStyle)return window.getComputedStyle(c,"").getPropertyValue(b)}catch(e){}return""};g.prototype.getStyleInt=function(c,b,e){c=parseInt(this.getStyleValue(c,
b),10);return isNaN(c)?"number"==typeof e?e:0:c};g.prototype.isTouchDevice=function(){return this.device.touchable};g.prototype.portraitView=function(){return!this.landscapeView()};g.prototype.landscapeView=function(){if("undefined"!=typeof window.orientation)var c=window.orientation;else"undefined"!=typeof window.screen.orientation&&(c=window.screen.orientation.angle);return void 0!==c?1==Math.abs(c/90):!1};g.prototype.getViewportScale=function(){try{if(screen.width>document.documentElement.clientWidth)return 1;
var c=screen.width;this.landscapeView()?screen.width<screen.height&&(c=screen.height):screen.width>screen.height&&(c=screen.height);return Math.round(100*c/window.innerWidth)/100}catch(b){return 1}};g.prototype.barHeight=function(){var c=0;"phone"==this.device.formFactor&&(c=screen.height/2-window.innerHeight-(this.landscapeView()?this.device.dyLandscape:this.device.dyPortrait));return c};g.prototype._EncodeEntities=function(c){return c.replace("&","&amp;").replace("<","&lt;").replace(">","&gt;")};
g.prototype.createShim=function(){console.warn("The util.createShim function is deprecated, as its old functionality is no longer needed.  It and references to its previously-produced shims may be safely removed.")};g.prototype.showShim=function(c,b,e){console.warn("The util.showShim function is deprecated, as its old functionality is no longer needed.  It may be safely removed.")};g.prototype.hideShim=function(c){console.warn("The util.hideShim function is deprecated, as its old functionality is no longer needed.  It may be safely removed.")};
g.prototype.rgba=function(c,b,e,a,d){c="transparent";try{c="rgba("+b+","+e+","+a+","+d+")"}catch(k){c="rgb("+b+","+e+","+a+")"}return c};g.prototype.addStyleSheet=function(c){var b=document.createElement("style");b.type="text/css";b.appendChild(document.createTextNode(c));c=document.getElementsByTagName("HEAD");0<c.length?c[0].appendChild(b):document.body.appendChild(b);this.linkedStylesheets.push(b);return b};g.prototype.removeStyleSheet=function(c){if(null==c||"object"!=typeof c||"STYLE"!=c.nodeName||
"undefined"==typeof c.parentNode||null==c.parentNode)return!1;c.parentNode.removeChild(c);return!0};g.prototype.linkStyleSheet=function(c){var b=document.getElementsByTagName("head");if(0<b.length){var e=document.createElement("link");e.type="text/css";e.rel="stylesheet";e.href=c;this.linkedStylesheets.push(e);b[0].appendChild(e)}};g.prototype.addFontFaceStyleSheet=function(c){if("undefined"!=typeof c&&("undefined"==typeof c.files&&(c.files=c.source),"undefined"!=typeof c.files)){var b,e="",a="",
d="",f="",g=[];for(b=0;b<this.embeddedFonts.length;b++)if(this.embeddedFonts[b]==c.family)return;"string"==typeof c.files?g[0]=c.files:g=c.files;for(b=0;b<g.length;b++)0<g[b].toLowerCase().indexOf(".otf")&&(e=g[b]),0<g[b].toLowerCase().indexOf(".ttf")&&(e=g[b]),0<g[b].toLowerCase().indexOf(".woff")&&(a=g[b]),0<g[b].toLowerCase().indexOf(".eot")&&(d=g[b]),0<g[b].toLowerCase().indexOf(".svg")&&(f=g[b]);""!=e&&0>e.indexOf("/")&&(e=this.keyman.options.fonts+e);""!=a&&0>a.indexOf("/")&&(a=this.keyman.options.fonts+
a);""!=d&&0>d.indexOf("/")&&(d=this.keyman.options.fonts+d);""!=f&&0>f.indexOf("/")&&(f=this.keyman.options.fonts+f);b="@font-face {\nfont-family:"+c.family+";\nfont-style:normal;\nfont-weight:normal;\n";if(9<=h.Device._GetIEVersion())if("iOS"==this.device.OS)if(""!=e)e=this.unCached(e),b=b+"src:url('"+e+"') format('truetype');";else return;else{d=[];"Android"==this.device.OS?(""!=f&&d.push("url('"+f+"') format('svg')"),""!=a&&d.push("url('"+a+"') format('woff')"),""!=e&&d.push("url('"+e+"') format('truetype')")):
(""!=a&&d.push("url('"+a+"') format('woff')"),""!=e&&d.push("url('"+e+"') format('truetype')"),""!=f&&d.push("url('"+f+"') format('svg')"));if(0==d.length)return;b+="src:"+d.join(",")+";"}else if(""!=d)b=b+"src:url('"+d+"');";else return;this.addStyleSheet(b+"\n}\n");this.embeddedFonts.push(c.family)}};g.prototype.unCached=function(c){return c};g.prototype.loadCookie=function(c){var b={};if(0<arguments.length){var e=this.loadCookie(),a;for(a in e)if(a==c)for(var d=decodeURIComponent(e[a]).split(";"),
f=0;f<d.length;f++){var g=d[f].split("=");b[g[0]]=1<g.length?g[1]:""}}else if("undefined"!=typeof document.cookie&&""!=document.cookie)for(e=document.cookie.split(/;\s*/),f=0;f<e.length;f++)d=e[f].split("="),2==d.length&&(b[d[0]]=d[1]);return b};g.prototype.saveCookie=function(c,b){var e="",a;for(a in b)e=e+a+"="+b[a]+";";b=(new Date((new Date).valueOf()+2592E6)).toUTCString();document.cookie=c+"="+encodeURIComponent(e)+"; path=/; expires="+b};g.prototype.toNumber=function(c,b){c=parseInt(c,10);return isNaN(c)?
b:c};g.prototype.toFloat=function(c,b){c=parseFloat(c);return isNaN(c)?b:c};g.prototype.nzString=function(c,b){var e="";1<arguments.length&&(e=b);return"undefined"==typeof c||null==c||0==c||""==c?e:""+c};g.prototype.eventTarget=function(c){return c?c.target?c.target:c.srcElement?c.srcElement:window.event?window.event.srcElement:null:null};g.prototype.eventType=function(c){return c&&c.type?c.type:window.event?window.event.type:""};g.prototype.alert=function(c,b){var e=this.waiting,a=e.firstChild.childNodes;
a[0].style.display="block";a[1].className="kmw-alert-text";a[1].innerHTML=c;a[2].style.display="none";e.style.display="block";e.dismiss=1<arguments.length?b:null};g.prototype.wait=function(c){};g.prototype.prepareWait=function(){var c=document.createElement("DIV"),b=document.createElement("DIV"),e=document.createElement("DIV"),a=document.createElement("DIV"),d=document.createElement("DIV");c.className="kmw-wait-background";b.className="kmw-wait-box";c.dismiss=null;e.className="kmw-wait-text";a.className=
"kmw-wait-graphic";d.className="kmw-alert-close";b.onmousedown=b.onclick=function(a){"block"==d.style.display&&(c.style.display="none",c.dismiss&&c.dismiss())};b.addEventListener("touchstart",b.onclick,!1);c.onmousedown=c.onclick=function(a){a.preventDefault();a.stopPropagation()};c.addEventListener("touchstart",c.onclick,!1);b.appendChild(d);b.appendChild(e);b.appendChild(a);c.appendChild(b);document.body.appendChild(c);this.waiting=c};g.prototype.shutdown=function(){this.events={};for(var c=0,b=
this.domEvents;c<b.length;c++){var e=b[c];this.detachDOMEvent(e.Pelem,e.Peventname,e.Phandler,e.PuseCapture)}this.waiting.parentNode.removeChild(this.waiting);c=0;for(b=this.linkedStylesheets;c<b.length;c++)e=b[c],e.remove?e.remove():e.parentNode&&e.parentNode.removeChild(e)};g.prototype.myPath=function(c){var b,e=document.getElementsByTagName("script");for(b=0;b<e.length;b++){var a=e[b];if(0<=a.src.indexOf(c))return a.src.substr(0,a.src.lastIndexOf("/")+1)}return""};g.prototype.prependProtocol=function(c){return/^https?:/.test(c)?
c:"//"==c.substr(0,2)?this.keyman.protocol+c:"/"==c.substr(0,1)?this.keyman.protocol+"/"+c:this.keyman.protocol+"//"+c};g.prototype.testString=function(c){var b=c.family;if("sample"in c&&"string"==typeof c.sample)return"BESbswy"+c.sample;var e="TamilWeb TibetanWeb LatinWeb CherokeeWeb EgyptianWeb SinhalaWeb KhmerWeb ArabicWeb BurmeseWeb LaoWeb OriyaWeb GeezWeb".split(" "),a="\u0bbe\u0bf5 \u0f7f\u0fd0 \u02b0\u02a4 \u13d0\u13c9 \ua723\uf7d3 \u0dd8\u0da3 \u17d6\u178e \u0639\u06b3 \u1038\u1024 \u0ec0\u0edd \u0b03\u0b06 \u1361\u132c".split(" ");
for(c=0;c<e.length;c++)if(b==e[c])return"BESbswy"+a[c];return"BESbswy"};g.prototype.checkFont=function(c){var b=c.family,e=document.createElement("DIV"),a=e.style,d=document.createElement("P"),f=document.createElement("P"),g=document.createElement("SPAN"),h=g.style,l=document.createElement("SPAN"),n=l.style;a.position="absolute";a.top="10px";a.left="10px";a.visibility="hidden";document.body.appendChild(e);e.appendChild(d);e.appendChild(f);d.appendChild(g);f.appendChild(l);g.setAttribute("style","font-family:monospace !important");
n.fontFamily=b+",monospace";h.fontSize=n.fontSize="24px";g.innerHTML=l.innerHTML=this.testString(c);g.offsetWidth!=l.offsetWidth&&(g.setAttribute("style","font-family:sans-serif !important"),n.fontFamily=b+",sans-serif",g.offsetWidth!=l.offsetWidth&&(g.setAttribute("style","font-family:serif !important"),n.fontFamily=b+",serif"));c=g.offsetWidth!=l.offsetWidth;d.removeChild(g);f.removeChild(l);e.removeChild(d);e.removeChild(f);document.body.removeChild(e);return c};g.prototype.checkFontDescriptor=
function(c){return"undefined"==typeof c||"string"!=typeof c.family?!0:this.checkFont(c)};return g}();h.Util=r})(f.keyman||(f.keyman={}))})(com||(com={}));var Util=com.keyman.Util;
(function(f){(function(h){(function(h){var l=function(){function a(a,b){this.id=a;this.language=b}a.prototype.toString=function(){var a=this.id;this.language?(a=a+"@"+this.language,this.version&&(a=a+"@"+this.version)):this.version&&(a=a+"@@"+this.version);return a};return a}(),g=function(){return function(a,b){this.family=a.family;this.files=a.source;this.path=b}}(),c=function(){return function(a,b){this.KI="Keyboard_"+a;this.KLC=b}}();h.KeyboardStub=c;var b=function(){return function(){this.stores=
{}}}();h.KeyboardTag=b;var e=function(){function a(a){this.activeStub=null;this.keyboardStubs=[];this.deferredStubs=[];this.deferredKRS=[];this.deferredKR=[];this.dfltStub=null;this.keyboards=[];this.languageList=null;this.languagesPending=[];this.linkedScripts=[];this._GetKeyboardDetail=function(a){var b={};b.Name=a.KN;b.InternalName=a.KI;b.LanguageName=a.KL;b.LanguageCode=a.KLC;b.RegionName=a.KR;b.RegionCode=a.KRC;b.CountryName=a.KC;b.CountryCode=a.KCC;b.KeyboardID=a.KD;b.Font=a.KFont;b.OskFont=
a.KOskFont;return b};this.keymanweb=a}a.prototype.getActiveKeyboardName=function(){var a=f.keyman.singleton.core;return a.activeKeyboard?a.activeKeyboard.id:""};a.prototype.getActiveLanguage=function(a){return null==this.activeStub?"":a?this.activeStub.KL:this.activeStub.KLC};a.prototype.getDetailedKeyboards=function(){var a=[],b;for(b=0;b<this.keyboardStubs.length;b++){var c=this.keyboardStubs[b];c=this._GetKeyboardDetail(c);a=this.keymanweb._push(a,c)}return a};a.prototype.registerDeferredStubs=
function(){this.addKeyboardArray(this.deferredStubs);for(var a=0;a<this.deferredKRS.length;a++)this._registerStub(this.deferredKRS[a])};a.prototype.registerDeferredKeyboards=function(){for(var a=0;a<this.deferredKR.length;a++)this._registerKeyboard(this.deferredKR[a])};a.prototype.addStub=function(a){if("string"!=typeof a.id)return!1;"undefined"!=typeof a.language&&(console.warn("The 'language' property for keyboard stubs has been deprecated.  Please use the 'languages' property instead."),a.languages=
a.language);if("undefined"==typeof a.languages)return!1;"string"!=typeof a.name&&(a.name=a.id.replace("_"," "),a.name=a.name.substr(0,1).toUpperCase()+a.name.substr(1));var b=a.languages,c=[];"undefined"==typeof b.length?c[0]=b:c=b;var d={keyboardBaseUri:this.keymanweb.options.keyboards,fontBaseUri:this.keymanweb.options.fonts};for(b=0;b<c.length;b++)this.mergeStub(a,c[b],d);return!0};a.prototype.mergeStub=function(b,e,f){var d=this.findStub(b.id,e.id),k=!1;null==d&&(d=new c(b.id,e.id),this.keyboardStubs.push(d),
k=!0);var h=e.region,p=0;if("number"==typeof h)p=1>h||9<h?0:h-1;else if("string"==typeof h)for(var l=2==h.length?a.regionCodes:a.regions,r=0;r<l.length;r++)if(h.toLowerCase()==l[r].toLowerCase()){p=r;break}d.KL="undefined"===typeof d.KL?e.name:d.KL;d.KR="undefined"===typeof d.KR?a.regions[p]:d.KR;d.KRC="undefined"===typeof d.KRC?a.regionCodes[p]:d.KRC;d.KN="undefined"===typeof d.KN?b.name:d.KN;"undefined"==typeof d.KF&&(h=/^(([\.]\/)|([\.][\.]\/)|(\/))|(:)/,d.KF=b.filename,h.test(d.KF)||(d.KF=f.keyboardBaseUri+
d.KF));b=f.fontBaseUri;""!=this.keymanweb.options.fonts?(b=this.keymanweb.options.fonts,h=/^https?\:/,h.test(b)||(b="//"==b.substr(0,2)?this.keymanweb.protocol+b:"/"==b.substr(0,1)?this.keymanweb.rootPath+b.substr(1):this.keymanweb.rootPath+b)):this.keymanweb.options.fonts=b;"undefined"!=typeof e.font&&(d.KFont="undefined"===typeof d.KFont?new g(e.font,b):d.KFont);"undefined"!=typeof e.oskFont&&(d.KOskFont="undefined"===typeof d.KOskFont?new g(e.oskFont,b):d.KOskFont);this.doKeyboardRegistered(d.KI,
d.KL,d.KN,d.KLC,d.KP);!this.activeStub&&k&&1==this.keyboardStubs.length&&(this.doBeforeKeyboardChange(d.KI,d.KLC),this._SetActiveKeyboard(d.KI,d.KLC,!1),this.doKeyboardChange(d.KI,d.KLC))};a.prototype.findStub=function(a,b){var c;for(c=0;c<this.keyboardStubs.length;c++)if(this.keyboardStubs[c].KI=="Keyboard_"+a&&this.keyboardStubs[c].KLC==b)return this.keyboardStubs[c];return null};a.prototype.setDefaultKeyboard=function(){return 0<this.keyboardStubs.length?(this._SetActiveKeyboard(this.keyboardStubs[0].KI,
this.keyboardStubs[0].KLC),!0):!1};a.prototype.setActiveKeyboard=function(a,b){!this.keymanweb.isEmbedded&&a&&0!=a.indexOf("Keyboard_")&&(a="Keyboard_"+a);this.doBeforeKeyboardChange(a,b);var c=this._SetActiveKeyboard(a,b,!0);null!=this.keymanweb.domManager.getLastActiveElement()&&this.keymanweb.domManager.focusLastActiveElement();this.doKeyboardChange(a,b);c.catch(function(){throw Error('Unable to load keyboard with internal name "'+a+'", language code "'+b+'".');});return c};a.prototype._SetActiveKeyboard=
function(a,b,c){var d,e,g=f.keyman.singleton,k=g.util,l=g.osk,p=g.core.activeKeyboard;if(2>arguments.length||!b)b="---";for(d=0;d<this.keyboardStubs.length&&(a!=this.keyboardStubs[d].KI||b!=this.keyboardStubs[d].KLC&&"---"!=b);d++);k.device.touchable&&(""==a||null==a||d>=this.keyboardStubs.length)&&0!=this.keyboardStubs.length&&(a=this.keyboardStubs[0].KI,b=this.keyboardStubs[0].KLC);2<arguments.length&&c&&this.saveCurrentKeyboard(a,b);if(this.activeStub&&p&&p.id==a&&this.activeStub.KI==a&&this.activeStub.KLC==
b&&!this.keymanweb.mustReloadKeyboard)return Promise.resolve();if(p&&p.id==a)for(e=0;e<this.keyboardStubs.length;e++)if(this.keyboardStubs[e].KI==a&&this.keyboardStubs[e].KLC==b)return this.activeStub=this.keyboardStubs[e],l.vkbd.appendStyleSheet(),this.keymanweb.mustReloadKeyboard&&l._Load(),Promise.resolve();this.activeStub=g.core.activeKeyboard=null;if(""==a)return l._Hide(!1),this.keymanweb.isEmbedded||k.wait(!1),Promise.resolve();for(e=0;e<this.keyboards.length;e++)if(this.keyboards[e].KI==a){g.core.activeKeyboard=
new h.Keyboard(this.keyboards[e]);this.keymanweb.domManager._SetTargDir(this.keymanweb.domManager.getLastActiveElement());for(d=0;d<this.keyboardStubs.length;d++)if(this.keyboardStubs[d].KI==a&&(this.keyboardStubs[d].KLC==b||"---"==b)){this.activeStub=this.keyboardStubs[d];break}break}if(null==g.core.activeKeyboard){for(e=0;e<this.keyboardStubs.length;e++)if(this.keyboardStubs[e].KI==a&&(this.keyboardStubs[e].KLC==b||"---"==b)){if(this.isCJK(this.keyboardStubs[e])||k.device.touchable)l._Enabled=!0;
if(!this.keyboardStubs[e].asyncLoader){l.ready&&l._Hide(!1);var t=this.keyboardStubs[e];t.asyncLoader={};var r=t.KN,L=t.KL;r=r.replace(/\s*keyboard\s*/i,"");t.asyncLoader.callback=function(a,b){var c=a||"Sorry, the "+r+" keyboard for "+L+" is not currently available.";this.keymanweb.isEmbedded||(k.wait(!1),k.alert(a||c,function(){this.keymanweb.setActiveKeyboard("")}.bind(this)));switch(b){case "err":console.error(c);break;default:console.warn(c)}0<e&&(a=this.keyboardStubs[0],this._SetActiveKeyboard(a.KI,
a.KLC,!0))}.bind(this);t.asyncLoader.timer=window.setTimeout(t.asyncLoader.callback,1E4);this.keymanweb.isEmbedded||k.wait("Installing keyboard<br/>"+r);var q=this;t.asyncLoader.promise=new Promise(function(a,b){window.setTimeout(function(){q.installKeyboard(a,b,t)},0)})}this.activeStub=this.keyboardStubs[e];return this.keyboardStubs[e].asyncLoader.promise}this.keymanweb.domManager._SetTargDir(this.keymanweb.domManager.getLastActiveElement())}g=g.core.activeKeyboard;null!==g&&(g=g.scriptObject);String.kmwEnableSupplementaryPlane(g&&
(g.KS&&1==g.KS||"Hieroglyphic"==g.KN));l._Load();return Promise.resolve()};a.prototype.installKeyboard=function(a,b,c){var d=this.keymanweb.util,e=this.keymanweb.osk,g=d._CreateElement("script");g.charset="UTF-8";g.type="text/javascript";this.keymanweb.isEmbedded&&(g.id=c.KI);var k=c.KF,l=c.KL,p=c.KN,t=this,r=f.keyman.singleton.core;g.addEventListener("error",function(){null!==c.asyncLoader.timer&&(window.clearTimeout(c.asyncLoader.timer),c.asyncLoader.timer=null);c.asyncLoader.callback("Cannot find the "+
p+" keyboard for "+l+".","warn");c.asyncLoader=null;b()},!1);g.addEventListener("load",function(){null!==c.asyncLoader.timer&&(window.clearTimeout(c.asyncLoader.timer),c.asyncLoader.timer=null);var f=t.getKeyboardByID(c.KI);f?(c==t.activeStub&&(t.doBeforeKeyboardChange(f.KI,c.KLC),r.activeKeyboard=new h.Keyboard(f),null!=t.keymanweb.domManager.getLastActiveElement()&&(t.keymanweb.uiManager.justActivated=!0,t.keymanweb.domManager._SetTargDir(t.keymanweb.domManager.getLastActiveElement())),String.kmwEnableSupplementaryPlane(f&&
(f.KS&&1==f.KS||"Hieroglyphic"==f.KN)),t.saveCurrentKeyboard(f.KI,c.KLC),e._Load()),t.keymanweb.isEmbedded||d.wait(!1),c.asyncLoader=null,a()):(c.asyncLoader.callback("Error registering the "+p+" keyboard for "+l+".","error"),c.asyncLoader=null,b())},!1);g.src=this.keymanweb.getKeyboardPath(k);try{document.body.appendChild(g),this.linkedScripts.push(g)}catch(L){try{document.getElementsByTagName("head")[0].appendChild(g)}catch(q){b()}}};a.prototype.saveCurrentKeyboard=function(a,b){this.keymanweb.util.saveCookie("KeymanWeb_Keyboard",
{current:a+":"+b});this.keymanweb.isEmbedded||this.keymanweb.touchAliasing._BlurKeyboardSettings(a,b)};a.prototype.restoreCurrentKeyboard=function(){var a=this.keyboardStubs,b=a.length,c=f.keyman.singleton.core;if(!(1>a.length)){var e=this.getSavedKeyboard();e.split(":");var g=e.split(":");2>g.length&&(g[1]="");for(e=0;e<b&&(a[e].KI!=g[0]||a[e].KLC!=g[1]&&""!=g[1]);e++);if(e<b||null==c.activeKeyboard)this._SetActiveKeyboard(g[0],g[1],!1),this.keymanweb.globalKeyboard=g[0],this.keymanweb.globalLanguageCode=
g[1],this.doKeyboardChange(g[0],g[1])}};a.prototype.getSavedKeyboard=function(){var a=this.keymanweb.util.loadCookie("KeymanWeb_Keyboard");if("string"!=typeof a.current)return"Keyboard_us:eng";var b,c=this.keyboardStubs;for(b=0;b<c.length;b++){var e=c[b].KI+":"+c[b].KLC;if(e==a.current)return e}for(b=0;b<c.length;b++)if(e=c[b].KI+":"+c[b].KLC,"Keyboard_us:eng"==e)return e;return 0<c.length?c[0].KI+":"+c[0].KLC:"Keyboard_us:eng"};a.prototype.isCJK=function(a){var b;"undefined"!=typeof a.KLC?b=a.KLC:
"undefined"!=typeof a.LanguageCode&&(b=a.LanguageCode);return"cmn"==b||"jpn"==b||"kor"==b};a.prototype.getKeyboardByID=function(a){var b;for(b=0;b<this.keyboards.length;b++)if(a==this.keyboards[b].KI)return this.keyboards[b];return null};a.prototype.isUniqueRequest=function(a,b){var c;if(null==this.findStub(b.id,b.language)){for(c=0;c<a.length;c++)if(a[c].id==b.id&&a[c].language==b.language)return!1;return!0}return!1};a.prototype.addKeyboardArray=function(a){if(!this.keymanweb.initialized)for(var b=
0;b<a.length;b++)this.deferredStubs.push(a[b]);else if(0!=a.length){var c,d="",e=[];for(b=0;b<a.length;b++){if("string"==typeof a[b]&&0<a[b].length){var f=a[b].split("@"),g=[""];"english"==f[0].toLowerCase()&&(f[0]="us");1<f.length&&(g=f[1].split(","));for(c=0;c<g.length;c++){var h=new l(f[0]);""!=g[c]&&(h.language=g[c]);2<f.length&&(h.version=f[2]);this.isUniqueRequest(e,h)&&e.push(h)}}if("object"==typeof a[b]&&null!=a[b])if("string"==typeof a[b].filename)this.addStub(a[b])||alert("To use a custom keyboard, you must specify file name, keyboard name, language, language code and region code.");
else if(a[b].language&&(console.warn("The 'language' property for keyboard stubs has been deprecated.  Please use the 'languages' property instead."),a[b].languages=a[b].language),g=a[b].languages,"number"==typeof g.length)for(c=0;c<g.length;c++)h=new l(a[b].id,a[b].languages[c].id),this.isUniqueRequest(e,h)&&e.push(h);else h=new l(a[b].id,a[b].languages[c].id),this.isUniqueRequest(e,h)&&e.push(h)}if(0!=e.length){a="&keyboardid=";for(b=0;b<e.length;b++)a=a+d+e[b].toString(),d=",";this.keymanCloudRequest(a,
!1)}}};a.prototype.registerLanguagesForKeyboard=function(a,b,c){var d,e=0;var f="";if("undefined"!=typeof a)if("string"==typeof b.keyboardid&&(f=b.keyboardid.split(",")[c]),"number"==typeof a.length)if(1==a.length||"$"==f.substr(-1,1)||""==f)for(f=0;f<a.length;f++)this.registerLanguagesForKeyboard(a[f],b,c);else{for(f=0;f<a.length;f++){var g=a[f].id.toLowerCase();"us"==g&&(g="english");for(d=0;d<a[f].languages.length;d++)if(g==a[f].languages[d].name.toLowerCase()){e=f;break}}this.registerLanguagesForKeyboard(a[e],
b,c)}else if(c=f.split("@")[1],"string"==typeof c&&(c=c.replace(/\$$/,"")),e=a.languages,"undefined"!=typeof e)if("number"==typeof e.length)for(f=0;f<e.length;f++)"undefined"!=typeof c&&e[f].id!=c||this.mergeStub(a,e[f],b);else this.mergeStub(a,e,b)};a.prototype.register=function(a){var b=a.options;a.timerid&&window.clearTimeout(a.timerid);if("string"==typeof a.error)b="","string"==typeof a.keyboardid&&(b=a.keyboardid.substr(0,1).toUpperCase()+a.keyboardid.substr(1)),this.serverUnavailable(b+" keyboard not found.");
else if("undefined"!=typeof b&&"undefined"!=typeof b.context)if("keyboard"==b.context){var c=a.keyboard;if("number"==typeof c.length)for(a=0;a<c.length;a++)this.registerLanguagesForKeyboard(c[a],b,a);else this.registerLanguagesForKeyboard(c,b,0)}else"language"==b.context&&(this.languageList=a.languages,this.languagesPending&&this.addLanguageKeyboards(this.languagesPending),this.languagesPending=[])};a.prototype.addLanguageKeyboards=function(a){var b,c;if(null==this.languageList){var d=0==this.languagesPending.length;
for(b=0;b<a.length;b++)this.languagesPending.push(a[b]);d&&this.keymanCloudRequest("",!0)}else{var e="";for(b=0;b<a.length;b++){var f=a[b].toLowerCase();(c="$"==f.substr(-1,1))&&(f=f.substr(0,f.length-1));for(d=0;d<this.languageList.length;d++)if(f==this.languageList[d].name.toLowerCase()){""!=e&&(e+=",");e=e+"@"+this.languageList[d].id;c&&(e+="$");break}}""==e?this.keymanweb.util.alert("No keyboards are available for "+a[0]+". Does it have another language name?"):this.keymanCloudRequest("&keyboardid="+
e,!1)}};a.prototype.keymanCloudRequest=function(a,b){var c="https://api.keyman.com/cloud/4.0/",d=this.keymanweb.util._CreateElement("script");c=c+(1<arguments.length&&b?"languages":"keyboards")+"?jsonp=keyman.register&languageidtype=bcp47&version="+this.keymanweb.version;var e=this;var f="&timerid="+window.setTimeout(function(){e.serverUnavailable(a)},1E4);d.charset="UTF-8";d.src=c+a+f;d.type="text/javascript";try{document.body.appendChild(d)}catch(u){document.getElementsByTagName("head")[0].appendChild(d)}};
a.prototype.serverUnavailable=function(a){this.keymanweb.util.alert(""==a?"Unable to connect to Keyman Cloud server!":a);this.keymanweb.warned=!0};a.prototype.removeKeyboards=function(a,b){if(0==arguments.length)return!1;var c,d,e=!0,f=!1,g=!1;for(c=0;c<arguments.length;c++){for(d=this.keyboardStubs.length-1;0<=d;d--)if("Keyboard_"+arguments[c]==this.keyboardStubs[d].KI){"Keyboard_"+arguments[c]==this.getActiveKeyboardName()&&(f=!0);g=!0;this.keyboardStubs.splice(d,1);break}0>d&&(e=!1)}for(c=0;c<
arguments.length;c++)for(d=this.keyboards.length-1;0<=d;d--)if("Keyboard_"+arguments[c]==this.keyboards[d].KI){this.keyboards.splice(d,1);break}f&&(0<this.keyboardStubs.length?this._SetActiveKeyboard(this.keyboardStubs[0].KI,this.keyboardStubs[0].KLC,!0):this._SetActiveKeyboard("","",!1),this.keymanweb.uiManager.justActivated=!0);g&&this.doKeyboardUnregistered();return e};a.prototype._registerKeyboard=function(a){if(this.keymanweb.initialized)if(a._kmw)console.error("The keyboard _kmw property is a reserved field for engine use only; this keyboard is invalid.");
else{a._kmw=new b;var c;this.keymanweb.isEmbedded&&this.keymanweb.preserveID(a);var d=this.activeStub,e=this.activeStub;if(!(d&&"KI"in d)||d.KI!=a.KI)for(c=0;c<this.keyboardStubs.length;c++){d=this.keyboardStubs[c];if(a.KI==d.KI)break;d=null}null==this.activeStub&&null!=d&&(this.activeStub=d);for(c=0;c<this.keyboards.length;c++)if(a.KI==this.keyboards[c].KI)return;this.keyboards=this.keymanweb._push(this.keyboards,a);this.doKeyboardLoaded(a.KI);this.activeStub=e}else this.deferredKR.push(a)};a.prototype._registerStub=
function(a){var b;if(!this.keymanweb.initialized)return this.deferredKRS.push(a),null;null==this.dfltStub&&(this.dfltStub=a);this.keymanweb.isEmbedded&&this.keymanweb.namespaceID(a);"undefined"==typeof a.KLC&&(a.KLC="");"undefined"==typeof a.KL&&(a.KL="undefined");for(b=0;b<this.keyboardStubs.length;b++)if(this.keyboardStubs[b].KI==a.KI&&(""==a.KLC||this.keyboardStubs[b].KLC==a.KLC))return 1;this.keyboardStubs=this.keymanweb._push(this.keyboardStubs,a);this.doKeyboardRegistered(a.KI,a.KL,a.KN,a.KLC,
a.KP);this.activeStub||this.dfltStub!=a||1!=this.keyboardStubs.length||this.setActiveKeyboard(a.KI,a.KLC);return null};a.prototype.doKeyboardRegistered=function(a,b,c,e,f){a={internalName:a,language:b,keyboardName:c,languageCode:e};f&&(a["package"]=f);return this.keymanweb.util.callEvent("kmw.keyboardregistered",a)};a.prototype.doKeyboardUnregistered=function(){return this.keymanweb.util.callEvent("kmw.keyboardregistered",{})};a.prototype.doKeyboardLoaded=function(a){var b={};b.keyboardName=a;return this.keymanweb.util.callEvent("kmw.keyboardloaded",
b)};a.prototype.doBeforeKeyboardChange=function(a,b){var c={};c.internalName=a;c.languageCode=b;return this.keymanweb.util.callEvent("kmw.beforekeyboardchange",c)};a.prototype.doKeyboardChange=function(a,b,c){return this.keymanweb.util.callEvent("kmw.keyboardchange",{internalName:a,languageCode:b,indirect:2<arguments.length?c:!1})};a.prototype.shutdown=function(){for(var a=0,b=this.linkedScripts;a<b.length;a++){var c=b[a];c.remove?c.remove():c.parentNode&&c.parentNode.removeChild(c)}};a.regions="World;Africa;Asia;Europe;South America;North America;Oceania;Central America;Middle East".split(";");
a.regionCodes="un af as eu sa na oc ca me".split(" ");return a}();h.KeyboardManager=e})(h.keyboards||(h.keyboards={}))})(f.keyman||(f.keyman={}))})(com||(com={}));
(function(f){(function(f){var h=function(){function f(c,b,e){this.code=c;this.shift=b;this.handler=e}f.prototype.matches=function(c,b){return this.code==c&&this.shift==b};return f}(),r=function(){function g(c){this.hotkeys=[];this._Process=function(b){b||(b=window.event);var c=f.dom.PreProcessor._GetEventKeyCode(b);if(null==c)return!1;for(var a=(b.shiftKey?16:0)|(b.ctrlKey?32:0)|(b.altKey?64:0),d=0;d<this.hotkeys.length;d++)if(this.hotkeys[d].matches(c,a))return this.hotkeys[d].handler(),b.returnValue=
!1,b&&b.preventDefault&&b.preventDefault(),b.cancelBubble=!0,!1;return!0}.bind(this);this.keyman=c}g.prototype.addHotKey=function(c,b,e){for(var a=0;a<this.hotkeys.length;a++)if(this.hotkeys[a].code==c&&this.hotkeys[a].shift==b){this.hotkeys[a].handler=e;return}this.hotkeys.push(new h(c,b,e))};g.prototype.removeHotkey=function(c,b){for(var e=0;e<this.hotkeys.length;e++)if(this.hotkeys[e].matches(c,b)){this.hotkeys.splice(e,1);break}};return g}();f.HotkeyManager=r})(f.keyman||(f.keyman={}))})(com||
(com={}));
(function(f){(function(f){var h=function(){return function(f,c){this.activationPending=f;this.activated=c}}();f.UIState=h;var r=function(){function f(c){this.justActivated=this.isActivating=!1;this.doUnload=function(){return this.keyman.util.callEvent("kmw.unloaduserinterface",{})};this.keyman=c}f.prototype.getUIState=function(){return new h(this.isActivating,this.justActivated)};f.prototype.setActivatingUI=function(c){this.isActivating=c?!0:!1};f.prototype.doLoad=function(){return this.keyman.util.callEvent("kmw.loaduserinterface",{})};
return f}();f.UIManager=r})(f.keyman||(f.keyman={}))})(com||(com={}));
(function(f){(function(h){(function(l){var r=function(){function g(c){this.keyman=c;this.scrolling=!1;this.shim=this.constructShim()}g.prototype.constructShim=function(){var c=this,b=this.keyman.util._CreateElement("div"),e=this.keyman.osk;b.id="kmw-language-menu-background";b.addEventListener("touchstart",function(a){a.preventDefault();c.hide();if(2<a.touches.length){var b=a.touches[1].pageX;a=a.touches[1].pageY;var f=e.vkbd.spaceBar;b>f.offsetLeft&&b<f.offsetLeft+f.offsetWidth&&a>f.offsetTop&&a<
f.offsetTop+f.offsetHeight&&e.showBuild()}},!1);return b};g.prototype.show=function(){var c=this.keyman.keyboardManager.keyboardStubs,b=this.keyman.util;if(!(1>c.length)){var e=this.lgList=b._CreateElement("div");this.lgList.id="kmw-language-menu";var a=this;document.body.appendChild(this.shim);var d=b._CreateElement("div"),f=d.style,g=b._CreateElement("div");d.id="kmw-menu-scroll-container";g.id="kmw-menu-scroller";"WebkitOverflowScrolling"in f&&(f.WebkitOverflowScrolling="touch");d.appendChild(g);
e.appendChild(d);var h;f=b._CreateElement("div");f.id="kmw-menu-index";for(h=1;26>=h;h++){var l=b._CreateElement("p");l.innerHTML=String.fromCharCode(h+64);f.appendChild(l)}f.addEventListener("touchstart",function(b){a.scrollToLanguage(b,d,g)},!1);f.addEventListener("touchend",function(a){a.stopPropagation();a.preventDefault()},!1);e.appendChild(f);e.addEventListener("scroll",function(b){a.scrolling=!0},!1);d.addEventListener("scroll",function(a){1>d.scrollTop&&(d.scrollTop=1);d.scrollTop>d.scrollHeight-
d.offsetHeight-1&&(d.scrollTop=d.scrollHeight-d.offsetHeight-1)},!1);this.activeLgNo=this.addLanguages(g,c);this.lgList.style.visibility="hidden";document.body.appendChild(this.lgList);"Android"==b.device.OS&&"devicePixelRatio"in window&&(this.lgList.style.fontSize=2/window.devicePixelRatio+"em");"Android"==b.device.OS&&"tablet"==b.device.formFactor&&"devicePixelRatio"in window&&(h=parseInt(b.getStyleValue(e,"width"),10),c=e.style,isNaN(h)||(c.width=c.maxWidth=2*h/window.devicePixelRatio+"px"),h=
parseInt(b.getStyleValue(d,"width"),10),c=d.style,isNaN(h)||(c.width=c.maxWidth=2*h/window.devicePixelRatio+"px"),h=parseInt(b.getStyleValue(g,"width"),10),c=g.style,isNaN(h)||(c.width=c.maxWidth=2*h/window.devicePixelRatio+"px"));this.adjust(0);b=Math.floor(e.offsetHeight/26);c=Math.round(100*b/(f.childNodes[1].offsetTop-f.childNodes[0].offsetTop))/100;l=.6<c?1:2;1.25<c&&(c=1.25);for(h=0;26>h;h++){var n=f.childNodes[h].style;2==l&&1==h%2?n.display="none":(n.fontSize=c*l+"em",n.lineHeight=b*l+"px")}h=
d.offsetWidth;d.scrollHeight>d.offsetHeight+3?h+=f.offsetWidth:f.style.display="none";e.style.width=h+"px";this.lgList.style.visibility="";e=g.firstChild.offsetHeight*this.activeLgNo+1;d.scrollTop=e;d.scrollTop<e&&(d.scrollTop=d.scrollHeight-d.offsetHeight);d.scrollTop>d.scrollHeight-d.offsetHeight-1&&(d.scrollTop=d.scrollHeight-d.offsetHeight-1)}};g.prototype.adjust=function(c){var b=this.keyman.osk,e=this.keyman.util,a=e.device,d=this.lgList,f=d.firstChild,g=f.firstChild,l=d.style;d=d.childNodes[1];
var r=window.innerHeight-b.vkbd.lgKey.offsetHeight-16;c=(g.childNodes.length+c-1)*g.firstChild.firstChild.offsetHeight;"iOS"==a.OS&&("phone"==a.formFactor?(a=e.landscapeView()?36:0,r=(window.innerHeight-a-16)*e.getViewportScale()):"tablet"==a.formFactor&&(a=e.landscapeView()?16:0,r-=a));l.left=h.dom.Utils.getAbsoluteX(b.vkbd.lgKey)+"px";c>r&&(c=r);l.height=c+"px";l.bottom="0px";d.style.height=f.style.height=l.height};g.prototype.scrollToLanguage=function(c,b,e){c.stopImmediatePropagation();c.stopPropagation();
c.preventDefault();var a=c.touches[0].target;if("P"==a.nodeName){var d;c=0;a=a.innerHTML.charCodeAt(0);var f=e.childNodes;try{for(d=0;d<f.length-1;d++){var g=f[d].firstChild.innerHTML.toUpperCase().charCodeAt(0);if(g>=a)break}}catch(x){}try{c=e.firstChild.offsetHeight*d+1,b.scrollTop=c}catch(x){c=0}try{b.scrollTop<c&&(b.scrollTop=b.scrollHeight-b.offsetHeight),b.scrollTop>b.scrollHeight-b.offsetHeight-1&&(b.scrollTop=b.scrollHeight-b.offsetHeight-1)}catch(x){}}};g.prototype.addLanguages=function(c,
b){var e=b.length,a=this.keyman.util,d=a.device,f,g,h=[];for(g=0;g<e;g++){var l=b[g].KL;-1==h.indexOf(l)&&h.push(l)}h.sort();var n=Math.round(100/a.getViewportScale())/100,u,w,r,t,H=-1;l=function(){u=a._CreateElement("div");u.className="kbd-list-closed";w=a._CreateElement("p");w.kList=[];for(g=0;g<e;g++)b[g].KL==h[f]&&w.kList.push(b[g]);"iOS"==d.OS&&(w.style.fontSize=n+"em");u.appendChild(w);c.appendChild(u);h[f]==L.keyman.keyboardManager.activeStub.KL&&(H=f);var k=L;if(1<w.kList.length)for(w.className=
"kbd-list",w.innerHTML=h[f]+"...",w.scrolled=!1,w.ontouchend=function(a){a.preventDefault();a.stopPropagation();a.target.scrolled?a.target.scrolled=!1:this.parentNode.className="kbd-list-closed"==this.parentNode.className?"kbd-list-open":"kbd-list-closed";k.adjust("kbd-list-closed"==this.parentNode.className?0:this.kList.length)},w.addEventListener("touchstart",function(a){a.stopPropagation()},!1),w.addEventListener("touchmove",function(a){a.target.scrolled=!0;a.stopPropagation()},!1),r=0;r<w.kList.length;r++)t=
a._CreateElement("p"),t.className="kbd-list-entry","iOS"==d.OS&&(t.style.fontSize=n+"em"),L.addKeyboard(w.kList[r],t,!1),u.appendChild(t);else w.innerHTML=h[f],w.className="kbd-single-entry",L.addKeyboard(w.kList[0],w,!0);f==H&&(w.className+=" current")};var L=this;for(f=0;f<h.length;f++)l();l=a._CreateElement("div");l.id="kmw-menu-footer";var q=function(a){a.preventDefault();a.stopPropagation()};l.addEventListener("touchstart",q,!1);l.addEventListener("touchmove",q,!1);l.addEventListener("touchend",
q,!1);c.appendChild(l);return H};g.prototype.addKeyboard=function(c,b,e){b.kn=c.KI;b.kc=c.KLC;b.innerHTML=e?c.KL:c.KN.replace(" Keyboard","");var a=this;c=function(b){b.stopPropagation();0>=this.className.indexOf("selected")&&(this.className+=" selected");a.scrolling=!1;a.y0=b.touches[0].pageY;return!0};e=function(b){b.stopImmediatePropagation();var c=a.lgList.childNodes[0],d=c.scrollHeight-c.offsetHeight;if("undefined"!=typeof b.pageY)var e=b.pageY;else if("undefined"!=typeof b.touches)e=b.touches[0].pageY;
else return;var f=e-a.y0;if(0>f)c.scrollTop>=d-1&&(b.preventDefault(),a.y0=e);else if(0<f)2>c.scrollTop&&(b.preventDefault(),a.y0=e);else return;if(-5>f||5<f)a.scrolling=!0,this.className=this.className.replace(/\s*selected/,""),a.y0=e;return!0};var d=function(b){b.preventDefault();"undefined"!=typeof b.stopImmediatePropagation?b.stopImmediatePropagation():b.stopPropagation();a.scrolling?this.className=this.className.replace(/\s*selected/,""):(f.keyman.dom.DOMEventHandlers.states.setFocusTimer(),
a.lgList.style.display="none",a.keyman.keyboardManager._SetActiveKeyboard(this.kn,this.kc,!0),a.keyman.keyboardManager.doKeyboardChange(this.kn,this.kc),a.keyman.domManager.focusLastActiveElement(),a.hide(),a.keyman.osk._Show());return!0};b.onmspointerdown=c;b.addEventListener("touchstart",c,!1);b.onmspointermove=e;b.addEventListener("touchmove",e,!1);b.onmspointerout=d;b.addEventListener("touchend",d,!1)};g.prototype.hide=function(){var c=this.keyman.osk,b=this;this.lgList&&(c.vkbd.highlightKey(c.vkbd.lgKey,
!1),this.lgList.style.visibility="hidden",window.setTimeout(function(){b.shim.parentElement&&(document.body.removeChild(b.shim),document.body.removeChild(b.lgList))},500))};return g}();l.LanguageMenu=r})(h.osk||(h.osk={}))})(f.keyman||(f.keyman={}))})(com||(com={}));
(function(f){(function(h){(function(l){var r=function(){function g(){}g._GetClickEventProperties=function(c,b){var e=f.keyman.singleton,a=e.core;c=c.constructKeyEvent(a.keyboardProcessor,h.dom.Utils.getOutputTarget(b),e.util.device.coreSpec);switch(c.kName){case "K_CAPS":case "K_NUMLOCK":case "K_SCROLL":a.keyboardProcessor.stateKeys[c.kName]=!a.keyboardProcessor.stateKeys[c.kName]}return c};g.clickKey=function(c,b,e,a){e=f.keyman.singleton;var d=e.domManager.getLastActiveElement();if(null!=d){var k=
h.dom.Utils.getOutputTarget(d);e.domManager.initActiveElement(d);e.osk.vkbd.highlightKey(c,!1);k.invalidateSelection();k.deadkeys().deleteMatched();d=g._GetClickEventProperties(c.key.spec,d);e.core.languageProcessor.isActive&&(d.source=b,d.keyDistribution=a);e.isEmbedded||(e.uiManager.setActivatingUI(!0),f.keyman.dom.DOMEventHandlers.states._IgnoreNextSelChange=100,e.domManager.focusLastActiveElement(),f.keyman.dom.DOMEventHandlers.states._IgnoreNextSelChange=0);c=g.handleClick(d,c);e.uiManager.setActivatingUI(!1);
return c}return!0};g.handleClick=function(c,b){var e=f.keyman.singleton;return"K_LOPT"==c.kName||"K_ROPT"==c.kName?(e.osk.vkbd.optionKey(b,c.kName,!0),!0):null!=e.core.processKeyEvent(c)};return g}();l.PreProcessor=r})(h.osk||(h.osk={}))})(f.keyman||(f.keyman={}))})(com||(com={}));
(function(f){(function(h){(function(l){function r(a,b){for(var c in b)a.hasOwnProperty(c)||(a[c]=b[c]);return a}function g(a){return a&&"key"in a&&a.key instanceof d}function c(a){return g(a)?a:null}var b=f.keyman.text.Codes,e=function(){return function(a,b){this.key=a;this.keyId=b}}();l.isKey=g;l.getKeyFrom=c;var a=function(){return function(a,b,c,d,e,f){this.id=a;this.text=b;this.width=c?c:"50";this.sp=d;this.nextlayer=e;this.pad=f}}();l.OSKKeySpec=a;var d=function(){function a(a,b,c){this.spec=
a;this.layer=b;this.formFactor=c}a.getTextWidth=function(b,c,d){d.fontFamily||(d.fontFamily=getComputedStyle(document.body).fontFamily);d.fontSize&&""!=d.fontSize||(d.fontSize="1em");var e=d.fontFamily;b=b.getKeyEmFontSize();d=window.keyman.util.getFontSizeStyle(d.fontSize);d=d.absolute?d.val+"px":d.val*b+"px";b=(a.getTextWidth.canvas||(a.getTextWidth.canvas=document.createElement("canvas"))).getContext("2d");b.font=d+" "+e;return b.measureText(c).width};a.prototype.getKeyWidth=function(){var a=this.objectUnits();
if("px"==a)return this.spec.widthpc;if("%"==a)return a=f.keyman.singleton.osk.getWidthFromCookie(),Math.floor(a*this.spec.widthpc/100)};a.prototype.objectUnits=function(){return"desktop"==this.formFactor?"%":"px"};a.prototype.renameSpecialKey=function(a){return x.specialCharacters[a]?String.fromCharCode(57344+x.specialCharacters[a]):a};a.prototype.generateKeyText=function(b){var c=window.keyman.util,d=this.spec,e=c._CreateElement("span"),g=e.style;if(null==d.text||""==d.text){var h="\u00a0";"string"==
typeof d.id&&/^U_[0-9A-F]{4}$/i.test(d.id)&&(h=String.fromCharCode(parseInt(d.id.substr(2),16)))}else h=d.text;e.className="kmw-key-text";if("1"==d.sp||"2"==d.sp)h=this.renameSpecialKey("*Tab*"==d.text&&"shift"==this.layer?"*TabLeft*":d.text);g.fontSize=b.fontSize;"string"==typeof d.font&&""!=d.font&&(g.fontFamily=d.font);"string"==typeof d.fontsize&&""!=d.fontsize&&(g.fontSize=d.fontsize);var k=f.keyman.singleton.core.activeKeyboard,n={fontSize:g.fontSize};n.fontFamily=g.fontFamily?g.fontFamily:
b.fontFamily;d=a.getTextWidth(b,h,n);0==d&&""!=h&&"\u00a0"!=h&&(h="\u25cc"+h,k&&k.isRTL&&(h="\u200f"+h),d=a.getTextWidth(b,h,n));b=c.getFontSizeStyle(g.fontSize);c=.9*this.getKeyWidth()/d;1>c&&(g.fontSize=b.absolute?c*b.val+"px":c*b.val+"em");e.innerHTML=h;return e};return a}();l.OSKKey=d;var k=function(a){function c(b,c,d){return a.call(this,b,c,d)||this}__extends(c,a);c.prototype.getId=function(a){return this.layer+"-"+this.spec.id};c.prototype.generateKeyCapLabel=function(){var a=b.keyCodes[this.spec.id];
switch(a){case 186:a=59;break;case 187:a=61;break;case 188:a=44;break;case 189:a=45;break;case 190:a=46;break;case 191:a=47;break;case 192:a=96;break;case 219:a=91;break;case 220:a=92;break;case 221:a=93;break;case 222:a=39;break;default:if(48>a||90<a)a=0}if(0<a){var c=window.keyman.util._CreateElement("div");c.className="kmw-key-label";c.innerHTML=String.fromCharCode(a);return c}return null};c.prototype.processSubkeys=function(a){var b,c=a.subKeys=this.spec.sk;for(b=0;b<c.length;b++){if("1"==c[b].sp||
"2"==c[b].sp)c[b].text=this.renameSpecialKey(c[b].text);c[b].layer||(c[b].layer=a.key.layer)}b=window.keyman.util._CreateElement("div");b.className="kmw-key-popup-icon";a.appendChild(b)};c.prototype.construct=function(a,b,c,d){var g=f.keyman.singleton.util,h=this.spec,k="desktop"==this.formFactor,n=g._CreateElement("div");n.className="kmw-key-square";var l=n.style;l.width=this.objectGeometry(h.widthpc);var t=d;g=g._CreateElement("div");g=r(g,new e(this,h.id));a.setButtonClass(h,g,b);k?l.marginLeft=
this.objectGeometry(h.padpc):(l.left=this.objectGeometry(d+h.padpc),a.isStatic||(l.bottom=c.bottom),l.height=c.height,g.style.left=l.left,g.style.width=l.width);d=d+h.padpc+h.widthpc;(b.keyLabels||k)&&(b=this.generateKeyCapLabel())&&g.appendChild(b);g.id=this.getId(a);a.isStatic||a.device.touchable||(g.onmouseover=g.onmousedown=a.mouseOverMouseDownHandler,g.onmouseup=g.onmouseout=a.mouseUpMouseOutHandler);g.appendChild(this.generateKeyText(a));"undefined"!=typeof h.sk&&null!=h.sk?this.processSubkeys(g):
g.subKeys=null;n.appendChild(g);return{element:n,percent:d-t}};c.prototype.objectGeometry=function(a){var b=this.objectUnits();return"%"==b?a+b:Math.round(100*a)/100+b};return c}(d);l.OSKBaseKey=k;var p=function(a){function b(b,c,d){return a.call(this,b,c,d)||this}__extends(b,a);b.prototype.getId=function(a){a=this.spec;var b=f.keyman.singleton.core;return"string"==typeof this.layer&&""!=this.layer?"popup-"+this.layer+"-"+a.id:"popup-"+b.keyboardProcessor.layerId+"-"+a.id};b.prototype.construct=function(a,
b,c){var d=this.spec,f=document.createElement("div"),g=a.getDefaultKeyObject(),h=f.style,k;for(k in g)"string"!=typeof d[k]&&(d[k]=g[k]);f.className="kmw-key-square-ex";c&&(h.marginTop="5px");h.width="undefined"!=typeof d.width?parseInt(d.width,10)*b.offsetWidth/100+"px":b.offsetWidth+"px";h.height=b.offsetHeight+"px";b=document.createElement("div");b=r(b,new e(this,d.id));a.setButtonClass(d,b);b.id=this.getId(a);d=b.style;d.height=h.height;d.width=h.width;d.position="absolute";b.appendChild(this.generateKeyText(a));
f.appendChild(b);return f};return b}(d);l.OSKSubKey=p;var x=function(){function b(a,b,c){this.layerId="default";this.popupPending=this.ddOSK=this.isStatic=!1;this.popupDelay=500;this.layerChangeHandler=function(a,b){a.value!=b&&(this.layerId=b,f.keyman.singleton.osk._Show())}.bind(this);this.touch=function(a){var b=a.changedTouches[0].target,c=this.keyTarget(b);this.touchX=a.changedTouches[0].pageX;this.currentTarget=c;this.cancelDelete();var d=document.getElementById("kmw-popup-keys");if(!(d&&"visible"==
d.style.visibility||this.popupVisible)){this.touchCount=a.touches.length;if(c&&0<=c.className.indexOf("key-hidden")||0<=b.className.indexOf("kmw-key-row"))c=this.findNearestKey(a,b);null!=c&&(b=c.keyId,this.highlightKey(c,!0),"K_LOPT"==b||"K_ROPT"==b?(window.setTimeout(function(){l.PreProcessor.clickKey(c)}.bind(this),0),this.touchPending=this.keyPending=null):"K_BKSP"==b?(b=this.getTouchProbabilities(a.changedTouches[0]),l.PreProcessor.clickKey(c,a.changedTouches[0],this.layerId,b),this.deleteKey=
c,this.deleting=window.setTimeout(this.repeatDelete,500),this.touchPending=this.keyPending=null):(this.keyPending?(this.highlightKey(this.keyPending,!1),b=this.getTouchProbabilities(this.touchPending),l.PreProcessor.clickKey(this.keyPending,this.touchPending,this.layerId,b),this.clearPopup(),this.touchCount--):this.touchHold(c),this.keyPending=c,this.touchPending=a.changedTouches[0]))}}.bind(this);this.release=function(a){var b=document.getElementById("kmw-popup-keys"),c=this.currentTarget;this.cancelDelete();
if(b&&"visible"==b.style.visibility){if(0<a.touches.length)return;if(null==c||0>c.id.indexOf("popup")&&c.id!=this.popupBaseKey.id)this.highlightKey(this.keyPending,!1),this.clearPopup(),this.touchPending=this.keyPending=null}this.popupVisible||(c&&c.id&&this.optionKey(c,c.id,!1),c=a.changedTouches[0].pageX,c=2>c&&5<this.touchX||c>window.innerWidth-2&&this.touchX<window.innerWidth-5,b=this.touchCount,0<this.touchCount&&this.touchCount--,this.keyPending?(this.highlightKey(this.keyPending,!1),0>this.keyPending.className.indexOf("hidden")&&
0<b&&!c&&(c=this.getTouchProbabilities(a.changedTouches[0]),l.PreProcessor.clickKey(this.keyPending,a.changedTouches[0],this.layerId,c)),this.clearPopup(),this.touchPending=this.keyPending=null):(b=a.changedTouches[0],c=this.keyTarget(b.target),c||(c=document.elementFromPoint(b.clientX,b.clientY),c=this.findNearestKey(a,c)),this.highlightKey(c,!1)))}.bind(this);this.moveOver=function(a){var b=f.keyman.singleton.util;a.preventDefault();a.cancelBubble=!0;"function"==typeof a.stopImmediatePropagation?
a.stopImmediatePropagation():"function"==typeof a.stopPropagation&&a.stopPropagation();if(0==this.touchCount)this.cancelDelete();else{var c="object"==typeof a.touches?a.touches[0].clientX:a.clientX,d="object"==typeof a.touches?a.touches[0].clientY:a.clientY;this.touchPending=a.changedTouches[0];var e=document.elementFromPoint(c,d),g=this.keyPending,h=this.keyTarget(e);if(h&&0<=h.className.indexOf("key-hidden")||e&&!h&&0<=e.className.indexOf("key-row"))h=this.findNearestKey(a,e);h&&"string"==typeof h.id&&
0>h.id.indexOf("-K_BKSP")&&this.cancelDelete();if(!(1<a.touches.length))if(this.popupVisible)null==h?(g&&this.highlightKey(g,!1),this.touchPending=this.keyPending=null):h==this.popupBaseKey?(b.hasClass(h,"kmw-key-touched")||this.highlightKey(h,!0),this.keyPending=h,this.touchPending=a.touches[0]):(g&&this.highlightKey(g,!1),this.touchPending=this.keyPending=null);else{(b=document.getElementById("kmw-popup-keys"))&&"visible"==b.style.visibility&&"phone"==this.device.formFactor&&h==this.popupBaseKey&&
(h=b.childNodes[0].firstChild);this.currentTarget=h;g&&h&&h!==g&&this.highlightKey(g,!1);this.highlightSubKeys(h,c,d);if(b&&"visible"==b.style.visibility){if(h&&0>h.id.indexOf("popup")&&h!=this.popupBaseKey)return;h&&h==this.popupBaseKey&&0>h.className.indexOf("kmw-key-touched")&&this.highlightKey(h,!0)}else c=Math.max(5,this.kbdDiv.offsetTop+this.kbdDiv.offsetParent.offsetTop-.25*this.kbdDiv.firstChild.offsetHeight),g&&a.touches[0].pageY<c&&(this.highlightKey(g,!1),this.showKeyTip(null,!1),this.touchPending=
this.keyPending=null);h&&this.keyPending&&(this.keyPending=h,this.touchPending=a.touches[0]);this.keyPending&&(g!=h||0>h.className.indexOf("kmw-key-touched"))&&this.highlightKey(h,!0);g&&h&&h!=g&&""!=h.id&&this.touchHold(h)}}}.bind(this);this.repeatDelete=function(){this.deleting&&(l.PreProcessor.clickKey(this.deleteKey),this.deleting=window.setTimeout(this.repeatDelete,100))}.bind(this);this.mouseOverMouseDownHandler=function(a){var b=f.keyman.singleton.util,c=b.eventTarget(a);null!==c&&"desktop"==
this.device.formFactor&&("SPAN"==c.nodeName&&(c=c.parentNode),c=this.keyTarget(c),"mousedown"==b.eventType(a)?(this.currentKey=c.id,b._CancelMouse(a),this.highlightKey(c,!0)):c.id==this.currentKey&&this.highlightKey(c,!0))}.bind(this);this.mouseUpMouseOutHandler=function(a){var b=f.keyman.singleton.util,c=b.eventTarget(a);null!==c&&"desktop"==this.device.formFactor&&("SPAN"==c.nodeName&&(c=c.parentNode),c=this.keyTarget(c),this.highlightKey(c,!1),"mouseup"==b.eventType(a)&&(c.id==this.currentKey&&
l.PreProcessor.clickKey(c),this.currentKey=""))}.bind(this);var d=f.keyman.singleton;d.core.keyboardProcessor.layerStore.handler=this.layerChangeHandler;d=d.util;this.device=b=b||d.device;c&&(this.isStatic=c);c=d._CreateElement("div");a?d=this.layout=a.layout(b.formFactor):(d=h.keyboards.Layouts.buildDefaultLayout(null,null,b.formFactor),d=this.layout=h.keyboards.ActiveLayout.polyfill(d,null,b.formFactor));this.layers=d.layer;this.fontFamily="font"in d?d.font:"";d.keyLabels=a&&a.displaysUnderlyingKeys;
a=this.deviceDependentLayout(a,b.formFactor);this.ddOSK=!0;c.appendChild(a);this.kbdHelpDiv=this.kbdDiv=c;this.isStatic?c.childNodes[0].className=b.formFactor+"-static kmw-osk-inner-frame":c.className=b.formFactor+" kmw-osk-inner-frame"}b.prototype.getDefaultKeyObject=function(){return new a(void 0,"",h.keyboards.ActiveKey.DEFAULT_KEY.width,h.keyboards.ActiveKey.DEFAULT_KEY.sp,null,h.keyboards.ActiveKey.DEFAULT_KEY.pad)};b.prototype.deviceDependentLayout=function(a,b){a||(a=new h.keyboards.Keyboard(null));
var c=a.layout(b),d=f.keyman.singleton.util,e=f.keyman.singleton.osk,g=100,n=d._CreateElement("div"),l=n.style;n.className="kmw-key-layer-group";switch(b){case "phone":case "tablet":var p=e.getHeight();l.height=p+"px";g=Math.round(100*e.getKeyboardHeight()/p)}if(null==c)return n;p=c.fontsize;l.fontSize="undefined"==typeof p||null==p||""==p?"1em":c.fontsize;this.fontSize=l.fontSize;var u;var r=c.layer;this.getDefaultKeyObject().fontsize=l.fontSize;for(p=0;p<r.length;p++){var x=r[p],y=x.row;for(u=y.length;0<
u&&!(0<y[u-1].key.length);u--);u<y.length&&y.splice(u-y.length,y.length-u)}var U=g/r[0].row.length;"desktop"==b&&(U=g/r[0].row.length);g="desktop"==b?100:e.getWidth();!this.isStatic&&this.device.touchable&&(n.addEventListener("touchstart",this.touch,!0),n.addEventListener("touchend",this.release,!0),n.addEventListener("touchmove",this.moveOver,!1));var W=a.getLayoutState(b)==h.keyboards.LayoutState.CALIBRATED;for(p=0;p<r.length;p++){x=r[p];e=d._CreateElement("div");u=e.style;e.className="kmw-key-layer";
u.display=0==p?"block":"none";u.height=l.height;u.fontFamily="font"in c?c.font:"";e.layer=e.nextLayer=x.id;"string"==typeof x.nextlayer&&(e.nextLayer=x.nextlayer);y=x.row;for(u=0;u<y.length;u++){var fa=d._CreateElement("div");fa.className="kmw-key-row";fa.onmousedown=d.mouseDownPreventDefaultHandler;var B=y[u];var R=fa.style;R.maxHeight=R.height=U+"%";var E=B.key;if(!W){var F=0;for(B=0;B<E.length-1;B++){var G=E[B].widthpc*g;E[B].widthpc=G;var V=E[B].padpc*g;E[B].padpc=V;E[B].proportionalX=(F+V+G/
2)/g;E[B].proportionalWidth=G/g;F+=V+G}var X=h.keyboards.ActiveKey.DEFAULT_RIGHT_MARGIN*g/x.totalWidth;F+=X;1==E.length&&0>parseInt(E[0].pad,10)?(G=E[0].widthpc*g,E[0].widthpc=G,F+=G,E[0].padpc=g-F,E[0].proportionalX=(F-X-G/2)/g,E[0].proportionalWidth=G/g):0<E.length&&(B=E.length-1,V=E[B].padpc*g,E[B].padpc=V,F+=V,E[B].widthpc=G=g-F,E[B].proportionalX=(g-X-G/2)/g,E[B].proportionalWidth=G/g)}for(B=F=0;B<E.length;B++)G=E[B],G=(new k(G,x.id,b)).construct(this,c,R,F),fa.appendChild(G.element),F+=G.percent;
e.appendChild(fa)}n.appendChild(e)}a.markLayoutCalibrated(b);return n};b.prototype.getTouchCoordinatesOnKeyboard=function(a){var b=f.keyman.singleton.util.getAbsolute(this.kbdDiv.firstChild);a={x:a.pageX-b.x,y:a.pageY-b.y};b=this.kbdDiv.firstChild;a.x/=b.offsetWidth;a.y/=b.offsetHeight;return a};b.prototype.getTouchProbabilities=function(a){if(!f.keyman.singleton.core.languageProcessor.mayCorrect)return null;a=this.getTouchCoordinatesOnKeyboard(a);var b=this.kbdDiv.firstChild;return this.layout.getLayer(this.layerId).getTouchProbabilities(a,
b.offsetWidth/b.offsetHeight)};b.prototype.keyTarget=function(a){var b=f.keyman.singleton.util;try{if(a){if(b.hasClass(a,"kmw-key"))return c(a);if(a.parentNode&&b.hasClass(a.parentNode,"kmw-key"))return c(a.parentNode);if(a.firstChild&&b.hasClass(a.firstChild,"kmw-key"))return c(a.firstChild)}}catch(w){}return null};b.prototype.findNearestKey=function(a,b){if(!a||"undefined"==typeof a.changedTouches||0==a.changedTouches.length)return null;for(a=a.changedTouches[0].pageX;b&&void 0!==b.className&&0>
b.className.indexOf("key-row");)b=b.parentNode;if(!b)return null;var c,d=0,e=24,f=1E5;for(c=0;c<b.childNodes.length;c++){var g=b.childNodes[c];if(!(void 0!==g.className&&0<=g.className.indexOf("key-hidden"))){var h=g.offsetLeft;var k=h+g.offsetWidth;if(a>=h&&a<=k)return g.firstChild;h-=a;0<=h&&h<f&&(d=c,f=h);h=a-k;0<=h&&h<f&&(d=c,f=h)}}return 1E5>f&&(b=b.childNodes[d],h=b.offsetLeft,k=h+b.offsetWidth,40<b.offsetWidth&&(e=.6*b.offsetWidth),0<=h-a&&h-a<e||0<=a-k&&a-k<e)?b.firstChild:null};b.prototype.cancelDelete=
function(){this.deleting&&window.clearTimeout(this.deleting);this.deleting=0};b.prototype.findKeyElement=function(a,b){for(var c=this.kbdDiv.firstChild,d=0;d<c.childElementCount;d++){var e=c.childNodes[d];if(e.firstChild.firstChild.firstChild.key.layer==a)for(var f=0;f<e.childElementCount;f++)for(var g=e.childNodes[f],h=0;h<g.childElementCount;h++){var k=g.childNodes[h].firstChild;if(k.keyId==b)return k}}return null};b.prototype._UpdateVKShiftStyle=function(a){var b,c=f.keyman.singleton.core;if(a)for(b=
0;b<this.layers.length&&this.layers[b].id!=this.layerId;b++);else{b=this.layerIndex;a=this.layers[b].id;var d=this.layers[b];b=["K_CAPS","K_NUMLOCK","K_SCROLL"];var e=[d.capsKey,d.numKey,d.scrollKey];for(d=0;d<e.length;d++)if(null!=e[d]){e[d].sp=c.keyboardProcessor.stateKeys[b[d]]?h.keyboards.Layouts.buttonClasses["SHIFT-ON"]:h.keyboards.Layouts.buttonClasses.SHIFT;var g=a+"-"+b[d],k=document.getElementById(g);null==k&&(k=this.findKeyElement(a,b[d]));null!=k?this.setButtonClass(e[d],k,this.layout):
console.warn('Could not find key to apply style: "'+g+'"')}}};b.prototype.setButtonClass=function(a,b,c){var d=0,e="default shift shift-on special special-on    deadkey blank hidden".split(" ");"string"==typeof a.dk&&"1"==a.dk&&(d=8);"string"==typeof a.sp&&(d=parseInt(a.sp,10));if(0>d||10<d)d=0;c=c||this.layout;b.className=4<c.layer[0].row.length&&"phone"==this.device.formFactor?"kmw-key kmw-5rows kmw-key-"+e[d]:"kmw-key kmw-key-"+e[d]};b.prototype.clearPopup=function(){var a=f.keyman.singleton.osk,
b=document.getElementById("kmw-popup-keys");null!=b&&(b.shim&&a._Box.removeChild(b.shim),b.parentNode.removeChild(b));this.popupCallout&&a._Box.removeChild(this.popupCallout);this.popupCallout=null;this.subkeyDelayTimer&&(window.clearTimeout(this.subkeyDelayTimer),this.subkeyDelayTimer=null);this.popupBaseKey=null};b.prototype.showSubKeys=function(a){if(null!=this.keyPending){var b=f.keyman.singleton,c=b.util,d=this.device,e=a.subKeys,g=document.createElement("DIV");this.getDefaultKeyObject();g.id=
"kmw-popup-keys";this.popupBaseKey=a;"phone"==d.formFactor&&this.prependBaseKey(a);var k=g.style;k.bottom=parseInt(a.style.bottom,10)+parseInt(a.style.height,10)+4+"px";k.fontFamily=this.fontFamily;k.fontSize=b.util.getStyleValue(a,"font-size");k.visibility="hidden";var n=e.length;var l=Math.min(Math.ceil(n/9),2);var p=Math.ceil(n/l);1<l&&(k.width=p*a.offsetWidth+5*p+"px");for(k=0;k<n;k++){var r=!1,x=Math.floor(k/p);1<l&&0<x&&(r=!0);r=(new f.keyman.osk.OSKSubKey(e[k],a.key.layer,d.formFactor)).construct(this,
a,r);g.appendChild(r)}this.showKeyTip(null,!1);b.osk._Box.appendChild(g);k=g.style;e=h.dom.Utils.getAbsoluteX(a)+.5*(a.offsetWidth-g.offsetWidth);c=(c.landscapeView()?screen.height:screen.width)-g.offsetWidth;e>c&&(e=c);0>e&&(e=0);k.left=e+"px";k.visibility="visible";c=b.isEmbedded;l=getComputedStyle(g);e=b.osk.getHeight();n=parseInt(l.bottom,10);l=parseInt(l.height,10);p=0;l+n>e&&c&&(p=l+n-e,k.bottom=n-p+"px");this.popupCallout=this.addCallout(a,p);g.shim=document.createElement("DIV");g.shim.id=
"kmw-popup-shim";b.osk._Box.appendChild(g.shim);"phone"==d.formFactor&&(this.keyPending=a=g.childNodes[0].firstChild,this.highlightKey(a,!0))}};b.prototype.prependBaseKey=function(b){var c=b.subKeys,d=f.keyman.singleton;if(b&&"undefined"!=typeof b.id){b.id.split("-");var e=b.keyId;var g=b.key.spec.layer;var h=b.key.spec.sp,k=b.key.spec.nextlayer;if("undefined"!=typeof c&&0<c.length&&(c[0].id!=e||c[0].layer!=g)){e=new a(e,"",void 0,h,k);""!=g&&(e.layer=g);for(g=0;g<b.childNodes.length&&!d.util.hasClass(b.childNodes[g],
"kmw-key-text");g++);g<b.childNodes.length&&(e.text=b.childNodes[g].textContent);c.splice(0,0,e)}}};b.prototype.showLanguage=function(){var a=f.keyman.singleton,b="",c=a.keyboardManager.activeStub;c?(a=c.KL,b=c.KN):a=a.getActiveLanguage(!0)?a.getActiveLanguage(!0):"English";try{var d=this.spaceBar.firstChild,e=d.parentNode;"undefined"==typeof e.className||""==e.className?e.className="kmw-spacebar":-1==e.className.indexOf("kmw-spacebar")&&(e.className+=" kmw-spacebar");d.className="kmw-spacebar-caption";
b=b.replace(/\s*keyboard\s*/i,"");c="";c=b==a?a:a+" ("+b+")";d.innerHTML!=c&&(d.innerHTML=c)}catch(H){}};b.prototype.highlightKey=function(a,b){if(a&&""!=a.className&&!(0<=a.className.indexOf("kmw-key-row"))){var c=a.className;null!=this.keytip&&0>c.indexOf("kmw-key-shift")&&0>c.indexOf("kmw-spacebar")&&0>a.id.indexOf("popup")?this.showKeyTip(a,b):b&&0>c.indexOf(" kmw-key-touched")?(a.className=c+" kmw-key-touched",this.showKeyTip(null,!1)):a.className=c.replace(" kmw-key-touched","")}};b.prototype.getKeyEmFontSize=
function(){var a=f.keyman.singleton,b=a.util;if("desktop"==this.device.formFactor)return.8*this.getFontSizeFromCookie();var c=getComputedStyle(document.body).fontSize;c=b.getFontSizeStyle(c).val;var d=1;this.isStatic||(d=b.getFontSizeStyle(a.osk._Box).val);return c*d};b.prototype.getFontSizeFromCookie=function(){var a=f.keyman.singleton.util,b=a.loadCookie("KeymanWeb_OnScreenKeyboard");if("undefined"==typeof b||null==b)return 16;a=a.toNumber(b.height,.15*screen.height);a>.5*screen.height&&(a=.5*screen.height);
return a/8};b.prototype.getSpecialKey=function(a,b){var d=this.kbdDiv.childNodes[0].childNodes;if(0<=a&&a<d.length)for(a=d[a].childNodes,a=a[a.length-1].childNodes,d=0;d<a.length;d++){var e=c(a[d].firstChild);if(e&&e.keyId==b)return e}return null};b.prototype.show=function(){var a=this.device,b,c=-1,d=this.kbdDiv.childNodes[0].childNodes;for(b=0;b<d.length;b++){var e=d[b];e.layer==this.layerId?(e.style.display="block",this.nextLayer=this.layerId,this.layerIndex=c=b,"string"==typeof this.layers[b].nextlayer&&
(this.nextLayer=this.layers[b].nextlayer),this._UpdateVKShiftStyle()):e.style.display="none"}a.touchable&&(this.lgKey=this.getSpecialKey(c,"K_LOPT"),this.hkKey=this.getSpecialKey(c,"K_ROPT"),"iOS"==a.OS&&"phone"==a.formFactor&&this.adjustHeights());this.spaceBar=this.getSpecialKey(c,"K_SPACE")};b.prototype.adjustHeights=function(){var a=f.keyman.singleton,b=a.osk._Box;if(!(b&&this.kbdDiv&&this.kbdDiv.firstChild&&this.kbdDiv.firstChild.firstChild.childNodes))return!1;var c=1;"iOS"!=this.device.OS||
a.isEmbedded||(c/=a.util.getViewportScale());a=this.computedAdjustedOskHeight();b=b.style;b.height=b.maxHeight=a+"px";b=this.kbdDiv.firstChild.style;b.height=b.maxHeight=a+"px";b.fontSize=c+"em";this.adjustLayerHeights(a);return!0};b.prototype.computedAdjustedOskHeight=function(){for(var a=this.device,b=this.kbdDiv.firstChild.childNodes,c=f.keyman.singleton.osk.getKeyboardHeight(),d=0,e=0;e<b.length;e++){var g=b[e].childNodes.length;g*=Math.floor(c/(0==g?1:g));g>d&&(d=g)}b=d+0;"Android"==a.OS&&"devicePixelRatio"in
window&&(b/=window.devicePixelRatio);return b};b.prototype.adjustLayerHeights=function(a){for(var b=f.keyman.singleton.osk,c=this.device,d=this.kbdDiv.firstChild.childNodes,e=0;e<d.length;e++){var g=d[e],h=d[e].childNodes.length;d[e].style.height=a+"px";var k=Math.floor(b.getKeyboardHeight()/(0==h?1:h));"Android"==c.OS&&"devicePixelRatio"in window&&(g.style.height=g.style.maxHeight=a+"px",k/=window.devicePixelRatio);g=Math.round(.15*k);for(var l=0;l<h;l++){var n=d[e].childNodes[l].style,p=(h-l-1)*
k+1;this.isStatic||(n.bottom=p+"px");n.maxHeight=n.height=k+"px";this.layout.layer[e].row[l].proportionalY=(a-p-k/2)/a;this.adjustRowHeights(d[e].childNodes[l].childNodes,k,p,g)}}};b.prototype.adjustRowHeights=function(a,b,c,d){var e=f.keyman.singleton.util,g=this.device;g="iOS"==g.OS&&"phone"==g.formFactor&&e.landscapeView();for(var h=a.length,k=0;k<h;k++){var l=a[k],n;for(n=0;n<l.childNodes.length&&!e.hasClass(l.childNodes[n],"kmw-key");n++);var p=l.style;this.isStatic||(p.bottom=c-d/2+"px");p.height=
p.minHeight=b+"px";p=l.childNodes[n].style;this.isStatic||(p.bottom=c+"px");p.height=p.minHeight=b-d+"px";g&&0<n&&(l.childNodes[0].style.fontSize="6px")}};b.prototype.appendStyleSheet=function(){var a=f.keyman.singleton,b=a.util,c=a.core.activeKeyboard,d=a.keyboardManager.activeStub;if(null!=d){this.styleSheet&&b.removeStyleSheet(this.styleSheet);var e=d.KFont;d=d.KOskFont;b.addFontFaceStyleSheet(e);b.addFontFaceStyleSheet(d);a.hideInputs();var g=this.addFontStyle(e,d);null!=c&&"string"==typeof c.oskStyling&&
(g+=c.oskStyling);this.styleSheet=b.addStyleSheet(g);this.waitForFonts(e,d)&&a.alignInputs()}};b.prototype.addFontStyle=function(a,b){var c=f.keyman.singleton,d=c.baseFont;"undefined"!=typeof a&&"undefined"!=typeof a.family&&(d=a.family);d=d.replace(/\u0022/g,"");var e=new RegExp("\\s?"+d+",?"),g=c.appliedFont.replace(/\u0022/g,"");g=g.replace(e,"");g=g.replace(/,$/,"");g='"'+(""==g?d:d+","+g).replace(/,\s?/g,'","')+'"';d=".keymanweb-font{\nfont-family:"+g+" !important;\n}\n";"undefined"!=typeof b?
d=d+'.kmw-key-text{\nfont-family:"'+b.family.replace(/\u0022/g,"").replace(/,/g,'","')+'";\n}\n':"undefined"!=typeof a&&(d=d+'.kmw-key-text{\nfont-family:"'+a.family.replace(/\u0022/g,"").replace(/,/g,'","')+'";\n}\n');c.appliedFont=g;return d};b.buildDocumentationKeyboard=function(a,c,d,e){var g=f.keyman.singleton;c=g.core.activeKeyboard;d="undefined"==typeof d?"desktop":d;e="undefined"==typeof e?"default":e;var k=new h.Device;k.formFactor=d;"desktop"!=d&&(k.OS="iOS");g=g.keyboardManager.keyboards;
if(null!=a){var l=a.toLowerCase().replace("keyboard_","");for(a=0;a<g.length;a++)if(l==g[a].KI.toLowerCase().replace("keyboard_","")){c=g[a];break}}if(!c)return null;a=c.layout(d);k=new b(c,k,!0);g=k.kbdDiv.childNodes[0];null!=a?(k.layerId=e,k.show(),k.adjustHeights(),g.style.fontSize=k.kbdDiv.style.fontSize):g.innerHTML="<p style='color:#c40; font-size:0.5em;margin:10px;'>No "+d+" layout is defined for "+c.name+".</p>";g.style.border="1px solid #ccc";return g};b.prototype.onHide=function(){this.hkKey&&
this.highlightKey(this.hkKey,!1)};b.prototype.touchHold=function(a){this.subkeyDelayTimer&&(window.clearTimeout(this.subkeyDelayTimer),this.subkeyDelayTimer=null);"undefined"!=typeof a.subKeys&&null!=a.subKeys&&(this.subkeyDelayTimer=window.setTimeout(function(){this.clearPopup();this.showSubKeys(a)}.bind(this),this.popupDelay))};b.prototype.optionKey=function(a,b,c){a=f.keyman.singleton;var d=a.osk;c&&(0<=b.indexOf("K_LOPT")?d.showLanguageMenu():0<=b.indexOf("K_ROPT")&&(a.uiManager.setActivatingUI(!1),
d._Hide(!0),b=a.domManager.getActiveElement(),h.dom.Utils.instanceof(b,"TouchAliasElement")&&b.hideCaret(),a.domManager.clearLastActiveElement()))};b.prototype.highlightSubKeys=function(a,b,c){if(null!=a&&null!=a.subKeys){var d,e=document.getElementById("kmw-popup-keys");5<this.touchY-c&&null==e&&(this.subkeyDelayTimer&&window.clearTimeout(this.subkeyDelayTimer),this.showSubKeys(a),e=document.getElementById("kmw-popup-keys"));for(d=0;d<a.subKeys.length;d++)try{var f=e.childNodes[d].firstChild;var g=
h.dom.Utils.getAbsoluteX(f);var k=h.dom.Utils.getAbsoluteY(f);var l=g+f.offsetWidth;var n=k+f.offsetHeight;var p=b>g&&b<l&&c>k&&c<n;this.highlightKey(f,p);p&&this.highlightKey(a,!1)}catch(ma){}}};b.prototype.showKeyTip=function(a,b){var c=f.keyman.singleton,d=c.util,e=c.osk,g=this.keytip;if(null!=g&&(a!=g.key||b!=g.state)){var k=document.getElementById("kmw-popup-keys");k=k&&"visible"==k.style.visibility;if(b&&!k){var l=h.dom.Utils.getAbsoluteY(e._Box),n=e._Box.offsetHeight;e=h.dom.Utils.getAbsoluteX(a);
var p=h.dom.Utils.getAbsoluteY(a);k=a.offsetWidth;for(var r=a.offsetHeight,u=a.firstChild,x=g.element.style,y=g.element.childNodes[1],W=y.style,fa=0,B=g.element.firstChild,R=0;R<a.childNodes.length&&(u=a.childNodes[R],!d.hasClass(u,"kmw-key-text"));R++);B.width=1.6*k;B.height=2.3*r;x.top="auto";x.bottom=l+n-p-r+"px";x.textAlign="center";x.overflow="visible";x.fontFamily=d.getStyleValue(u,"font-family");x.width=B.width+"px";x.height=B.height+"px";d=d.getStyleInt(u,"font-size");0!=d&&(d*=1.8,x.fontSize=
d+"px",l=f.keyman.osk.OSKKey.getTextWidth(this,y.textContent,x),l=.9*B.width/l,1>l&&(x.fontSize=d*l+"px"));y.textContent=u.textContent;W.display="block";W.position="absolute";W.textAlign="center";W.width="100%";W.top="2%";W.bottom="auto";u=(B.width-k)/2;e<u?(fa=-1,e+=u):e>window.innerWidth-k-u&&(fa=1,e-=u);y=c.isEmbedded;d=getComputedStyle(g.element);c=c.osk.getHeight();W=parseInt(d.bottom,10);d=parseInt(d.height,10);l=0;d+W>c&&y&&(l=d+W-c,B.height-=l,x.height=B.height+"px");this.drawPreview(B,k,
r,fa,l);x.left=e-u+"px";x.display="block"}else g.element.style.display="none";g.key=a;g.state=b}};b.prototype.drawPreview=function(a,b,c,d,e){var g=f.keyman.singleton.util.device;e=e||0;c=a.getContext("2d");var h=(a.width-b)/2,k=a.height+e;e=h;var l=b+h;b+=2*h;var n=.5*k,p=.6*k,r=8,u=a.height;p=p>u?u:p;k=k>u?u:k;"Android"==g.OS&&(r=3);switch(d){case -1:e-=h;l-=h;break;case 1:e+=h,l+=h}c.clearRect(0,0,a.width,a.height);"Android"==g.OS&&(e=l=(e+l)/2);c.fillStyle=g.styles.popupCanvasBackgroundColor;
c.lineWidth=1;c.strokeStyle="#cccccc";c.save();c.beginPath();c.moveTo(0+r,0);c.arcTo(b,0,b,r,r);"Android"==g.OS?(c.arcTo(b,n,l,p,r),c.arcTo(l,p,e,p,r)):(a=0,k>p&&(a=k-p>r?r:k-p),c.arcTo(b,n,l,p,r),c.arcTo(l,p,l-a,k,a),c.arcTo(l,k,e,k,a),c.arcTo(e,k,e,p-a,a));c.arcTo(e,p,0,n-r,r);c.arcTo(0,n,0,r,r);c.arcTo(0,0,0+r,0,r);c.fill();c.stroke();c.restore()};b.prototype.createKeyTip=function(){var a=f.keyman.singleton,b=a.util;if("phone"==a.util.device.formFactor){if(null==this.keytip){this.keytip={key:null,
state:!1};var c=this.keytip.element=b._CreateElement("div");c.className="kmw-keytip";c.id="kmw-keytip";c.style.pointerEvents="none";c.appendChild(b._CreateElement("canvas"));c.appendChild(b._CreateElement("span"))}a.osk._Box.appendChild(this.keytip.element)}};b.prototype.addCallout=function(a,b){var c=f.keyman.singleton,d=c.util;if("phone"!=d.device.formFactor||"iOS"!=d.device.OS)return null;b=b||0;var e=a.offsetHeight-b;if(0<e){d=d._CreateElement("div");var g=d.style;d.id="kmw-popup-callout";c.osk._Box.appendChild(d);
c=a.offsetLeft;var h=a.offsetWidth;g.top=a.offsetTop+b-6+"px";g.left=c+"px";g.width=h+"px";g.height=e+6+"px";return d}return null};b.prototype.waitForFonts=function(a,b){var c=f.keyman.singleton,d=c.util;if("undefined"==typeof a&&"undefined"==typeof b||"undefined"==typeof a.files&&"undefined"==typeof b.files)return!0;var e=d.checkFontDescriptor(a),g=d.checkFontDescriptor(b);if(e&&g)return!0;c.fontCheckTimer=window.setInterval(function(){d.checkFontDescriptor(a)&&d.checkFontDescriptor(b)&&(window.clearInterval(c.fontCheckTimer),
c.fontCheckTimer=null,c.alignInputs())},100);window.setTimeout(function(){c.fontCheckTimer&&(window.clearInterval(c.fontCheckTimer),c.fontCheckTimer=null,c.alignInputs())},5E3);return!1};b.specialCharacters={"*Shift*":8,"*Enter*":5,"*Tab*":6,"*BkSp*":4,"*Menu*":11,"*Hide*":10,"*Alt*":25,"*Ctrl*":1,"*Caps*":3,"*ABC*":16,"*abc*":17,"*123*":19,"*Symbol*":21,"*Currency*":20,"*Shifted*":8,"*AltGr*":2,"*TabLeft*":7,"*LAlt*":86,"*RAlt*":87,"*LCtrl*":88,"*RCtrl*":89,"*LAltCtrl*":96,"*RAltCtrl*":97,"*LAltCtrlShift*":98,
"*RAltCtrlShift*":99,"*AltShift*":100,"*CtrlShift*":101,"*AltCtrlShift*":102,"*LAltShift*":103,"*RAltShift*":104,"*LCtrlShift*":105,"*RCtrlShift*":112};return b}();l.VisualKeyboard=x})(h.osk||(h.osk={}))})(f.keyman||(f.keyman={}))})(com||(com={}));
(function(f){(function(h){(function(h){var l=function(){function c(b){this.totalLength=0;this.x=b.pageX;this.totalLength=0}c.prototype.updateTo=function(b){var c=this.x;this.x=b.pageX;b={deltaX:this.x-c};this.totalLength+=Math.abs(b.deltaX);return b};Object.defineProperty(c.prototype,"hasScrolled",{get:function(){return this.totalLength>c.HAS_SCROLLED_FUDGE_FACTOR},enumerable:!0,configurable:!0});c.HAS_SCROLLED_FUDGE_FACTOR=10;return c}(),g=function(){function c(b,c,a){this.baseElement=b;this.rowClassMatch=
c;this.selectedTargetMatch=a}c.prototype.findTargetFromTouch=function(b,c,a){a=a?b.touches:b.changedTouches;if(!b||"undefined"==typeof a||0==a.length)return null;for(b=a[0].pageX;c&&void 0!==c.className&&0>c.className.indexOf(this.rowClassMatch);)c=c.parentNode;if(!c)return null;var d=0,e=24,f=1E5;for(a=0;a<c.childNodes.length;a++){var g=c.childNodes[a];if(!this.isInvalidTarget(this.findTargetFrom(g))){var h=g.offsetLeft;var l=h+g.offsetWidth;h-=b;0<=h&&h<f&&(d=a,f=h);l=b-l;0<=l&&l<f&&(d=a,f=l);if(0>
l&&0>h)return this.findTargetFrom(g)}}return 1E5>f&&(c=c.childNodes[d],h=c.offsetLeft,l=h+c.offsetWidth,40<c.offsetWidth&&(e=.6*c.offsetWidth),0<=h-b&&h-b<e||0<=b-l&&b-l<e)?this.findTargetFrom(c):null};c.prototype.findBestTarget=function(b,c){var a=c?document.elementFromPoint(b.touches[0].clientX,b.touches[0].clientY):b.changedTouches[0].target;var d=this.findTargetFrom(a);d||(d=this.findTargetFromTouch(b,a,c));return d};c.prototype.isInvalidTarget=function(b){return!1};c.prototype.touchStart=function(b){this.currentTarget=
this.findBestTarget(b);this.touchX=b.changedTouches[0].pageX;this.touchY=b.changedTouches[0].pageY;this.touchCount=b.touches.length;this.currentTarget&&(this.scrollTouchState=this.currentTarget.clientWidth<this.currentTarget.scrollWidth?new l(b.changedTouches[0]):null,this.highlight(this.currentTarget,!0),this.pendingTarget?(this.highlight(this.pendingTarget,!1),this.select(this.pendingTarget),this.clearHolds(),this.touchCount--):this.hold(this.currentTarget),this.pendingTarget=this.currentTarget)};
c.prototype.touchEnd=function(b){var c=this.currentTarget;if(this.isSubmenuActive()||this.hasModalPopup()){if(0<b.touches.length)return;if(null==c||0>c.id.indexOf("popup")&&c.id!=this.popupBaseTarget.id)this.highlight(this.pendingTarget,!1),this.clearHolds(),this.pendingTarget=null}c=b.changedTouches[0].pageX;c=2>c&&5<this.touchX||c>window.innerWidth-2&&this.touchX<window.innerWidth-5;this.scrollTouchState&&(c=c||this.scrollTouchState.hasScrolled);var a=this.touchCount;0<this.touchCount&&this.touchCount--;
this.pendingTarget?(this.highlight(this.pendingTarget,!1),0>this.pendingTarget.className.indexOf("hidden")&&0<a&&!c&&this.select(this.pendingTarget),this.clearHolds(),this.pendingTarget=null):(c=this.findBestTarget(b))&&this.highlight(c,!1)};c.prototype.touchMove=function(b){var c=f.keyman.singleton,a=c.util;b.preventDefault();b.cancelBubble=!0;"function"==typeof b.stopImmediatePropagation?b.stopImmediatePropagation():"function"==typeof b.stopPropagation&&b.stopPropagation();if(!(1<b.touches.length||
0==this.touchCount))if(this.currentTarget&&null!=this.scrollTouchState)b=this.scrollTouchState.updateTo(b.changedTouches[0]).deltaX,this.currentTarget.scrollLeft-=window.devicePixelRatio*b;else{var d="object"==typeof b.touches?b.touches[0].clientY:b.clientY,g=this.pendingTarget,h=this.findBestTarget(b,!0);if(this.hasModalPopup())null==h?(g&&this.highlight(g,!1),this.pendingTarget=null):h==this.popupBaseTarget?(a.hasClass(h,this.selectedTargetMatch)||this.highlight(h,!0),this.pendingTarget=h):(g&&
this.highlight(g,!1),this.pendingTarget=null);else{this.currentTarget=h=this.dealiasSubTarget(h);g&&h&&h!==g&&this.highlight(g,!1);if(h&&this.hasSubmenu(h)){!c.isEmbedded&&5<this.touchY-d&&!this.isSubmenuActive()&&this.displaySubmenuFor(h);if(h&&0>h.id.indexOf("popup")&&h!=this.popupBaseTarget)return;h&&h==this.popupBaseTarget&&0>h.className.indexOf(this.selectedTargetMatch)&&this.highlight(h,!0)}else a=this.baseElement,c=a.offsetParent.offsetTop+a.offsetTop,a=a.offsetHeight,d=Math.max(5,c-.25*a),
g&&(b.touches[0].pageY<d||b.touches[0].pageY>c+a+.25*a)&&(this.highlight(g,!1),this.clearHolds(),this.pendingTarget=null);h&&this.pendingTarget&&(this.pendingTarget=h);this.pendingTarget&&h&&(g!=h||0>h.className.indexOf(this.selectedTargetMatch))&&this.highlight(h,!0);g&&h&&h!=g&&""!=h.id&&this.hold(h)}}};return c}();h.UITouchHandlerBase=g})(h.dom||(h.dom={}))})(f.keyman||(f.keyman={}))})(com||(com={}));
(function(f){(function(h){(function(l){var r=function(){function a(b){var c=f.keyman.singleton.util._CreateElement("div");c.id=a.BANNER_ID;c.className=a.BANNER_CLASS;this.div=c;this.height=b;this.update()}Object.defineProperty(a.prototype,"height",{get:function(){return this._height},set:function(a){this._height=0<a?a:0;this.update()},enumerable:!0,configurable:!0});a.prototype.update=function(){var a=this.div.style,b=a.height,c=a.display;0<this._height?(a.height=this._height+"px",a.display="block"):
(a.height="0px",a.display="none");return b!==a.height||c!==a.display};a.prototype.appendStyleSheet=function(){};a.prototype.getDiv=function(){return this.div};a.prototype.activate=function(){};a.prototype.deactivate=function(){};a.DEFAULT_HEIGHT=37;a.BANNER_CLASS="kmw-banner-bar";a.BANNER_ID="kmw-banner-bar";return a}();l.Banner=r;var g=function(a){function b(){return a.call(this,0)||this}__extends(b,a);return b}(r);l.BlankBanner=g;g=function(a){function b(b,c){if(0<b.length){var d=a.call(this)||
this;c&&(d.height=c)}else d=a.call(this,0)||this;0<=b.indexOf("base64")?console.log("Loading img from base64 data"):console.log("Loading img with src '"+b+"'");d.img=document.createElement("img");d.img.setAttribute("src",b);b=d.img.style;b.width="100%";b.height="100%";d.getDiv().appendChild(d.img);console.log("Image loaded.");return d}__extends(b,a);b.prototype.setImagePath=function(a){this.img&&this.img.setAttribute("src",a)};return b}(r);l.ImageBanner=g;var c=function(){function a(a){this._applyFunctor=
null;var b=f.keyman.singleton;this.index=a;this.constructRoot();a=this.display=b.util._CreateElement("span");this.div.appendChild(a)}a.prototype.constructRoot=function(){var c=f.keyman.singleton,e=this.div=c.util._CreateElement("div"),g=e.style;e.className="kmw-suggest-option";e.id=a.BASE_ID+this.index;if(c=c.keyboardManager.activeStub)c.KLC&&(e.lang=c.KLC),(e=c.KFont)&&e.family&&""!=e.family&&(g.fontFamily=this.fontFamily=e.family);g.width=(100-b.MARGIN*(b.SUGGESTION_LIMIT-1))/b.SUGGESTION_LIMIT+
"%";this.div.suggestion=this};Object.defineProperty(a.prototype,"suggestion",{get:function(){return this._suggestion},enumerable:!0,configurable:!0});a.prototype.update=function(a,b){this._suggestion=a;this._applyFunctor=b||null;this.updateText()};a.prototype.updateText=function(){var a=this.generateSuggestionText();this.div.replaceChild(a,this.display);this.display=a};a.prototype.apply=function(a){var b=f.keyman.singleton;if(this.isEmpty())return[null,null];if(this._applyFunctor)return this._applyFunctor(),
[null,null];var c=b.core.languageProcessor.getPredictionState(this._suggestion.transformId);if(c){a||(a=h.dom.Utils.getOutputTarget());var d=h.text.Mock.from(c.preInput);d.apply(this._suggestion.transform);var e=d.buildTransformFrom(a);d=b.core.languageProcessor.wordbreak(a);a.apply(e);if(b.oninserttext&&b.isEmbedded)b.oninserttext(e.deleteLeft,e.insert,e.deleteRight);b=h.text.Mock.from(c.preInput);b.apply(c.transform);return[b.buildTranscriptionFrom(a,null),d]}console.warn("Could not apply the Suggestion!");
return[null,null]};a.prototype.isEmpty=function(){return!this._suggestion};a.prototype.generateSuggestionText=function(){var a=f.keyman.singleton,b=this._suggestion,c=a.util._CreateElement("span");c.className="kmw-suggestion-text";if(null==b)return c;null==b.displayAs||""==b.displayAs?b="\u00a0":(a=a.core.activeKeyboard,b=String.fromCharCode(a&&a.isRTL?8238:8237)+b.displayAs);c.innerHTML=b;return c};a.BASE_ID="kmw-suggestion-";return a}();l.BannerSuggestion=c;var b=function(a){function b(d){d=a.call(this,
d||r.DEFAULT_HEIGHT)||this;d.getDiv().className=d.getDiv().className+" "+b.BANNER_CLASS;d.options=[];for(var g=0;g<b.SUGGESTION_LIMIT;g++){var h=new c(g);d.options[g]=h}h=(g=f.keyman.singleton.core.activeKeyboard)&&g.isRTL;for(g=0;g<b.SUGGESTION_LIMIT;g++){var k=h?b.SUGGESTION_LIMIT-g-1:g;d.getDiv().appendChild(d.options[k].div);if(g!=b.SUGGESTION_LIMIT){k=f.keyman.singleton.util._CreateElement("div");k.className="kmw-banner-separator";var l=k.style;l.marginLeft=b.MARGIN/2+"%";l.marginRight=b.MARGIN/
2+"%";d.getDiv().appendChild(k)}}d.manager=new e(d.getDiv(),d.options);d.setupTouchHandling();return d}__extends(b,a);b.prototype.setupTouchHandling=function(){var a=f.keyman.singleton,b=this.getDiv(),c=this.manager;a.util.device.touchable&&(b.addEventListener("touchstart",function(a){c.touchStart(a)},!0),b.addEventListener("touchend",function(a){c.touchEnd(a)},!0),b.addEventListener("touchmove",function(a){c.touchMove(a)},!1))};b.prototype.activate=function(){var a=f.keyman.singleton,b=this.manager;
a.core.languageProcessor.addListener("invalidatesuggestions",b.invalidateSuggestions);a.core.languageProcessor.addListener("suggestionsready",b.updateSuggestions);a.core.languageProcessor.addListener("tryaccept",b.tryAccept);a.core.languageProcessor.addListener("tryrevert",b.tryRevert);a.core.languageProcessor.predictFromTarget(h.dom.Utils.getOutputTarget())};b.prototype.deactivate=function(){var a=f.keyman.singleton,b=this.manager;a.core.languageProcessor.removeListener("invalidatesuggestions",b.invalidateSuggestions);
a.core.languageProcessor.removeListener("suggestionsready",b.updateSuggestions);a.core.languageProcessor.removeListener("tryaccept",b.tryAccept);a.core.languageProcessor.removeListener("tryrevert",b.tryRevert)};b.prototype.rotateSuggestions=function(){this.manager.rotateSuggestions()};b.SUGGESTION_LIMIT=3;b.MARGIN=1;b.TOUCHED_CLASS="kmw-suggest-touched";b.BANNER_CLASS="kmw-suggest-banner";return b}(r);l.SuggestionBanner=b;var e=function(a){function d(c,d){c=a.call(this,c,r.BANNER_CLASS,b.TOUCHED_CLASS)||
this;c.initNewContext=!0;c.currentSuggestions=[];c.recentAccept=!1;c.preAccept=null;c.swallowPrediction=!1;c.doRevert=!1;c.recentRevert=!1;c.rejectedSuggestions=[];c._applyReversion=function(){var a=f.keyman.singleton,b=h.dom.Utils.getOutputTarget(),c=this.preAccept,d=h.text.Mock.from(c.preInput);d.apply(c.transform);c=d.buildTransformFrom(b);b.apply(c);if(a.oninserttext&&a.isEmbedded)a.oninserttext(c.deleteLeft,c.insert,c.deleteRight);this.currentSuggestions=this.previousSuggestions;this.currentTranscriptionID=
this.previousTranscriptionID;a=this.currentSuggestions.indexOf(this.recentAccepted);-1!=a&&(this.rejectedSuggestions.push(this.recentAccepted),this.currentSuggestions.splice(a,1));this.doRevert=this.recentAccept=!1;this.recentRevert=!0;this.doUpdate()}.bind(c);c.tryAccept=function(a){return!this.recentAccept&&this.selected?(this.doAccept(this.selected),!1):this.recentAccept&&"space"==a?this.recentAccept=!1:!0}.bind(c);c.tryRevert=function(){this.doRevert?this.recentAccept=this.doRevert=!1:this.recentAccept&&
(this.showRevert(),this.swallowPrediction=!0);return!0}.bind(c);c.invalidateSuggestions=function(a){this.initNewContext=!1;this.swallowPrediction&&"context"!=a||(this.recentRevert=this.doRevert=this.recentAccept=!1,this.rejectedSuggestions=[],"context"==a&&(this.swallowPrediction=!1,this.initNewContext=!0));this.options.forEach(function(a){a.update(null)})}.bind(c);c.updateSuggestions=function(a){var b=a.suggestions;this.currentSuggestions=b;this.currentTranscriptionID=a.transcriptionID;for(a=0;a<
b.length;a++){var c=b[a];"keep"==c.tag&&(this.keepSuggestion=c)}this.keepSuggestion&&this.currentSuggestions.splice(this.currentSuggestions.indexOf(this.keepSuggestion),1);this.swallowPrediction?this.swallowPrediction=!1:(this.recentRevert=this.doRevert=this.recentAccept=!1,this.rejectedSuggestions=[]);this.doUpdate()}.bind(c);c.options=d;return c}__extends(d,a);d.prototype.findTargetFrom=function(a){var b=f.keyman.singleton.util;try{if(a){if(b.hasClass(a,"kmw-suggest-option"))return a;if(a.parentNode&&
b.hasClass(a.parentNode,"kmw-suggest-option"))return a.parentNode}}catch(x){}return null};d.prototype.highlight=function(a,d){var e=a.className,f=" "+b.TOUCHED_CLASS;-1==a.id.indexOf(c.BASE_ID)?console.warn("Cannot find BannerSuggestion object for element to highlight!"):(this.selected=a.suggestion).isEmpty()&&(d=!1,this.selected=null);d&&0>e.indexOf(f)?a.className=e+f:a.className=e.replace(f,"")};d.prototype.select=function(a){this.doAccept(a.suggestion)};d.prototype.hold=function(a){a=a.suggestion;
var b=-1==this.currentSuggestions.indexOf(a.suggestion);this.platformHold&&this.platformHold(a,b)};d.prototype.clearHolds=function(){};d.prototype.hasModalPopup=function(){return f.keyman.singleton.osk.vkbd.popupVisible};d.prototype.dealiasSubTarget=function(a){return a};d.prototype.hasSubmenu=function(a){return!1};d.prototype.isSubmenuActive=function(){return!1};d.prototype.displaySubmenuFor=function(a){throw Error("Method not implemented.");};d.prototype.doAccept=function(a){var b=a.apply(),c=b[0];
b=b[1];var d=this;c&&(this.preAccept=c,b.then(function(a){d.preAcceptText=a}),this.selected=null,this.recentAccept=!0,this.recentRevert=this.doRevert=!1,this.recentAccepted=a.suggestion,this.previousSuggestions=this.currentSuggestions,this.previousTranscriptionID=this.currentTranscriptionID,a=f.keyman.singleton,this.swallowPrediction=!0,a.core.languageProcessor.predictFromTarget(h.dom.Utils.getOutputTarget()))};d.prototype.showRevert=function(){this.revertSuggestion={transform:null,displayAs:'"'+
this.preAcceptText+'"'};this.doRevert=!0;this.doUpdate()};d.prototype.activateKeep=function(){return!this.recentAccept&&!this.recentRevert&&!this.initNewContext};d.prototype.doUpdate=function(){var a=this,b=[];this.activateKeep()&&this.keepSuggestion?b.push(this.keepSuggestion):this.doRevert&&b.push(this.revertSuggestion);b=b.concat(this.currentSuggestions);this.options.forEach(function(c,d){d<b.length?c.update(b[d],0==d&&a.doRevert?a._applyReversion:null):c.update(null)})};d.prototype.rotateSuggestions=
function(){if(0<this.currentSuggestions.length){var a=b.SUGGESTION_LIMIT-(this.activateKeep()?1:0);a=this.currentSuggestions.splice(0,a);this.rejectedSuggestions=this.rejectedSuggestions.concat(a)}0==this.currentSuggestions.length&&(this.currentSuggestions=this.rejectedSuggestions,this.rejectedSuggestions=[]);this.doUpdate()};return d}(h.dom.UITouchHandlerBase);l.SuggestionManager=e})(h.osk||(h.osk={}))})(f.keyman||(f.keyman={}))})(com||(com={}));
(function(f){(function(h){(function(h){var l=function(){function g(){this._options={};this.imagePath="";this.constructContainer();this.setOptions(g.DEFAULT_OPTIONS);f.keyman.singleton.core.languageProcessor.on("statechange",this.selectBanner.bind(this))}g.prototype.constructContainer=function(){var c=f.keyman.singleton.util._CreateElement("div");c.id="keymanweb_banner_container";c.className="kmw-banner-container";return this.bannerContainer=c};Object.defineProperty(g.prototype,"element",{get:function(){return this.bannerContainer},
enumerable:!0,configurable:!0});g.prototype.getOptions=function(){var c={},b;for(b in this._options)c[b]=this._options[b];return c};g.prototype.setOptions=function(c){var b=f.keyman.singleton,e;for(e in c){switch(e){case "alwaysShow":this.alwaysShow=c[e];break;case "mayPredict":b.core.languageProcessor.mayPredict=c[e];break;case "mayCorrect":b.core.languageProcessor.mayCorrect=c[e];break;case "imagePath":this.imagePath=c[e]}this._options[e]=c[e]}this.selectBanner()};g.prototype.appendStyles=function(){this.activeBanner&&
this.activeBanner.appendStyleSheet()};g.prototype.setBanner=function(c,b){switch(c){case "blank":b=new h.BlankBanner;break;case "image":b=new h.ImageBanner(this.imagePath,h.Banner.DEFAULT_HEIGHT);break;case "suggestion":b=new h.SuggestionBanner(b);break;default:throw Error("Invalid type specified for the banner!");}this._activeType=c;b&&(this._setBanner(b),b.activate())};g.prototype.selectBanner=function(c){f.keyman.singleton.core.languageProcessor.isActive?this.setBanner("suggestion"):this.alwaysShow?
this.setBanner("image"):this.setBanner("blank")};g.prototype._setBanner=function(c){if(this.activeBanner){if(c==this.activeBanner)return;var b=this.activeBanner;b.deactivate();this.bannerContainer.replaceChild(c.getDiv(),b.getDiv())}this.activeBanner=c;this.bannerContainer.appendChild(c.getDiv());f.keyman.singleton.osk._Show()};Object.defineProperty(g.prototype,"activeType",{get:function(){return this._activeType},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"height",{get:function(){return this.activeBanner?
this.activeBanner.height:0},set:function(c){this.activeBanner&&(this.activeBanner.height=c)},enumerable:!0,configurable:!0});g.DEFAULT_OPTIONS={alwaysShow:!1,mayPredict:!0,mayCorrect:!0,imagePath:""};return g}();h.BannerManager=l})(h.osk||(h.osk={}))})(f.keyman||(f.keyman={}))})(com||(com={}));
(function(f){(function(h){(function(l){var r=function(){function g(){this.ready=!1;this.loadRetry=0;this._Visible=!1;this._Enabled=!0;this.vpScale=1;this.noDrag=this.userPositioned=!1;this.modifierCodes=h.text.Codes.modifierCodes;this.modifierBitmasks=h.text.Codes.modifierBitmasks;this.stateBitmasks=h.text.Codes.stateBitmasks;this.keyCodes=h.text.Codes.keyCodes;this.restorePosition=function(){this._Visible&&(f.keyman.singleton.domManager.focusLastActiveElement(),this.loadCookie(),this.userPositioned=
!1,this.saveCookie(),this._Show(),this.doResizeMove());this.pinImg&&(this.pinImg.style.display="none");window.event&&(window.event.returnValue=!1)}.bind(this);this._VKbdMouseOver=function(c){f.keyman.singleton.uiManager.setActivatingUI(!0)}.bind(this);this._VKbdMouseOut=function(c){f.keyman.singleton.uiManager.setActivatingUI(!1)}.bind(this);this._VResizeMouseOver=this._VResizeMouseOut=function(c){c=f.keyman.singleton._GetEventObject(c);if(!c)return!1;c&&c.preventDefault&&c.preventDefault();var b=
this.getRect();this.width=b.width;this.height=b.height;c.cancelBubble=!0;return!1}.bind(this);this._VResizeMouseDown=function(c){var b=f.keyman.singleton;b.uiManager.justActivated=!0;c=b._GetEventObject(c);if(!c)return!0;this.resizing=!0;if(c.pageX){var e=c.pageX;var a=c.pageY}else c.clientX&&(e=c.clientX+document.body.scrollLeft,a=c.clientY+document.body.scrollTop);this._ResizeMouseX=e;this._ResizeMouseY=a;document.onmousemove!=this._VResizeMouseMove&&document.onmousemove!=this._VMoveMouseMove&&
(this._VPreviousMouseMove=document.onmousemove,this._VPreviousMouseUp=document.onmouseup);this._VPreviousCursor=document.body.style.cursor;this._VPreviousMouseButton="undefined"==typeof c.which?c.button:c.which;this._VOriginalWidth=this.vkbd.kbdDiv.offsetWidth;this._VOriginalHeight=this.vkbd.kbdDiv.offsetHeight;document.onmousemove=this._VResizeMouseMove;document.onmouseup=this._VResizeMoveMouseUp;document.body.style.cursor&&(document.body.style.cursor="se-resize");c&&c.preventDefault&&c.preventDefault();
c.cancelBubble=!0;return!1}.bind(this);this._VResizeMouseMove=function(c){c=f.keyman.singleton._GetEventObject(c);if(!c)return!0;this.resizing=!0;if(this._VPreviousMouseButton!=("undefined"==typeof c.which?c.button:c.which))return this._VResizeMoveMouseUp(c);if(c.pageX){var b=c.pageX;var e=c.pageY}else c.clientX&&(b=c.clientX+document.body.scrollLeft,e=c.clientY+document.body.scrollTop);b=this._VOriginalWidth+b-this._ResizeMouseX;e=this._VOriginalHeight+e-this._ResizeMouseY;b<.2*screen.width&&(b=
.2*screen.width);e<.1*screen.height&&(e=.1*screen.height);b>.9*screen.width&&(b=.9*screen.width);e>.5*screen.height&&(b=.5*screen.height);this.vkbd.kbdDiv.style.width=b+"px";this.vkbd.kbdDiv.style.height=e+"px";this.vkbd.kbdDiv.style.fontSize=e/8+"px";c&&c.preventDefault&&c.preventDefault();c.cancelBubble=!0;return!1}.bind(this);this._VMoveMouseDown=function(c){var b=f.keyman.singleton;b.uiManager.justActivated=!0;c=b._GetEventObject(c);if(!c)return!0;this.resizing=!0;if(c.pageX){var e=c.pageX;var a=
c.pageY}else c.clientX&&(e=c.clientX+document.body.scrollLeft,a=c.clientY+document.body.scrollTop);document.onmousemove!=this._VResizeMouseMove&&document.onmousemove!=this._VMoveMouseMove&&(this._VPreviousMouseMove=document.onmousemove,this._VPreviousMouseUp=document.onmouseup);this._VPreviousCursor=document.body.style.cursor;this._VPreviousMouseButton="undefined"==typeof c.which?c.button:c.which;this._VMoveX=e-this._Box.offsetLeft;this._VMoveY=a-this._Box.offsetTop;b.isCJK()&&(this.pinImg.style.left=
"15px");document.onmousemove=this._VMoveMouseMove;document.onmouseup=this._VResizeMoveMouseUp;document.body.style.cursor&&(document.body.style.cursor="move");c&&c.preventDefault&&c.preventDefault();c.cancelBubble=!0;return!1}.bind(this);this._VMoveMouseMove=function(c){c=f.keyman.singleton._GetEventObject(c);if(!c||this.noDrag)return!0;this.userPositioned=this.resizing=!0;this.pinImg.style.display="block";if(this._VPreviousMouseButton!=("undefined"==typeof c.which?c.button:c.which))return this._VResizeMoveMouseUp(c);
if(c.pageX){var b=c.pageX;var e=c.pageY}else c.clientX&&(b=c.clientX+document.body.scrollLeft,e=c.clientY+document.body.scrollTop);this._Box.style.left=b-this._VMoveX+"px";this._Box.style.top=e-this._VMoveY+"px";c&&c.preventDefault&&c.preventDefault();b=this.getRect();this.width=b.width;this.height=b.height;c.cancelBubble=!0;return!1}.bind(this);this._VResizeMoveMouseUp=function(c){var b=f.keyman.singleton;c=b._GetEventObject(c);if(!c)return!0;this.resizing=!1;this.vkbd&&(this.vkbd.currentKey=null);
document.onmousemove=this._VPreviousMouseMove;document.onmouseup=this._VPreviousMouseUp;document.body.style.cursor&&(document.body.style.cursor=this._VPreviousCursor);b.domManager.focusLastActiveElement();c&&c.preventDefault&&c.preventDefault();b.uiManager.justActivated=!1;b.uiManager.setActivatingUI(!1);this.vkbd&&(this._VOriginalWidth=this.vkbd.kbdDiv.offsetWidth,this._VOriginalHeight=this.vkbd.kbdDiv.offsetHeight);this.doResizeMove();c.cancelBubble=!0;this.saveCookie();return!1}.bind(this);this.hideNow=
function(){this._Box.removeEventListener("transitionend",this.hideNow,!1);this._Box.removeEventListener("webkitTransitionEnd",this.hideNow,!1);if(!(0<=document.body.className.indexOf("osk-always-visible"))){var c=this._Box.style;c.display="none";c.opacity="1";this._Visible=!1;c.transition=c.msTransition=c.MozTransition=c.WebkitTransition="";if(this.vkbd)this.vkbd.onHide()}}.bind(this)}g.prototype.prepare=function(){var c=f.keyman.singleton,b=c.util;if(c.initialized){if(!this.ready&&(this._Box=b._CreateElement("div"),
document.body.appendChild(this._Box),b.linkStyleSheet(c.getStyleSheetPath("kmwosk.css")),b.attachDOMEvent(this._Box,"mousedown",function(a){c.uiManager.setActivatingUI(!0);return!1}),b.device.touchable)){var e=function(a){a.cancelable&&a.preventDefault();a.stopPropagation();return!1};b.attachDOMEvent(this._Box,"touchstart",function(a){c.uiManager.setActivatingUI(!0);return e(a)});b.attachDOMEvent(this._Box,"touchend",e);b.attachDOMEvent(this._Box,"touchmove",e);b.attachDOMEvent(this._Box,"touchcancel",
e);this.vpScale=b.getViewportScale()}this.loadCookie();this.banner=new l.BannerManager;this.ready=!0}else window.setTimeout(this.prepare.bind(this),200)};g.prototype._Unload=function(){this._Box=this.banner=this.vkbd=null};g.prototype._Load=function(){var c=f.keyman.singleton,b=c.util,e=b.device,a=c.core.activeKeyboard;if(null==this._Box)99<=this.loadRetry||(window.setTimeout(this._Load.bind(this),100),this.loadRetry++);else{this.loadRetry=0;c._TitleElement&&(c._TitleElement.innerHTML="KeymanWeb");
this._Visible=!1;var d=this._Box.style;d.zIndex="9999";d.display="none";d.width=e.touchable?"100%":"auto";d.position="desktop"==e.formFactor?"absolute":"fixed";if(e.touchable){var g=1;if("phone"==e.formFactor)g=1.92*(c.isEmbedded?.65:.6);else{var h=1;"Android"==e.OS&&"devicePixelRatio"in window&&(h=window.devicePixelRatio);g="Android"==e.OS&&"tablet"==e.formFactor&&this.getHeight()<300*h?1.2*g:2*g}d.fontSize=g+"em"}this.vkbd=null;this._Box.innerHTML="";this._Box.onmouseover=this._VKbdMouseOver;this._Box.onmouseout=
this._VKbdMouseOut;null!=a||e.touchable?(d="",this._Box.className="",null!=a&&(d=a.helpText),a&&a.layout(e.formFactor)?this._GenerateVisualKeyboard(a):a?(e=b._CreateElement("div"),e.className="kmw-title-bar",e.appendChild(this._TitleBarInterior()),e.onmousedown=this._VMoveMouseDown,this._Box.appendChild(e),e=b._CreateElement("div"),e.className="kmw-osk-static",e.innerHTML=d,this._Box.appendChild(e),a.hasHelpHTML&&a.insertHelpHTML(this._Box)):this._GenerateVisualKeyboard(null),c._TitleElement&&(c._TitleElement.innerHTML=
"<span style='font-weight:bold'>"+a.name+"</span> - "+c._TitleElement.innerHTML,c._TitleElement.className="",c._TitleElement.style.color="#fff")):(e=b._CreateElement("div"),e.className="kmw-title-bar",e.appendChild(this._TitleBarInterior()),e.onmousedown=this._VMoveMouseDown,this._Box.appendChild(e),e=b._CreateElement("div"),e.className="kmw-osk-none",this._Box.appendChild(e));c=this._Box.firstChild;a=" kmw-keyboard-"+(a?a.id.replace("Keyboard_",""):"");"keymanweb_title_bar"==c.id?c=c.nextSibling.nextSibling:
"keymanweb_banner_container"==c.id&&(c=c.nextSibling);c.className="kmw-osk-inner-frame"+a;this.banner.appendStyles();this.vkbd&&(this.vkbd.createKeyTip(),this.vkbd.appendStyleSheet());this._Enabled&&this._Show()}};g.prototype._GenerateVisualKeyboard=function(c){this.vkbd=new f.keyman.osk.VisualKeyboard(c);c=f.keyman.singleton.util;this._Box.className=c.device.formFactor+" "+c.device.OS.toLowerCase()+" kmw-osk-frame";"desktop"==c.device.formFactor&&this._Box.appendChild(this.controlBar());this.banner&&
this._Box.appendChild(this.banner.element);this._Box.appendChild(this.vkbd.kbdDiv);"desktop"==c.device.formFactor?this._Box.appendChild(this.resizeBar()):this.vkbd.adjustHeights()};g.prototype.controlBar=function(){var c=f.keyman.singleton,b=c.util,e=b._CreateElement("div"),a="";e.id="keymanweb_title_bar";e.className="kmw-title-bar";e.onmousedown=this._VMoveMouseDown;c.core.activeKeyboard&&(a=c.core.activeKeyboard.name);c=b._CreateElement("span");c.className="kmw-title-bar-caption";c.innerHTML=a;
e.appendChild(c);a=this.closeButton=b._CreateElement("div");a.id="kmw-close-button";a.className="kmw-title-bar-image";a.onmousedown=b._CancelMouse;a.onclick=function(){this._Hide(!0)}.bind(this);e.appendChild(a);a=this.helpImg=b._CreateElement("div");a.id="kmw-help-image";a.className="kmw-title-bar-image";a.title="KeymanWeb Help";a.onclick=function(){b.callEvent("osk.helpclick",{});window.event&&(window.event.returnValue=!1);return!1};a.onmousedown=b._CancelMouse;e.appendChild(a);a=this.configImg=
b._CreateElement("div");a.id="kmw-config-image";a.className="kmw-title-bar-image";a.title="KeymanWeb Configuration Options";a.onclick=function(){b.callEvent("osk.configclick",{});window.event&&(window.event.returnValue=!1);return!1};a.onmousedown=b._CancelMouse;e.appendChild(a);a=this.pinImg=b._CreateElement("div");a.id="kmw-pin-image";a.className="kmw-title-bar-image";a.title="Pin the On Screen Keyboard to its default location on the active text box";a.onclick=function(){this.loadCookie();this.userPositioned=
!1;this.saveCookie();this._Show();this.doResizeMove();this.pinImg&&(this.pinImg.style.display="none");window.event&&(window.event.returnValue=!1);return!1}.bind(this);a.onmousedown=b._CancelMouse;e.appendChild(a);return e};g.prototype.resizeBar=function(){var c=f.keyman.singleton.util,b=c._CreateElement("div");b.className="kmw-footer";b.onmousedown=c._CancelMouse;var e=c._CreateElement("div");e.className="kmw-footer-caption";e.innerHTML='<a href="https://keyman.com/developer/keymanweb/">KeymanWeb</a>';
e.id="keymanweb-osk-footer-caption";c.attachDOMEvent(e,"dblclick",function(a){a&&a.shiftKey&&this.showBuild();return!1}.bind(this),!1);"onselectstart"in e&&(e.onselectstart=c.selectStartHandler);b.appendChild(e);c=c._CreateElement("div");c.className="kmw-footer-resize";c.onmousedown=this._VResizeMouseDown;c.onmouseover=c.onmouseout=this._VResizeMouseOut;b.appendChild(c);this.resizeIcon=c;return b};g.prototype.showBuild=function(){var c=f.keyman.singleton;c.util.alert("KeymanWeb Version "+c.version+
"."+c.build+'<br /><br /><span style="font-size:0.8em">Copyright &copy; 2017 SIL International</span>')};g.prototype._TitleBarInterior=function(){var c=f.keyman.singleton,b=c.util,e=b._CreateElement("div"),a=e.style;a.paddingLeft="2px";a.cursor="move";a.background="#ad4a28";a.font="8pt Tahoma,Arial,sans-serif";a=b._CreateElement("div");a.className="kmw-title-bar-actions";a.onmousedown=b._CancelMouse;var d=b._CreateElement("div");d.className="kmw-close-button";d.onmousedown=b._CancelMouse;d.onclick=
function(){this._Hide(!0)}.bind(this);this.closeButton=d;a.appendChild(d);d=this.pinImg=b._CreateElement("div");d.className="kmw-pin-image";d.title="Pin the On Screen Keyboard to its default location on the active text box";d.onclick=this.restorePosition;d.onmousedown=b._CancelMouse;d.style.display="none";b.device.touchable||a.appendChild(d);e.appendChild(a);c=c._TitleElement=b._CreateElement("span");c.className="kmw-title-bar-caption";c.innerHTML="KeymanWeb";e.appendChild(c);return e};g.prototype.isEnabled=
function(){return this._Enabled};g.prototype.isVisible=function(){return this._Visible};g.prototype.saveCookie=function(){var c=f.keyman.singleton.util,b=c.loadCookie("KeymanWeb_OnScreenKeyboard"),e=this.getPos();b.visible=this._Enabled?1:0;b.userSet=this.userPositioned?1:0;b.left=e.left;b.top=e.top;this.vkbd&&(b.width=this.width,b.height=this.height);c.saveCookie("KeymanWeb_OnScreenKeyboard",b)};g.prototype.loadCookie=function(){var c=f.keyman.singleton.util,b=c.loadCookie("KeymanWeb_OnScreenKeyboard");
if("undefined"==typeof b||null==b)return this.userPositioned=!1;this._Enabled=1==c.toNumber(b.visible,1);this.userPositioned=1==c.toNumber(b.userSet,0);this.x=c.toNumber(b.left,-1);this.y=c.toNumber(b.top,-1);var e=c.toNumber(b.width,.3*screen.width);c=c.toNumber(b.height,.15*screen.height);e<.2*screen.width&&(e=.2*screen.width);c<.1*screen.height&&(c=.1*screen.height);e>.9*screen.width&&(e=.9*screen.width);c>.5*screen.height&&(c=.5*screen.height);this.vkbd&&(this.vkbd.kbdDiv.style.width=e+"px",this.vkbd.kbdDiv.style.height=
c+"px",this.vkbd.kbdDiv.style.fontSize=c/8+"px");-1!=this.x&&-1!=this.y&&this._Box||(this.userPositioned=!1);this.x<window.pageXOffset-.8*e&&(this.x=window.pageXOffset-.8*e);0>this.y&&(this.y=this.x=-1,this.userPositioned=!1);this.userPositioned&&this._Box&&this.setPos({left:this.x,top:this.y});return!0};g.prototype.getWidthFromCookie=function(){var c=f.keyman.singleton.util,b=c.loadCookie("KeymanWeb_OnScreenKeyboard");if("undefined"==typeof b||null==b)return.3*screen.width;c=c.toNumber(b.width,.3*
screen.width);c<.2*screen.width?c=.2*screen.width:c>.9*screen.width&&(c=.9*screen.width);return c};g.prototype.getBannerHeight=function(){return null!=this.banner?this.banner.height:0};g.prototype.getKeyboardHeight=function(){var c=f.keyman.singleton,b=c.util.device;if("function"==typeof c.getOskHeight)return c.getOskHeight();var e=Math.floor(Math.min(screen.availHeight,screen.availWidth)/2);if("phone"==b.formFactor){var a=Math.min(screen.height,screen.width),d=Math.max(screen.height,screen.width);
e=c.util.portraitView()?Math.floor(Math.max(screen.availHeight,screen.availWidth)/3):d/a*e/1.6}"iOS"==b.OS&&(e/=c.util.getViewportScale());"Android"==b.OS&&"phone"==b.formFactor&&"devicePixelRatio"in window&&/Firefox|Chrome|OPR/.test(navigator.userAgent)&&(e*=window.devicePixelRatio);return e};g.prototype.getHeight=function(){return this.getBannerHeight()+this.getKeyboardHeight()};g.prototype.getWidth=function(){var c=f.keyman.singleton,b=c.util.device;if("function"==typeof c.getOskWidth)return c.getOskWidth();
if("iOS"==b.OS)var e=window.innerWidth;else if("Android"==b.OS)try{e=document.documentElement.clientWidth}catch(a){e=screen.availWidth}else e=screen.width;return e};g.prototype.doResizeMove=function(c){return f.keyman.singleton.util.callEvent("osk.resizemove",c)};g.prototype.getRect=function(){var c={};this.vkbd?(c.left=c.left=h.dom.Utils.getAbsoluteX(this.vkbd.kbdDiv),c.top=c.top=h.dom.Utils.getAbsoluteY(this.vkbd.kbdDiv),c.width=c.width=h.dom.Utils.getAbsoluteX(this.vkbd.kbdHelpDiv)-h.dom.Utils.getAbsoluteX(this.vkbd.kbdDiv)+
this.vkbd.kbdHelpDiv.offsetWidth,c.height=c.height=h.dom.Utils.getAbsoluteY(this.vkbd.kbdHelpDiv)-h.dom.Utils.getAbsoluteY(this.vkbd.kbdDiv)+this.vkbd.kbdHelpDiv.offsetHeight):(c.left=c.left=h.dom.Utils.getAbsoluteX(this._Box),c.top=c.top=h.dom.Utils.getAbsoluteY(this._Box),c.width=c.width=h.dom.Utils.getAbsoluteX(this._Box)+this._Box.offsetWidth,c.height=c.height=h.dom.Utils.getAbsoluteY(this._Box)+this._Box.offsetHeight);return c};g.prototype.setRect=function(c){var b=f.keyman.singleton.util;if(null!=
this._Box&&"desktop"==b.device.formFactor){b=this._Box;var e=b.style;"left"in c&&(e.left=c.left-h.dom.Utils.getAbsoluteX(b)+b.offsetLeft+"px",this.dfltX=e.left);"top"in c&&(e.top=c.top-h.dom.Utils.getAbsoluteY(b)+b.offsetTop+"px",this.dfltY=e.top);if(null!=this.vkbd){var a=this.vkbd.kbdDiv;e=a.style;if("width"in c){var d=c.width-(b.offsetWidth-a.offsetWidth);d<.2*screen.width&&(d=.2*screen.width);d>.9*screen.width&&(d=.9*screen.width);e.width=d+"px";this.width=d}"height"in c&&(b=c.height-(b.offsetHeight-
a.offsetHeight),b<.1*screen.height&&(b=.1*screen.height),b>.5*screen.height&&(b=.5*screen.height),e.height=b+"px",e.fontSize=b/8+"px",this.height=b);"nosize"in c&&this.resizeIcon&&(this.resizeIcon.style.display=c.nosize?"none":"block")}"nomove"in c&&(this.noDrag=c.nomove,this.pinImg&&(this.pinImg.style.display=c.nomove||!this.userPositioned?"none":"block"));this.saveCookie()}};g.prototype.getPos=function(){var c=this._Box;return{left:this._Visible?c.offsetLeft:this.x,top:this._Visible?c.offsetTop:
this.y}};g.prototype.setPos=function(c){if("undefined"!=typeof this._Box&&!f.keyman.singleton.util.device.touchable){if(this.userPositioned){var b=c.left;c=c.top;"undefined"!=typeof b&&(b<-.8*this._Box.offsetWidth&&(b=-.8*this._Box.offsetWidth),this.userPositioned&&(this._Box.style.left=b+"px",this.x=b));"undefined"!=typeof c&&(0>c&&(c=0),this.userPositioned&&(this._Box.style.top=c+"px",this.y=c))}this.pinImg&&(this.pinImg.style.display=this.userPositioned?"block":"none")}};g.prototype._Show=function(c,
b){var e=f.keyman.singleton,a=e.util.device;if(null!=this._Box&&null!=e.domManager.getActiveElement()&&(a.touchable||null!=e.core.activeKeyboard&&this._Enabled)){var d=this._Box.style;a.touchable&&""==d.bottom&&(d.visibility="hidden");a.touchable&&(d.opacity="1");if(this.vkbd&&this.vkbd.ddOSK&&(this.vkbd.show(),a.touchable)){d.position="fixed";d.left=d.bottom="0px";var g=this.vkbd.kbdDiv.firstChild.style.height;g=g.substr(0,g.indexOf("px"));d.height=d.maxHeight=this.getBannerHeight()+parseInt(g,10)+
5+"px";d.border="none";d.borderTop="1px solid gray";this._Visible=this._Enabled=!0}d.display="block";this.vkbd&&this.vkbd.showLanguage();"desktop"==a.formFactor&&(d.position="absolute",d.display="block",d.left="0px",this.loadCookie(),0<=c?(d.left=c+"px",d.top=b+"px"):this.userPositioned?(d.left=this.x+"px",d.top=this.y+"px"):(c=e.domManager.getActiveElement(),b=c.ownerDocument,"on"==b.designMode&&b.defaultView&&b.defaultView.frameElement&&(c=b.defaultView.frameElement),this.dfltX?d.left=this.dfltX:
"undefined"!=typeof c&&null!=c&&(d.left=h.dom.Utils.getAbsoluteX(c)+"px"),this.dfltY?d.top=this.dfltY:"undefined"!=typeof c&&null!=c&&(d.top=h.dom.Utils.getAbsoluteY(c)+c.offsetHeight+"px")),this._Visible=this._Enabled=!0,this.vkbd&&this.vkbd.kbdDiv&&(this.width=this.vkbd.kbdDiv.offsetWidth,this.height=this.vkbd.kbdDiv.offsetHeight),this.saveCookie(),c=this.pinImg,"undefined"!=typeof c&&null!=c&&(c.style.display=this.userPositioned?"block":"none"));"hidden"==d.visibility&&window.setTimeout(function(){this._Box.style.visibility=
"visible"}.bind(this),0);a.touchable||(a={},a.x=this._Box.offsetLeft,a.y=this._Box.offsetTop,a.userLocated=this.userPositioned,this.doShow(a))}};g.prototype._Hide=function(c){var b=f.keyman.singleton,e=b.util.device;this._Box&&"block"==this._Box.style.display&&this.vkbd&&this.vkbd.kbdDiv&&(this.width=this.vkbd.kbdDiv.offsetWidth,this.height=this.vkbd.kbdDiv.offsetHeight);if(c)this._Enabled=b.isCJK()||e.touchable?!0:!1,this.saveCookie();else if("desktop"==e.formFactor&&0<=document.body.className.indexOf("osk-always-visible"))return;
this._Visible=!1;this._Box&&e.touchable&&0<this._Box.offsetHeight?(e=this._Box.style,e.transition="string"==typeof e.MozBoxSizing?"opacity 0.8s linear":e.msTransition=e.WebkitTransition="opacity 0.5s linear 0",window.setTimeout(function(){var a=this._Box.style;this._Visible?a.transition=a.msTransition=a.MozTransition=a.WebkitTransition="":(a.opacity="0",this._Box.addEventListener("transitionend",this.hideNow,!1),this._Box.addEventListener("webkitTransitionEnd",this.hideNow,!1))}.bind(this),200)):
this._Box&&(this._Box.style.display="none");e={};e.HiddenByUser=c;this.doHide(e);c&&b.domManager.focusLastActiveElement()};g.prototype.hide=function(){this._Enabled=!1;this._Hide(!0)};g.prototype.doShow=function(c){return f.keyman.singleton.util.callEvent("osk.show",c)};g.prototype.doHide=function(c){return f.keyman.singleton.util.callEvent("osk.hide",c)};g.prototype.showLanguageMenu=function(){(new l.LanguageMenu(f.keyman.singleton)).show()};g.prototype.userLocated=function(){return this.userPositioned};
g.prototype.show=function(c){0<arguments.length?(this._Enabled=c)?this._Show():this._Hide(!0):this._Visible?this._Hide(!0):this._Show()};g.prototype.addEventListener=function(c,b){return f.keyman.singleton.util.addEventListener("osk."+c,b)};g.prototype.shutdown=function(){var c=this._Box;c.parentElement&&c.parentElement.removeChild(c)};return g}();l.OSKManager=r})(h.osk||(h.osk={}))})(f.keyman||(f.keyman={}))})(com||(com={}));
(function(f){(function(h){(function(h){(function(h){var g=function(){function c(){this.registeredModels={};this.languageModelMap={}}c.prototype.init=function(){f.keyman.singleton.addEventListener("keyboardchange",this.onKeyboardChange.bind(this))};c.prototype.onKeyboardChange=function(b){var c,a=f.keyman.singleton,d=a.core;"string"==typeof b&&(b=(c={},c.internalName=a.keyboardManager.getActiveKeyboardName(),c.languageCode=b,c.indirect=!0,c));b=this.languageModelMap[b.languageCode];d.activeModel!==
b&&(d.activeModel&&d.languageProcessor.unloadModel(),b&&d.languageProcessor.loadModel(b))};c.prototype.register=function(b){var c=f.keyman.singleton.keyboardManager.getActiveLanguage();this.registeredModels[b.id]=b;var a=this;b.languages.forEach(function(d){a.languageModelMap[d]=b;if(d==c)a.onKeyboardChange(d)})};c.prototype.deregister=function(b){var c=f.keyman.singleton.core;if(this.registeredModels[b]){var a=this.registeredModels[b];delete this.registeredModels[b];c.activeModel&&c.activeModel.id==
b&&c.languageProcessor.unloadModel();var d=this;a.languages.forEach(function(a){d.languageModelMap[a].id==b&&delete d.languageModelMap[a]})}};c.prototype.isRegistered=function(b){return!!this.registeredModels[b.id]};return c}();h.ModelManager=g})(h.prediction||(h.prediction={}))})(h.text||(h.text={}))})(f.keyman||(f.keyman={}))})(com||(com={}));
(function(f){(function(h){var l=function(){function l(){this._TitleElement=null;this._IE=0;this._MasterDocument=null;this._HotKeys=[];this.warned=!1;this.baseFont="sans-serif";this.appliedFont="";this.fontCheckTimer=null;this.protocol=this.rootPath=this.srcPath="";this.mustReloadKeyboard=!1;this.globalLanguageCode=this.globalKeyboard=null;this.isEmbedded=!1;this.refocusTimer=0;this.isHeadless=!1;this.build=300;this.options={root:"",resources:"",keyboards:"",fonts:"",attachType:"",ui:null};this.refreshElementContent=
null;this.util=this.util=new h.Util(this);this.ui=this.ui={};this.keyboardManager=new h.keyboards.KeyboardManager(this);this.domManager=new h.dom.DOMManager(this);this.hotkeyManager=new h.HotkeyManager(this);this.uiManager=new h.UIManager(this);var g="undefined"!==typeof window.KeymanWeb_BaseLayout?window.KeymanWeb_BaseLayout:"us";this._BrowserIsSafari=0<=navigator.userAgent.indexOf("AppleWebKit");this.core=new h.text.InputProcessor({baseLayout:g,variableStoreSerializer:new h.dom.VariableStoreCookieSerializer});
this["interface"]=this.core.keyboardInterface;this.modelManager=new h.text.prediction.ModelManager;this.osk=this.osk=new f.keyman.osk.OSKManager;this.build=f.keyman.environment.BUILD;this.srcPath=l._srcPath;this.rootPath=l._rootPath;this.protocol=l._protocol;this.version=f.keyman.environment.VERSION;this.helpURL="http://help.keyman.com/go";this.setInitialized(0);this.loaded=!0}l.prototype.setDefaultDeviceOptions=function(f){};l.prototype.getStyleSheetPath=function(f){return f};l.prototype.getKeyboardPath=
function(f,c){return f};l.prototype.KC_=function(f,c,b){return""};l.prototype.handleRotationEvents=function(){};l.prototype.alignInputs=function(f){};l.prototype.hideInputs=function(){};l.prototype.namespaceID=function(f){};l.prototype.preserveID=function(f){};l.prototype.setInitialized=function(f){this.initialized=this.initialized=f};l.prototype.delayedInit=function(){this.touchAliasing=this.util.device.touchable?this.domManager.touchHandlers:this.domManager.nonTouchHandlers};l.prototype.shutdown=
function(){this.util.detachDOMEvent(window,"focus",this.pageFocusHandler,!1);this.util.detachDOMEvent(window,"blur",this.pageFocusHandler,!1);this.domManager.shutdown();this.osk.shutdown();this.util.shutdown();this.keyboardManager.shutdown();this.core.languageProcessor.shutdown();this.ui&&this.ui.shutdown&&this.ui.shutdown();h.dom.DOMEventHandlers.states=new h.dom.CommonDOMStates};l.prototype.getDebugInfo=function(){var f={attachType:this.options.attachType,device:this.util.device,initialized:this.initialized,
isEmbedded:this.isEmbedded,ui:this.ui?this.ui.name:null};this.util.device.touchable&&(f.ui="touch");return f};l.prototype.isFontAvailable=function(f){return this.util.checkFont({family:f})};l.prototype.addEventListener=function(f,c){return this.util.addEventListener("kmw."+f,c)};l.prototype._GetEventObject=function(f){if(!f&&(f=window.event,!f)){var c=this.domManager.getLastActiveElement();if(c){f=c.ownerDocument;if(f)var b=f.defaultView;if(!b)return null;f=b.event}}return f};l.prototype._push=function(f,
c){f.push?f.push(c):f=f.concat(c);return f};l.prototype.attachToControl=function(f){this.domManager.attachToControl(f)};l.prototype.detachFromControl=function(f){this.domManager.detachFromControl(f)};l.prototype.addKeyboards=function(f){0==arguments.length?this.keyboardManager.keymanCloudRequest("",!1):this.keyboardManager.addKeyboardArray(arguments)};l.prototype.addKeyboardsForLanguage=function(f){this.keyboardManager.addLanguageKeyboards(arguments)};l.prototype.register=function(f){this.keyboardManager.register(f)};
l.prototype.removeKeyboards=function(f,c){return this.keyboardManager.removeKeyboards(f)};l.prototype.setActiveKeyboard=function(f,c){return this.keyboardManager.setActiveKeyboard(f,c)};l.prototype.getActiveKeyboard=function(){return this.keyboardManager.getActiveKeyboardName()};l.prototype.getActiveLanguage=function(f){return this.keyboardManager.getActiveLanguage(f)};l.prototype.isAttached=function(f){return this.domManager.isAttached(f)};l.prototype.isCJK=function(f){return(f=f?new h.keyboards.Keyboard(f):
this.core.activeKeyboard)&&f.isCJK};l.prototype.isChiral=function(f){return(f?new h.keyboards.Keyboard(f):this.core.activeKeyboard).isChiral};l.prototype.getKeyboard=function(f,c){var b,e=this.keyboardManager.getDetailedKeyboards();for(b=0;b<e.length;b++){var a=e[b];if(a.InternalName==f||a.InternalName=="Keyboard_"+f)if(2>arguments.length||a.LanguageCode==c)return a}return null};l.prototype.getKeyboards=function(){return this.keyboardManager.getDetailedKeyboards()};l.prototype.getSavedKeyboard=function(){return this.keyboardManager.getSavedKeyboard()};
l.prototype.init=function(f){return this.domManager.init(f)};l.prototype.resetContext=function(f){f||(f=h.dom.DOMEventHandlers.states.activeElement);(f=h.dom.Utils.getOutputTarget(f))&&f.resetContext();this.core.resetContext()};l.prototype.setNumericLayer=function(){this.core.keyboardProcessor.setNumericLayer(this.util.device.coreSpec)};l.prototype.disableControl=function(f){this.domManager.disableControl(f)};l.prototype.enableControl=function(f){this.domManager.enableControl(f)};l.prototype.setKeyboardForControl=
function(f,c,b){this.domManager.setKeyboardForControl(f,c,b)};l.prototype.getKeyboardForControl=function(f){this.domManager.getKeyboardForControl(f)};l.prototype.getLanguageForControl=function(f){this.domManager.getLanguageForControl(f)};l.prototype.focusLastActiveElement=function(){this.domManager.focusLastActiveElement()};l.prototype.getLastActiveElement=function(){return this.domManager.getLastActiveElement()};l.prototype.setActiveElement=function(f,c){return this.domManager.setActiveElement(f,
c)};l.prototype.moveToElement=function(f){this.domManager.moveToElement(f)};l.prototype.addHotKey=function(f,c,b){this.hotkeyManager.addHotKey(f,c,b)};l.prototype.removeHotKey=function(f,c){this.hotkeyManager.removeHotkey(f,c)};l.prototype.getUIState=function(){return this.uiManager.getUIState()};l.prototype.activatingUI=function(f){this.uiManager.setActivatingUI(f)};l.prototype.BuildVisualKeyboard=function(g,c,b,e){return f.keyman.osk.VisualKeyboard.buildDocumentationKeyboard(g,c,b,e)};return l}();
h.KeymanBase=l})(f.keyman||(f.keyman={}))})(com||(com={}));var scripts=document.getElementsByTagName("script"),ss=scripts[scripts.length-1].src,sPath=ss.substr(0,ss.lastIndexOf("/")+1),KeymanBase=com.keyman.KeymanBase;KeymanBase._srcPath=sPath;KeymanBase._rootPath=sPath.replace(/(https?:\/\/)([^\/]*)(.*)/,"$1$2/");KeymanBase._protocol=sPath.replace(/(.{3,5}:)(.*)/,"$1");window.keyman&&window.keyman.loaded||function(){window.keyman=com.keyman.singleton=com.keyman.singleton=new KeymanBase;window.keyman.core.languageProcessor.init()}();
window.keyman.initialized||function(){var f=window.keyman,h=f.util;f.debug=f.debug=function(h){if(null==f.debugElement){var l=document.createElement("DIV");var g=l.style;g.position="absolute";g.width="30%";g.maxHeight="50%";g.top="0";g.right="0";g.minHeight="50px";g.border="1px solid blue";g.whiteSpace="pre-line";g.overflowY="scroll";g=document.createElement("P");g.id="debug_output";g.style.margin="2px";l.appendChild(g);document.body.appendChild(l);f.debugElement=g}if(null!=(g=document.getElementById("debug_output")))if(0==
arguments.length)"undefined"!=typeof g.textContent?g.textContent="":g.innerHTML="";else{l=(new Date).toTimeString().substr(3,5)+" ";var c,b;for(c=0;c<arguments.length;c++){0<c&&(l+="; ");var e=arguments[c];if("object"==typeof e)if(null==e)l+="null";else{var a="";for(b in e){0<a.length&&(a+=", ");a=a+b+":";switch(typeof e[b]){case "string":case "number":case "boolean":a+=e[b];break;default:a+=typeof e[b]}if(1024<a.length){a=a.substr(0,1E3)+"...";break}}0<a.length&&(l=l+"{"+a+"}")}else l+=e}1500<l.length&&
(l=l.substr(0,1500)+" (more)");"undefined"!=typeof g.textContent?g.textContent=l+"\n"+g.textContent:g.innerHTML=l+"<br />"+g.innerHTML}};f.debugElement=null;f.delayedInit();h.attachDOMEvent(window,"load",f.domManager._WindowLoad,!1);h.attachDOMEvent(window,"unload",f.domManager._WindowUnload,!1);h.attachDOMEvent(document,"keyup",f.hotkeyManager._Process,!1);f.pageFocusHandler=function(){var f=com.keyman.singleton;!f.uiManager.isActivating&&f.osk.vkbd&&f.core.keyboardProcessor._UpdateVKShift(null,
15,0)};h.attachDOMEvent(window,"focus",f.pageFocusHandler,!1);h.attachDOMEvent(window,"blur",f.pageFocusHandler,!1);String.kmwEnableSupplementaryPlane(!1)}();
(function(f){(function(f){var h=function(){function f(){this.innerWidth=window.innerWidth;this.innerHeight=window.innerHeight}f.prototype.equals=function(c){return this.innerWidth==c.innerWidth&&this.innerHeight==c.innerHeight};return f}(),r=function(){function f(c){this.idlePermutationCounter=f.IDLE_PERMUTATION_CAP;this.keyman=c}f.prototype.resolve=function(){this.keyman.alignInputs();var c=this.keyman.osk;c._Load();this.oskVisible&&c._Show();this.isActive=!1;this.updateTimer&&(window.clearInterval(this.updateTimer),
this.rotState=null)};f.prototype.initNewRotation=function(){this.oskVisible=this.keyman.osk.isVisible();this.keyman.osk.hideNow();this.isActive=!0};f.prototype.init=function(){if(!this.keyman.isEmbedded){var c=this.keyman.util.device.OS,b=this.keyman.util,e=this;"iOS"==c?(b.attachDOMEvent(window,"orientationchange",function(){e.iOSEventHandler();return!1}),b.attachDOMEvent(window,"resize",function(){e.iOSEventHandler();return!1})):"Android"==c&&("onmozorientationchange"in screen?b.attachDOMEvent(screen,
"mozorientationchange",function(){e.initNewRotation();return!1}):b.attachDOMEvent(window,"orientationchange",function(){e.initNewRotation();return!1}),b.attachDOMEvent(window,"resize",function(){e.resolve();return!1}))}};f.prototype.iOSEventHandler=function(){this.isActive||(this.initNewRotation(),this.rotState=new h,this.updateTimer=window.setInterval(this.iOSEventUpdate.bind(this),f.UPDATE_INTERVAL));this.idlePermutationCounter=0};f.prototype.iOSEventUpdate=function(){var c=new h;this.rotState.equals(c)?
++this.idlePermutationCounter==f.IDLE_PERMUTATION_CAP&&this.resolve():(this.rotState=c,this.idlePermutationCounter=0)};f.IDLE_PERMUTATION_CAP=15;f.UPDATE_INTERVAL=20;return f}();f.RotationManager=r})(f.keyman||(f.keyman={}))})(com||(com={}));
window.keyman.initialized||function(){var f=window.keyman,h=f.util,l=h.device,r=com.keyman.dom;f.isEmbedded=!1;f.setDefaultDeviceOptions=function(f){""==f.attachType&&(f.attachType=l.touchable?"manual":"auto")};h.wait=function(g){var c=this.waiting;if("undefined"!=typeof c&&null!=c&&!f.warned){var b=c.firstChild.childNodes;g?(c.pending=!0,window.setTimeout(function(){c.pending&&(window.scrollTo(0,0),b[0].style.display="none",b[1].className="kmw-wait-text",b[1].innerHTML=g,b[2].style.display="block",
c.style.display="block")},1E3)):c.pending&&(b[1].innerHTML="",c.pending=!1,c.style.display="none")}};f.getStyleSheetPath=function(f){return h.getOption("resources")+"osk/"+f};f.getKeyboardPath=function(g){return(/^(([\.]\/)|([\.][\.]\/)|(\/))|(:)/.test(g)?"":f.options.keyboards)+g};f.alignInputs=function(g){if(l.touchable){var c=f.domManager,b=[];g?g.forEach(function(c){c.base?b.push(c):c.kmw_ip&&b.push(c.kmw_ip)}):b=c.inputList;b.forEach(function(b){r.Utils.instanceof(b,"TouchAliasElement")&&b.updateInput();
b.style.visibility="visible";0<b.base.textContent.length&&(b.base.style.visibility="hidden")})}};f.hideInputs=function(){var g=f.domManager;if(l.touchable)for(var c=0;c<g.inputList.length;c++)g.inputList[c].style.visibility="hidden",g.inputList[c].base.style.visibility="visible"};f.isPositionSynthesized=function(){return l.touchable};f.handleRotationEvents=function(){(new com.keyman.RotationManager(f)).init()}}();
(function(){var f=window.keyman,h=window.setInterval(function(){"complete"===document.readyState&&(window.clearInterval(h),f.init(null))},10)})();(function(){var f=com.keyman.Util.prototype;f._GetAbsoluteX=f.getAbsoluteX;f._GetAbsoluteY=f.getAbsoluteY;f._GetAbsolute=f.getAbsolute;f.toNzString=f.nzString})();(function(){com.keyman.text.KeyboardInterface.__publishShorthandAPI()})();
//# sourceMappingURL=keymanweb.js.map
