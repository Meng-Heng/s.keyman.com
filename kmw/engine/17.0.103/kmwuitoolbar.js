var __assign=this&&this.__assign||function(){__assign=Object.assign||function(b){for(var a,c=1,d=arguments.length;c<d;c++){a=arguments[c];for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&(b[e]=a[e])}return b};return __assign.apply(this,arguments)};
if(!window.keyman.ui.name)try{var keymanweb=window.keyman,util=keymanweb.util,dbg=keymanweb.debug;if(util.isTouchDevice())throw"";keymanweb.ui={init:!1,toolbarNode:null,backgroundNode:null,browseMapNode:null,keyboardsButtonNode:null,languageButtonsNode:null,offButtonNode:null,offBarNode:null,oskButtonNode:null,oskBarNode:null,selectorNode:null,regionLanguageListNodes:[],regionNodes:null,langKeyboardNodes:[],langKeyboardListNodes:[],selectedRegion:"as",listedKeyboards:[],catchAllRegion:"un",keyboardListPriority:0,
maxListedKeyboards:1,lastActiveControl:null,selectedKeyboard:null,selectedLanguage:"",helpOffsetX:0,helpOffsetY:0,languages:[],updateMap:!1,startTimer:0,lgText:""};var ui=keymanweb.ui;ui.name="toolbar";ui.ToolBar_Text={Keyboards:"Languages",OffTitle:"Turn off KeymanWeb keyboards",Off:"Off",ShowOSK:"Show On Screen Keyboard",LanguageSelector:"Select language"};ui.ToolBar_Text.SelectKeyboardPre="Select ";ui.ToolBar_Text.SelectKeyboardSuf="keyboard";ui.ToolBar_Text.AltKeyboardsPre="Alternate keyboards for ";
ui.ToolBar_Text.AltKeyboardsSuf="";ui.ToolBar_Text.ca="Central America";ui.ToolBar_Text.sa="South America";ui.ToolBar_Text.na="Americas";ui.ToolBar_Text.eu="Europe";ui.ToolBar_Text.af="Africa";ui.ToolBar_Text.un="Undetermined";ui.ToolBar_Text.as="Asia";ui.ToolBar_Text.oc="Oceania";var controller=document.getElementById("KeymanWebControl");ui.createNode=function(b,a,c,d){var e=document.createElement(b);a&&(e.id=a);c&&(e.className=c);d&&(e.innerHTML=d);if("a"==b||"area"==b||"map"==b)e.ondragstart=function(){return!1};
return e};ui.initialize=ui.initToolbarUI=function(){if(keymanweb.initialized&&!ui.init){var b=document.getElementById("KeymanWebControl");if(!b){if(null==document.body)return;b=document.createElement("DIV");b.id="KeymanWebControl";document.body.insertBefore(b,document.body.firstChild);ui._insertedElem=b}b.style.visibility="hidden";b.style.maxHeight="35px";ui.init=!0;if(!util.isTouchDevice()){util.linkStyleSheet(util.getOption("resources")+"ui/toolbar/kmwuitoolbar.css");ui.regions={};ui.regions.na=
{t:ui.ToolBar_Text.na,m:"0,3,0,37,24,32,35,37,43,47,49,52,65,54,68,57,71,56,73,59,75,60,93,61,93,57,103,49,118,41,126,41,136,23,148,17,156,14,164,5,164,0,57,0,35,5,25,9,5,8,49,52,65,54,68,57,71,56,73,59,75,60,93,61,94,58,97,58,101,59,107,60,114,64,115,68,114,77,104,74,98,75,96,78,95,82,90,81,85,80,82,76,78,74,74,73,65,68,57,61,82,82,95,82,96,78,98,75,104,74,114,77,120,79,124,83,126,87,141,90,142,97,138,103,135,113,127,116,123,124,115,131,112,132,109,138,117,139,140,141,141,146,134,148,114,145,109,148,100,148,91,143,91,130,96,111,89,102,83,95,77,89"};
ui.regions.eu={t:ui.ToolBar_Text.eu,m:"145,29,146,19,158,14,171,6,187,2,206,1,217,4,227,11,231,16,231,33,227,34,225,35,225,37,227,39,228,44,228,47,227,48,223,46,218,44,215,43,208,43,203,45,202,48,205,52,201,52,195,49,189,50,187,48,177,48,175,49,166,50,147,33"};ui.regions.af={t:ui.ToolBar_Text.af,m:"150,58,158,50,166,50,175,49,177,48,187,48,189,50,195,49,201,52,205,52,207,53,221,75,229,75,231,77,231,85,227,92,232,101,237,106,237,112,227,115,222,118,206,125,199,127,193,127,185,111,183,104,180,87,168,89,153,85,143,71,147,60"};
ui.regions.as={t:ui.ToolBar_Text.as,m:"219,1,221,6,228,12,231,16,231,33,227,34,225,35,225,37,227,39,229,45,232,48,239,48,240,49,239,53,242,60,243,65,249,70,252,81,259,87,271,87,278,95,289,100,303,101,311,98,320,98,323,98,323,84,311,81,308,73,307,65,317,57,330,50,334,44,348,36,364,38,375,34,375,8,355,8,336,5,292,1,285,0,219,0"};ui.regions.oc={t:ui.ToolBar_Text.oc,m:"288,117,289,107,303,101,311,98,323,98,323,84,333,77,344,73,362,80,369,88,375,96,375,141,352,143,323,142,316,136,310,130,291,130"};ui.regions.un=
{t:ui.ToolBar_Text.un,m:"205,52,202,48,203,45,208,43,215,43,218,44,223,46,227,48,232,48,239,48,240,49,239,53,242,60,243,65,237,76,231,77,229,75,221,75,207,53"};ui.toolbarNode=ui.createNode("div","kmw_controls");ui.toolbarNode.style.display="block";var a=ui.createNode("a","kmw_controls_start",null," ");a.href="https://keyman.com/developer/keymanweb/";a.target="_blank";ui.toolbarNode.appendChild(a);ui.keyboardsButtonNode=ui.createNode("div","kmw_btn_keyboards","kmw_button");ui.keyboardsButtonNode.title=
ui.ToolBar_Text.LanguageSelector;a=ui.createNode("a",null,"kmw_button_a");a.href="#";a.onclick=ui.showKeyboardsPopup;a.appendChild(ui.createNode("div","kmw_img_keyboards","kmw_img"));a.appendChild(ui.createNode("div",null,"kmw_a",ui.ToolBar_Text.Keyboards));a.appendChild(ui.createNode("div",null,"kmw_drop"));ui.keyboardsButtonNode.appendChild(a);ui.selectorNode=ui.createNode("div","kmw_selector");ui.regionsNode=ui.createNode("div","kmw_selector_regions");ui.browseMapNode=ui.createNode("div","kmw_browsemap");
a=ui.createNode("img","kmw_region_browsemap");a.src=util.getOption("resources")+"ui/toolbar/blank.gif";a.useMap="#kmw_worldgrey16";ui.browseMapNode.appendChild(a);var c=ui.createNode("map","kmw_worldgrey16");c.name="kmw_worldgrey16";for(var d in ui.regions)a=ui.createNode("area"),a.shape="poly",a.alt="",a.href="#",a.title=ui.regions[d].t,a.hidefocus="true",a.onclick=function(a){return function(b){return ui.selectRegion(b,a)}}(d),a.onmouseover=function(a){return function(b){return ui.hoverRegion(b,
a)}}(d),a.onmouseout=function(a){return function(b){return ui.unhoverRegion(b,a)}}(d),a.coords=ui.regions[d].m,c.appendChild(a);a=ui.createNode("area");a.shape="default";a.nohref="true";a.alt="";a.onclick=ui.eventCapture;c.appendChild(a);ui.browseMapNode.appendChild(c);ui.regionsNode.appendChild(ui.browseMapNode);ui.regionNodes={};a=ui.createNode("ul");for(d in ui.regions)c=ui.createNode("li"),ui.regionNodes[d]=ui.createNode("a",null,null,ui.regions[d].t),ui.regionNodes[d].href="#",ui.regionNodes[d].onclick=
function(a){return function(b){return ui.selectRegion(b,a)}}(d),ui.regionNodes[d].onmouseover=function(a){return function(b){return ui.hoverRegion(b,a)}}(d),ui.regionNodes[d].onmouseout=function(a){return function(b){return ui.unhoverRegion(b,a)}}(d),c.appendChild(ui.regionNodes[d]),a.appendChild(c);ui.regionsNode.appendChild(a);ui.selectorNode.appendChild(ui.regionsNode);ui.keyboardsButtonNode.appendChild(ui.selectorNode);ui.toolbarNode.appendChild(ui.keyboardsButtonNode);ui.toolbarNode.appendChild(ui.offBarNode=
ui.createNode("div","kmw_bar_off","kmw_bar"));ui.offButtonNode=ui.createNode("div","kmw_btn_off","kmw_button_selected");a=ui.createNode("a",null,"kmw_button_a");a.href="#";a.onclick=ui.offButtonClickEvent;a.title=ui.ToolBar_Text.OffTitle;a.appendChild(ui.createNode("div","kmw_img_off","kmw_img"));a.appendChild(ui.createNode("div",null,"kmw_a",ui.ToolBar_Text.Off));ui.offButtonNode.appendChild(a);ui.toolbarNode.appendChild(ui.offButtonNode);ui.toolbarNode.appendChild(ui.languageButtonsNode=ui.createNode("div",
"kmw_control_keyboards","kmw_button"));ui.toolbarNode.appendChild(ui.oskBarNode=ui.createNode("div","kmw_bar_osk","kmw_bar"));ui.oskButtonNode=ui.createNode("div","kmw_btn_osk","kmw_button");a=ui.createNode("a",null,"kmw_button_a");a.href="#";a.onclick=ui.showOSK;a.onmousedown=function(){keymanweb.activatingUI(!0)};a.title=ui.ToolBar_Text.ShowOSK;a.appendChild(ui.createNode("div","kmw_img_osk","kmw_img"));ui.oskButtonNode.appendChild(a);ui.toolbarNode.appendChild(ui.oskButtonNode);ui.toolbarNode.appendChild(ui.createNode("div",
"kmw_controls_end",null," "));d=ui.createNode("div");d.id="kmw_map_preload";ui.toolbarNode.appendChild(d);ui.toolbarNode.appendChild(ui.createNode("br",null,"kmw_clear"));b.appendChild(ui.toolbarNode);ui.updateMap=!0;ui.startTimer&&clearTimeout(ui.startTimer);ui.startTimer=setTimeout(ui.addKeyboardsToMap,0);util.attachDOMEvent(document.body,"click",ui.hideAllPopups,!1);ui.selectedRegion="eu";ui.registerEvents();keymanweb.focusLastActiveElement()}}};ui.shutdown=function(){var b=ui.toolbarNode;b&&b.parentNode.removeChild(b);
(b=ui._insertedElem)&&b.parentNode.removeChild(b)};ui.addKeyboardsToMap=function(){if(ui.updateMap){ui.updateMap=!1;var b=0;ui.regionLanguageListNodes={};var a=keymanweb.getKeyboards();a.sort(ui.sortKeyboards);for(b=ui.regionsNode.childNodes.length;0<b;b--)"kmw_selector_region"==ui.regionsNode.childNodes[b-1].className&&ui.regionsNode.removeChild(ui.regionsNode.childNodes[b-1]);for(var c in ui.regions){ui.regionLanguageListNodes[c]=ui.createNode("div",null,"kmw_selector_region");for(var d=ui.createNode("div",
null,"kmw_keyboard_col"),e=0,f=0,k="",g=0;g<a.length;g++){var h=a[g].RegionCode;if(!ui.regions[h]){if(c!=ui.catchAllRegion)continue}else if(h!=c)continue;h=keymanweb.util.getLanguageCodes(a[g].LanguageCode);h[0]!=k&&(k=h[0],e++)}e=Number(((e+3)/4).toFixed(0));k="";for(g=0;g<a.length;g++){h=a[g].RegionCode;if(!ui.regions[h]){if(c!=ui.catchAllRegion)continue}else if(h!=c)continue;h=keymanweb.util.getLanguageCodes(a[g].LanguageCode);if(h[0]==k)h=ui.languages[k].keyboards,h.push?h.push(a[g]):ui.languages[k].keyboards=
h.concat(a[g]);else{k=h[0];ui.languages[k]={id:a[g].LanguageCode,name:a[g].LanguageName,keyboards:[a[g]]};0==f%e&&0<f&&(ui.regionLanguageListNodes[c].appendChild(d),d=ui.createNode("div",null,3==f/e?"kmw_keyboard_col_right":"kmw_keyboard_col"));f++;h=ui.createNode("div",null,"kmw_language");var l=ui.createNode("a",null,null,a[g].LanguageName);l.href="#";l.onclick=function(a){return function(b){return ui.selectLanguage(b,a)}}(ui.languages[k]);h.appendChild(l);d.appendChild(h);b++}}ui.regionLanguageListNodes[c].appendChild(d);
ui.regionLanguageListNodes[c].appendChild(ui.createNode("div",null,"kmw_clear"));ui.regionsNode.appendChild(ui.regionLanguageListNodes[c])}ui.loadCookie();ui.selectRegion(null,ui.selectedRegion);ui.enableControls();ui.lastSelectedKeyboard&&ui.changeKeyboardEvent(ui.lastSelectedKeyboard);keymanweb.focusLastActiveElement()}};ui.sortKeyboards=function(b,a){return b.RegionCode<a.RegionCode?-2:b.RegionCode>a.RegionCode?2:b.LanguageName<a.LanguageName?-1:b.LanguageName>a.LanguageName?1:0};ui.findListedKeyboard=
function(b){for(var a=0;a<ui.listedKeyboards.length;a++)if(ui.listedKeyboards[a].lang.id==b.id)return a;return null};ui.addKeyboardToList=function(b,a){var c=ui.findListedKeyboard(b);if(null==c){if(ui.listedKeyboards.length>=ui.maxListedKeyboards){var d=2147483647;c=null;for(var e=0;e<ui.listedKeyboards.length;e++)ui.listedKeyboards[e].priority<d&&(c=e,d=ui.listedKeyboards[e].priority);null!=c&&(d=ui.listedKeyboards[c],ui.langKeyboardListNodes[d.lang.id]=null,ui.langKeyboardNodes[d.lang.id]=null,
ui.languageButtonsNode.removeChild(d.buttonNode),ui.listedKeyboards=0==c?ui.listedKeyboards.slice(c+1):c==ui.listedKeyboards.length-1?ui.listedKeyboards.slice(0,c):ui.listedKeyboards.slice(0,c).concat(ui.listedKeyboards.slice(c+1)))}c=ui.createNode("div",null,"kmw_button");d=ui.createNode("a",null,"kmw_button_a"+(1<b.keyboards.length?" kmw_norightgap":""));d.href="#";e=ui.ToolBar_Text.SelectKeyboardPre+a.Name;var f=ui.ToolBar_Text.SelectKeyboardSuf;0>e.toLowerCase().indexOf(f.toLowerCase())&&(e=e+
" "+f);d.title=e;d.onclick=function(a){return ui.selectLanguage(a,b)};d.appendChild(ui.createNode("div","kmw_img_kbd","kmw_img"));ui.lgText=ui.truncate(b.name,28);d.appendChild(ui.createNode("div",null,"kmw_a",ui.lgText));c.appendChild(d);f=d;if(1<b.keyboards.length){d=ui.createNode("a",null,"kmw_button_a kmw_noleftgap");d.href="#";d.title=ui.ToolBar_Text.AltKeyboardsPre+b.name+ui.ToolBar_Text.AltKeyboardsSuf;d.onclick=function(a){return ui.showKeyboardsForLanguage(a,b)};var k=ui.createNode("div",
null,"kmw_a");e=ui.truncate(a.Name.replace(/\s?keyboard/i,""),40-ui.lgText.length);k.appendChild(ui.langKeyboardNodes[b.id]=ui.createNode("span",null,"kmw_kbd",e));d.appendChild(k);d.appendChild(ui.createNode("div",null,"kmw_drop"));c.appendChild(d);ui.langKeyboardListNodes[b.id]=ui.createNode("ul",null,"kmw_selector_kbd");ui.langKeyboardListNodes[b.id].style.display="none";for(var g in b.keyboards)k=ui.createNode("li"),e=b.keyboards[g].Name.replace(/\s?keyboard/i,""),e=e+" ["+b.keyboards[g].LanguageCode+
"]",d=ui.createNode("a",null,null,e),d.href="#",d.title="",d.onclick=function(a,b){return function(c){return ui.selectKeyboard(c,a,b,!0)}}(b,b.keyboards[g]),k.appendChild(d),ui.langKeyboardListNodes[b.id].appendChild(k);c.appendChild(ui.langKeyboardListNodes[b.id])}ui.languageButtonsNode.appendChild(c);ui.listedKeyboards.push({priority:ui.keyboardListPriority++,lang:b,keyboard:a,buttonNode:c,aNode:f})}else{ui.listedKeyboards[c].priority=ui.keyboardListPriority++;ui.listedKeyboards[c].keyboard=a;if(g=
ui.langKeyboardNodes[b.id])e=a.Name.replace(/\s?keyboard/i,""),g.innerHTML=ui.truncate(e,40-ui.lgText.length);ui.listedKeyboards[c].aNode&&(e=ui.ToolBar_Text.SelectKeyboardPre+a.Name,f=ui.ToolBar_Text.SelectKeyboardSuf,0>e.toLowerCase().indexOf(f.toLowerCase())&&(e=e+" "+f),ui.listedKeyboards[c].aNode.title=e)}};ui.truncate=function(b,a){return b.length<=a?b:b.substr(0,a-1)+"\u2026"};ui.registerKeyboard=function(b){ui.updateMap=!0;ui.startTimer&&clearTimeout(ui.startTimer);ui.startTimer=setTimeout(ui.addKeyboardsToMap,
0)};keymanweb.addEventListener("keyboardregistered",ui.registerKeyboard);var keyboardsForLangPopup=null;ui.hideKeyboardsForLanguage=function(b){var a=ui.keyboardsForLangPopup;a&&(a.style.display="none");ui.CancelPopupDismissal(ui.hideKeyboardsForLanguage);return ui.eventCapture(b)};ui.showKeyboardsForLanguage=function(b,a){ui.hideKeyboardsPopup(b);if(a=ui.langKeyboardListNodes[a.id]){if("block"==a.style.display)return ui.hideKeyboardsForLanguage(b);a.style.display="block";ui.keyboardsForLangPopup=
a;ui.SetupPopupDismissal(a,ui.hideKeyboardsForLanguage)}return ui.eventCapture(b)};ui.selectLanguage=function(b,a){var c=ui.findListedKeyboard(a);return(c=null==c?a.keyboards[0]:ui.listedKeyboards[c].keyboard)?ui.selectKeyboard(b,a,c,!0):!1};ui.selectKeyboard=function(b,a,c,d){keymanweb.activatingUI(!0);if(ui.selectedLanguage){var e=ui.findListedKeyboard(ui.selectedLanguage);null!=e&&(ui.listedKeyboards[e].buttonNode.className="kmw_button")}ui.offButtonNode.className="kmw_button";ui.selectedLanguage=
a;ui.selectedKeyboard=c;ui.SelectedLanguage=c.LanguageCode;ui.setLastFocus();ui.addKeyboardToList(a,c);d&&keymanweb.setActiveKeyboard(c.InternalName,c.LanguageCode);ui.listedKeyboards[ui.findListedKeyboard(a)].buttonNode.className="kmw_button_selected";ui.saveCookie();ui.enableControls();keymanweb.activatingUI(!1);return ui.hideKeyboardsPopup(b)||ui.hideKeyboardsForLanguage(b)};ui.enableControls=function(){var b=[ui.offButtonNode,ui.offBarNode,ui.oskButtonNode,ui.oskBarNode],a=!1;keymanweb.isCJK(ui.selectedKeyboard)?
a=!0:null==ui.selectedKeyboard&&(a="none"==b[2].style.display);if(null!=ui.selectedKeyboard||0<ui.listedKeyboards.length)for(var c=0;c<b.length;c++)b[c].style.display="";else for(c=0;c<b.length;c++)b[c].style.display="none";a?ui.oskButtonNode.style.display=ui.oskBarNode.style.display="none":null==ui.selectedKeyboard&&(ui.oskButtonNode.className="kmw_button_disabled");ui.toolbarNode.parentNode.style.visibility="visible";return!0};ui.setLastFocus=function(){keymanweb.focusLastActiveElement()};ui.showOSK=
function(b){var a=keymanweb.osk;if(a)return keymanweb.activatingUI(!0),a&&""!=keymanweb.getActiveKeyboard()&&(a.isEnabled()?a.hide():a.show(!0)),ui.setLastFocus(),keymanweb.activatingUI(!1),ui.eventCapture(b)};ui.offButtonClickEvent=function(b){if("kmw_controls_disabled"!=ui.toolbarNode.className){ui.hideKeyboardsForLanguage(null);if(ui.selectedLanguage){var a=ui.findListedKeyboard(ui.selectedLanguage);null!=a&&(ui.listedKeyboards[a].buttonNode.className="kmw_button")}ui.selectedKeyboard=null;ui.selectedLanguage=
null;ui.SelectedLanguage="";ui.offButtonNode.className="kmw_button_selected"}ui.setLastFocus();keymanweb.setActiveKeyboard("","");ui.saveCookie();ui.enableControls();return ui.eventCapture(b)};ui.eventCapture=function(b){b||(b=window.event);window.event&&(window.event.returnValue=!1);b&&(b.cancelBubble=!0);return!1};ui.selectRegion=function(b,a){var c=ui.browseMapNode;if(!c)return ui.eventCapture(b);c.className="kmw_browsemap_"+a;"undefined"==typeof ui.regionLanguageListNodes[a]&&(ui.updateMap=!0,
ui.addKeyboardsToMap());ui.regionLanguageListNodes[a].style.display="block";ui.regionNodes[a].className="selected";null!=ui.selectedRegion&&ui.selectedRegion!=a&&(ui.regionLanguageListNodes[ui.selectedRegion].style.display="none",ui.regionNodes[ui.selectedRegion].className="");ui.selectedRegion=a;return ui.eventCapture(b)};ui.unhoverRegion=function(b,a){ui.browseMapNode.className=null==ui.selectedRegion?"":"kmw_browsemap_"+ui.selectedRegion;ui.regionNodes[a].className=ui.selectedRegion==a?"selected":
"";return ui.eventCapture(b)};ui.hoverRegion=function(b,a){ui.browseMapNode.className="kmw_browsemap_"+a+"_sel";ui.regionNodes[a].className="hover";return ui.eventCapture(b)};ui.pluck=function(b,a){return b.getAttribute?b.getAttribute(a)||b[a]:b[a]};ui.focusControlEvent=function(b){if(!ui.init)return!0;b=b.target;if("textarea"==b.tagName.toLowerCase()||"input"==b.tagName.toLowerCase()&&"text"==b.type.toLowerCase())if(ui.lastActiveControl=b,ui.pluck(b,"kmw_disable"))"kmw_controls_disabled"!=ui.toolbarNode.className&&
(ui.toolbarNode.className="kmw_controls_disabled");else{if(null!=ui.selectedKeyboard)if(keymanweb.isCJK())ui.oskButtonNode.style.display=ui.oskBarNode.style.display="none";else{var a=keymanweb.osk;ui.oskButtonNode.className=a&&a.isEnabled()?"kmw_button_selected":"kmw_button"}""!=ui.toolbarNode.className&&(ui.toolbarNode.className="");a=b.KMW_HelpOffsetX?b.KMW_HelpOffsetX:64;var c=b.KMW_HelpOffsetY?b.KMW_HelpOffsetY:0;ui.helpOffsetX=util.getAbsoluteX(b)+a;ui.helpOffsetY=util.getAbsoluteY(b)+b.offsetHeight+
c}return!0};keymanweb.addEventListener("controlfocused",ui.focusControlEvent);ui.blurControlEvent=function(b){if(!ui.init)return!0;"none"!=ui.oskButtonNode.style.display&&(ui.oskButtonNode.className="kmw_button_disabled");return!0};keymanweb.addEventListener("controlblurred",ui.blurControlEvent);ui.lastSelectedKeyboard=null;ui.changeKeyboardEvent=function(b){ui.lastSelectedKeyboard=null;var a=b.internalName,c=keymanweb.util.getLanguageCodes(b.languageCode)[0];if(""!=c&&""!=a){c=ui.languages[c];if(null!=
c)for(var d=0;d<c.keyboards.length;d++)if(c.keyboards[d].InternalName==a)return ui.selectKeyboard(null,c,c.keyboards[d],!1),!0;ui.lastSelectedKeyboard=__assign({},b)}return!0};keymanweb.addEventListener("keyboardchange",ui.changeKeyboardEvent);ui.onShowOSK=function(b){ui.init&&(ui.oskButtonNode.className="kmw_button_selected");return b};ui.onHideOSK=function(b){ui.init&&b.HiddenByUser&&(ui.oskButtonNode.className="kmw_button")};ui.registerEvents=function(){var b=keymanweb.osk;b&&(b.addEventListener("show",
ui.onShowOSK),b.addEventListener("hide",ui.onHideOSK))};ui.showKeyboardsPopup=function(b){ui.addKeyboardsToMap();if("kmw_controls_disabled"==ui.toolbarNode.className)return ui.eventCapture(b);ui.hideKeyboardsForLanguage(null);if("kmw_over"==ui.selectorNode.className)return ui.hideKeyboardsPopup(b);ui.selectorNode.className="kmw_over";ui.keyboardsButtonNode.className="kmw_button_selected";ui.SetupPopupDismissal(ui.selectorNode,ui.hideKeyboardsPopup);return ui.eventCapture(b)};ui.hideKeyboardsPopup=
function(b){ui.selectorNode.className="";ui.keyboardsButtonNode.className="kmw_button";ui.CancelPopupDismissal(ui.hideKeyboardsPopup);return ui.eventCapture(b)};ui.hideAllPopups=function(b){var a=ui.keyboardsForLangPopup;if((!a||"none"==a.style.display)&&""==ui.selectorNode.className)return!0;ui.hideKeyboardsPopup(b);ui.hideKeyboardsForLanguage(b);return ui.eventCapture(b)};var dismissalCallback=null,popupElement=null,lastDismissalCallback=null;ui.PopupDismissal=function(b){var a=b&&b.target||window.event&&
window.event.srcElement;if(a)for(;a.parentNode;){if(a==popupElement)return null;a=a.parentNode}"#document"==a.nodeName&&ui.hideAllPopups(b);return dismissalCallback};ui.SetupPopupDismissal=function(b,a){ui.PopupDismissal==document.onclick&&ui.CancelPopupDismissal(dismissalCallback);dismissalCallback=a;popupElement=b;lastDismissalCallback=document.onclick;document.onclick=ui.PopupDismissal};ui.CancelPopupDismissal=function(b){ui.PopupDismissal==document.onclick&&(document.onclick=lastDismissalCallback,
popupElement=dismissalCallback=lastDismissalCallback=null)};ui.loadCookie=function(){var b="",a=util.loadCookie("KeymanWeb_Keyboard");void 0!=a.current&&(b=a.current.split(":")[0]);a=util.loadCookie("KeymanWeb_Toolbar");void 0!=a.region&&(ui.selectedRegion=a.region);if(void 0!=a.maxrecent)for(var c=0;c<a.maxrecent;c++){if(void 0!=a["recent"+c]){var d=a["recent"+c].split(",");if(2==d.length){var e=ui.languages[d[0]];if(null!=e)for(var f=0;f<e.keyboards.length;f++)if(e.keyboards[f].InternalName==d[1]){ui.addKeyboardToList(e,
e.keyboards[f]);if(e.keyboards[f].InternalName==b){ui.selectKeyboard(null,e,e.keyboards[f],!0);window.focus();ui.setLastFocus();break}break}}}}else if(b=keymanweb.getActiveKeyboard(),f=keymanweb.getActiveLanguage(),""!=f&&""!=b&&(a=ui.languages[f],null!=a))for(f=0;f<a.keyboards.length;f++)a.keyboards[f].InternalName==b&&(ui.selectKeyboard(null,a,a.keyboards[f],!0),window.focus(),ui.setLastFocus())};ui.saveCookie=function(){var b={};b.region=ui.selectedRegion;b.maxrecent=""+ui.listedKeyboards.length;
for(var a=0;a<ui.listedKeyboards.length;a++)b["recent"+a]=ui.listedKeyboards[a].lang.id+","+ui.listedKeyboards[a].keyboard.InternalName;util.saveCookie("KeymanWeb_Toolbar",b)};ui.initToolbarUI()}catch(b){};
//# sourceMappingURL=kmwuitoolbar.js.map
