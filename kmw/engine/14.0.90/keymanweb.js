/*
 https://github.com/paulmillr/es6-shim
 @license es6-shim Copyright 2013-2016 by Paul Miller (http://paulmillr.com)
   and contributors,  MIT License
 es6-shim: v0.35.4
 see https://github.com/paulmillr/es6-shim/blob/0.35.3/LICENSE
 Details and documentation:
 https://github.com/paulmillr/es6-shim/
 https://mths.be/codepointat v0.2.0 by @mathias  http://mths.be/startswith v0.2.0 by @mathias */
var com;(function(e){(function(e){(function(e){function h(f,b){b=b||{};for(var a in f)"object"===typeof f[a]&&null!=f[a]?(b[a]=f[a].constructor===Array?[]:{},h(f[a],b[a])):b[a]=f[a];return b}e.deepCopy=h})(e.utils||(e.utils={}))})(e.keyman||(e.keyman={}))})(com||(com={}));
(function(e){(function(e){(function(e){e.getGlobalObject=function(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof self?self:global}})(e.utils||(e.utils={}))})(e.keyman||(e.keyman={}))})(com||(com={}));(function(e){e=e.keyman||(e.keyman={});e=e.environment||(e.environment={});e.VERSION="14.0";e.BUILD=90;e.SENTRY_RELEASE="release-14.0.90-alpha"})(com||(com={}));
(function(e){(function(h){(function(h){var k=function(){function f(b){if(void 0===b||null===b)this.components=[].concat(f.DEVELOPER_VERSION_FALLBACK.components);else if(Array.isArray(b)){if(2>b.length)throw Error("Version string must have at least a major and minor component!");this.components=[].concat(b)}else{b=b.split(".");var a=[];if(2>b.length)throw Error("Version string must have at least a major and minor component!");for(var d=0;d<b.length;d++){var c=parseInt(b[d],10);if(isNaN(c))throw Error("Version string components must be numerical!");
a.push(c)}this.components=a}}Object.defineProperty(f.prototype,"major",{get:function(){return this.components[0]},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"minor",{get:function(){return this.components[1]},enumerable:!0,configurable:!0});f.prototype.toString=function(){return this.components.join(".")};f.prototype.toJSON=function(){return this.toString()};f.prototype.equals=function(b){return 0==this.compareTo(b)};f.prototype.precedes=function(b){return 0>this.compareTo(b)};
f.prototype.compareTo=function(b){var a=this.components.length<b.components.length,d=this.components.length<b.components.length?this.components.length:b.components.length,c;for(c=0;c<d;c++){var g=this.components[c]-b.components[c];if(0!=g)return g}b=a?b.components:this.components;do{if(0<b[c])return a?-1:1;c++}while(c<b.length);return 0};f.CURRENT=new f(e.keyman.environment.VERSION);f.DEVELOPER_VERSION_FALLBACK=new f([9,0,0]);f.NO_DEFAULT_KEYCAPS=new f([12,0]);f.MAC_POSSIBLE_IPAD_ALIAS=new f([10,
15]);return f}();h.Version=k})(h.utils||(h.utils={}))})(e.keyman||(e.keyman={}))})(com||(com={}));String.kmwFromCharCode=function(e){var h=[],k;for(k=0;k<arguments.length;k++){var p=Number(arguments[k]);if(!isFinite(p)||0>p||1114111<p||Math.floor(p)!==p)throw new RangeError("Invalid code point "+p);65536>p?h.push(p):(p-=65536,h.push((p>>10)+55296),h.push(p%1024+56320))}return String.fromCharCode.apply(void 0,h)};
String.prototype.kmwCharCodeAt=function(e){var h=String(this),k=0;if(0>e||e>=h.length)return NaN;for(var p=0;p<e;p++)if(k=h.kmwNextChar(k),null===k)return NaN;e=h.charCodeAt(k);return 55296<=e&&56319>=e&&h.length>k+1&&(h=h.charCodeAt(k+1),56320<=h&&57343>=h)?(e-55296<<10)+(h-56320)+65536:e};String.prototype.kmwIndexOf=function(e,h){var k=String(this);e=k.indexOf(e,h);if(0>e)return e;for(var p=h=0;null!==p&&p<e;p=k.kmwNextChar(p))h++;return h};
String.prototype.kmwLastIndexOf=function(e,h){var k=String(this);e=k.lastIndexOf(e,h);if(0>e)return e;for(var p=h=0;null!==p&&p<e;p=k.kmwNextChar(p))h++;return h};String.prototype.kmwLength=function(){var e=String(this);if(0==e.length)return 0;for(var h=0,k=0;null!==k;h++)k=e.kmwNextChar(k);return h};String.prototype.kmwSlice=function(e,h){var k=String(this);e=k.kmwCodePointToCodeUnit(e);h=k.kmwCodePointToCodeUnit(h);return null===e||null===h?"":k.slice(e,h)};
String.prototype.kmwSubstr=function(e,h){var k=String(this);0>e&&(e=k.kmwLength()+e);0>e&&(e=0);var p=k.kmwCodePointToCodeUnit(e),f=p;if(null===p)return"";if(2>arguments.length)f=k.length;else for(var b=0;b<h;b++)f=k.kmwNextChar(f);return null===f?k.substring(p):k.substring(p,f)};
String.prototype.kmwSubstring=function(e,h){var k=String(this);if("undefined"==typeof h)e=k.kmwCodePointToCodeUnit(e),h=k.length;else{if(e>h){var p=e;e=h;h=p}e=k.kmwCodePointToCodeUnit(e);h=k.kmwCodePointToCodeUnit(h)}if(isNaN(e)||null===e)e=0;if(isNaN(h)||null===h)h=k.length;return k.substring(e,h)};
String.prototype.kmwNextChar=function(e){var h=String(this);if(null===e||0>e||e>=h.length-1)return null;var k=h.charCodeAt(e);return 55296<=k&&56319>=k&&h.length>e+1&&(k=h.charCodeAt(e+1),56320<=k&&57343>=k)?e==h.length-2?null:e+2:e+1};String.prototype.kmwPrevChar=function(e){var h=String(this);if(null==e||0>=e||e>h.length)return null;var k=h.charCodeAt(e-1);return 56320<=k&&57343>=k&&1<e&&(h=h.charCodeAt(e-2),55296<=h&&56319>=h)?e-2:e-1};
String.prototype.kmwCodePointToCodeUnit=function(e){if(null===e)return null;var h=String(this),k=0;if(0>e){k=h.length;for(var p=0;p>e;p--)k=h.kmwPrevChar(k);return k}if(e==h.kmwLength())return h.length;for(p=0;p<e;p++)k=h.kmwNextChar(k);return k};String.prototype.kmwCodeUnitToCodePoint=function(e){var h=String(this);return null===e?null:0==e?0:0>e?h.substr(e).kmwLength():h.substr(0,e).kmwLength()};String.prototype.kmwCharAt=function(e){var h=String(this);return 0<=e?h.kmwSubstr(e,1):""};
String.prototype.kmwBMPNextChar=function(e){var h=String(this);return 0>e||e>=h.length-1?null:e+1};String.prototype.kmwBMPPrevChar=function(e){var h=String(this);return 0>=e||e>h.length?null:e-1};String.prototype.kmwBMPCodePointToCodeUnit=function(e){return e};String.prototype.kmwBMPCodeUnitToCodePoint=function(e){return e};String.prototype.kmwBMPLength=function(){return String(this).length};
String.prototype.kmwBMPSubstr=function(e,h){var k=String(this);return-1<e?k.substr(e,h):k.substr(k.length+e,-e)};
String.kmwEnableSupplementaryPlane=function(e){var h=String.prototype;String._kmwFromCharCode=e?String.kmwFromCharCode:String.fromCharCode;h._kmwCharAt=e?h.kmwCharAt:h.charAt;h._kmwCharCodeAt=e?h.kmwCharCodeAt:h.charCodeAt;h._kmwIndexOf=e?h.kmwIndexOf:h.indexOf;h._kmwLastIndexOf=e?h.kmwLastIndexOf:h.lastIndexOf;h._kmwSlice=e?h.kmwSlice:h.slice;h._kmwSubstring=e?h.kmwSubstring:h.substring;h._kmwSubstr=e?h.kmwSubstr:h.kmwBMPSubstr;h._kmwLength=e?h.kmwLength:h.kmwBMPLength;h._kmwNextChar=e?h.kmwNextChar:
h.kmwBMPNextChar;h._kmwPrevChar=e?h.kmwPrevChar:h.kmwBMPPrevChar;h._kmwCodePointToCodeUnit=e?h.kmwCodePointToCodeUnit:h.kmwBMPCodePointToCodeUnit;h._kmwCodeUnitToCodePoint=e?h.kmwCodeUnitToCodePoint:h.kmwBMPCodeUnitToCodePoint};
(function(e){(function(e){(function(e){var h;(function(a){a.Chrome="chrome";a.Edge="edge";a.Firefox="firefox";a.Native="native";a.Opera="opera";a.Safari="safari";a.Other="other"})(h=e.Browser||(e.Browser={}));var f;(function(a){a.Windows="windows";a.macOS="macosx";a.Linux="linux";a.Android="android";a.iOS="ios";a.Other="other"})(f=e.OperatingSystem||(e.OperatingSystem={}));var b;(function(a){a.Desktop="desktop";a.Phone="phone";a.Tablet="tablet"})(b=e.FormFactor||(e.FormFactor={}));var a=function(){return function(a,
c,g,l){switch(a.toLowerCase()){case h.Chrome:case h.Edge:case h.Firefox:case h.Native:case h.Opera:case h.Safari:this.browser=a.toLowerCase();break;default:this.browser=h.Other}switch(c.toLowerCase()){case b.Desktop:case b.Phone:case b.Tablet:this.formFactor=c.toLowerCase();break;default:throw"Invalid form factor specified for device: "+c;}switch(g.toLowerCase()){case f.Windows.toLowerCase():case f.macOS.toLowerCase():case f.Linux.toLowerCase():case f.Android.toLowerCase():case f.iOS.toLowerCase():this.OS=
g.toLowerCase();break;default:this.OS=f.Other}this.touchable=l}}();e.DeviceSpec=a})(e.utils||(e.utils={}))})(e.keyman||(e.keyman={}))})(com||(com={}));
(function(e){(function(e){(function(e){(function(e){var f=function(){function b(){}b.constructInstance=function(){return new Worker(this.asBlobURI(LMLayerWorkerCode))};b.asBlobURI=function(a){a=e.LMLayer.unwrap(a);a=new Blob([a],{type:"text/javascript"});return URL.createObjectURL(a)};return b}();e.DefaultWorker=f})(e.prediction||(e.prediction={}))})(e.text||(e.text={}))})(e.keyman||(e.keyman={}))})(com||(com={}));
(function(e){(function(e){var h=function(){return function(e,f,b){this.interface=e;this.keyboard=f;this.touchEnabled=b||!1}}();e.AttachmentInfo=h})(e.keyman||(e.keyman={}))})(com||(com={}));
(function(e,h){"function"===typeof define&&define.amd?define(h):"object"===typeof exports?module.exports=h():e.returnExports=h()})(this,function(){var e=Function.call.bind(Function.apply),h=Function.call.bind(Function.call),k=Array.isArray,p=Object.keys,f=function(a){try{return a(),!1}catch(z){return!0}},b=function(a){try{return a()}catch(z){return!1}},a=function(a){return function(){return!e(a,this,arguments)}}(f),d=function(){return!f(function(){return Object.defineProperty({},"x",{get:function(){}})})},
c=!!Object.defineProperty&&d(),g="foo"===function(){}.name,l=Function.call.bind(Array.prototype.forEach),r=Function.call.bind(Array.prototype.reduce),A=Function.call.bind(Array.prototype.filter),w=Function.call.bind(Array.prototype.some),n=function(a,d,b,g){!g&&d in a||(c?Object.defineProperty(a,d,{configurable:!0,enumerable:!1,writable:!0,value:b}):a[d]=b)},v=function(a,c,d){l(p(c),function(b){n(a,b,c[b],!!d)})},x=Function.call.bind(Object.prototype.toString),J="function"===typeof/abc/?function(a){return"function"===
typeof a&&"[object Function]"===x(a)}:function(a){return"function"===typeof a},t={getter:function(a,d,b){if(!c)throw new TypeError("getters require true ES5 support");Object.defineProperty(a,d,{configurable:!0,enumerable:!1,get:b})},proxy:function(a,d,b){if(!c)throw new TypeError("getters require true ES5 support");var g=Object.getOwnPropertyDescriptor(a,d);Object.defineProperty(b,d,{configurable:g.configurable,enumerable:g.enumerable,get:function(){return a[d]},set:function(c){a[d]=c}})},redefine:function(a,
d,b){if(c){var g=Object.getOwnPropertyDescriptor(a,d);g.value=b;Object.defineProperty(a,d,g)}else a[d]=b},defineByDescriptor:function(a,d,b){c?Object.defineProperty(a,d,b):"value"in b&&(a[d]=b.value)},preserveToString:function(a,c){c&&J(c.toString)&&n(a,"toString",c.toString.bind(c),!0)}},L=Object.create||function(a,c){var d=function(){};d.prototype=a;var b=new d;"undefined"!==typeof c&&p(c).forEach(function(a){t.defineByDescriptor(b,a,c[a])});return b},O=function(a,c){return Object.setPrototypeOf?
b(function(){var d=function sa(c){c=new a(c);Object.setPrototypeOf(c,sa.prototype);return c};Object.setPrototypeOf(d,a);d.prototype=L(a.prototype,{constructor:{value:d}});return c(d)}):!1},q=function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof global)return global;throw Error("unable to locate global object");}(),fa=q.isFinite,Da=Function.call.bind(String.prototype.indexOf),Ga=Function.apply.bind(Array.prototype.indexOf),ma=Function.call.bind(Array.prototype.concat),
N=Function.call.bind(String.prototype.slice),V=Function.call.bind(Array.prototype.push),X=Function.apply.bind(Array.prototype.push),ha=Function.call.bind(Array.prototype.shift),B=Math.max,S=Math.min,E=Math.floor,F=Math.abs,G=Math.exp,W=Math.log,Y=Math.sqrt,ta=Function.call.bind(Object.prototype.hasOwnProperty),ia=function(){},D=q.Map,Xb=D&&D.prototype["delete"],na=D&&D.prototype.get,oa=D&&D.prototype.has,db=D&&D.prototype.set,y=q.Symbol||{},Ha=y.species||"@@species",H=Number.isNaN||function(a){return a!==
a},Ia=Number.isFinite||function(a){return"number"===typeof a&&fa(a)},ja=J(Math.sign)?Math.sign:function(a){a=Number(a);return 0===a||H(a)?a:0>a?-1:1},ka=function(a){a=Number(a);return-1>a||H(a)?NaN:0===a||Infinity===a?a:-1===a?-Infinity:0===1+a-1?a:a*(W(1+a)/(1+a-1))},eb=function(a){return"[object Arguments]"===x(a)},Yb=function(a){return null!==a&&"object"===typeof a&&"number"===typeof a.length&&0<=a.length&&"[object Array]"!==x(a)&&"[object Function]"===x(a.callee)},Ja=eb(arguments)?eb:Yb,C={primitive:function(a){return null===
a||"function"!==typeof a&&"object"!==typeof a},string:function(a){return"[object String]"===x(a)},regex:function(a){return"[object RegExp]"===x(a)},symbol:function(a){return"function"===typeof q.Symbol&&"symbol"===typeof a}},u=function(a,c,d){var b=a[c];n(a,c,d,!0);t.preserveToString(a[c],b)},pa="function"===typeof y&&"function"===typeof y["for"]&&C.symbol(y()),P=C.symbol(y.iterator)?y.iterator:"_es6-shim iterator_";q.Set&&"function"===typeof(new q.Set)["@@iterator"]&&(P="@@iterator");q.Reflect||
n(q,"Reflect",{},!0);var Z=q.Reflect,Ka=String,La="undefined"!==typeof document&&document?document.all:null,T=null==La?function(a){return null==a}:function(a){return null==a&&a!==La},m={Call:function(a,c){var d=2<arguments.length?arguments[2]:[];if(!m.IsCallable(a))throw new TypeError(a+" is not a function");return e(a,c,d)},RequireObjectCoercible:function(a,c){if(T(a))throw new TypeError(c||"Cannot call method on "+a);return a},TypeIsObject:function(a){return void 0===a||null===a||!0===a||!1===a?
!1:"function"===typeof a||"object"===typeof a||a===La},ToObject:function(a,c){return Object(m.RequireObjectCoercible(a,c))},IsCallable:J,IsConstructor:function(a){return m.IsCallable(a)},ToInt32:function(a){return m.ToNumber(a)>>0},ToUint32:function(a){return m.ToNumber(a)>>>0},ToNumber:function(a){if("[object Symbol]"===x(a))throw new TypeError("Cannot convert a Symbol value to a number");return+a},ToInteger:function(a){a=m.ToNumber(a);return H(a)?0:0!==a&&Ia(a)?(0<a?1:-1)*E(F(a)):a},ToLength:function(a){a=
m.ToInteger(a);return 0>=a?0:a>Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:a},SameValue:function(a,c){return a===c?0===a?1/a===1/c:!0:H(a)&&H(c)},SameValueZero:function(a,c){return a===c||H(a)&&H(c)},IsIterable:function(a){return m.TypeIsObject(a)&&("undefined"!==typeof a[P]||Ja(a))},GetIterator:function(a){if(Ja(a))return new aa(a,"value");var c=m.GetMethod(a,P);if(!m.IsCallable(c))throw new TypeError("value is not an iterable");a=m.Call(c,a);if(!m.TypeIsObject(a))throw new TypeError("bad iterator");
return a},GetMethod:function(a,c){a=m.ToObject(a)[c];if(!T(a)){if(!m.IsCallable(a))throw new TypeError("Method not callable: "+c);return a}},IteratorComplete:function(a){return!!a.done},IteratorClose:function(a,c){var d=m.GetMethod(a,"return");if(void 0!==d){try{var b=m.Call(d,a)}catch(sa){var g=sa}if(!c){if(g)throw g;if(!m.TypeIsObject(b))throw new TypeError("Iterator's return method returned a non-object.");}}},IteratorNext:function(a){var c=1<arguments.length?a.next(arguments[1]):a.next();if(!m.TypeIsObject(c))throw new TypeError("bad iterator");
return c},IteratorStep:function(a){a=m.IteratorNext(a);return m.IteratorComplete(a)?!1:a},Construct:function(a,c,d,b){d="undefined"===typeof d?a:d;if(!b&&Z.construct)return Z.construct(a,c,d);b=d.prototype;m.TypeIsObject(b)||(b=Object.prototype);b=L(b);a=m.Call(a,b,c);return m.TypeIsObject(a)?a:b},SpeciesConstructor:function(a,c){a=a.constructor;if(void 0===a)return c;if(!m.TypeIsObject(a))throw new TypeError("Bad constructor");a=a[Ha];if(T(a))return c;if(!m.IsConstructor(a))throw new TypeError("Bad @@species");
return a},CreateHTML:function(a,c,d,b){a=m.ToString(a);var g="<"+c;""!==d&&(b=m.ToString(b).replace(/"/g,"&quot;"),g+=" "+d+'="'+b+'"');return g+">"+a+"</"+c+">"},IsRegExp:function(a){if(!m.TypeIsObject(a))return!1;var c=a[y.match];return"undefined"!==typeof c?!!c:C.regex(a)},ToString:function(a){return Ka(a)}};if(c&&pa){var ua=function(a){if(C.symbol(y[a]))return y[a];var c=y["for"]("Symbol."+a);Object.defineProperty(y,a,{configurable:!1,enumerable:!1,writable:!1,value:c});return c};if(!C.symbol(y.search)){var fb=
ua("search"),gb=String.prototype.search;n(RegExp.prototype,fb,function(a){return m.Call(gb,a,[this])});u(String.prototype,"search",function(a){var c=m.RequireObjectCoercible(this);if(!T(a)){var d=m.GetMethod(a,fb);if("undefined"!==typeof d)return m.Call(d,a,[c])}return m.Call(gb,c,[m.ToString(a)])})}if(!C.symbol(y.replace)){var hb=ua("replace"),ib=String.prototype.replace;n(RegExp.prototype,hb,function(a,c){return m.Call(ib,a,[this,c])});u(String.prototype,"replace",function(a,c){var d=m.RequireObjectCoercible(this);
if(!T(a)){var b=m.GetMethod(a,hb);if("undefined"!==typeof b)return m.Call(b,a,[d,c])}return m.Call(ib,d,[m.ToString(a),c])})}if(!C.symbol(y.split)){var jb=ua("split"),kb=String.prototype.split;n(RegExp.prototype,jb,function(a,c){return m.Call(kb,a,[this,c])});u(String.prototype,"split",function(a,c){var d=m.RequireObjectCoercible(this);if(!T(a)){var b=m.GetMethod(a,jb);if("undefined"!==typeof b)return m.Call(b,a,[d,c])}return m.Call(kb,d,[m.ToString(a),c])})}var lb=C.symbol(y.match),Zb=lb&&function(){var a=
{};a[y.match]=function(){return 42};return 42!=="a".match(a)}();if(!lb||Zb){var mb=ua("match"),nb=String.prototype.match;n(RegExp.prototype,mb,function(a){return m.Call(nb,a,[this])});u(String.prototype,"match",function(a){var c=m.RequireObjectCoercible(this);if(!T(a)){var d=m.GetMethod(a,mb);if("undefined"!==typeof d)return m.Call(d,a,[c])}return m.Call(nb,c,[m.ToString(a)])})}}var ob=function(a,d,b){t.preserveToString(d,a);Object.setPrototypeOf&&Object.setPrototypeOf(a,d);c?l(Object.getOwnPropertyNames(a),
function(c){c in ia||b[c]||t.proxy(a,c,d)}):l(Object.keys(a),function(c){c in ia||b[c]||(d[c]=a[c])});d.prototype=a.prototype;t.redefine(a.prototype,"constructor",d)},$b=function(){return this},qa=function(a){c&&!ta(a,Ha)&&t.getter(a,Ha,$b)},Q=function(a,c){c=c||function(){return this};n(a,P,c);!a[P]&&C.symbol(P)&&(a[P]=c)},pb=function(a,d,b){c?Object.defineProperty(a,d,{configurable:!0,enumerable:!0,writable:!0,value:b}):a[d]=b;if(!m.SameValue(a[d],b))throw new TypeError("property is nonconfigurable");
},Ma=function(a,c,d,b){if(!m.TypeIsObject(a))throw new TypeError("Constructor requires `new`: "+c.name);a=c.prototype;m.TypeIsObject(a)||(a=d);d=L(a);for(var g in b)ta(b,g)&&n(d,g,b[g],!0);return d};if(String.fromCodePoint&&1!==String.fromCodePoint.length){var ac=String.fromCodePoint;u(String,"fromCodePoint",function(a){return m.Call(ac,this,arguments)})}var qb={fromCodePoint:function(a){for(var c=[],d,b=0,g=arguments.length;b<g;b++){d=Number(arguments[b]);if(!m.SameValue(d,m.ToInteger(d))||0>d||
1114111<d)throw new RangeError("Invalid code point "+d);65536>d?V(c,String.fromCharCode(d)):(d-=65536,V(c,String.fromCharCode((d>>10)+55296)),V(c,String.fromCharCode(d%1024+56320)))}return c.join("")},raw:function(a){var c=m.ToObject(a,"bad callSite");c=m.ToObject(c.raw,"bad raw value");var d=m.ToLength(c.length);if(0>=d)return"";for(var b=[],g=0,l;g<d;){l=m.ToString(g);l=m.ToString(c[l]);V(b,l);if(g+1>=d)break;l=g+1<arguments.length?arguments[g+1]:"";l=m.ToString(l);V(b,l);g+=1}return b.join("")}};
String.raw&&"xy"!==String.raw({raw:{0:"x",1:"y",length:2}})&&u(String,"raw",qb.raw);v(String,qb);var bc=function Ea(a,c){if(1>c)return"";if(c%2)return Ea(a,c-1)+a;a=Ea(a,c/2);return a+a},ba={repeat:function(a){var c=m.ToString(m.RequireObjectCoercible(this));a=m.ToInteger(a);if(0>a||Infinity<=a)throw new RangeError("repeat count must be less than infinity and not overflow maximum string size");return bc(c,a)},startsWith:function(a){var c=m.ToString(m.RequireObjectCoercible(this));if(m.IsRegExp(a))throw new TypeError('Cannot call method "startsWith" with a regex');
var d=m.ToString(a),b;1<arguments.length&&(b=arguments[1]);b=B(m.ToInteger(b),0);return N(c,b,b+d.length)===d},endsWith:function(a){var c=m.ToString(m.RequireObjectCoercible(this));if(m.IsRegExp(a))throw new TypeError('Cannot call method "endsWith" with a regex');var d=m.ToString(a),b=c.length,g;1<arguments.length&&(g=arguments[1]);g="undefined"===typeof g?b:m.ToInteger(g);b=S(B(g,0),b);return N(c,b-d.length,b)===d},includes:function(a){if(m.IsRegExp(a))throw new TypeError('"includes" does not accept a RegExp');
var c=m.ToString(a),d;1<arguments.length&&(d=arguments[1]);return-1!==Da(this,c,d)},codePointAt:function(a){var c=m.ToString(m.RequireObjectCoercible(this)),d=m.ToInteger(a),b=c.length;if(0<=d&&d<b){a=c.charCodeAt(d);if(55296>a||56319<a||d+1===b)return a;c=c.charCodeAt(d+1);return 56320>c||57343<c?a:1024*(a-55296)+(c-56320)+65536}}};String.prototype.includes&&!1!=="a".includes("a",Infinity)&&u(String.prototype,"includes",ba.includes);if(String.prototype.startsWith&&String.prototype.endsWith){var cc=
f(function(){return"/a/".startsWith(/a/)}),dc=b(function(){return!1==="abc".startsWith("a",Infinity)});cc&&dc||(u(String.prototype,"startsWith",ba.startsWith),u(String.prototype,"endsWith",ba.endsWith))}pa&&(b(function(){var a=/a/;a[y.match]=!1;return"/a/".startsWith(a)})||u(String.prototype,"startsWith",ba.startsWith),b(function(){var a=/a/;a[y.match]=!1;return"/a/".endsWith(a)})||u(String.prototype,"endsWith",ba.endsWith),b(function(){var a=/a/;a[y.match]=!1;return"/a/".includes(a)})||u(String.prototype,
"includes",ba.includes));v(String.prototype,ba);var ec=/(^[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff]+)|([\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff]+$)/g,rb=function(){return m.ToString(m.RequireObjectCoercible(this)).replace(ec,"")},sb=/[\u0085\u200b\ufffe]/g,tb=/^[-+]0x[0-9a-f]+$/i;n(String.prototype,"trim",rb,!0);
var ca=function(a){return{value:a,done:0===arguments.length}},Na=function(a){m.RequireObjectCoercible(a);this._s=m.ToString(a);this._i=0};Na.prototype.next=function(){var a=this._s,c=this._i;if("undefined"===typeof a||c>=a.length)return this._s=void 0,ca();var d=a.charCodeAt(c);55296>d||56319<d||c+1===a.length?d=1:(d=a.charCodeAt(c+1),d=56320>d||57343<d?1:2);this._i=c+d;return ca(a.substr(c,d))};Q(Na.prototype);Q(String.prototype,function(){return new Na(this)});var va={from:function(a){var c;1<arguments.length&&
(c=arguments[1]);var d;if("undefined"===typeof c)var b=!1;else{if(!m.IsCallable(c))throw new TypeError("Array.from: when provided, the second argument must be a function");2<arguments.length&&(d=arguments[2]);b=!0}var g;if("undefined"!==typeof(Ja(a)||m.GetMethod(a,P))){var z=m.IsConstructor(this)?Object(new this):[];var l=m.GetIterator(a);for(g=0;;){var r=m.IteratorStep(l);if(!1===r)break;r=r.value;try{b&&(r="undefined"===typeof d?c(r,g):h(c,d,r,g)),z[g]=r}catch(fc){throw m.IteratorClose(l,!0),fc;
}g+=1}l=g}else for(r=m.ToObject(a),l=m.ToLength(r.length),z=m.IsConstructor(this)?Object(new this(l)):Array(l),g=0;g<l;++g){var n=r[g];b&&(n="undefined"===typeof d?c(n,g):h(c,d,n,g));pb(z,g,n)}z.length=l;return z},of:function(){for(var a=arguments.length,c=k(this)||!m.IsCallable(this)?Array(a):m.Construct(this,[a]),d=0;d<a;++d)pb(c,d,arguments[d]);c.length=a;return c}};v(Array,va);qa(Array);var aa=function(a,c){this.i=0;this.array=a;this.kind=c};v(aa.prototype,{next:function(){var a=this.i,c=this.array;
if(!(this instanceof aa))throw new TypeError("Not an ArrayIterator");if("undefined"!==typeof c)for(var d=m.ToLength(c.length);a<d;){d=this.kind;var b;"key"===d?b=a:"value"===d?b=c[a]:"entry"===d&&(b=[a,c[a]]);this.i=a+1;return ca(b)}this.array=void 0;return ca()}});Q(aa.prototype);Array.of===va.of||function(){var a=function(a){this.length=a};a.prototype=[];var c=Array.of.apply(a,[1,2]);return c instanceof a&&2===c.length}()||u(Array,"of",va.of);var Ra={copyWithin:function(a,c){var d=m.ToObject(this),
b=m.ToLength(d.length),g=m.ToInteger(a),z=m.ToInteger(c);g=0>g?B(b+g,0):S(g,b);z=0>z?B(b+z,0):S(z,b);var l;2<arguments.length&&(l=arguments[2]);l="undefined"===typeof l?b:m.ToInteger(l);l=0>l?B(b+l,0):S(l,b);b=S(l-z,b-g);l=1;z<g&&g<z+b&&(l=-1,z+=b-1,g+=b-1);for(;0<b;)z in d?d[g]=d[z]:delete d[g],z+=l,g+=l,--b;return d},fill:function(a){var c;1<arguments.length&&(c=arguments[1]);var d;2<arguments.length&&(d=arguments[2]);var b=m.ToObject(this),g=m.ToLength(b.length);c=m.ToInteger("undefined"===typeof c?
0:c);d=m.ToInteger("undefined"===typeof d?g:d);c=0>c?B(g+c,0):S(c,g);for(d=0>d?g+d:d;c<g&&c<d;++c)b[c]=a;return b},find:function(a){var c=m.ToObject(this),d=m.ToLength(c.length);if(!m.IsCallable(a))throw new TypeError("Array#find: predicate must be a function");for(var b=1<arguments.length?arguments[1]:null,g=0,z;g<d;g++)if(z=c[g],b){if(h(a,b,z,g,c))return z}else if(a(z,g,c))return z},findIndex:function(a){var c=m.ToObject(this),d=m.ToLength(c.length);if(!m.IsCallable(a))throw new TypeError("Array#findIndex: predicate must be a function");
for(var b=1<arguments.length?arguments[1]:null,g=0;g<d;g++)if(b){if(h(a,b,c[g],g,c))return g}else if(a(c[g],g,c))return g;return-1},keys:function(){return new aa(this,"key")},values:function(){return new aa(this,"value")},entries:function(){return new aa(this,"entry")}};Array.prototype.keys&&!m.IsCallable([1].keys().next)&&delete Array.prototype.keys;Array.prototype.entries&&!m.IsCallable([1].entries().next)&&delete Array.prototype.entries;Array.prototype.keys&&Array.prototype.entries&&!Array.prototype.values&&
Array.prototype[P]&&(v(Array.prototype,{values:Array.prototype[P]}),C.symbol(y.unscopables)&&(Array.prototype[y.unscopables].values=!0));if(g&&Array.prototype.values&&"values"!==Array.prototype.values.name){var gc=Array.prototype.values;u(Array.prototype,"values",function(){return m.Call(gc,this,arguments)});n(Array.prototype,P,Array.prototype.values,!0)}v(Array.prototype,Ra);0>1/[!0].indexOf(!0,-0)&&n(Array.prototype,"indexOf",function(a){var c=Ga(this,arguments);return 0===c&&0>1/c?0:c},!0);Q(Array.prototype,
function(){return this.values()});Object.getPrototypeOf&&Q(Object.getPrototypeOf([].values()));var hc=function(){return b(function(){return 0===Array.from({length:-1}).length})}(),ic=function(){var a=Array.from([0].entries());return 1===a.length&&k(a[0])&&0===a[0][0]&&0===a[0][1]}();hc&&ic||u(Array,"from",va.from);if(!function(){return b(function(){return Array.from([0],void 0)})}()){var ub=Array.from;u(Array,"from",function(a){return 1<arguments.length&&"undefined"!==typeof arguments[1]?m.Call(ub,
this,arguments):h(ub,this,a)})}var jc=-(Math.pow(2,32)-1),da=function(a,c){var d={length:jc};d[c?(d.length>>>0)-1:0]=!0;return b(function(){h(a,d,function(){throw new RangeError("should not reach here");},[]);return!0})};if(!da(Array.prototype.forEach)){var kc=Array.prototype.forEach;u(Array.prototype,"forEach",function(a){return m.Call(kc,0<=this.length?this:[],arguments)},!0)}if(!da(Array.prototype.map)){var lc=Array.prototype.map;u(Array.prototype,"map",function(a){return m.Call(lc,0<=this.length?
this:[],arguments)},!0)}if(!da(Array.prototype.filter)){var mc=Array.prototype.filter;u(Array.prototype,"filter",function(a){return m.Call(mc,0<=this.length?this:[],arguments)},!0)}if(!da(Array.prototype.some)){var nc=Array.prototype.some;u(Array.prototype,"some",function(a){return m.Call(nc,0<=this.length?this:[],arguments)},!0)}if(!da(Array.prototype.every)){var oc=Array.prototype.every;u(Array.prototype,"every",function(a){return m.Call(oc,0<=this.length?this:[],arguments)},!0)}if(!da(Array.prototype.reduce)){var pc=
Array.prototype.reduce;u(Array.prototype,"reduce",function(a){return m.Call(pc,0<=this.length?this:[],arguments)},!0)}if(!da(Array.prototype.reduceRight,!0)){var qc=Array.prototype.reduceRight;u(Array.prototype,"reduceRight",function(a){return m.Call(qc,0<=this.length?this:[],arguments)},!0)}var rc=8!==Number("0o10"),sc=2!==Number("0b10"),tc=w("\u0085\u200b\ufffe",function(a){return 0===Number(a+0+a)});if(rc||sc||tc){var U=Number,vb=/^0b[01]+$/i,wb=/^0o[0-7]+$/i,uc=vb.test.bind(vb),vc=wb.test.bind(wb),
wc=function(a){if("function"===typeof a.valueOf){var c=a.valueOf();if(C.primitive(c))return c}if("function"===typeof a.toString&&(c=a.toString(),C.primitive(c)))return c;throw new TypeError("No default value");},xc=sb.test.bind(sb),yc=tb.test.bind(tb),wa=function(){var a=function(c){var d=0<arguments.length?C.primitive(c)?c:wc(c,"number"):0;if("string"===typeof d)if(d=m.Call(rb,d),uc(d))d=parseInt(N(d,2),2);else if(vc(d))d=parseInt(N(d,2),8);else if(xc(d)||yc(d))d=NaN;var g=this,z=b(function(){U.prototype.valueOf.call(g);
return!0});return g instanceof a&&!z?new U(d):U(d)};return a}();ob(U,wa,{});v(wa,{NaN:U.NaN,MAX_VALUE:U.MAX_VALUE,MIN_VALUE:U.MIN_VALUE,NEGATIVE_INFINITY:U.NEGATIVE_INFINITY,POSITIVE_INFINITY:U.POSITIVE_INFINITY});Number=wa;t.redefine(q,"Number",wa)}var xb=Math.pow(2,53)-1;v(Number,{MAX_SAFE_INTEGER:xb,MIN_SAFE_INTEGER:-xb,EPSILON:2.220446049250313E-16,parseInt:q.parseInt,parseFloat:q.parseFloat,isFinite:Ia,isInteger:function(a){return Ia(a)&&m.ToInteger(a)===a},isSafeInteger:function(a){return Number.isInteger(a)&&
F(a)<=Number.MAX_SAFE_INTEGER},isNaN:H});n(Number,"parseInt",q.parseInt,Number.parseInt!==q.parseInt);1===[,1].find(function(){return!0})&&u(Array.prototype,"find",Ra.find);0!==[,1].findIndex(function(){return!0})&&u(Array.prototype,"findIndex",Ra.findIndex);var yb=Function.bind.call(Function.bind,Object.prototype.propertyIsEnumerable),xa=function(a,d){c&&yb(a,d)&&Object.defineProperty(a,d,{enumerable:!1})},zc=function(){var a=Number(this),c=arguments.length,d=c-a;d=Array(0>d?0:d);for(var b=a;b<c;++b)d[b-
a]=arguments[b];return d},zb=function(a){return function(c,d){c[d]=a[d];return c}},Ac=function(a,c){var d=p(Object(c)),b;m.IsCallable(Object.getOwnPropertySymbols)&&(b=A(Object.getOwnPropertySymbols(Object(c)),yb(c)));return r(ma(d,b||[]),zb(c),a)},Ab={assign:function(a,c){var d=m.ToObject(a,"Cannot convert undefined or null to object");return r(m.Call(zc,1,arguments),Ac,d)},is:function(a,c){return m.SameValue(a,c)}};Object.assign&&Object.preventExtensions&&function(){var a=Object.preventExtensions({1:2});
try{Object.assign(a,"xy")}catch(K){return"y"===a[1]}}()&&u(Object,"assign",Ab.assign);v(Object,Ab);if(c){var Bc={setPrototypeOf:function(a,c){var d=function(a,c){if(!m.TypeIsObject(a))throw new TypeError("cannot set prototype on a non-object");if(null!==c&&!m.TypeIsObject(c))throw new TypeError("can only set prototype to an object or null"+c);h(b,a,c);return a};try{var b=a.getOwnPropertyDescriptor(a.prototype,c).set;h(b,{},null)}catch(sa){if(a.prototype!=={}[c])return;b=function(a){this[c]=a};d.polyfill=
d(d({},null),a.prototype)instanceof a}return d}(Object,"__proto__")};v(Object,Bc)}Object.setPrototypeOf&&Object.getPrototypeOf&&null!==Object.getPrototypeOf(Object.setPrototypeOf({},null))&&null===Object.getPrototypeOf(Object.create(null))&&function(){var a=Object.create(null),c=Object.getPrototypeOf,d=Object.setPrototypeOf;Object.getPrototypeOf=function(d){d=c(d);return d===a?null:d};Object.setPrototypeOf=function(c,b){return d(c,null===b?a:b)};Object.setPrototypeOf.polyfill=!1}();if(f(function(){return Object.keys("foo")})){var Cc=
Object.keys;u(Object,"keys",function(a){return Cc(m.ToObject(a))});p=Object.keys}if(f(function(){return Object.keys(/a/g)})){var Dc=Object.keys;u(Object,"keys",function(a){if(C.regex(a)){var c=[],d;for(d in a)ta(a,d)&&V(c,d);return c}return Dc(a)});p=Object.keys}if(Object.getOwnPropertyNames&&f(function(){return Object.getOwnPropertyNames("foo")})){var Ec="object"===typeof window?Object.getOwnPropertyNames(window):[],Bb=Object.getOwnPropertyNames;u(Object,"getOwnPropertyNames",function(a){a=m.ToObject(a);
if("[object Window]"===x(a))try{return Bb(a)}catch(K){return ma([],Ec)}return Bb(a)})}if(Object.getOwnPropertyDescriptor&&f(function(){return Object.getOwnPropertyDescriptor("foo","bar")})){var Fc=Object.getOwnPropertyDescriptor;u(Object,"getOwnPropertyDescriptor",function(a,c){return Fc(m.ToObject(a),c)})}if(Object.seal&&f(function(){return Object.seal("foo")})){var Gc=Object.seal;u(Object,"seal",function(a){return m.TypeIsObject(a)?Gc(a):a})}if(Object.isSealed&&f(function(){return Object.isSealed("foo")})){var Hc=
Object.isSealed;u(Object,"isSealed",function(a){return m.TypeIsObject(a)?Hc(a):!0})}if(Object.freeze&&f(function(){return Object.freeze("foo")})){var Ic=Object.freeze;u(Object,"freeze",function(a){return m.TypeIsObject(a)?Ic(a):a})}if(Object.isFrozen&&f(function(){return Object.isFrozen("foo")})){var Jc=Object.isFrozen;u(Object,"isFrozen",function(a){return m.TypeIsObject(a)?Jc(a):!0})}if(Object.preventExtensions&&f(function(){return Object.preventExtensions("foo")})){var Kc=Object.preventExtensions;
u(Object,"preventExtensions",function(a){return m.TypeIsObject(a)?Kc(a):a})}if(Object.isExtensible&&f(function(){return Object.isExtensible("foo")})){var Lc=Object.isExtensible;u(Object,"isExtensible",function(a){return m.TypeIsObject(a)?Lc(a):!1})}if(Object.getPrototypeOf&&f(function(){return Object.getPrototypeOf("foo")})){var Mc=Object.getPrototypeOf;u(Object,"getPrototypeOf",function(a){return Mc(m.ToObject(a))})}var Nc=c&&function(){var a=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags");
return a&&m.IsCallable(a.get)}();c&&!Nc&&t.getter(RegExp.prototype,"flags",function(){if(!m.TypeIsObject(this))throw new TypeError("Method called on incompatible type: must be an object.");var a="";this.global&&(a+="g");this.ignoreCase&&(a+="i");this.multiline&&(a+="m");this.unicode&&(a+="u");this.sticky&&(a+="y");return a});var Oc=c&&b(function(){return"/a/i"===String(new RegExp(/a/g,"i"))}),Pc=pa&&c&&function(){var a=/./;a[y.match]=!1;return RegExp(a)===a}(),Cb=b(function(){return"/abc/"===RegExp.prototype.toString.call({source:"abc"})}),
Qc=Cb&&b(function(){return"/a/b"===RegExp.prototype.toString.call({source:"a",flags:"b"})});if(!Cb||!Qc){var Db=RegExp.prototype.toString;n(RegExp.prototype,"toString",function(){var a=m.RequireObjectCoercible(this);if(C.regex(a))return h(Db,a);var c=Ka(a.source);a=Ka(a.flags);return"/"+c+"/"+a},!0);t.preserveToString(RegExp.prototype.toString,Db)}if(c&&(!Oc||Pc)){var Rc=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags").get,Eb=Object.getOwnPropertyDescriptor(RegExp.prototype,"source")||{},
Sc=function(){return this.source},Tc=m.IsCallable(Eb.get)?Eb.get:Sc,Fb=RegExp,Sa=function(){return function Fa(a,c){var d=m.IsRegExp(a);return this instanceof Fa||!d||"undefined"!==typeof c||a.constructor!==Fa?C.regex(a)?(d=m.Call(Tc,a),a="undefined"===typeof c?m.Call(Rc,a):c,new Fa(d,a)):new Fb(a,c):a}}();ob(Fb,Sa,{$input:!0});RegExp=Sa;t.redefine(q,"RegExp",Sa)}if(c){var Ta={input:"$_",lastMatch:"$&",lastParen:"$+",leftContext:"$`",rightContext:"$'"};l(p(Ta),function(a){a in RegExp&&!(Ta[a]in RegExp)&&
t.getter(RegExp,Ta[a],function(){return RegExp[a]})})}qa(RegExp);var ya=1/Number.EPSILON,za=Math.pow(2,-23),Uc=Math.pow(2,127)*(2-za),Ua=Math.pow(2,-126),la=Math.E,Aa=Math.LOG2E,Vc=Math.LOG10E,Gb=Number.prototype.clz;delete Number.prototype.clz;var I={acosh:function(a){var c=Number(a);if(H(c)||1>a)return NaN;if(1===c)return 0;if(Infinity===c)return c;a=1/(c*c);if(2>c)return ka(c-1+Y(1-a)*c);c/=2;return ka(c+Y(1-a)*c-1)+1/Aa},asinh:function(a){var c=Number(a);if(0===c||!fa(c))return c;a=F(c);var d=
a*a;c=ja(c);return 1>a?c*ka(a+d/(Y(d+1)+1)):c*(ka(a/2+Y(1+1/d)*a/2-1)+1/Aa)},atanh:function(a){a=Number(a);if(0===a)return a;if(-1===a)return-Infinity;if(1===a)return Infinity;if(H(a)||-1>a||1<a)return NaN;var c=F(a);return ja(a)*ka(2*c/(1-c))/2},cbrt:function(a){a=Number(a);if(0===a)return a;var c=0>a;c&&(a=-a);if(Infinity===a)var d=Infinity;else d=G(W(a)/3),d=(a/(d*d)+2*d)/3;return c?-d:d},clz32:function(a){a=m.ToUint32(Number(a));return 0===a?32:Gb?m.Call(Gb,a):31-E(W(a+.5)*Aa)},cosh:function(a){a=
Number(a);if(0===a)return 1;if(H(a))return NaN;if(!fa(a))return Infinity;a=G(F(a)-1);return la/2*(a+1/(a*la*la))},expm1:function(a){a=Number(a);if(-Infinity===a)return-1;if(!fa(a)||0===a)return a;if(.5<F(a))return G(a)-1;for(var c=a,d=0,b=1;d+c!==d;)d+=c,b+=1,c*=a/b;return d},hypot:function(a,c){for(var d=0,b=0,g=0;g<arguments.length;++g){var l=F(Number(arguments[g]));b<l?(d*=b/l*(b/l),d+=1,b=l):d+=0<l?l/b*(l/b):l}return Infinity===b?Infinity:b*Y(d)},log2:function(a){return W(a)*Aa},log10:function(a){return W(a)*
Vc},log1p:ka,sign:ja,sinh:function(a){a=Number(a);if(!fa(a)||0===a)return a;var c=F(a);if(1>c)return c=Math.expm1(c),ja(a)*c*(1+1/(c+1))/2;c=G(c-1);return ja(a)*(c-1/(c*la*la))*(la/2)},tanh:function(a){a=Number(a);return H(a)||0===a?a:20<=a?1:-20>=a?-1:(Math.expm1(a)-Math.expm1(-a))/(G(a)+G(-a))},trunc:function(a){a=Number(a);return 0>a?-E(-a):E(a)},imul:function(a,c){a=m.ToUint32(a);c=m.ToUint32(c);var d=a&65535,b=c&65535;return d*b+((a>>>16&65535)*b+d*(c>>>16&65535)<<16>>>0)|0},fround:function(a){var c=
Number(a);if(0===c||Infinity===c||-Infinity===c||H(c))return c;a=ja(c);c=F(c);if(c<Ua)return a*(c/Ua/za+ya-ya)*Ua*za;var d=(1+za/Number.EPSILON)*c;c=d-(d-c);return c>Uc||H(c)?Infinity*a:a*c}};v(Math,I);n(Math,"sinh",I.sinh,Infinity===Math.sinh(710));n(Math,"cosh",I.cosh,Infinity===Math.cosh(710));n(Math,"log1p",I.log1p,-1E-17!==Math.log1p(-1E-17));n(Math,"asinh",I.asinh,Math.asinh(-1E7)!==-Math.asinh(1E7));n(Math,"asinh",I.asinh,Infinity===Math.asinh(1E300));n(Math,"atanh",I.atanh,0===Math.atanh(1E-300));
n(Math,"tanh",I.tanh,-2E-17!==Math.tanh(-2E-17));n(Math,"acosh",I.acosh,Infinity===Math.acosh(Number.MAX_VALUE));n(Math,"acosh",I.acosh,!(8>F(1-Math.acosh(1+Number.EPSILON)/Math.sqrt(2*Number.EPSILON))/Number.EPSILON));n(Math,"cbrt",I.cbrt,!(8>F(1-Math.cbrt(1E-300)/1E-100)/Number.EPSILON));n(Math,"sinh",I.sinh,-2E-17!==Math.sinh(-2E-17));var Hb=Math.expm1(10);n(Math,"expm1",I.expm1,22025.465794806718<Hb||22025.465794806718>Hb);var Wc=Math.round,Xc=0===Math.round(.5-Number.EPSILON/4)&&1===Math.round(-.5+
Number.EPSILON/3.99),Yc=[ya+1,2*ya-1].every(function(a){return Math.round(a)===a});n(Math,"round",function(a){var c=E(a);return.5>a-c?c:-1===c?-0:c+1},!Xc||!Yc);t.preserveToString(Math.round,Wc);var Ib=Math.imul;-5!==Math.imul(4294967295,5)&&(Math.imul=I.imul,t.preserveToString(Math.imul,Ib));2!==Math.imul.length&&u(Math,"imul",function(a,c){return m.Call(Ib,Math,arguments)});var Ba=function(){var a=q.setTimeout;if("function"===typeof a||"object"===typeof a){m.IsPromise=function(a){return m.TypeIsObject(a)&&
"undefined"!==typeof a._promise?!0:!1};var c=function(a){if(!m.IsConstructor(a))throw new TypeError("Bad promise constructor");var c=this;c.resolve=void 0;c.reject=void 0;c.promise=new a(function(a,d){if(void 0!==c.resolve||void 0!==c.reject)throw new TypeError("Bad Promise implementation!");c.resolve=a;c.reject=d});if(!m.IsCallable(c.resolve)||!m.IsCallable(c.reject))throw new TypeError("Bad promise constructor");},d;"undefined"!==typeof window&&m.IsCallable(window.postMessage)&&(d=function(){var a=
[];window.addEventListener("message",function(c){c.source===window&&"zero-timeout-message"===c.data&&(c.stopPropagation(),0!==a.length&&ha(a)())},!0);return function(c){V(a,c);window.postMessage("zero-timeout-message","*")}});var b=function(){var a=q.Promise,c=a&&a.resolve&&a.resolve();return c&&function(a){return c.then(a)}},g=m.IsCallable(q.setImmediate)?q.setImmediate:"object"===typeof process&&process.nextTick?process.nextTick:b()||(m.IsCallable(d)?d():function(c){a(c,0)}),l=function(a){return a},
r=function(a){throw a;},n={},e=function(a,c,d){g(function(){if(c===n)a(d);else{try{var b=a(d);var g=c.resolve}catch(Va){b=Va,g=c.reject}g(b)}})},f=function(a,c){var d=a._promise,b=d.reactionLength;if(0<b&&(e(d.fulfillReactionHandler0,d.reactionCapability0,c),d.fulfillReactionHandler0=void 0,d.rejectReactions0=void 0,d.reactionCapability0=void 0,1<b))for(var g=1,l=0;g<b;g++,l+=3)e(d[l+0],d[l+2],c),a[l+0]=void 0,a[l+1]=void 0,a[l+2]=void 0;d.result=c;d.state=1;d.reactionLength=0},w=function(a,c){var d=
a._promise,b=d.reactionLength;if(0<b&&(e(d.rejectReactionHandler0,d.reactionCapability0,c),d.fulfillReactionHandler0=void 0,d.rejectReactions0=void 0,d.reactionCapability0=void 0,1<b))for(var g=1,l=0;g<b;g++,l+=3)e(d[l+1],d[l+2],c),a[l+0]=void 0,a[l+1]=void 0,a[l+2]=void 0;d.result=c;d.state=2;d.reactionLength=0},A=function(a){var c=!1;return{resolve:function(d){if(!c){c=!0;if(d===a)return w(a,new TypeError("Self resolution"));if(!m.TypeIsObject(d))return f(a,d);try{var b=d.then}catch(Zc){return w(a,
Zc)}if(!m.IsCallable(b))return f(a,d);g(function(){var c=b,g=A(a),l=g.resolve;g=g.reject;try{k(c,d,l,g)}catch($c){g($c)}})}},reject:function(d){if(!c)return c=!0,w(a,d)}}},k=function(a,c,d,b){a===J?h(a,c,d,b,n):h(a,c,d,b)},x=function(){var a=function(c){if(!(this instanceof a))throw new TypeError('Constructor Promise requires "new"');if(this&&this._promise)throw new TypeError("Bad construction");if(!m.IsCallable(c))throw new TypeError("not a valid resolver");var d=Ma(this,a,t,{_promise:{result:void 0,
state:0,reactionLength:0,fulfillReactionHandler0:void 0,rejectReactionHandler0:void 0,reactionCapability0:void 0}}),b=A(d),g=b.reject;try{c(b.resolve,g)}catch(Va){g(Va)}return d};return a}();var t=x.prototype;var p=function(a,c,d,b){var g=!1;return function(l){g||(g=!0,c[a]=l,0===--b.count&&(l=d.resolve,l(c)))}};v(x,{all:function(a){if(!m.TypeIsObject(this))throw new TypeError("Promise is not object");var d=new c(this),b;try{var g=m.GetIterator(a);a=b={iterator:g,done:!1};for(var l=a.iterator,z=[],
r={count:1},n,e,f=0;;){try{n=m.IteratorStep(l);if(!1===n){a.done=!0;break}e=n.value}catch(Xa){throw a.done=!0,Xa;}z[f]=void 0;var h=this.resolve(e),K=p(f,z,d,r);r.count+=1;k(h.then,h,K,d.reject);f+=1}if(0===--r.count){var w=d.resolve;w(z)}return d.promise}catch(Xa){l=Xa;if(b&&!b.done)try{m.IteratorClose(g,!0)}catch(bd){l=bd}g=d.reject;g(l);return d.promise}},race:function(a){if(!m.TypeIsObject(this))throw new TypeError("Promise is not object");var d=new c(this),b;try{var g=m.GetIterator(a);a=b={iterator:g,
done:!1};for(var l=a.iterator,z,r,n;;){try{z=m.IteratorStep(l);if(!1===z){a.done=!0;break}r=z.value}catch(Wa){throw a.done=!0,Wa;}n=this.resolve(r);k(n.then,n,d.resolve,d.reject)}return d.promise}catch(Wa){l=Wa;if(b&&!b.done)try{m.IteratorClose(g,!0)}catch(ad){l=ad}g=d.reject;g(l);return d.promise}},reject:function(a){if(!m.TypeIsObject(this))throw new TypeError("Bad promise constructor");var d=new c(this),b=d.reject;b(a);return d.promise},resolve:function(a){if(!m.TypeIsObject(this))throw new TypeError("Bad promise constructor");
if(m.IsPromise(a)&&a.constructor===this)return a;var d=new c(this),b=d.resolve;b(a);return d.promise}});v(t,{"catch":function(a){return this.then(null,a)},then:function(a,d){if(!m.IsPromise(this))throw new TypeError("not a promise");var b=m.SpeciesConstructor(this,x);b=2<arguments.length&&arguments[2]===n&&b===x?n:new c(b);var g=m.IsCallable(a)?a:l,z=m.IsCallable(d)?d:r,f=this._promise;if(0===f.state){if(0===f.reactionLength)f.fulfillReactionHandler0=g,f.rejectReactionHandler0=z,f.reactionCapability0=
b;else{var h=3*(f.reactionLength-1);f[h+0]=g;f[h+1]=z;f[h+2]=b}f.reactionLength+=1}else if(1===f.state)f=f.result,e(g,b,f);else if(2===f.state)f=f.result,e(z,b,f);else throw new TypeError("unexpected Promise state");return b.promise}});n=new c(x);var J=t.then;return x}}();q.Promise&&(delete q.Promise.accept,delete q.Promise.defer,delete q.Promise.prototype.chain);if("function"===typeof Ba){v(q,{Promise:Ba});var cd=O(q.Promise,function(a){return a.resolve(42).then(function(){})instanceof a}),dd=!f(function(){return q.Promise.reject(42).then(null,
5).then(null,ia)}),ed=f(function(){return q.Promise.call(3,ia)}),fd=function(a){var c=a.resolve(5);c.constructor={};a=a.resolve(c);try{a.then(null,ia).then(null,ia)}catch(Ea){return!0}return c===a}(q.Promise),gd=c&&function(){var a=0,c=Object.defineProperty({},"then",{get:function(){a+=1}});Promise.resolve(c);return 1===a}(),Ya=function(a){var c=new Promise(a);a(3,function(){});this.then=c.then;this.constructor=BadResolverPromise_1};Ya.prototype=Promise.prototype;Ya.all=Promise.all;var hd=b(function(){return!!Ya.all([1,
2])});cd&&dd&&ed&&!fd&&gd&&!hd||(Promise=Ba,u(q,"Promise",Ba));if(1!==Promise.all.length){var id=Promise.all;u(Promise,"all",function(a){return m.Call(id,this,arguments)})}if(1!==Promise.race.length){var jd=Promise.race;u(Promise,"race",function(a){return m.Call(jd,this,arguments)})}if(1!==Promise.resolve.length){var kd=Promise.resolve;u(Promise,"resolve",function(a){return m.Call(kd,this,arguments)})}if(1!==Promise.reject.length){var ld=Promise.reject;u(Promise,"reject",function(a){return m.Call(ld,
this,arguments)})}xa(Promise,"all");xa(Promise,"race");xa(Promise,"resolve");xa(Promise,"reject");qa(Promise)}var Jb=function(a){var c=p(r(a,function(a,c){a[c]=!0;return a},{}));return a.join(":")===c.join(":")},md=Jb(["z","a","bb"]),nd=Jb(["z",1,"a","3",2]);if(c){var ea=function(a,c){return c||md?T(a)?"^"+m.ToString(a):"string"===typeof a?"$"+a:"number"===typeof a?nd?a:"n"+a:"boolean"===typeof a?"b"+a:null:null},Ca=function(){return Object.create?Object.create(null):{}},Za=function(a,c,d){if(k(d)||
C.string(d))l(d,function(a){if(!m.TypeIsObject(a))throw new TypeError("Iterator value "+a+" is not an entry object");c.set(a[0],a[1])});else if(d instanceof a)h(a.prototype.forEach,d,function(a,d){c.set(d,a)});else{if(!T(d)){var b=c.set;if(!m.IsCallable(b))throw new TypeError("bad map");var g=m.GetIterator(d)}if("undefined"!==typeof g)for(;;){a=m.IteratorStep(g);if(!1===a)break;a=a.value;try{if(!m.TypeIsObject(a))throw new TypeError("Iterator value "+a+" is not an entry object");h(b,c,a[0],a[1])}catch(Oa){throw m.IteratorClose(g,
!0),Oa;}}}},Kb=function(a,c,d){if(k(d)||C.string(d))l(d,function(a){c.add(a)});else if(d instanceof a)h(a.prototype.forEach,d,function(a){c.add(a)});else{if(!T(d)){var b=c.add;if(!m.IsCallable(b))throw new TypeError("bad set");var g=m.GetIterator(d)}if("undefined"!==typeof g)for(;;){a=m.IteratorStep(g);if(!1===a)break;a=a.value;try{h(b,c,a)}catch(Oa){throw m.IteratorClose(g,!0),Oa;}}}},ra={Map:function(){var a={},c=function(a,c){this.key=a;this.value=c;this.prev=this.next=null};c.prototype.isRemoved=
function(){return this.key===a};var d=function(a,c){if(!m.TypeIsObject(a)||!a._es6map)throw new TypeError("Method Map.prototype."+c+" called on incompatible receiver "+m.ToString(a));},b=function(a,c){d(a,"[[MapIterator]]");this.i=this.head=a._head;this.kind=c};b.prototype={isMapIterator:!0,next:function(){if(!this.isMapIterator)throw new TypeError("Not a MapIterator");var a=this.i,c=this.kind,d=this.head;if("undefined"===typeof this.i)return ca();for(;a.isRemoved()&&a!==d;)a=a.prev;for(;a.next!==
d;)if(a=a.next,!a.isRemoved())return c="key"===c?a.key:"value"===c?a.value:[a.key,a.value],this.i=a,ca(c);this.i=void 0;return ca()}};Q(b.prototype);var g=function Qa(){if(!(this instanceof Qa))throw new TypeError('Constructor Map requires "new"');if(this&&this._es6map)throw new TypeError("Bad construction");var a=Ma(this,Qa,l,{_es6map:!0,_head:null,_map:D?new D:null,_size:0,_storage:Ca()}),d=new c(null,null);d.next=d.prev=d;a._head=d;0<arguments.length&&Za(Qa,a,arguments[0]);return a};var l=g.prototype;
t.getter(l,"size",function(){if("undefined"===typeof this._size)throw new TypeError("size method called on incompatible Map");return this._size});v(l,{get:function(a){d(this,"get");var c=ea(a,!0);if(null!==c){if(a=this._storage[c])return a.value}else if(this._map){if(a=na.call(this._map,a))return a.value}else for(var b=c=this._head;(b=b.next)!==c;)if(m.SameValueZero(b.key,a))return b.value},has:function(a){d(this,"has");var c=ea(a,!0);if(null!==c)return"undefined"!==typeof this._storage[c];if(this._map)return oa.call(this._map,
a);for(var b=c=this._head;(b=b.next)!==c;)if(m.SameValueZero(b.key,a))return!0;return!1},set:function(a,b){d(this,"set");var g=this._head,l=g,z=ea(a,!0);if(null!==z){if("undefined"!==typeof this._storage[z])return this._storage[z].value=b,this;var r=this._storage[z]=new c(a,b);l=g.prev}else this._map&&(oa.call(this._map,a)?na.call(this._map,a).value=b:(r=new c(a,b),db.call(this._map,a,r),l=g.prev));for(;(l=l.next)!==g;)if(m.SameValueZero(l.key,a))return l.value=b,this;r=r||new c(a,b);m.SameValue(-0,
a)&&(r.key=0);r.next=this._head;r.prev=this._head.prev;r.prev.next=r;r.next.prev=r;this._size+=1;return this},"delete":function(c){d(this,"delete");var b=this._head,g=b,l=ea(c,!0);if(null!==l){if("undefined"===typeof this._storage[l])return!1;g=this._storage[l].prev;delete this._storage[l]}else if(this._map){if(!oa.call(this._map,c))return!1;g=na.call(this._map,c).prev;Xb.call(this._map,c)}for(;(g=g.next)!==b;)if(m.SameValueZero(g.key,c))return g.key=a,g.value=a,g.prev.next=g.next,g.next.prev=g.prev,
--this._size,!0;return!1},clear:function(){d(this,"clear");this._map=D?new D:null;this._size=0;this._storage=Ca();for(var c=this._head,b,g=c.next;(b=g)!==c;)b.key=a,b.value=a,g=b.next,b.next=b.prev=c;c.next=c.prev=c},keys:function(){d(this,"keys");return new b(this,"key")},values:function(){d(this,"values");return new b(this,"value")},entries:function(){d(this,"entries");return new b(this,"key+value")},forEach:function(a){d(this,"forEach");for(var c=1<arguments.length?arguments[1]:null,b=this.entries(),
g=b.next();!g.done;g=b.next())c?h(a,c,g.value[1],g.value[0],this):a(g.value[1],g.value[0],this)}});Q(l,l.entries);return g}(),Set:function(){var a=function(a,c){if(!m.TypeIsObject(a)||!a._es6set||"undefined"===typeof a._storage)throw new TypeError("Set.prototype."+c+" called on incompatible receiver "+m.ToString(a));},c=function Pa(){if(!(this instanceof Pa))throw new TypeError('Constructor Set requires "new"');if(this&&this._es6set)throw new TypeError("Bad construction");var a=Ma(this,Pa,d,{_es6set:!0,
"[[SetData]]":null,_storage:Ca()});if(!a._es6set)throw new TypeError("bad set");0<arguments.length&&Kb(Pa,a,arguments[0]);return a};var d=c.prototype;var b=function(a){if(!a["[[SetData]]"]){var c=new ra.Map;a["[[SetData]]"]=c;l(p(a._storage),function(a){if("^null"===a)a=null;else if("^undefined"!==a){var d=a.charAt(0);a="$"===d?N(a,1):"n"===d?+N(a,1):"b"===d?"btrue"===a:+a}else a=void 0;c.set(a,a)});a["[[SetData]]"]=c}a._storage=null};t.getter(c.prototype,"size",function(){a(this,"size");if(this._storage)return p(this._storage).length;
b(this);return this["[[SetData]]"].size});v(c.prototype,{has:function(c){a(this,"has");var d;if(this._storage&&null!==(d=ea(c)))return!!this._storage[d];b(this);return this["[[SetData]]"].has(c)},add:function(c){a(this,"add");var d;if(this._storage&&null!==(d=ea(c)))return this._storage[d]=!0,this;b(this);this["[[SetData]]"].set(c,c);return this},"delete":function(c){a(this,"delete");var d;if(this._storage&&null!==(d=ea(c)))return c=ta(this._storage,d),delete this._storage[d]&&c;b(this);return this["[[SetData]]"]["delete"](c)},
clear:function(){a(this,"clear");this._storage&&(this._storage=Ca());this["[[SetData]]"]&&this["[[SetData]]"].clear()},values:function(){a(this,"values");b(this);return new g(this["[[SetData]]"].values())},entries:function(){a(this,"entries");b(this);return new g(this["[[SetData]]"].entries())},forEach:function(c){a(this,"forEach");var d=1<arguments.length?arguments[1]:null,g=this;b(g);this["[[SetData]]"].forEach(function(a,b){d?h(c,d,b,b,g):c(b,b,g)})}});n(c.prototype,"keys",c.prototype.values,!0);
Q(c.prototype,c.prototype.values);var g=function(a){this.it=a};g.prototype={isSetIterator:!0,next:function(){if(!this.isSetIterator)throw new TypeError("Not a SetIterator");return this.it.next()}};Q(g.prototype);return c}()};q.Set&&!Set.prototype["delete"]&&Set.prototype.remove&&Set.prototype.items&&Set.prototype.map&&Array.isArray((new Set).keys)&&(q.Set=ra.Set);if(q.Map||q.Set){b(function(){return 2===(new Map([[1,2]])).get(1)})||(q.Map=function K(){if(!(this instanceof K))throw new TypeError('Constructor Map requires "new"');
var a=new D;0<arguments.length&&Za(K,a,arguments[0]);delete a.constructor;Object.setPrototypeOf(a,q.Map.prototype);return a},q.Map.prototype=L(D.prototype),n(q.Map.prototype,"constructor",q.Map,!0),t.preserveToString(q.Map,D));var Lb=new Map,Mb=function(){var a=new Map([[1,0],[2,0],[3,0],[4,0]]);a.set(-0,a);return a.get(0)===a&&a.get(-0)===a&&a.has(0)&&a.has(-0)}(),od=Lb.set(1,2)===Lb;Mb&&od||u(Map.prototype,"set",function(a,c){h(db,this,0===a?0:a,c);return this});Mb||(v(Map.prototype,{get:function(a){return h(na,
this,0===a?0:a)},has:function(a){return h(oa,this,0===a?0:a)}},!0),t.preserveToString(Map.prototype.get,na),t.preserveToString(Map.prototype.has,oa));var $a=new Set,Nb=Set.prototype["delete"]&&Set.prototype.add&&Set.prototype.has&&function(a){a["delete"](0);a.add(-0);return!a.has(0)}($a),pd=$a.add(1)===$a;if(!Nb||!pd){var Ob=Set.prototype.add;Set.prototype.add=function(a){h(Ob,this,0===a?0:a);return this};t.preserveToString(Set.prototype.add,Ob)}if(!Nb){var Pb=Set.prototype.has;Set.prototype.has=
function(a){return h(Pb,this,0===a?0:a)};t.preserveToString(Set.prototype.has,Pb);var Qb=Set.prototype["delete"];Set.prototype["delete"]=function(a){return h(Qb,this,0===a?0:a)};t.preserveToString(Set.prototype["delete"],Qb)}var Rb=O(q.Map,function(a){var c=new a([]);c.set(42,42);return c instanceof a}),qd=Object.setPrototypeOf&&!Rb;try{var Sb=!(q.Map()instanceof q.Map)}catch(z){Sb=z instanceof TypeError}if(0!==q.Map.length||qd||!Sb)q.Map=function K(){if(!(this instanceof K))throw new TypeError('Constructor Map requires "new"');
var a=new D;0<arguments.length&&Za(K,a,arguments[0]);delete a.constructor;Object.setPrototypeOf(a,K.prototype);return a},q.Map.prototype=D.prototype,n(q.Map.prototype,"constructor",q.Map,!0),t.preserveToString(q.Map,D);var rd=O(q.Set,function(a){var c=new a([]);c.add(42,42);return c instanceof a}),sd=Object.setPrototypeOf&&!rd;try{var Tb=!(q.Set()instanceof q.Set)}catch(z){Tb=z instanceof TypeError}if(0!==q.Set.length||sd||!Tb){var ab=q.Set;q.Set=function K(){if(!(this instanceof K))throw new TypeError('Constructor Set requires "new"');
var a=new ab;0<arguments.length&&Kb(K,a,arguments[0]);delete a.constructor;Object.setPrototypeOf(a,K.prototype);return a};q.Set.prototype=ab.prototype;n(q.Set.prototype,"constructor",q.Set,!0);t.preserveToString(q.Set,ab)}var bb=new q.Map,td=!b(function(){return bb.keys().next().done});("function"!==typeof q.Map.prototype.clear||0!==(new q.Set).size||0!==bb.size||"function"!==typeof q.Map.prototype.keys||"function"!==typeof q.Set.prototype.keys||"function"!==typeof q.Map.prototype.forEach||"function"!==
typeof q.Set.prototype.forEach||a(q.Map)||a(q.Set)||"function"!==typeof bb.keys().next||td||!Rb)&&v(q,{Map:ra.Map,Set:ra.Set},!0);q.Set.prototype.keys!==q.Set.prototype.values&&n(q.Set.prototype,"keys",q.Set.prototype.values,!0);Q(Object.getPrototypeOf((new q.Map).keys()));Q(Object.getPrototypeOf((new q.Set).keys()));if(g&&"has"!==q.Set.prototype.has.name){var ud=q.Set.prototype.has;u(q.Set.prototype,"has",function(a){return h(ud,this,a)})}}v(q,ra);qa(q.Map);qa(q.Set)}var R=function(a){if(!m.TypeIsObject(a))throw new TypeError("target must be an object");
},M={apply:function(){return m.Call(m.Call,null,arguments)},construct:function(a,c){if(!m.IsConstructor(a))throw new TypeError("First argument must be a constructor.");var d=2<arguments.length?arguments[2]:a;if(!m.IsConstructor(d))throw new TypeError("new.target must be a constructor.");return m.Construct(a,c,d,"internal")},deleteProperty:function(a,d){R(a);if(c){var b=Object.getOwnPropertyDescriptor(a,d);if(b&&!b.configurable)return!1}return delete a[d]},has:function(a,c){R(a);return c in a}};Object.getOwnPropertyNames&&
Object.assign(M,{ownKeys:function(a){R(a);var c=Object.getOwnPropertyNames(a);m.IsCallable(Object.getOwnPropertySymbols)&&X(c,Object.getOwnPropertySymbols(a));return c}});Object.preventExtensions&&Object.assign(M,{isExtensible:function(a){R(a);return Object.isExtensible(a)},preventExtensions:function(a){R(a);return!f(function(){return Object.preventExtensions(a)})}});if(c){var Ub=function(a,c,d){var b=Object.getOwnPropertyDescriptor(a,c);if(!b)return a=Object.getPrototypeOf(a),null===a?void 0:Ub(a,
c,d);if("value"in b)return b.value;if(b.get)return m.Call(b.get,d)},Vb=function(a,c,d,b){var g=Object.getOwnPropertyDescriptor(a,c);if(!g){a=Object.getPrototypeOf(a);if(null!==a)return Vb(a,c,d,b);g={value:void 0,writable:!0,enumerable:!0,configurable:!0}}return"value"in g?g.writable&&m.TypeIsObject(b)?Object.getOwnPropertyDescriptor(b,c)?Z.defineProperty(b,c,{value:d}):Z.defineProperty(b,c,{value:d,writable:!0,enumerable:!0,configurable:!0}):!1:g.set?(h(g.set,b,d),!0):!1};Object.assign(M,{defineProperty:function(a,
c,d){R(a);return!f(function(){return Object.defineProperty(a,c,d)})},getOwnPropertyDescriptor:function(a,c){R(a);return Object.getOwnPropertyDescriptor(a,c)},get:function(a,c){R(a);return Ub(a,c,2<arguments.length?arguments[2]:a)},set:function(a,c,d){R(a);return Vb(a,c,d,3<arguments.length?arguments[3]:a)}})}if(Object.getPrototypeOf){var vd=Object.getPrototypeOf;M.getPrototypeOf=function(a){R(a);return vd(a)}}Object.setPrototypeOf&&M.getPrototypeOf&&Object.assign(M,{setPrototypeOf:function(a,c){R(a);
if(null!==c&&!m.TypeIsObject(c))throw new TypeError("proto must be an object or null");if(c===Z.getPrototypeOf(a))return!0;if(Z.isExtensible&&!Z.isExtensible(a))return!1;var d;a:{for(d=c;d;){if(a===d){d=!0;break a}d=M.getPrototypeOf(d)}d=!1}if(d)return!1;Object.setPrototypeOf(a,c);return!0}});var wd=function(a,c){m.IsCallable(q.Reflect[a])?b(function(){q.Reflect[a](1);q.Reflect[a](NaN);q.Reflect[a](!0);return!0})&&u(q.Reflect,a,c):n(q.Reflect,a,c)};Object.keys(M).forEach(function(a){wd(a,M[a])});
var cb=q.Reflect.getPrototypeOf;g&&cb&&"getPrototypeOf"!==cb.name&&u(q.Reflect,"getPrototypeOf",function(a){return h(cb,q.Reflect,a)});q.Reflect.setPrototypeOf&&b(function(){q.Reflect.setPrototypeOf(1,{});return!0})&&u(q.Reflect,"setPrototypeOf",M.setPrototypeOf);q.Reflect.defineProperty&&(b(function(){var a=!q.Reflect.defineProperty(1,"test",{value:1}),c="function"!==typeof Object.preventExtensions||!q.Reflect.defineProperty(Object.preventExtensions({}),"test",{});return a&&c})||u(q.Reflect,"defineProperty",
M.defineProperty));q.Reflect.construct&&(b(function(){var a=function(){};return q.Reflect.construct(function(){},[],a)instanceof a})||u(q.Reflect,"construct",M.construct));if("Invalid Date"!==String(new Date(NaN))){var xd=Date.prototype.toString;u(Date.prototype,"toString",function(){var a=+this;return a!==a?"Invalid Date":m.Call(xd,this)})}var Wb={anchor:function(a){return m.CreateHTML(this,"a","name",a)},big:function(){return m.CreateHTML(this,"big","","")},blink:function(){return m.CreateHTML(this,
"blink","","")},bold:function(){return m.CreateHTML(this,"b","","")},fixed:function(){return m.CreateHTML(this,"tt","","")},fontcolor:function(a){return m.CreateHTML(this,"font","color",a)},fontsize:function(a){return m.CreateHTML(this,"font","size",a)},italics:function(){return m.CreateHTML(this,"i","","")},link:function(a){return m.CreateHTML(this,"a","href",a)},small:function(){return m.CreateHTML(this,"small","","")},strike:function(){return m.CreateHTML(this,"strike","","")},sub:function(){return m.CreateHTML(this,
"sub","","")},sup:function(){return m.CreateHTML(this,"sup","","")}};l(Object.keys(Wb),function(a){var c=String.prototype[a];if(m.IsCallable(c)){c=h(c,"",' " ');var d=ma([],c.match(/"/g)).length;c=c!==c.toLowerCase()||2<d}else c=!0;c&&u(String.prototype,a,Wb[a])});var yd=function(){if(!pa)return!1;var a="object"===typeof JSON&&"function"===typeof JSON.stringify?JSON.stringify:null;if(!a)return!1;if("undefined"!==typeof a(y())||"[null]"!==a([y()]))return!0;var c={a:y()};c[y()]=!0;return"{}"!==a(c)?
!0:!1}(),zd=b(function(){return pa?"{}"===JSON.stringify(Object(y()))&&"[{}]"===JSON.stringify([Object(y())]):!0});if(yd||!zd){var Ad=JSON.stringify;u(JSON,"stringify",function(a){if("symbol"!==typeof a){var c;1<arguments.length&&(c=arguments[1]);var d=[a];if(k(c))d.push(c);else{var b=m.IsCallable(c)?c:null;d.push(function(a,c){a=b?h(b,this,a,c):c;if("symbol"!==typeof a)return C.symbol(a)?zb({})(a):a})}2<arguments.length&&d.push(arguments[2]);return Ad.apply(this,d)}})}return q});
(function(e){e=e.keyman||(e.keyman={});e=e.environment||(e.environment={});e.VERSION="14.0";e.BUILD=90;e.SENTRY_RELEASE="release-14.0.90-alpha"})(com||(com={}));(function(e){e.keyman||(e.keyman={})})(com||(com={}));var has=Object.prototype.hasOwnProperty,prefix="~";function Events(){}Object.create&&(Events.prototype=Object.create(null),(new Events).__proto__||(prefix=!1));function EE(e,h,k){this.fn=e;this.context=h;this.once=k||!1}
function addListener(e,h,k,p,f){if("function"!==typeof k)throw new TypeError("The listener must be a function");k=new EE(k,p||e,f);h=prefix?prefix+h:h;e._events[h]?e._events[h].fn?e._events[h]=[e._events[h],k]:e._events[h].push(k):(e._events[h]=k,e._eventsCount++);return e}function clearEvent(e,h){0===--e._eventsCount?e._events=new Events:delete e._events[h]}function EventEmitter(){this._events=new Events;this._eventsCount=0}
EventEmitter.prototype.eventNames=function(){var e=[],h,k;if(0===this._eventsCount)return e;for(k in h=this._events)has.call(h,k)&&e.push(prefix?k.slice(1):k);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(h)):e};EventEmitter.prototype.listeners=function(e){e=this._events[prefix?prefix+e:e];if(!e)return[];if(e.fn)return[e.fn];for(var h=0,k=e.length,p=Array(k);h<k;h++)p[h]=e[h].fn;return p};
EventEmitter.prototype.listenerCount=function(e){return(e=this._events[prefix?prefix+e:e])?e.fn?1:e.length:0};
EventEmitter.prototype.emit=function(e,h,k,p,f,b){var a=prefix?prefix+e:e;if(!this._events[a])return!1;a=this._events[a];var d=arguments.length,c;if(a.fn){a.once&&this.removeListener(e,a.fn,void 0,!0);switch(d){case 1:return a.fn.call(a.context),!0;case 2:return a.fn.call(a.context,h),!0;case 3:return a.fn.call(a.context,h,k),!0;case 4:return a.fn.call(a.context,h,k,p),!0;case 5:return a.fn.call(a.context,h,k,p,f),!0;case 6:return a.fn.call(a.context,h,k,p,f,b),!0}var g=1;for(c=Array(d-1);g<d;g++)c[g-
1]=arguments[g];a.fn.apply(a.context,c)}else{var l=a.length;for(g=0;g<l;g++)switch(a[g].once&&this.removeListener(e,a[g].fn,void 0,!0),d){case 1:a[g].fn.call(a[g].context);break;case 2:a[g].fn.call(a[g].context,h);break;case 3:a[g].fn.call(a[g].context,h,k);break;case 4:a[g].fn.call(a[g].context,h,k,p);break;default:if(!c){var r=1;for(c=Array(d-1);r<d;r++)c[r-1]=arguments[r]}a[g].fn.apply(a[g].context,c)}}return!0};EventEmitter.prototype.on=function(e,h,k){return addListener(this,e,h,k,!1)};
EventEmitter.prototype.once=function(e,h,k){return addListener(this,e,h,k,!0)};EventEmitter.prototype.removeListener=function(e,h,k,p){e=prefix?prefix+e:e;if(!this._events[e])return this;if(!h)return clearEvent(this,e),this;var f=this._events[e];if(f.fn)f.fn!==h||p&&!f.once||k&&f.context!==k||clearEvent(this,e);else{for(var b=0,a=[],d=f.length;b<d;b++)(f[b].fn!==h||p&&!f[b].once||k&&f[b].context!==k)&&a.push(f[b]);a.length?this._events[e]=1===a.length?a[0]:a:clearEvent(this,e)}return this};
EventEmitter.prototype.removeAllListeners=function(e){e?(e=prefix?prefix+e:e,this._events[e]&&clearEvent(this,e)):(this._events=new Events,this._eventsCount=0);return this};EventEmitter.prototype.off=EventEmitter.prototype.removeListener;EventEmitter.prototype.addListener=EventEmitter.prototype.on;EventEmitter.prefixed=prefix;EventEmitter.EventEmitter=EventEmitter;"undefined"!==typeof module&&(module.exports=EventEmitter);
(function(e){e=e.keyman||(e.keyman={});(e.text||(e.text={})).Codes={modifierCodes:{LCTRL:1,RCTRL:2,LALT:4,RALT:8,SHIFT:16,CTRL:32,ALT:64,CAPS:256,NO_CAPS:512,NUM_LOCK:1024,NO_NUM_LOCK:2048,SCROLL_LOCK:4096,NO_SCROLL_LOCK:8192,VIRTUAL_KEY:16384},modifierBitmasks:{ALL:127,ALT_GR_SIM:5,CHIRAL:31,IS_CHIRAL:15,NON_CHIRAL:112},stateBitmasks:{ALL:16128,CAPS:768,NUM_LOCK:3072,SCROLL_LOCK:12288},keyCodes:{K_BKSP:8,K_TAB:9,K_ENTER:13,K_SHIFT:16,K_CONTROL:17,K_ALT:18,K_PAUSE:19,K_CAPS:20,K_ESC:27,K_SPACE:32,
K_PGUP:33,K_PGDN:34,K_END:35,K_HOME:36,K_LEFT:37,K_UP:38,K_RIGHT:39,K_DOWN:40,K_SEL:41,K_PRINT:42,K_EXEC:43,K_INS:45,K_DEL:46,K_HELP:47,K_0:48,K_1:49,K_2:50,K_3:51,K_4:52,K_5:53,K_6:54,K_7:55,K_8:56,K_9:57,K_A:65,K_B:66,K_C:67,K_D:68,K_E:69,K_F:70,K_G:71,K_H:72,K_I:73,K_J:74,K_K:75,K_L:76,K_M:77,K_N:78,K_O:79,K_P:80,K_Q:81,K_R:82,K_S:83,K_T:84,K_U:85,K_V:86,K_W:87,K_X:88,K_Y:89,K_Z:90,K_NP0:96,K_NP1:97,K_NP2:98,K_NP3:99,K_NP4:100,K_NP5:101,K_NP6:102,K_NP7:103,K_NP8:104,K_NP9:105,K_NPSTAR:106,K_NPPLUS:107,
K_SEPARATOR:108,K_NPMINUS:109,K_NPDOT:110,K_NPSLASH:111,K_F1:112,K_F2:113,K_F3:114,K_F4:115,K_F5:116,K_F6:117,K_F7:118,K_F8:119,K_F9:120,K_F10:121,K_F11:122,K_F12:123,K_NUMLOCK:144,K_SCROLL:145,K_LSHIFT:160,K_RSHIFT:161,K_LCONTROL:162,K_RCONTROL:163,K_LALT:164,K_RALT:165,K_COLON:186,K_EQUAL:187,K_COMMA:188,K_HYPHEN:189,K_PERIOD:190,K_SLASH:191,K_BKQUOTE:192,K_LBRKT:219,K_BKSLASH:220,K_RBRKT:221,K_QUOTE:222,K_oE2:226,K_OE2:226,K_LOPT:50001,K_ROPT:50002,K_NUMERALS:50003,K_SYMBOLS:50004,K_CURRENCIES:50005,
K_UPPER:50006,K_LOWER:50007,K_ALPHA:50008,K_SHIFTED:50009,K_ALTGR:50010,K_TABBACK:50011,K_TABFWD:50012},codesUS:[["0123456789",";=,-./`","[\\]'"],[")!@#$%^&*(",":+<_>?~",'{|}"']]}})(com||(com={}));
(function(e){(function(e){(function(e){var h=function(){function b(a,d){this.p=a;this.d=d;this.o=b.ordinalSeed++}b.prototype.match=function(a,d){return this.p==a&&this.d==d};b.prototype.set=function(){this.matched=1};b.prototype.reset=function(){this.matched=0};b.prototype.before=function(a){return this.o<a.o};b.prototype.clone=function(){var a=new b(this.p,this.d);a.o=this.o;return a};b.ordinalSeed=0;b.sortFunc=function(a,d){return a.p!=d.p?d.p-a.p:d.o-a.o};return b}();e.Deadkey=h;var f=function(){function b(){this.dks=
[]}b.prototype.toSortedArray=function(){this.dks=this.dks.sort(h.sortFunc);return[].concat(this.dks)};b.prototype.clone=function(){var a=new b,d=this.toSortedArray();a.dks=[];d.forEach(function(c){a.dks.push(c.clone())});return a};b.prototype.isMatch=function(a,d,c){if(0==this.dks.length)return!1;d=a-d;for(a=0;a<this.dks.length;a++)if(this.dks[a].match(d,c)&&!this.dks[a].matched)return this.dks[a].set(),!0;this.resetMatched();return!1};b.prototype.add=function(a){this.dks=this.dks.concat(a)};b.prototype.remove=
function(a){a=this.dks.indexOf(a);this.dks.splice(a,1)};b.prototype.clear=function(){this.dks=[]};b.prototype.resetMatched=function(){for(var a=0,d=this.dks;a<d.length;a++)d[a].reset()};b.prototype.deleteMatched=function(){for(var a=0;a<this.dks.length;a++)this.dks[a].matched&&this.dks.splice(a--,1)};b.prototype.adjustPositions=function(a,d){if(0!=d)for(var c=0,b=this.dks;c<b.length;c++){var l=b[c];l.p>a&&(l.p+=d)}};b.prototype.count=function(){return this.dks.length};return b}();e.DeadkeyTracker=
f})(e.text||(e.text={}))})(e.keyman||(e.keyman={}))})(com||(com={}));var __extends=this&&this.__extends||function(){var e=function(h,k){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,f){e.__proto__=f}||function(e,f){for(var b in f)f.hasOwnProperty(b)&&(e[b]=f[b])};return e(h,k)};return function(h,k){function p(){this.constructor=h}e(h,k);h.prototype=null===k?Object.create(k):(p.prototype=k.prototype,new p)}}();
(function(e){(function(e){var h;(function(e){var f=function(){function a(a,c,d){this.insert=a;this.deleteLeft=c;this.deleteRight=d||0}a.nil=new a("",0,0);return a}();e.TextTransform=f;var b=function(){function a(c,d,b,e){var g=this.token=a.tokenSeed++;this.keystroke=c;this.transform=d;this.alternates=e;this.preInput=b;this.transform.id=this.token;e&&e.forEach(function(a){a.sample.id=g})}a.tokenSeed=0;return a}();e.Transcription=b;var a=function(){function a(){this._dks=new h.DeadkeyTracker}Object.defineProperty(a.prototype,
"isSynthetic",{get:function(){return!0},enumerable:!0,configurable:!0});a.prototype.resetContext=function(){this.deadkeys().clear()};a.prototype.deadkeys=function(){return this._dks};a.prototype.hasDeadkeyMatch=function(a,c){return this.deadkeys().isMatch(this.getDeadkeyCaret(),a,c)};a.prototype.insertDeadkeyBeforeCaret=function(a){a=new e.Deadkey(this.getDeadkeyCaret(),a);this.deadkeys().add(a)};a.prototype.adjustDeadkeys=function(a){this.deadkeys().adjustPositions(this.getDeadkeyCaret(),a)};a.prototype.setDeadkeys=
function(a){this._dks=a.clone()};a.prototype.buildTransformFrom=function(a){for(var c=this.getText(),d=a.getText(),b=a.getDeadkeyCaret(),g=this.getDeadkeyCaret(),n=0;n<b&&d._kmwCharAt(n)==c._kmwCharAt(n);n++);a=b-n;n=c._kmwSubstr(n,g-n);c=c._kmwLength()-g;d=d._kmwLength()-b;return new f(n,a,d-c)};a.prototype.buildTranscriptionFrom=function(a,c,r){var g=this.buildTransformFrom(a);return new b(c,g,d.from(a),r)};a.prototype.restoreTo=function(a){this.setTextBeforeCaret(a.getTextBeforeCaret());this.setTextAfterCaret(a.getTextAfterCaret());
this._dks=a._dks.clone()};a.prototype.apply=function(a){a.deleteRight&&this.setTextAfterCaret(this.getTextAfterCaret()._kmwSubstr(a.deleteRight));a.deleteLeft&&this.deleteCharsBeforeCaret(a.deleteLeft);a.insert&&this.insertTextBeforeCaret(a.insert);this._dks.clear()};a.prototype.setTextBeforeCaret=function(a){this.deleteCharsBeforeCaret(this.getTextBeforeCaret()._kmwLength());this.insertTextBeforeCaret(a)};a.prototype.saveProperties=function(){};a.prototype.restoreProperties=function(){};return a}();
e.OutputTarget=a;var d=function(a){function c(c,d){var b=a.call(this)||this;b.text=c?c:"";c=b.text._kmwLength();b.caretIndex=d?d:c;return b}__extends(c,a);c.from=function(a){var d=a.getTextBeforeCaret(),b=d._kmwLength();d=new c(d+a.getTextAfterCaret(),b);d.setDeadkeys(a.deadkeys());return d};c.prototype.clearSelection=function(){};c.prototype.invalidateSelection=function(){};c.prototype.hasSelection=function(){return!0};c.prototype.getDeadkeyCaret=function(){return this.caretIndex};c.prototype.setDeadkeyCaret=
function(a){if(0>a||a>this.text._kmwLength())throw Error("Provided caret index is out of range.");this.caretIndex=a};c.prototype.getTextBeforeCaret=function(){return this.text.kmwSubstr(0,this.caretIndex)};c.prototype.getTextAfterCaret=function(){return this.text.kmwSubstr(this.caretIndex)};c.prototype.getText=function(){return this.text};c.prototype.deleteCharsBeforeCaret=function(a){0<=a&&(a>this.caretIndex&&(a=this.caretIndex),this.text=this.text.kmwSubstr(0,this.caretIndex-a)+this.getTextAfterCaret(),
this.caretIndex-=a)};c.prototype.insertTextBeforeCaret=function(a){this.text=this.getTextBeforeCaret()+a+this.getTextAfterCaret();this.caretIndex+=a.kmwLength()};c.prototype.handleNewlineAtCaret=function(){this.insertTextBeforeCaret("\n")};c.prototype.setTextAfterCaret=function(a){this.text=this.getTextBeforeCaret()+a};c.prototype.doInputEvent=function(){};return c}(a);e.Mock=d})(h=e.text||(e.text={}))})(e.keyman||(e.keyman={}))})(com||(com={}));
(function(e){(function(e){(function(e){var h=function(){return function(){this.isSynthetic=!0}}();e.KeyEvent=h})(e.text||(e.text={}))})(e.keyman||(e.keyman={}))})(com||(com={}));
(function(e){(function(e){(function(e){var h=function(){function f(){this.setStore={};this.saveStore={}}f.prototype.finalize=function(b){var a=this.transcription.keystroke.Ltarg;b.beepHandler&&this.beep&&b.beepHandler(a);for(var d in this.setStore)if(a=b.keyboardInterface.systemStores[d])try{a.set(this.setStore[d])}catch(c){b.errorLogger&&b.errorLogger("Rule attempted to perform illegal operation - 'platform' may not be changed.")}else b.warningLogger&&b.warningLogger("Unknown store affected by keyboard rule: "+
d);if(b.keyboardInterface.variableStoreSerializer)for(d in this.saveStore)b.keyboardInterface.variableStoreSerializer.saveStore(b.activeKeyboard.id,d,this.saveStore[d]);this.triggersDefaultCommand&&e.DefaultOutput.applyCommand(this.transcription.keystroke);b.warningLogger&&this.warningLog?b.warningLogger(this.warningLog):b.errorLogger&&this.errorLog&&b.errorLogger(this.errorLog)};return f}();e.RuleBehavior=h})(e.text||(e.text={}))})(e.keyman||(e.keyman={}))})(com||(com={}));
(function(e){(function(e){(function(e){var h;(function(b){b.Space=" ";b.Enter="\n";b.Backspace="\b"})(h=e.EmulationKeystrokes||(e.EmulationKeystrokes={}));var f=function(){function b(){}b.codeForEvent=function(a){return e.Codes.keyCodes[a.kName]||a.Lcode};b.forAny=function(a,d){var c;if(null!=(c=b.forSpecialEmulation(a)))return c;if(d||null==(c=b.forNumpadKeys(a))){if(null!=(c=b.forUnicodeKeynames(a))||null!=(c=b.forBaseKeys(a)))return c;b.codeForEvent(a);return""}return c};b.isCommand=function(a){b.codeForEvent(a);
return!1};b.applyCommand=function(a){};b.forSpecialEmulation=function(a){switch(b.codeForEvent(a)){case e.Codes.keyCodes.K_BKSP:return h.Backspace;case e.Codes.keyCodes.K_ENTER:return h.Enter;case e.Codes.keyCodes.K_SPACE:return h.Space;default:return null}};b.forNumpadKeys=function(a){return a.Lcode>=e.Codes.keyCodes.K_NP0&&a.Lcode<=e.Codes.keyCodes.K_NPSLASH?String._kmwFromCharCode(106>a.Lcode?a.Lcode-48:a.Lcode-64):null};b.forUnicodeKeynames=function(a,d){a=a.kName;if(!a||"U_"!=a.substr(0,2))return null;
a=parseInt(a.substr(2,6),16);return 0<=a&&31>=a||128<=a&&159>=a?(d&&(d.errorLog="Suppressing Unicode control code: U_00"+a.toString(16)),null):String.kmwFromCharCode(a)};b.forBaseKeys=function(a,d){var c=a.Lcode;a=a.Lmodifiers;if(a==e.Codes.modifierCodes.SHIFT)a=1;else if(0!=a)return d&&(d.warningLog="KMW only defines default key output for the 'default' and 'shift' layers!"),null;try{if(c>=e.Codes.keyCodes.K_0&&c<=e.Codes.keyCodes.K_9)return e.Codes.codesUS[a][0][c-e.Codes.keyCodes.K_0];if(c>=e.Codes.keyCodes.K_A&&
c<=e.Codes.keyCodes.K_Z)return String.fromCharCode(c+(a?0:32));if(c>=e.Codes.keyCodes.K_COLON&&c<=e.Codes.keyCodes.K_BKQUOTE)return e.Codes.codesUS[a][1][c-e.Codes.keyCodes.K_COLON];if(c>=e.Codes.keyCodes.K_LBRKT&&c<=e.Codes.keyCodes.K_QUOTE)return e.Codes.codesUS[a][2][c-e.Codes.keyCodes.K_LBRKT]}catch(g){d&&(d.errorLog="Error detected with default mapping for key:  code = "+c+", shift state = "+(1==a?"shift":"default"))}return null};return b}();e.DefaultOutput=f})(e.text||(e.text={}))})(e.keyman||
(e.keyman={}))})(com||(com={}));
(function(e){(function(h){(function(k){var p=e.keyman.text.Codes,f=function(){function b(){}b.buildDefaultLayout=function(a,d,c){var g=c;"object"!=typeof b.dfltLayout[g]&&(g="desktop");var l=p.modifierBitmasks.NON_CHIRAL,r=h.utils.Version.CURRENT;d&&(l=d.modifierBitmask,r=d.compilerVersion);a||(a=this.DEFAULT_RAW_SPEC);g=h.utils.deepCopy(b.dfltLayout[g]);var e=g.layer,f=a.KLS,n=a.K102,v,k,J=0!=(l&p.modifierBitmasks.IS_CHIRAL);(k=!("undefined"==typeof f||!f))||(f=a.KLS=b.processLegacyDefinitions(a.BK));
a=Object.getOwnPropertyNames(f);var t=[];a.splice(a.indexOf("default"),1);a=["default"].concat(a);d&&d.emulatesAltGr&&(-1==a.indexOf("leftctrl-leftalt")&&-1!=a.indexOf("rightalt")&&(a.push("leftctrl-leftalt"),f["leftctrl-leftalt"]=f.rightalt),-1==a.indexOf("leftctrl-leftalt-shift")&&-1!=a.indexOf("rightalt-shift")&&(a.push("leftctrl-leftalt-shift"),f["leftctrl-leftalt-shift"]=f["rightalt-shift"]));if("desktop"==c)for(t=b.generateLayerIds(J),l=0;l<t.length;l++)-1!=a.indexOf(t[l])&&t.splice(l--,1);
var L=a.concat(t);if(k&&"desktop"!=c){d=null;k=e[0].row;for(l=0;l<k.length;l++){var O=k[l].key;for(var q=0;q<O.length;q++)t=O[q],"K_SHIFT"==t.id&&(d=t)}if(d)for(v in d.sk=[],f)"default"!=v&&"shift"!=v&&(l=b.modifierSpecials[v],d.sk.push({id:"K_"+l,text:l,sp:"1",nextlayer:v}));else console.warn("Error in default layout - cannot find default Shift key!")}for(l=0;l<L.length;l++)0<l&&(e[l]=h.utils.deepCopy(e[0])),e[l].id=L[l],e[l].nextlayer=L[l],b.formatDefaultLayer(e[l],J,c,!!n);for(l=0;l<e.length;l++){J=
e[l];var fa=q=L=d=null,Da=f[J.id],Ga="shift"==J.id?1:0,ma="default"==J.id||Ga?1:0;k=J.row;for(v=0;v<k.length;v++)for(O=k[v].key,n=0;n<O.length;n++){t=O[n];var N=b.dfltCodes.indexOf(t.id);if(Da||ma)Da&&0<=N&&N<Da.length&&(t.text=Da[N]),ma&&r.precedes(h.utils.Version.NO_DEFAULT_KEYCAPS)&&"K_SPACE"!=t.id&&N+65*Ga<b.dfltText.length&&null!==t.text&&(t.text=t.text||b.dfltText[N+65*Ga]);null!==t.text&&(t.text=t.text||"");switch(t.id){case "K_SHIFT":d=t;break;case "K_CAPS":L=t;break;case "K_NUMLOCK":q=t;
break;case "K_SCROLL":fa=t}if(null!=t.sk){for(N=0;N<t.sk.length;N++)-1==a.indexOf(t.sk[N].nextlayer)&&t.sk.splice(N--,1);0==t.sk.length&&(t.sk=null)}}J.shiftKey=d;J.capsKey=L;J.numKey=q;J.scrollKey=fa;"desktop"!=c&&0<l&&null!=d&&(d.sp=b.buttonClasses["SHIFT-ON"],d.sk=null,d.text=b.modifierSpecials[e[l].id]?b.modifierSpecials[e[l].id]:"*Shift*")}return g};b.getLayerId=function(a){var d=p.modifierCodes,c="";if(0==a)return"default";a&d.LCTRL&&(c=(0<c.length?c+"-":"")+"leftctrl");a&d.RCTRL&&(c=(0<c.length?
c+"-":"")+"rightctrl");a&d.LALT&&(c=(0<c.length?c+"-":"")+"leftalt");a&d.RALT&&(c=(0<c.length?c+"-":"")+"rightalt");a&d.SHIFT&&(c=(0<c.length?c+"-":"")+"shift");a&d.CTRL&&(c=(0<c.length?c+"-":"")+"ctrl");a&d.ALT&&(c=(0<c.length?c+"-":"")+"alt");return c};b.generateLayerIds=function(a){if(a){a=32;var d=1}else a=8,d=16;for(var c=[],g=0;g<a;g++)c.push(b.getLayerId(g*d));return c};b.formatDefaultLayer=function(a,d,c,g){for(var l=a.id,r=b.buttonClasses,e=0;e<a.row.length;e++)for(var f=a.row[e].key,n=0;n<
f.length;n++){var h=f[n];switch(h.id){case "K_SHIFT":case "K_LSHIFT":case "K_RSHIFT":-1!=l.indexOf("shift")&&(h.sp=r["SHIFT-ON"]);"desktop"!=c&&"default"!=l&&(h.nextlayer="default");break;case "K_LCTRL":case "K_LCONTROL":if(d){-1!=l.indexOf("leftctrl")&&(h.sp=r["SHIFT-ON"]);break}case "K_RCTRL":case "K_RCONTROL":if(d){-1!=l.indexOf("rightctrl")&&(h.sp=r["SHIFT-ON"]);break}case "K_CONTROL":-1==l.indexOf("ctrl")||d&&(-1==l.indexOf("leftctrl")||-1==l.indexOf("rightctrl"))||(h.sp=r["SHIFT-ON"]);break;
case "K_LALT":if(d){-1!=l.indexOf("leftalt")&&(h.sp=r["SHIFT-ON"]);break}case "K_RALT":if(d){-1!=l.indexOf("rightalt")&&(h.sp=r["SHIFT-ON"]);break}case "K_ALT":-1==l.indexOf("alt")||d&&(-1==l.indexOf("leftalt")||-1==l.indexOf("rightalt"))||(h.sp=r["SHIFT-ON"]);break;case "K_oE2":"undefined"!=typeof g&&g||("desktop"==c?(f.splice(n--,1),f[0].width="200"):f[n].sp=r.HIDDEN)}}};b.processLegacyDefinitions=function(a){for(var d=b.generateLayerIds(!1),c={},g=0;g<d.length;g++){for(var l=d[g],r=[],e=!1,f=0;65>
f;f++){var n=f+65*g;r.push(a[n]);n<a.length&&""!=a[n]&&f!=b.dfltCodes.indexOf("K_SPACE")&&(e=!0)}e&&(c[l]=r)}"undefined"!=typeof c["default"]&&c["default"]||(c["default"]=[""]);"undefined"!=typeof c.shift&&c.shift||(c.shift=[""]);return c};b.dfltCodes="K_BKQUOTE K_1 K_2 K_3 K_4 K_5 K_6 K_7 K_8 K_9 K_0 K_HYPHEN K_EQUAL K_* K_* K_* K_Q K_W K_E K_R K_T K_Y K_U K_I K_O K_P K_LBRKT K_RBRKT K_BKSLASH K_* K_* K_* K_A K_S K_D K_F K_G K_H K_J K_K K_L K_COLON K_QUOTE K_* K_* K_* K_* K_* K_oE2 K_Z K_X K_C K_V K_B K_N K_M K_COMMA K_PERIOD K_SLASH K_* K_* K_* K_* K_* K_SPACE".split(" ");
b.dfltText="`1234567890-=\u00a7~~qwertyuiop[]\\~~~asdfghjkl;'~~~~~?zxcvbnm,./~~~~~ ~!@#$%^&*()_+\u00a7~~QWERTYUIOP{}\\~~~ASDFGHJKL:\"~~~~~?ZXCVBNM<>?~~~~~ ";b.DEFAULT_RAW_SPEC={F:"Tahoma",BK:b.dfltText};b.buttonClasses={DEFAULT:"0",SHIFT:"1","SHIFT-ON":"2",SPECIAL:"3","SPECIAL-ON":"4",DEADKEY:"8",BLANK:"9",HIDDEN:"10"};b.modifierSpecials={leftalt:"*LAlt*",rightalt:"*RAlt*",alt:"*Alt*",leftctrl:"*LCtrl*",rightctrl:"*RCtrl*",ctrl:"*Ctrl*","ctrl-alt":"*AltGr*","leftctrl-leftalt":"*LAltCtrl*","rightctrl-rightalt":"*RAltCtrl*",
"leftctrl-leftalt-shift":"*LAltCtrlShift*","rightctrl-rightalt-shift":"*RAltCtrlShift*",shift:"*Shift*","shift-alt":"*AltShift*","shift-ctrl":"*CtrlShift*","shift-ctrl-alt":"*AltCtrlShift*","leftalt-shift":"*LAltShift*","rightalt-shift":"*RAltShift*","leftctrl-shift":"*LCtrlShift*","rightctrl-shift":"*RCtrlShift*"};b.dfltLayout={desktop:{font:"Tahoma,Helvetica",layer:[{id:"default",row:[{id:"1",key:[{id:"K_BKQUOTE"},{id:"K_1"},{id:"K_2"},{id:"K_3"},{id:"K_4"},{id:"K_5"},{id:"K_6"},{id:"K_7"},{id:"K_8"},
{id:"K_9"},{id:"K_0"},{id:"K_HYPHEN"},{id:"K_EQUAL"},{id:"K_BKSP",text:"*BkSp*",sp:"1",width:"130"}]},{id:"2",key:[{id:"K_TAB",text:"*Tab*",sp:"1",width:"130"},{id:"K_Q"},{id:"K_W"},{id:"K_E"},{id:"K_R"},{id:"K_T"},{id:"K_Y"},{id:"K_U"},{id:"K_I"},{id:"K_O"},{id:"K_P"},{id:"K_LBRKT"},{id:"K_RBRKT"},{id:"K_BKSLASH"}]},{id:"3",key:[{id:"K_CAPS",text:"*Caps*",sp:"1",width:"165"},{id:"K_A"},{id:"K_S"},{id:"K_D"},{id:"K_F"},{id:"K_G"},{id:"K_H"},{id:"K_J"},{id:"K_K"},{id:"K_L"},{id:"K_COLON"},{id:"K_QUOTE"},
{id:"K_ENTER",text:"*Enter*",sp:"1",width:"165"}]},{id:"4",key:[{id:"K_SHIFT",text:"*Shift*",sp:"1",width:"130"},{id:"K_oE2"},{id:"K_Z"},{id:"K_X"},{id:"K_C"},{id:"K_V"},{id:"K_B"},{id:"K_N"},{id:"K_M"},{id:"K_COMMA"},{id:"K_PERIOD"},{id:"K_SLASH"},{id:"K_RSHIFT",text:"*Shift*",sp:"1",width:"130"}]},{id:"5",key:[{id:"K_LCONTROL",text:"*Ctrl*",sp:"1",width:"170"},{id:"K_LALT",text:"*Alt*",sp:"1",width:"160"},{id:"K_SPACE",text:"",width:"770"},{id:"K_RALT",text:"*Alt*",sp:"1",width:"160"},{id:"K_RCONTROL",
text:"*Ctrl*",sp:"1",width:"170"}]}]}]},tablet:{font:"Tahoma,Helvetica",layer:[{id:"default",row:[{id:"0",key:[{id:"K_1"},{id:"K_2"},{id:"K_3"},{id:"K_4"},{id:"K_5"},{id:"K_6"},{id:"K_7"},{id:"K_8"},{id:"K_9"},{id:"K_0"},{id:"K_HYPHEN"},{id:"K_EQUAL"},{sp:"10",width:"1"}]},{id:"1",key:[{id:"K_Q",pad:"25"},{id:"K_W"},{id:"K_E"},{id:"K_R"},{id:"K_T"},{id:"K_Y"},{id:"K_U"},{id:"K_I"},{id:"K_O"},{id:"K_P"},{id:"K_LBRKT"},{id:"K_RBRKT"},{sp:"10",width:"1"}]},{id:"2",key:[{id:"K_A",pad:"50"},{id:"K_S"},
{id:"K_D"},{id:"K_F"},{id:"K_G"},{id:"K_H"},{id:"K_J"},{id:"K_K"},{id:"K_L"},{id:"K_COLON"},{id:"K_QUOTE"},{id:"K_BKSLASH",width:"90"}]},{id:"3",key:[{id:"K_oE2",width:"90"},{id:"K_Z"},{id:"K_X"},{id:"K_C"},{id:"K_V"},{id:"K_B"},{id:"K_N"},{id:"K_M"},{id:"K_COMMA"},{id:"K_PERIOD"},{id:"K_SLASH"},{id:"K_BKQUOTE"},{sp:"10",width:"1"}]},{id:"4",key:[{id:"K_SHIFT",text:"*Shift*",sp:"1",width:"200",sk:[{id:"K_LCONTROL",text:"*Ctrl*",sp:"1",width:"50",nextlayer:"ctrl"},{id:"K_LCONTROL",text:"*LCtrl*",sp:"1",
width:"50",nextlayer:"leftctrl"},{id:"K_RCONTROL",text:"*RCtrl*",sp:"1",width:"50",nextlayer:"rightctrl"},{id:"K_LALT",text:"*Alt*",sp:"1",width:"50",nextlayer:"alt"},{id:"K_LALT",text:"*LAlt*",sp:"1",width:"50",nextlayer:"leftalt"},{id:"K_RALT",text:"*RAlt*",sp:"1",width:"50",nextlayer:"rightalt"},{id:"K_ALTGR",text:"*AltGr*",sp:"1",width:"50",nextlayer:"ctrl-alt"}]},{id:"K_LOPT",text:"*Menu*",sp:"1",width:"150"},{id:"K_SPACE",text:"",width:"570"},{id:"K_BKSP",text:"*BkSp*",sp:"1",width:"150"},{id:"K_ENTER",
text:"*Enter*",sp:"1",width:"200"}]}]}]},phone:{font:"Tahoma,Helvetica",layer:[{id:"default",row:[{id:"0",key:[{id:"K_1"},{id:"K_2"},{id:"K_3"},{id:"K_4"},{id:"K_5"},{id:"K_6"},{id:"K_7"},{id:"K_8"},{id:"K_9"},{id:"K_0"},{id:"K_HYPHEN"},{id:"K_EQUAL"},{sp:"10",width:"1"}]},{id:"1",key:[{id:"K_Q",pad:"25"},{id:"K_W"},{id:"K_E"},{id:"K_R"},{id:"K_T"},{id:"K_Y"},{id:"K_U"},{id:"K_I"},{id:"K_O"},{id:"K_P"},{id:"K_LBRKT"},{id:"K_RBRKT"},{sp:"10",width:"1"}]},{id:"2",key:[{id:"K_A",pad:"50"},{id:"K_S"},
{id:"K_D"},{id:"K_F"},{id:"K_G"},{id:"K_H"},{id:"K_J"},{id:"K_K"},{id:"K_L"},{id:"K_COLON"},{id:"K_QUOTE"},{id:"K_BKSLASH",width:"90"}]},{id:"3",key:[{id:"K_oE2",width:"90"},{id:"K_Z"},{id:"K_X"},{id:"K_C"},{id:"K_V"},{id:"K_B"},{id:"K_N"},{id:"K_M"},{id:"K_COMMA"},{id:"K_PERIOD"},{id:"K_SLASH"},{id:"K_BKQUOTE"},{sp:"10",width:"1"}]},{id:"4",key:[{id:"K_SHIFT",text:"*Shift*",sp:"1",width:"200",sk:[{id:"K_LCONTROL",text:"*Ctrl*",sp:"1",width:"50",nextlayer:"ctrl"},{id:"K_LCONTROL",text:"*LCtrl*",sp:"1",
width:"50",nextlayer:"leftctrl"},{id:"K_RCONTROL",text:"*RCtrl*",sp:"1",width:"50",nextlayer:"rightctrl"},{id:"K_LALT",text:"*Alt*",sp:"1",width:"50",nextlayer:"alt"},{id:"K_LALT",text:"*LAlt*",sp:"1",width:"50",nextlayer:"leftalt"},{id:"K_RALT",text:"*RAlt*",sp:"1",width:"50",nextlayer:"rightalt"},{id:"K_ALTGR",text:"*AltGr*",sp:"1",width:"50",nextlayer:"ctrl-alt"}]},{id:"K_LOPT",text:"*Menu*",width:"150",sp:"1"},{id:"K_SPACE",width:"570",text:""},{id:"K_BKSP",text:"*BkSp*",width:"150",sp:"1"},{id:"K_ENTER",
text:"*Enter*",width:"200",sp:"1"}]}]}]}};return b}();k.Layouts=f})(h.keyboards||(h.keyboards={}))})(e.keyman||(e.keyman={}))})(com||(com={}));
(function(e){(function(e){(function(h){var k=function(){function a(){this.isMnemonic=!1}a.polyfill=function(c,d,b){var g=new a,l;for(l in g)c.hasOwnProperty(l)||(c[l]=g[l]);if(c.sk)for(g=0,l=c.sk;g<l.length;g++)a.polyfill(l[g],d,b);c.displayLayer=b;c.layer=c.layer||b;c.constructBaseKeyEvent(d,b)};a.prototype.constructBaseKeyEvent=function(a,d){var c=this.layer||d||"",b=this.id?this.id.toUpperCase():null;d={Ltarg:null,Lmodifiers:e.text.KeyboardProcessor.getModifierState(c),Lstates:0,Lcode:b?e.text.Codes.keyCodes[b]:
0,LisVirtualKey:!0,vkCode:0,kName:b,kLayer:c,kbdLayer:d,kNextLayer:this.nextlayer,device:null,isSynthetic:!0};a.keyboard&&(c=a.keyboard,!c.isMnemonic||a.isDefault&&"desktop"!=a.formFactor?d.vkCode=d.Lcode:d.Lcode!=e.text.Codes.keyCodes.K_SPACE&&(d.vkCode=d.Lcode,this.isMnemonic=!0),c.definesPositionalOrMnemonic||(d.Lcode=e.KeyMapping._USKeyCodeToCharCode(this.constructKeyEvent(null,null,null)),d.LisVirtualKey=!1));this.baseKeyEvent=d};a.prototype.constructKeyEvent=function(a,d,b){var c=e.utils.deepCopy(this.baseKeyEvent);
c.Ltarg=d;c.device=b;this.isMnemonic&&e.text.KeyboardProcessor.setMnemonicCode(c,-1!=this.layer.indexOf("shift"),a?a.stateKeys.K_CAPS:!1);a&&a.setSyntheticEventDefaults(c);return c};a.DEFAULT_PAD=15;a.DEFAULT_RIGHT_MARGIN=15;a.DEFAULT_KEY_WIDTH=100;a.DEFAULT_KEY={text:"",width:a.DEFAULT_KEY_WIDTH.toString(),sp:"0",pad:a.DEFAULT_PAD.toString()};return a}();h.ActiveKey=k;var f=function(){function a(){}a.polyfill=function(c,d,b,r,e){for(var g=c.key,l=0;l<g.length;l++){var f=g[l],h;for(h in k.DEFAULT_KEY)"string"!=
typeof f[h]&&(f[h]=k.DEFAULT_KEY[h]);switch(f.sp){case "1":a.SPECIAL_LABEL.test(f.text)||""==f.text||(f.sp="3");break;case "2":a.SPECIAL_LABEL.test(f.text)||""==f.text||(f.sp="4")}k.polyfill(f,d,b)}for(l=h=0;l<g.length-1;l++)d=parseInt(g[l].width,10)/r,g[l].widthpc=d,b=parseInt(g[l].pad,10)/r,g[l].padpc=b,g[l].proportionalX=h+b+d/2,g[l].proportionalWidth=d,h+=b+d;var A=k.DEFAULT_RIGHT_MARGIN/r;h+=A;1==g.length&&0>parseInt(g[0].pad,10)?(d=parseInt(g[0].width,10)/r,g[0].widthpc=d,h+=d,g[0].padpc=1-
h,g[0].proportionalX=h-A-d/2,g[0].proportionalWidth=d):0<g.length&&(l=g.length-1,b=parseInt(g[l].pad,10)/r,g[l].padpc=b,g[l].widthpc=d=1-(h+b),g[l].proportionalX=1-A-d/2,g[l].proportionalWidth=d);r=new a;for(f in r)c.hasOwnProperty(f)||(c[f]=r[f]);c.proportionalY=e};a.prototype.populateKeyMap=function(a){this.key.forEach(function(c){c.id&&(a[c.id]=c)})};a.SPECIAL_LABEL=/\*\w+\*/;return a}(),b=function(){function a(){}a.polyfill=function(c,d){c.aligned=!1;for(var b=c.row,g=0,e=0;e<c.row.length;e++){for(var h=
0,n=b[e].key,v=0;v<n.length;v++){var x=n[v];if(null==x)--n.length;else{var p="string"==typeof x.width&&""!=x.width?parseInt(x.width,10):k.DEFAULT_KEY_WIDTH;if(isNaN(p)||0==p)p=k.DEFAULT_KEY_WIDTH;x.width=p.toString();var t="string"==typeof x.pad&&""!=x.pad?parseInt(x.pad,10):k.DEFAULT_PAD;if(isNaN(t)||0==t)t=k.DEFAULT_PAD;x.pad=t.toString();h+=p+t}}h>g&&(g=h)}g="desktop"==d.formFactor?g+5:g+k.DEFAULT_RIGHT_MARGIN;b=c.row.length;for(e=0;e<b;e++)f.polyfill(c.row[e],d,c.id,g,(e+.5)/b);d=new a;for(x in d)c.hasOwnProperty(x)||
(c[x]=d[x]);c.totalWidth=g;c.defaultKeyProportionalWidth=parseInt(k.DEFAULT_KEY.width,10)/g;c.rowProportionalHeight=1/b;c.keyMap=c.constructKeyMap()};a.prototype.constructKeyMap=function(){var a={};this.row.forEach(function(c){c.populateKeyMap(a)});return a};a.prototype.getTouchProbabilities=function(a,d){a=this.simpleTouchDistribution(a,d);d=[];for(var c in a)d.push({keyId:c,p:a[c]});return d.sort(function(a,c){return c.p-a.p})};a.prototype.simpleTouchDistribution=function(a,d){a=this.keyTouchDistances(a,
d);d={};var c=0,b;for(b in a)c+=d[b]=1/(a[b]+1E-6);for(b in d)d[b]/=c;return d};a.prototype.keyTouchDistances=function(a,d){var c=this,b={};this.row.forEach(function(g){g.key.forEach(function(l){if(l.id){var r=Math.abs(a.x-l.proportionalX),e=Math.abs(a.y-g.proportionalY);if(r>.5*l.proportionalWidth){var f=r-.5*l.proportionalWidth;r=.5}else f=0,r/=l.proportionalWidth;if(e>.5*c.rowProportionalHeight){var h=e-.5*c.rowProportionalHeight;e=.5}else h=0,e/=c.rowProportionalHeight;f*=d;f+=r*c.rowProportionalHeight;
h+=e*c.rowProportionalHeight;b[l.id]=f*f+h*h}})});return b};a.prototype.getKey=function(a){0==a.indexOf(this.id+"-")&&(a=a.replace(this.id+"-",""));return this.keyMap[a]};return a}();h.ActiveLayer=b;var a=function(){function a(){}a.prototype.getLayer=function(a){return this.layerMap[a]};a.polyfill=function(c,d,l){if(null==c)throw Error("Cannot build an ActiveLayout for a null specification.");var g,e={};var f=c.layer;for(g=0;g<f.length;g++){var n=f[g];var h=n.row;for(n=h.length;0<n&&!(0<h[n-1].key.length);n--);
n<h.length&&h.splice(n-h.length,h.length-n)}g=new a;for(var k in g)c.hasOwnProperty(k)||(c[k]=g[k]);c.keyboard=d;c.formFactor=l;for(g=0;g<f.length;g++)b.polyfill(f[g],c),e[f[g].id]=f[g];c.layerMap=e;return c};return a}();h.ActiveLayout=a})(e.keyboards||(e.keyboards={}))})(e.keyman||(e.keyman={}))})(com||(com={}));
(function(e){(function(e){(function(e){var h=function(){function b(a){this.id=a}b.prototype.set=function(a){throw Error("System store with ID "+this.id+" may not be directly set.");};return b}();e.SystemStore=h;var f=function(b){function a(a,c){a=b.call(this,a)||this;a.handler=null;a._value=c;return a}__extends(a,b);Object.defineProperty(a.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0});a.prototype.matches=function(a){return this._value==a};a.prototype.set=function(a){this.handler&&
this.handler(this,a)||(this._value=a)};return a}(h);e.MutableSystemStore=f;h=function(b){function a(a){var c=b.call(this,e.KeyboardInterface.TSS_PLATFORM)||this;c.kbdInterface=a;return c}__extends(a,b);a.prototype.matches=function(a){var c=a.split(" "),d=this.kbdInterface.activeDevice;for(a=0;a<c.length;a++){var b=c[a].toLowerCase();switch(b){case "touch":case "hardware":if(d.touchable!=("touch"==b))return!1;break;case "macos":case "mac":b="macosx";case "macosx":case "windows":case "android":case "ios":case "linux":if(d.OS!=
b)return!1;break;case "tablet":case "phone":case "desktop":if(d.formFactor!=b)return!1;break;case "web":if("native"==d.browser)return!1;break;case "native":case "ie":case "chrome":case "firefox":case "safari":case "edge":case "opera":if(d.browser!=b)return!1;break;default:return!1}}return!0};return a}(h);e.PlatformSystemStore=h})(e.text||(e.text={}))})(e.keyman||(e.keyman={}))})(com||(com={}));
(function(e){(function(h){(function(k){var p=function(){return function(){}}();k.KeyInformation=p;(function(){return function(){}})();(function(){return function(){}})();(function(){return function(){}})();(function(){return function(){}})();(function(){return function(){}})();(function(){return function(){}})();var f=function(){function a(){}a.prototype.reset=function(){this._cache=[]};a.prototype.get=function(a,d){return"undefined"==typeof this._cache[a]||"undefined"==typeof this._cache[a][d]?null:
this._cache[a][d]};a.prototype.set=function(a,d,b){"undefined"==typeof this._cache[a]&&(this._cache[a]=[]);this._cache[a][d]=b};return a}(),b=function(){function a(){}a.prototype.reset=function(){this._cache=[]};a.prototype.get=function(a,d){return"undefined"==typeof this._cache[a]||"undefined"==typeof this._cache[a][d]?null:this._cache[a][d]};a.prototype.set=function(a,d,b){"undefined"==typeof this._cache[a]&&(this._cache[a]=[]);this._cache[a][d]=b};return a}(),a=function(){function a(c){void 0===
c&&(c=null);this.cachedContext=new f;this.cachedContextEx=new b;this._AnyIndices=[];this.systemStores={};this.systemStores[a.TSS_PLATFORM]=new k.PlatformSystemStore(this);this.systemStores[a.TSS_LAYER]=new k.MutableSystemStore(a.TSS_LAYER,"default");this.variableStoreSerializer=c}a.prototype.saveFocus=function(){};a.prototype.registerKeyboard=function(a){this.activeKeyboard=new h.keyboards.Keyboard(a)};a.prototype.context=function(a,d,b){var c=this.cachedContext.get(a,d);if(null!==c)return c;b=this.KC_(a,
d,b);this.cachedContext.set(a,d,b);return b};a.prototype.KC_=function(a,d,b){b=b.getTextBeforeCaret();b._kmwLength()<a&&(b=Array(a-b._kmwLength()+1).join("\ufffe")+b);return b._kmwSubstr(-a)._kmwSubstr(0,d)};a.prototype.nul=function(a,d){return"\ufffe"===this.context(a+1,1,d)};a.prototype.contextMatch=function(a,d,b,e){if(this.context(a,e,d)===b)return!0;d.deadkeys().resetMatched();return!1};a.prototype._BuildExtendedContext=function(a,d,b){var c=this.cachedContextEx.get(a,d);if(null!==c)return c;
c=this.cachedContextEx.get(a,a);if(null===c){var g=b.deadkeys().toSortedArray(),l=0;for(c={valContext:[],deadContext:[]};c.valContext.length<a;){var e=b.getDeadkeyCaret()-l;0<g.length&&g[0].p>e?g.splice(0,1):0<g.length&&g[0].p==e?(c.deadContext[a-c.valContext.length-1]=g[0],c.valContext=[g[0].d].concat(c.valContext),g.splice(0,1)):(e=this.context(++l,1,b),c.valContext=[e].concat(c.valContext))}this.cachedContextEx.set(a,a,c)}b=c;b.valContext=b.valContext.slice(0,d);for(c=0;c<b.valContext.length;c++)"\ufffe"==
b[c]&&(b.valContext.splice(0,1),b.deadContext.splice(0,1));0==b.valContext.length&&(b.valContext=["\ufffe"],b.deadContext=[]);this.cachedContextEx.set(a,d,b);return b};a.prototype.fullContextMatch=function(a,d,b){var c=this._BuildExtendedContext(a,b.length,d);a=c.valContext;c=c.deadContext;for(var g=!1,l=0;l<b.length;l++)if("string"==typeof b[l]){if(b[l]!==a[l]){g=!0;break}}else{var e=b[l];switch(e.t){case "d":e.d!==a[l]?g=!0:c[l].set();break;case "a":var f=this.any(l,"string"==typeof a[l]?a[l]:{t:"d",
d:a[l]},e.a);e.n?e.n&&(f||"\ufffe"!==a[l])&&(g=!0):f?void 0!==c[l]&&c[l].set():g=!0;break;case "i":e=this._Index(e.i,e.o);void 0!==e&&("string"==typeof e?e:e.d)!==a[l]?g=!0:void 0!==c[l]&&c[l].set();break;case "c":a[e.c-1]!==a[l]?g=!0:void 0!==c[l]&&c[l].set();break;case "n":"\ufffe"!=a[l]&&(g=!0);break;default:throw Error("Unexpected object in fullContextMatch specification: "+e);}}g&&(d.deadkeys().resetMatched(),this._AnyIndices=[]);return!g};a.prototype.isKeypress=function(a){return this.activeKeyboard.isMnemonic?
!a.LisVirtualKey:h.KeyMapping._USKeyCodeToCharCode(a)?!0:!1};a.prototype.keyMatch=function(a,d,b){var c=!1,g=173==a.Lcode?189:a.Lcode,l=this.activeKeyboard.modifierBitmask,n=e.keyman.text.Codes,f=l&n.modifierBitmasks.ALL;l&=n.stateBitmasks.ALL;255<a.vkCode&&(g=a.vkCode);if(a.LisVirtualKey||255<g){if(16384==(d&16384)||255<g)c=(c=b==g&&(d&f)==a.Lmodifiers)&&this.stateMatch(a,d&l)}else 0==(d&16384)&&(c=g==b);c||this.activeTargetOutput.deadkeys().resetMatched();return c};a.prototype.stateMatch=function(a,
d){return(d&a.Lstates)==d};a.prototype.keyInformation=function(a){var c=new p;c.vk=a.LisVirtualKey;c.code=a.Lcode;c.modifiers=a.Lmodifiers;return c};a.prototype.deadkeyMatch=function(a,d,b){return d.hasDeadkeyMatch(a,b)};a.prototype.beep=function(a){this.resetContextCache();this.ruleBehavior.beep=!0};a.prototype._ExplodeStore=function(a){if("string"==typeof a){var c=this.activeKeyboard.explodedStores;if(c[a])return c[a];for(var d=[],b=0;b<a._kmwLength();b++)d.push(a._kmwCharAt(b));return c[a]=d}return a};
a.prototype.any=function(a,d,b){if(""==d)return!1;b=this._ExplodeStore(b);for(var c=-1,g=0;g<b.length;g++)if("string"==typeof b[g]){if(b[g]==d){c=g;break}}else if(b[g].d===d.d){c=g;break}this._AnyIndices[a]=c;return 0<=c};a.prototype._Index=function(a,d){a=this._ExplodeStore(a);if(this._AnyIndices[d-1]<a.length)return a[this._AnyIndices[d-1]];console.warn("Unmatched contextual index() statement detected in rule with index "+d+"!");return""};a.prototype.indexOutput=function(a,d,b,e){this.resetContextCache();
d=this._Index(d,b);if(""!==d)if("string"==typeof d)this.output(a,e,d);else if(d.t)switch(d.t){case "b":this.beep(e);break;case "d":this.deadkeyOutput(a,e,d.d);break;default:throw Error("Unexpected object in fullContextMatch specification: "+d);}else this.deadkeyOutput(a,e,d.d)};a.prototype.deleteContext=function(a,d){if(0<a){var c=this._BuildExtendedContext(a,a,d);for(var b=0,g=0;g<c.valContext.length;g++){var e=c.deadContext[g];e?(d.deadkeys().remove(e),a--):"\ufffe"==c.valContext[g]&&b++}c=c.valContext.length-
b;a>c&&(a=c)}d.deadkeys().resetMatched();this.output(a,d,"")};a.prototype.output=function(a,d,b){this.resetContextCache();d.saveProperties();d.clearSelection();d.deadkeys().deleteMatched();0<=a&&d.deleteCharsBeforeCaret(a);d.insertTextBeforeCaret(b);d.restoreProperties()};a.prototype.deadkeyOutput=function(a,d,b){this.resetContextCache();0<=a&&this.output(a,d,"");d.insertDeadkeyBeforeCaret(b)};a.prototype.ifStore=function(a,d,b){b=!0;(a=this.systemStores[a])&&(b=a.matches(d));return b};a.prototype.setStore=
function(c,d,b){this.resetContextCache();if(c==a.TSS_LAYER)this.ruleBehavior.setStore[c]=d;else return!1};a.prototype.loadStore=function(a,d,b){this.resetContextCache();return this.variableStoreSerializer?this.variableStoreSerializer.loadStore(a,d)[d]||b:b};a.prototype.saveStore=function(a,d){this.resetContextCache();var c=this.activeKeyboard;if(!c||"undefined"==typeof c.id||""==c.id)return!1;c={};c[a]=d;this.ruleBehavior?this.ruleBehavior.saveStore[a]=c:this.variableStoreSerializer.saveStore(this.activeKeyboard.id,
a,c);return!0};a.prototype.resetContextCache=function(){this.cachedContext.reset();this.cachedContextEx.reset()};a.prototype.defaultBackspace=function(a){this.output(1,a,"")};a.prototype.processKeystroke=function(a,d){if(!a)throw"No target specified for keyboard output!";if(!this.activeKeyboard)throw"No active keyboard for keystroke processing!";a.invalidateSelection();a.deadkeys().resetMatched();this.resetContextCache();var c=k.Mock.from(a);this.ruleBehavior=new k.RuleBehavior;this.activeDevice=
d.device;this.activeTargetOutput=a;var b=this.activeKeyboard.process(a,d);this.activeTargetOutput=null;if(!b)return null;this.ruleBehavior.transcription=a.buildTranscriptionFrom(c,d);a=this.ruleBehavior;this.ruleBehavior=null;return a};a.__publishShorthandAPI=function(){var a=this.prototype,d=function(c,d){a[c]=a[d]};d("KSF","saveFocus");d("KBR","beepReset");d("KT","insertText");d("KR","registerKeyboard");d("KRS","registerStub");d("KC","context");d("KN","nul");d("KCM","contextMatch");d("KFCM","fullContextMatch");
d("KIK","isKeypress");d("KKM","keyMatch");d("KSM","stateMatch");d("KKI","keyInformation");d("KDM","deadkeyMatch");d("KB","beep");d("KA","any");d("KDC","deleteContext");d("KO","output");d("KDO","deadkeyOutput");d("KIO","indexOutput");d("KIFS","ifStore");d("KSETS","setStore");d("KLOAD","loadStore");d("KSAVE","saveStore")};a.GLOBAL_NAME="KeymanWeb";a.TSS_LAYER=33;a.TSS_PLATFORM=31;return a}();k.KeyboardInterface=a;a.__publishShorthandAPI()})(h.text||(h.text={}))})(e.keyman||(e.keyman={}))})(com||(com=
{}));
(function(e){(function(e){(function(h){var k=function(){return function(){this.stores={}}}(),f;(function(a){a[a.NOT_LOADED=void 0]="NOT_LOADED";a[a.POLYFILLED=1]="POLYFILLED";a[a.CALIBRATED=2]="CALIBRATED"})(f=h.LayoutState||(h.LayoutState={}));var b=function(){function a(d){this.scriptObject=d?d:a.DEFAULT_SCRIPT_OBJECT;this.layoutStates={}}a.prototype.process=function(a,c){return this.scriptObject.gs(a,c)};Object.defineProperty(a.prototype,"isHollow",{get:function(){return this.scriptObject==a.DEFAULT_SCRIPT_OBJECT},
enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"id",{get:function(){return this.scriptObject.KI},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"name",{get:function(){return this.scriptObject.KN},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"displaysUnderlyingKeys",{get:function(){return!!this.scriptObject.KDU},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"_legacyLayoutSpec",{get:function(){return this.scriptObject.KV},
enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"_layouts",{get:function(){return this.scriptObject.KVKL},set:function(a){this.scriptObject.KVKL=a},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"compilerVersion",{get:function(){return new e.utils.Version(this.scriptObject.KVER)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"isMnemonic",{get:function(){return!!this.scriptObject.KM},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,
"definesPositionalOrMnemonic",{get:function(){return"undefined"!=typeof this.scriptObject.KM},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"helpText",{get:function(){return this.scriptObject.KH},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"hasHelpHTML",{get:function(){return!!this.scriptObject.KHF},enumerable:!0,configurable:!0});a.prototype.insertHelpHTML=function(a){this.scriptObject.KHF(a)};Object.defineProperty(a.prototype,"oskStyling",{get:function(){return this.scriptObject.KCSS},
enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"isCJK",{get:function(){var a;"undefined"!=typeof this.scriptObject.KLC?a=this.scriptObject.KLC:"undefined"!=typeof this.scriptObject.LanguageCode&&(a=this.scriptObject.LanguageCode);return"cmn"==a||"jpn"==a||"kor"==a},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"isRTL",{get:function(){return!!this.scriptObject.KRTL},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"modifierBitmask",{get:function(){return this.scriptObject.KMBM||
e.text.Codes.modifierBitmasks.NON_CHIRAL},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"isChiral",{get:function(){return!!(this.modifierBitmask&e.text.Codes.modifierBitmasks.IS_CHIRAL)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"desktopFont",{get:function(){return this.scriptObject.KV?this.scriptObject.KV.F:null},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"cacheTag",{get:function(){var a=this.scriptObject._kmw;a||(a=new k,this.scriptObject._kmw=
a);return a},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"explodedStores",{get:function(){return this.cacheTag.stores},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"emulatesAltGr",{get:function(){var a=e.text.Codes.modifierCodes;if(!this.isChiral||null==this._legacyLayoutSpec)return!1;var c=this._legacyLayoutSpec.KLS;if(!c)return!1;var b=a.LCTRL|a.LALT,l=c[h.Layouts.getLayerId(b)];b=c[h.Layouts.getLayerId(a.SHIFT|b)];return null!=l&&l!=c[h.Layouts.getLayerId(a.RALT)]||
null!=b&&b!=c[h.Layouts.getLayerId(a.RALT|a.SHIFT)]?!1:!0},enumerable:!0,configurable:!0});a.prototype.usesDesktopLayoutOnDevice=function(a){return this.scriptObject.KVKL?a.formFactor==e.utils.FormFactor.Desktop:!0};a.prototype.notify=function(a,c,b){"function"==typeof this.scriptObject.KNS&&this.scriptObject.KNS(a,c,b)};a.prototype.findOrConstructLayout=function(a){if(this._layouts){if(void 0!==this._layouts[a])return this._layouts[a];if(a==e.utils.FormFactor.Phone&&this._layouts[e.utils.FormFactor.Tablet])return this._layouts[e.utils.FormFactor.Phone]=
this._layouts[e.utils.FormFactor.Tablet];if(a==e.utils.FormFactor.Tablet&&this._layouts[e.utils.FormFactor.Phone])return this._layouts[e.utils.FormFactor.Tablet]=this._layouts[e.utils.FormFactor.Phone]}var c=null;if(null!=this._legacyLayoutSpec&&this._legacyLayoutSpec.KLS)c=this._legacyLayoutSpec;else if(null!=this._legacyLayoutSpec&&null!=this._legacyLayoutSpec.BK)for(var d=this._legacyLayoutSpec.BK,b=0;b<d.length;b++)if(0<d[b].length){c=this._legacyLayoutSpec;break}c||""!=this.helpText&&a==e.utils.FormFactor.Desktop||
(c={F:"Tahoma",BK:h.Layouts.dfltText});this._layouts||(this._layouts={});return c?(a=this._layouts[a]=h.Layouts.buildDefaultLayout(c,this,a),a.isDefault=!0,a):this._layouts[a]=null};a.prototype.layout=function(a){var c=this.findOrConstructLayout(a);return c?(this.layoutStates[a]==f.NOT_LOADED&&(c=h.ActiveLayout.polyfill(c,this,a),this.layoutStates[a]=f.POLYFILLED),c):null};a.prototype.markLayoutCalibrated=function(a){this.layoutStates[a]!=f.NOT_LOADED&&(this.layoutStates[a]=f.CALIBRATED)};a.prototype.getLayoutState=
function(a){return this.layoutStates[a]};a.DEFAULT_SCRIPT_OBJECT={gs:function(a,c){return!1},KI:"",KN:"",KV:h.Layouts.DEFAULT_RAW_SPEC,KM:0};return a}();h.Keyboard=b})(e.keyboards||(e.keyboards={}))})(e.keyman||(e.keyman={}))})(com||(com={}));
(function(e){(function(e){var h=function(){return function(){}}(),p=function(){return function(){this.FF=new h;this.Safari=new h;this.Opera=new h;this.FF.k61=187;this.FF.k59=186}}(),f=function(){return function(){this.se=new h;this.se.k220=192;this.se.k187=189;this.se.k219=187;this.se.k221=219;this.se.k186=221;this.se.k191=220;this.se.k192=186;this.se.k189=191;this.uk=new h;this.uk.k223=192;this.uk.k192=222;this.uk.k222=226;this.uk.k220=220}}(),b=function(){function a(){}a._usCodeInit=function(){var d=
new h,c=new h;d.k192=96;d.k49=49;d.k50=50;d.k51=51;d.k52=52;d.k53=53;d.k54=54;d.k55=55;d.k56=56;d.k57=57;d.k48=48;d.k189=45;d.k187=61;d.k81=113;d.k87=119;d.k69=101;d.k82=114;d.k84=116;d.k89=121;d.k85=117;d.k73=105;d.k79=111;d.k80=112;d.k219=91;d.k221=93;d.k220=92;d.k65=97;d.k83=115;d.k68=100;d.k70=102;d.k71=103;d.k72=104;d.k74=106;d.k75=107;d.k76=108;d.k186=59;d.k222=39;d.k90=122;d.k88=120;d.k67=99;d.k86=118;d.k66=98;d.k78=110;d.k77=109;d.k188=44;d.k190=46;d.k191=47;c.k192=126;c.k49=33;c.k50=64;c.k51=
35;c.k52=36;c.k53=37;c.k54=94;c.k55=38;c.k56=42;c.k57=40;c.k48=41;c.k189=95;c.k187=43;c.k81=81;c.k87=87;c.k69=69;c.k82=82;c.k84=84;c.k89=89;c.k85=85;c.k73=73;c.k79=79;c.k80=80;c.k219=123;c.k221=125;c.k220=124;c.k65=65;c.k83=83;c.k68=68;c.k70=70;c.k71=71;c.k72=72;c.k74=74;c.k75=75;c.k76=76;c.k186=58;c.k222=34;c.k90=90;c.k88=88;c.k67=67;c.k86=86;c.k66=66;c.k78=78;c.k77=77;c.k188=60;c.k190=62;c.k191=63;a._usCharCodes=[d,c]};a._USKeyCodeToCharCode=function(d){return a.usCharCodes[d.Lmodifiers&16?1:0]["k"+
d.Lcode]};Object.defineProperty(a,"usCharCodes",{get:function(){a._usCharCodes||a._usCodeInit();return a._usCharCodes},enumerable:!0,configurable:!0});a.browserMap=new p;a.languageMap=new f;return a}();e.KeyMapping=b})(e.keyman||(e.keyman={}))})(com||(com={}));
(function(e){(function(e){(function(h){var k=function(){function f(b){this.stateKeys={K_CAPS:!1,K_NUMLOCK:!1,K_SCROLL:!1};this.modStateFlags=0;b||(b=f.DEFAULT_OPTIONS);this.baseLayout=b.baseLayout||f.DEFAULT_OPTIONS.baseLayout;this.keyboardInterface=new h.KeyboardInterface(b.variableStoreSerializer);this.installInterface()}f.prototype.installInterface=function(){e.utils.getGlobalObject()[h.KeyboardInterface.GLOBAL_NAME]=this.keyboardInterface;this.activeKeyboard&&(this.keyboardInterface.activeKeyboard=
this.activeKeyboard)};Object.defineProperty(f.prototype,"activeKeyboard",{get:function(){return this.keyboardInterface.activeKeyboard},set:function(b){this.keyboardInterface.activeKeyboard=b;this.resetContext()},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"layerStore",{get:function(){return this.keyboardInterface.systemStores[h.KeyboardInterface.TSS_LAYER]},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"layerId",{get:function(){return this.layerStore.value},
set:function(b){this.layerStore.set(b)},enumerable:!0,configurable:!0});f.prototype.defaultRuleBehavior=function(b){var a=b.Ltarg,d=h.Mock.from(a),c=new h.RuleBehavior,g=!1,l;if(b.isSynthetic||a.isSynthetic)if(g=!0,h.DefaultOutput.isCommand(b))c.triggersDefaultCommand=!0;else if(null!=(l=h.DefaultOutput.forSpecialEmulation(b)))switch(l){case h.EmulationKeystrokes.Backspace:this.keyboardInterface.defaultBackspace(a);break;case h.EmulationKeystrokes.Enter:a.handleNewlineAtCaret();break;case h.EmulationKeystrokes.Space:this.keyboardInterface.output(0,
a," ");break;default:c.errorLog="Unexpected 'special emulation' character (\\u"+l.kmwCharCodeAt(0).toString(16)+") went unhandled!"}else g=!1;l=this.activeKeyboard&&this.activeKeyboard.isMnemonic;if(!g)if(null!=(g=h.DefaultOutput.forAny(b,l)))if(l=h.DefaultOutput.forSpecialEmulation(b),l==h.EmulationKeystrokes.Backspace)this.keyboardInterface.defaultBackspace(b.Ltarg);else{if(l||h.DefaultOutput.isCommand(b))return null;this.keyboardInterface.output(0,a,g)}else return null;if(c.errorLog)return c;b=
a.buildTranscriptionFrom(d,b);c.transcription=b;return c};f.prototype.setSyntheticEventDefaults=function(b){b.Lstates|=this.stateKeys.K_CAPS?h.Codes.modifierCodes.CAPS:h.Codes.modifierCodes.NO_CAPS;b.Lstates|=this.stateKeys.K_NUMLOCK?h.Codes.modifierCodes.NUM_LOCK:h.Codes.modifierCodes.NO_NUM_LOCK;b.Lstates|=this.stateKeys.K_SCROLL?h.Codes.modifierCodes.SCROLL_LOCK:h.Codes.modifierCodes.NO_SCROLL_LOCK;"U_"==b.kName.substr(0,2)&&(b.LisVirtualKey=!1);"undefined"==typeof b.Lcode&&(b.Lcode=this.getVKDictionaryCode(b.kName),
b.Lcode||(b.Lcode=1));(b.Lmodifiers&h.Codes.modifierBitmasks.ALT_GR_SIM)==h.Codes.modifierBitmasks.ALT_GR_SIM&&this.activeKeyboard.emulatesAltGr&&(b.Lmodifiers&=~h.Codes.modifierBitmasks.ALT_GR_SIM,b.Lmodifiers|=h.Codes.modifierCodes.RALT)};f.prototype.processKeystroke=function(b,a){if(this.activeKeyboard&&0!=b.Lcode){this.installInterface();var d=this.keyboardInterface.processKeystroke(a,b)}d||(b.Lcode=b.vkCode||b.Lcode,this.keyboardInterface.activeTargetOutput=a,d=this.defaultRuleBehavior(b),this.keyboardInterface.activeTargetOutput=
null);return d};f.setMnemonicCode=function(b,a,d){if(b.Lcode!=h.Codes.keyCodes.K_SPACE){var c=new h.KeyEvent,g;for(g in b)c[g]=b[g];c.kName="K_xxxx";c.Ltarg=new h.Mock;c.Lmodifiers=a?16:0;a=h.DefaultOutput.forAny(c,!0);b.vkCode=b.Lcode;a?b.Lcode=a.charCodeAt(0):delete b.Lcode}d&&(65<=b.Lcode&&90>=b.Lcode||97<=b.Lcode&&122>=b.Lcode)&&(b.Lmodifiers^=16,b.Lcode^=32)};f.getModifierState=function(b){var a=0;0<=b.indexOf("shift")&&(a|=h.Codes.modifierCodes.SHIFT);var d=!1;0<=b.indexOf("leftctrl")&&(a|=
h.Codes.modifierCodes.LCTRL,d=!0);0<=b.indexOf("rightctrl")&&(a|=h.Codes.modifierCodes.RCTRL,d=!0);0<=b.indexOf("ctrl")&&!d&&(a|=h.Codes.modifierCodes.CTRL);d=!1;0<=b.indexOf("leftalt")&&(a|=h.Codes.modifierCodes.LALT,d=!0);0<=b.indexOf("rightalt")&&(a|=h.Codes.modifierCodes.RALT,d=!0);0<=b.indexOf("alt")&&!d&&(a|=h.Codes.modifierCodes.ALT);return a};f.prototype.getVKDictionaryCode=function(b){var a=this.activeKeyboard;if(!a.scriptObject.VKDictionary){var d=[];if("string"==typeof a.scriptObject.KVKD)for(var c=
a.scriptObject.KVKD.split(" "),g=0;g<c.length;g++)d[c[g].toUpperCase()]=g+256;a.scriptObject.VKDictionary=d}return(b=a.scriptObject.VKDictionary[b.toUpperCase()])?b:0};f.prototype._UpdateVKShift=function(b,a,d){var c=0,g=["CAPS","NUM_LOCK","SCROLL_LOCK"],l=["K_CAPS","K_NUMLOCK","K_SCROLL"];if(!this.activeKeyboard)return!0;if(b)for(c=b.Lmodifiers,a=b.Lstates,this.activeKeyboard.isChiral&&this.activeKeyboard.emulatesAltGr&&(this.modStateFlags&h.Codes.modifierBitmasks.ALT_GR_SIM)==h.Codes.modifierBitmasks.ALT_GR_SIM&&
(c|=h.Codes.modifierBitmasks.ALT_GR_SIM,c&=~h.Codes.modifierCodes.RALT),b=0;b<g.length;b++)a&h.Codes.stateBitmasks[g[b]]&&(this.stateKeys[l[b]]=a&h.Codes.modifierCodes[g[b]]);else if(d)for(c|=a,b=0;b<g.length;b++)a&h.Codes.stateBitmasks[g[b]]&&(this.stateKeys[l[b]]=!0);else for(c&=~a,b=0;b<g.length;b++)a&h.Codes.stateBitmasks[g[b]]&&(this.stateKeys[l[b]]=!1);this.layerId=this.getLayerId(c);return!0};f.prototype.getLayerId=function(b){return e.keyboards.Layouts.getLayerId(b)};f.prototype.selectLayer=
function(b,a){void 0===a&&(a=!1);var d=b.kName;a=a?null:b.kNextLayer;var c=this.activeKeyboard&&this.activeKeyboard.isChiral;"number"==typeof a&&(a=this.getLayerId(16*a));if(!a)switch(d){case "K_LSHIFT":case "K_RSHIFT":case "K_SHIFT":a="shift";break;case "K_LCONTROL":case "K_LCTRL":if(c){a="leftctrl";break}case "K_RCONTROL":case "K_RCTRL":if(c){a="rightctrl";break}case "K_CTRL":a="ctrl";break;case "K_LMENU":case "K_LALT":if(c){a="leftalt";break}case "K_RMENU":case "K_RALT":if(c){a="rightalt";break}case "K_ALT":a=
"alt";break;case "K_ALTGR":a=c?"leftctrl-rightalt":"ctrl-alt";break;case "K_CURRENCIES":case "K_NUMERALS":case "K_SHIFTED":case "K_UPPER":case "K_LOWER":case "K_SYMBOLS":a="default"}if(!a)return!1;this.updateLayer(b,a);return!0};f.prototype.updateLayer=function(b,a){var d=this.layerId,c=d;if(a==d&&b.device.formFactor!=e.utils.FormFactor.Desktop)return!1;var g=a,l;if(b.device.formFactor==e.utils.FormFactor.Desktop){var r="leftctrl rightctrl ctrl leftalt rightalt alt shift".split(" ");for(l=0;l<r.length;l++)g=
g.replace(r[l]+"-",""),g=g.replace(r[l],"");if("default"==d||"numeric"==d||"symbol"==d||"currency"==d||""!=g)c=a;else{d=f.getModifierState(c);for(l=0;l<r.length;l++)c=c.replace(r[l]+"-",""),c=c.replace(r[l],"");switch(a){case "shift":d^=h.Codes.modifierCodes.SHIFT;break;case "leftctrl":d^=h.Codes.modifierCodes.LCTRL;break;case "rightctrl":d^=h.Codes.modifierCodes.RCTRL;break;case "ctrl":d^=h.Codes.modifierCodes.CTRL;break;case "leftalt":d^=h.Codes.modifierCodes.LALT;break;case "rightalt":d^=h.Codes.modifierCodes.RALT;
break;case "alt":d^=h.Codes.modifierCodes.ALT;break;default:c=a}"default"!=c&&(c=""==c?this.getLayerId(d):this.getLayerId(d)+"-"+c)}""==c&&(c="default")}else c=a;this.activeKeyboard.layout(b.device.formFactor).getLayer(c)?this.layerId=c:this.layerId="default"};f.prototype.doModifierPress=function(b,a){var d=b.Ltarg;if(!this.activeKeyboard)return!1;switch(b.Lcode){case 8:d.deadkeys().clear();break;case 16:case 17:case 18:case 20:case 144:case 145:return this.activeKeyboard.notify(b.Lcode,d,a?1:0),
b.device.touchable?!0:this._UpdateVKShift(b,b.Lcode-15,1)}b.LmodifierChange&&(this.activeKeyboard.notify(0,d,1),this._UpdateVKShift(b,0,1));return!1};f.prototype.resetContext=function(){this.layerId="default";this.keyboardInterface.resetContextCache();this._UpdateVKShift(null,15,0)};f.prototype.setNumericLayer=function(b){this.activeKeyboard.layout(b.formFactor).getLayer("numeric")&&(this.layerId="numeric")};f.DEFAULT_OPTIONS={baseLayout:"us"};return f}();h.KeyboardProcessor=k})(e.text||(e.text={}))})(e.keyman||
(e.keyman={}))})(com||(com={}));(function(){var e=com.keyman.text;"undefined"!==typeof module&&"undefined"!==typeof module.exports&&(module.exports=e.KeyboardProcessor,e.KeyboardProcessor.com=com)})();
function LMLayerWorkerCode(){String.prototype.codePointAt||function(){var a=function(){try{var a={},d=Object.defineProperty,b=d(a,a,a)&&d}catch(r){}return b}(),d=function(a){if(null==this)throw TypeError();var c=String(this),d=c.length,b=a?Number(a):0;b!=b&&(b=0);if(!(0>b||b>=d))return a=c.charCodeAt(b),55296<=a&&56319>=a&&d>b+1&&(c=c.charCodeAt(b+1),56320<=c&&57343>=c)?1024*(a-55296)+c-56320+65536:a};a?a(String.prototype,"codePointAt",{value:d,configurable:!0,writable:!0}):String.prototype.codePointAt=
d}();String.prototype.startsWith||function(){var a=function(){try{var a={},c=Object.defineProperty,d=c(a,a,a)&&c}catch(A){}return d}(),d={}.toString,c=function(a){if(null==this)throw TypeError();var c=String(this);if(a&&"[object RegExp]"==d.call(a))throw TypeError();var b=c.length,g=String(a),e=g.length,n=1<arguments.length?arguments[1]:void 0;n=n?Number(n):0;n!=n&&(n=0);n=Math.min(Math.max(n,0),b);if(e+n>b)return!1;for(b=-1;++b<e;)if(c.charCodeAt(n+b)!=g.charCodeAt(b))return!1;return!0};a?a(String.prototype,
"startsWith",{value:c,configurable:!0,writable:!0}):String.prototype.startsWith=c}();Array.from||(Array.from=function(){var a=Object.prototype.toString,d=function(c){return"function"===typeof c||"[object Function]"===a.call(c)},c=Math.pow(2,53)-1;return function(a){var b=Object(a);if(null==a)throw new TypeError("Array.from requires an array-like object - not null or undefined");var g=1<arguments.length?arguments[1]:void 0,e;if("undefined"!==typeof g){if(!d(g))throw new TypeError("Array.from: when provided, the second argument must be a function");
2<arguments.length&&(e=arguments[2])}var f=Number(b.length);f=isNaN(f)?0:0!==f&&isFinite(f)?(0<f?1:-1)*Math.floor(Math.abs(f)):f;f=Math.min(Math.max(f,0),c);for(var n=d(this)?Object(new this(f)):Array(f),h=0,k;h<f;)k=b[h],n[h]=g?"undefined"===typeof e?g(k,h):g.call(e,k,h):k,h+=1;n.length=f;return n}}());var e;(function(a){(function(a){(function(a){function c(a,d){d=d||{};for(var b in a)"object"===typeof a[b]&&null!=a[b]?(d[b]=a[b].constructor===Array?[]:{},c(a[b],d[b])):d[b]=a[b];return d}a.deepCopy=
c})(a.utils||(a.utils={}))})(a.keyman||(a.keyman={}))})(e||(e={}));(function(a){(function(a){(function(a){a.getGlobalObject=function(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof self?self:global}})(a.utils||(a.utils={}))})(a.keyman||(a.keyman={}))})(e||(e={}));(function(a){a=a.keyman||(a.keyman={});a=a.environment||(a.environment={});a.VERSION="14.0";a.BUILD=90;a.SENTRY_RELEASE="release-14.0.90-alpha"})(e||(e={}));(function(a){(function(d){(function(c){var d=
function(){function c(a){if(void 0===a||null===a)this.components=[].concat(c.DEVELOPER_VERSION_FALLBACK.components);else if(Array.isArray(a)){if(2>a.length)throw Error("Version string must have at least a major and minor component!");this.components=[].concat(a)}else{a=a.split(".");var d=[];if(2>a.length)throw Error("Version string must have at least a major and minor component!");for(var b=0;b<a.length;b++){var g=parseInt(a[b],10);if(isNaN(g))throw Error("Version string components must be numerical!");
d.push(g)}this.components=d}}Object.defineProperty(c.prototype,"major",{get:function(){return this.components[0]},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"minor",{get:function(){return this.components[1]},enumerable:!0,configurable:!0});c.prototype.toString=function(){return this.components.join(".")};c.prototype.toJSON=function(){return this.toString()};c.prototype.equals=function(a){return 0==this.compareTo(a)};c.prototype.precedes=function(a){return 0>this.compareTo(a)};
c.prototype.compareTo=function(a){var c=this.components.length<a.components.length,d=this.components.length<a.components.length?this.components.length:a.components.length,b;for(b=0;b<d;b++){var g=this.components[b]-a.components[b];if(0!=g)return g}a=c?a.components:this.components;do{if(0<a[b])return c?-1:1;b++}while(b<a.length);return 0};c.CURRENT=new c(a.keyman.environment.VERSION);c.DEVELOPER_VERSION_FALLBACK=new c([9,0,0]);c.NO_DEFAULT_KEYCAPS=new c([12,0]);c.MAC_POSSIBLE_IPAD_ALIAS=new c([10,
15]);return c}();c.Version=d})(d.utils||(d.utils={}))})(a.keyman||(a.keyman={}))})(e||(e={}));String.kmwFromCharCode=function(a){var d=[],c;for(c=0;c<arguments.length;c++){var b=Number(arguments[c]);if(!isFinite(b)||0>b||1114111<b||Math.floor(b)!==b)throw new RangeError("Invalid code point "+b);65536>b?d.push(b):(b-=65536,d.push((b>>10)+55296),d.push(b%1024+56320))}return String.fromCharCode.apply(void 0,d)};String.prototype.kmwCharCodeAt=function(a){var d=String(this),c=0;if(0>a||a>=d.length)return NaN;
for(var b=0;b<a;b++)if(c=d.kmwNextChar(c),null===c)return NaN;a=d.charCodeAt(c);return 55296<=a&&56319>=a&&d.length>c+1&&(d=d.charCodeAt(c+1),56320<=d&&57343>=d)?(a-55296<<10)+(d-56320)+65536:a};String.prototype.kmwIndexOf=function(a,d){var c=String(this);a=c.indexOf(a,d);if(0>a)return a;for(var b=d=0;null!==b&&b<a;b=c.kmwNextChar(b))d++;return d};String.prototype.kmwLastIndexOf=function(a,d){var c=String(this);a=c.lastIndexOf(a,d);if(0>a)return a;for(var b=d=0;null!==b&&b<a;b=c.kmwNextChar(b))d++;
return d};String.prototype.kmwLength=function(){var a=String(this);if(0==a.length)return 0;for(var d=0,c=0;null!==c;d++)c=a.kmwNextChar(c);return d};String.prototype.kmwSlice=function(a,d){var c=String(this);a=c.kmwCodePointToCodeUnit(a);d=c.kmwCodePointToCodeUnit(d);return null===a||null===d?"":c.slice(a,d)};String.prototype.kmwSubstr=function(a,d){var c=String(this);0>a&&(a=c.kmwLength()+a);0>a&&(a=0);var b=c.kmwCodePointToCodeUnit(a),l=b;if(null===b)return"";if(2>arguments.length)l=c.length;else for(var e=
0;e<d;e++)l=c.kmwNextChar(l);return null===l?c.substring(b):c.substring(b,l)};String.prototype.kmwSubstring=function(a,d){var c=String(this);if("undefined"==typeof d)a=c.kmwCodePointToCodeUnit(a),d=c.length;else{if(a>d){var b=a;a=d;d=b}a=c.kmwCodePointToCodeUnit(a);d=c.kmwCodePointToCodeUnit(d)}if(isNaN(a)||null===a)a=0;if(isNaN(d)||null===d)d=c.length;return c.substring(a,d)};String.prototype.kmwNextChar=function(a){var d=String(this);if(null===a||0>a||a>=d.length-1)return null;var c=d.charCodeAt(a);
return 55296<=c&&56319>=c&&d.length>a+1&&(c=d.charCodeAt(a+1),56320<=c&&57343>=c)?a==d.length-2?null:a+2:a+1};String.prototype.kmwPrevChar=function(a){var d=String(this);if(null==a||0>=a||a>d.length)return null;var c=d.charCodeAt(a-1);return 56320<=c&&57343>=c&&1<a&&(d=d.charCodeAt(a-2),55296<=d&&56319>=d)?a-2:a-1};String.prototype.kmwCodePointToCodeUnit=function(a){if(null===a)return null;var d=String(this),c=0;if(0>a){c=d.length;for(var b=0;b>a;b--)c=d.kmwPrevChar(c);return c}if(a==d.kmwLength())return d.length;
for(b=0;b<a;b++)c=d.kmwNextChar(c);return c};String.prototype.kmwCodeUnitToCodePoint=function(a){var b=String(this);return null===a?null:0==a?0:0>a?b.substr(a).kmwLength():b.substr(0,a).kmwLength()};String.prototype.kmwCharAt=function(a){var b=String(this);return 0<=a?b.kmwSubstr(a,1):""};String.prototype.kmwBMPNextChar=function(a){var b=String(this);return 0>a||a>=b.length-1?null:a+1};String.prototype.kmwBMPPrevChar=function(a){var b=String(this);return 0>=a||a>b.length?null:a-1};String.prototype.kmwBMPCodePointToCodeUnit=
function(a){return a};String.prototype.kmwBMPCodeUnitToCodePoint=function(a){return a};String.prototype.kmwBMPLength=function(){return String(this).length};String.prototype.kmwBMPSubstr=function(a,b){var c=String(this);return-1<a?c.substr(a,b):c.substr(c.length+a,-a)};String.kmwEnableSupplementaryPlane=function(a){var b=String.prototype;String._kmwFromCharCode=a?String.kmwFromCharCode:String.fromCharCode;b._kmwCharAt=a?b.kmwCharAt:b.charAt;b._kmwCharCodeAt=a?b.kmwCharCodeAt:b.charCodeAt;b._kmwIndexOf=
a?b.kmwIndexOf:b.indexOf;b._kmwLastIndexOf=a?b.kmwLastIndexOf:b.lastIndexOf;b._kmwSlice=a?b.kmwSlice:b.slice;b._kmwSubstring=a?b.kmwSubstring:b.substring;b._kmwSubstr=a?b.kmwSubstr:b.kmwBMPSubstr;b._kmwLength=a?b.kmwLength:b.kmwBMPLength;b._kmwNextChar=a?b.kmwNextChar:b.kmwBMPNextChar;b._kmwPrevChar=a?b.kmwPrevChar:b.kmwBMPPrevChar;b._kmwCodePointToCodeUnit=a?b.kmwCodePointToCodeUnit:b.kmwBMPCodePointToCodeUnit;b._kmwCodeUnitToCodePoint=a?b.kmwCodeUnitToCodePoint:b.kmwBMPCodeUnitToCodePoint};(function(a){(function(a){(function(a){var c;
(function(a){a.Chrome="chrome";a.Edge="edge";a.Firefox="firefox";a.Native="native";a.Opera="opera";a.Safari="safari";a.Other="other"})(c=a.Browser||(a.Browser={}));var b;(function(a){a.Windows="windows";a.macOS="macosx";a.Linux="linux";a.Android="android";a.iOS="ios";a.Other="other"})(b=a.OperatingSystem||(a.OperatingSystem={}));var d;(function(a){a.Desktop="desktop";a.Phone="phone";a.Tablet="tablet"})(d=a.FormFactor||(a.FormFactor={}));var e=function(){return function(a,g,l,e){switch(a.toLowerCase()){case c.Chrome:case c.Edge:case c.Firefox:case c.Native:case c.Opera:case c.Safari:this.browser=
a.toLowerCase();break;default:this.browser=c.Other}switch(g.toLowerCase()){case d.Desktop:case d.Phone:case d.Tablet:this.formFactor=g.toLowerCase();break;default:throw"Invalid form factor specified for device: "+g;}switch(l.toLowerCase()){case b.Windows.toLowerCase():case b.macOS.toLowerCase():case b.Linux.toLowerCase():case b.Android.toLowerCase():case b.iOS.toLowerCase():this.OS=l.toLowerCase();break;default:this.OS=b.Other}this.touchable=e}}();a.DeviceSpec=e})(a.utils||(a.utils={}))})(a.keyman||
(a.keyman={}))})(e||(e={}));var h;(function(a){var b=function(){function a(a){a=a||{};this._futureSuggestions=a.futureSuggestions?a.futureSuggestions.slice():[];a.punctuation&&(this.punctuation=a.punctuation)}a.prototype.configure=function(a){return this.configuration={leftContextCodePoints:a.maxLeftContextCodePoints,rightContextCodePoints:a.maxRightContextCodePoints}};a.prototype.predict=function(a,c,b){a=function(a){for(var c=[],b=0;b<a.length;b++)c.push({sample:a[b],p:1});return c};return b?a(b):
(b=this._futureSuggestions.shift())?a(b):[]};a.prototype.wordbreak=function(a){a=k.default_(a.left);return 0<a.length?a.pop().text:""};return a}();a.DummyModel=b})(h||(h={}));var k;(function(a){a.ascii=function(a){for(var c=/[A-Za-z0-9']+/g,d=[],e;null!==(e=c.exec(a));)d.push(new b(e[0],e.index));return d};var b=function(){function a(a,c){this.text=a;this.start=c}Object.defineProperty(a.prototype,"length",{get:function(){return this.text.length},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,
"end",{get:function(){return this.start+this.text.length},enumerable:!0,configurable:!0});return a}()})(k||(k={}));(function(a){(a.data||(a.data={})).WORD_BREAK_PROPERTY=[[10,10,1],[11,12,2],[13,13,3],[32,32,4],[34,34,5],[39,39,6],[44,44,7],[46,46,8],[48,57,9],[58,58,10],[59,59,7],[65,90,11],[95,95,12],[97,122,11],[133,133,2],[170,170,11],[173,173,13],[181,181,11],[183,183,10],[186,186,11],[192,214,11],[216,246,11],[248,442,11],[443,443,11],[444,447,11],[448,451,11],[452,659,11],[660,660,11],[661,
687,11],[688,705,11],[706,709,11],[710,721,11],[722,727,11],[734,735,11],[736,740,11],[748,748,11],[749,749,11],[750,750,11],[751,767,11],[768,879,14],[880,883,11],[884,884,11],[886,887,11],[890,890,11],[891,893,11],[894,894,7],[895,895,11],[902,902,11],[903,903,10],[904,906,11],[908,908,11],[910,929,11],[931,1013,11],[1015,1153,11],[1155,1159,14],[1160,1161,14],[1162,1327,11],[1329,1366,11],[1369,1369,11],[1371,1372,11],[1374,1374,11],[1376,1416,11],[1417,1417,7],[1425,1469,14],[1471,1471,14],[1473,
1474,14],[1476,1477,14],[1479,1479,14],[1488,1514,15],[1519,1522,15],[1523,1523,11],[1524,1524,10],[1536,1541,13],[1548,1549,7],[1552,1562,14],[1564,1564,13],[1568,1599,11],[1600,1600,11],[1601,1610,11],[1611,1631,14],[1632,1641,9],[1643,1643,9],[1644,1644,7],[1646,1647,11],[1648,1648,14],[1649,1747,11],[1749,1749,11],[1750,1756,14],[1757,1757,13],[1759,1764,14],[1765,1766,11],[1767,1768,14],[1770,1773,14],[1774,1775,11],[1776,1785,9],[1786,1788,11],[1791,1791,11],[1807,1807,13],[1808,1808,11],[1809,
1809,14],[1810,1839,11],[1840,1866,14],[1869,1957,11],[1958,1968,14],[1969,1969,11],[1984,1993,9],[1994,2026,11],[2027,2035,14],[2036,2037,11],[2040,2040,7],[2042,2042,11],[2045,2045,14],[2048,2069,11],[2070,2073,14],[2074,2074,11],[2075,2083,14],[2084,2084,11],[2085,2087,14],[2088,2088,11],[2089,2093,14],[2112,2136,11],[2137,2139,14],[2144,2154,11],[2208,2228,11],[2230,2237,11],[2259,2273,14],[2274,2274,13],[2275,2306,14],[2307,2307,14],[2308,2361,11],[2362,2362,14],[2363,2363,14],[2364,2364,14],
[2365,2365,11],[2366,2368,14],[2369,2376,14],[2377,2380,14],[2381,2381,14],[2382,2383,14],[2384,2384,11],[2385,2391,14],[2392,2401,11],[2402,2403,14],[2406,2415,9],[2417,2417,11],[2418,2432,11],[2433,2433,14],[2434,2435,14],[2437,2444,11],[2447,2448,11],[2451,2472,11],[2474,2480,11],[2482,2482,11],[2486,2489,11],[2492,2492,14],[2493,2493,11],[2494,2496,14],[2497,2500,14],[2503,2504,14],[2507,2508,14],[2509,2509,14],[2510,2510,11],[2519,2519,14],[2524,2525,11],[2527,2529,11],[2530,2531,14],[2534,2543,
9],[2544,2545,11],[2556,2556,11],[2558,2558,14],[2561,2562,14],[2563,2563,14],[2565,2570,11],[2575,2576,11],[2579,2600,11],[2602,2608,11],[2610,2611,11],[2613,2614,11],[2616,2617,11],[2620,2620,14],[2622,2624,14],[2625,2626,14],[2631,2632,14],[2635,2637,14],[2641,2641,14],[2649,2652,11],[2654,2654,11],[2662,2671,9],[2672,2673,14],[2674,2676,11],[2677,2677,14],[2689,2690,14],[2691,2691,14],[2693,2701,11],[2703,2705,11],[2707,2728,11],[2730,2736,11],[2738,2739,11],[2741,2745,11],[2748,2748,14],[2749,
2749,11],[2750,2752,14],[2753,2757,14],[2759,2760,14],[2761,2761,14],[2763,2764,14],[2765,2765,14],[2768,2768,11],[2784,2785,11],[2786,2787,14],[2790,2799,9],[2809,2809,11],[2810,2815,14],[2817,2817,14],[2818,2819,14],[2821,2828,11],[2831,2832,11],[2835,2856,11],[2858,2864,11],[2866,2867,11],[2869,2873,11],[2876,2876,14],[2877,2877,11],[2878,2878,14],[2879,2879,14],[2880,2880,14],[2881,2884,14],[2887,2888,14],[2891,2892,14],[2893,2893,14],[2902,2902,14],[2903,2903,14],[2908,2909,11],[2911,2913,11],
[2914,2915,14],[2918,2927,9],[2929,2929,11],[2946,2946,14],[2947,2947,11],[2949,2954,11],[2958,2960,11],[2962,2965,11],[2969,2970,11],[2972,2972,11],[2974,2975,11],[2979,2980,11],[2984,2986,11],[2990,3001,11],[3006,3007,14],[3008,3008,14],[3009,3010,14],[3014,3016,14],[3018,3020,14],[3021,3021,14],[3024,3024,11],[3031,3031,14],[3046,3055,9],[3072,3072,14],[3073,3075,14],[3076,3076,14],[3077,3084,11],[3086,3088,11],[3090,3112,11],[3114,3129,11],[3133,3133,11],[3134,3136,14],[3137,3140,14],[3142,3144,
14],[3146,3149,14],[3157,3158,14],[3160,3162,11],[3168,3169,11],[3170,3171,14],[3174,3183,9],[3200,3200,11],[3201,3201,14],[3202,3203,14],[3205,3212,11],[3214,3216,11],[3218,3240,11],[3242,3251,11],[3253,3257,11],[3260,3260,14],[3261,3261,11],[3262,3262,14],[3263,3263,14],[3264,3268,14],[3270,3270,14],[3271,3272,14],[3274,3275,14],[3276,3277,14],[3285,3286,14],[3294,3294,11],[3296,3297,11],[3298,3299,14],[3302,3311,9],[3313,3314,11],[3328,3329,14],[3330,3331,14],[3333,3340,11],[3342,3344,11],[3346,
3386,11],[3387,3388,14],[3389,3389,11],[3390,3392,14],[3393,3396,14],[3398,3400,14],[3402,3404,14],[3405,3405,14],[3406,3406,11],[3412,3414,11],[3415,3415,14],[3423,3425,11],[3426,3427,14],[3430,3439,9],[3450,3455,11],[3458,3459,14],[3461,3478,11],[3482,3505,11],[3507,3515,11],[3517,3517,11],[3520,3526,11],[3530,3530,14],[3535,3537,14],[3538,3540,14],[3542,3542,14],[3544,3551,14],[3558,3567,9],[3570,3571,14],[3633,3633,14],[3636,3642,14],[3655,3662,14],[3664,3673,9],[3761,3761,14],[3764,3772,14],
[3784,3789,14],[3792,3801,9],[3840,3840,11],[3864,3865,14],[3872,3881,9],[3893,3893,14],[3895,3895,14],[3897,3897,14],[3902,3903,14],[3904,3911,11],[3913,3948,11],[3953,3966,14],[3967,3967,14],[3968,3972,14],[3974,3975,14],[3976,3980,11],[3981,3991,14],[3993,4028,14],[4038,4038,14],[4139,4140,14],[4141,4144,14],[4145,4145,14],[4146,4151,14],[4152,4152,14],[4153,4154,14],[4155,4156,14],[4157,4158,14],[4160,4169,9],[4182,4183,14],[4184,4185,14],[4190,4192,14],[4194,4196,14],[4199,4205,14],[4209,4212,
14],[4226,4226,14],[4227,4228,14],[4229,4230,14],[4231,4236,14],[4237,4237,14],[4239,4239,14],[4240,4249,9],[4250,4252,14],[4253,4253,14],[4256,4293,11],[4295,4295,11],[4301,4301,11],[4304,4346,11],[4348,4348,11],[4349,4351,11],[4352,4680,11],[4682,4685,11],[4688,4694,11],[4696,4696,11],[4698,4701,11],[4704,4744,11],[4746,4749,11],[4752,4784,11],[4786,4789,11],[4792,4798,11],[4800,4800,11],[4802,4805,11],[4808,4822,11],[4824,4880,11],[4882,4885,11],[4888,4954,11],[4957,4959,14],[4992,5007,11],[5024,
5109,11],[5112,5117,11],[5121,5740,11],[5743,5759,11],[5760,5760,4],[5761,5786,11],[5792,5866,11],[5870,5872,11],[5873,5880,11],[5888,5900,11],[5902,5905,11],[5906,5908,14],[5920,5937,11],[5938,5940,14],[5952,5969,11],[5970,5971,14],[5984,5996,11],[5998,6E3,11],[6002,6003,14],[6068,6069,14],[6070,6070,14],[6071,6077,14],[6078,6085,14],[6086,6086,14],[6087,6088,14],[6089,6099,14],[6109,6109,14],[6112,6121,9],[6155,6157,14],[6158,6158,13],[6160,6169,9],[6176,6210,11],[6211,6211,11],[6212,6264,11],[6272,
6276,11],[6277,6278,14],[6279,6312,11],[6313,6313,14],[6314,6314,11],[6320,6389,11],[6400,6430,11],[6432,6434,14],[6435,6438,14],[6439,6440,14],[6441,6443,14],[6448,6449,14],[6450,6450,14],[6451,6456,14],[6457,6459,14],[6470,6479,9],[6608,6617,9],[6656,6678,11],[6679,6680,14],[6681,6682,14],[6683,6683,14],[6741,6741,14],[6742,6742,14],[6743,6743,14],[6744,6750,14],[6752,6752,14],[6753,6753,14],[6754,6754,14],[6755,6756,14],[6757,6764,14],[6765,6770,14],[6771,6780,14],[6783,6783,14],[6784,6793,9],
[6800,6809,9],[6832,6845,14],[6846,6846,14],[6912,6915,14],[6916,6916,14],[6917,6963,11],[6964,6964,14],[6965,6965,14],[6966,6970,14],[6971,6971,14],[6972,6972,14],[6973,6977,14],[6978,6978,14],[6979,6980,14],[6981,6987,11],[6992,7001,9],[7019,7027,14],[7040,7041,14],[7042,7042,14],[7043,7072,11],[7073,7073,14],[7074,7077,14],[7078,7079,14],[7080,7081,14],[7082,7082,14],[7083,7085,14],[7086,7087,11],[7088,7097,9],[7098,7141,11],[7142,7142,14],[7143,7143,14],[7144,7145,14],[7146,7148,14],[7149,7149,
14],[7150,7150,14],[7151,7153,14],[7154,7155,14],[7168,7203,11],[7204,7211,14],[7212,7219,14],[7220,7221,14],[7222,7223,14],[7232,7241,9],[7245,7247,11],[7248,7257,9],[7258,7287,11],[7288,7293,11],[7296,7304,11],[7312,7354,11],[7357,7359,11],[7376,7378,14],[7380,7392,14],[7393,7393,14],[7394,7400,14],[7401,7404,11],[7405,7405,14],[7406,7411,11],[7412,7412,14],[7413,7414,11],[7415,7415,14],[7416,7417,14],[7418,7418,11],[7424,7467,11],[7468,7530,11],[7531,7543,11],[7544,7544,11],[7545,7578,11],[7579,
7615,11],[7616,7673,14],[7675,7679,14],[7680,7957,11],[7960,7965,11],[7968,8005,11],[8008,8013,11],[8016,8023,11],[8025,8025,11],[8027,8027,11],[8029,8029,11],[8031,8061,11],[8064,8116,11],[8118,8124,11],[8126,8126,11],[8130,8132,11],[8134,8140,11],[8144,8147,11],[8150,8155,11],[8160,8172,11],[8178,8180,11],[8182,8188,11],[8192,8198,4],[8200,8202,4],[8204,8204,14],[8205,8205,16],[8206,8207,13],[8216,8216,8],[8217,8217,8],[8228,8228,8],[8231,8231,10],[8232,8232,2],[8233,8233,2],[8234,8238,13],[8239,
8239,12],[8255,8256,12],[8260,8260,7],[8276,8276,12],[8287,8287,4],[8288,8292,13],[8294,8303,13],[8305,8305,11],[8319,8319,11],[8336,8348,11],[8400,8412,14],[8413,8416,14],[8417,8417,14],[8418,8420,14],[8421,8432,14],[8450,8450,11],[8455,8455,11],[8458,8467,11],[8469,8469,11],[8473,8477,11],[8484,8484,11],[8486,8486,11],[8488,8488,11],[8490,8493,11],[8495,8500,11],[8501,8504,11],[8505,8505,11],[8508,8511,11],[8517,8521,11],[8526,8526,11],[8544,8578,11],[8579,8580,11],[8581,8584,11],[9398,9449,11],
[11264,11310,11],[11312,11358,11],[11360,11387,11],[11388,11389,11],[11390,11492,11],[11499,11502,11],[11503,11505,14],[11506,11507,11],[11520,11557,11],[11559,11559,11],[11565,11565,11],[11568,11623,11],[11631,11631,11],[11647,11647,14],[11648,11670,11],[11680,11686,11],[11688,11694,11],[11696,11702,11],[11704,11710,11],[11712,11718,11],[11720,11726,11],[11728,11734,11],[11736,11742,11],[11744,11775,14],[11823,11823,11],[12288,12288,4],[12293,12293,11],[12330,12333,14],[12334,12335,14],[12337,12341,
17],[12347,12347,11],[12348,12348,11],[12441,12442,14],[12443,12444,17],[12448,12448,17],[12449,12538,17],[12540,12542,17],[12543,12543,17],[12549,12591,11],[12593,12686,11],[12704,12730,11],[12784,12799,17],[13008,13054,17],[13056,13143,17],[40960,40980,11],[40981,40981,11],[40982,42124,11],[42192,42231,11],[42232,42237,11],[42240,42507,11],[42508,42508,11],[42512,42527,11],[42528,42537,9],[42538,42539,11],[42560,42605,11],[42606,42606,11],[42607,42607,14],[42608,42610,14],[42612,42621,14],[42623,
42623,11],[42624,42651,11],[42652,42653,11],[42654,42655,14],[42656,42725,11],[42726,42735,11],[42736,42737,14],[42775,42783,11],[42784,42785,11],[42786,42863,11],[42864,42864,11],[42865,42887,11],[42888,42888,11],[42889,42890,11],[42891,42894,11],[42895,42895,11],[42896,42943,11],[42946,42950,11],[42999,42999,11],[43E3,43001,11],[43002,43002,11],[43003,43009,11],[43010,43010,14],[43011,43013,11],[43014,43014,14],[43015,43018,11],[43019,43019,14],[43020,43042,11],[43043,43044,14],[43045,43046,14],
[43047,43047,14],[43072,43123,11],[43136,43137,14],[43138,43187,11],[43188,43203,14],[43204,43205,14],[43216,43225,9],[43232,43249,14],[43250,43255,11],[43259,43259,11],[43261,43262,11],[43263,43263,14],[43264,43273,9],[43274,43301,11],[43302,43309,14],[43312,43334,11],[43335,43345,14],[43346,43347,14],[43360,43388,11],[43392,43394,14],[43395,43395,14],[43396,43442,11],[43443,43443,14],[43444,43445,14],[43446,43449,14],[43450,43451,14],[43452,43453,14],[43454,43456,14],[43471,43471,11],[43472,43481,
9],[43493,43493,14],[43504,43513,9],[43520,43560,11],[43561,43566,14],[43567,43568,14],[43569,43570,14],[43571,43572,14],[43573,43574,14],[43584,43586,11],[43587,43587,14],[43588,43595,11],[43596,43596,14],[43597,43597,14],[43600,43609,9],[43643,43643,14],[43644,43644,14],[43645,43645,14],[43696,43696,14],[43698,43700,14],[43703,43704,14],[43710,43711,14],[43713,43713,14],[43744,43754,11],[43755,43755,14],[43756,43757,14],[43758,43759,14],[43762,43762,11],[43763,43764,11],[43765,43765,14],[43766,
43766,14],[43777,43782,11],[43785,43790,11],[43793,43798,11],[43808,43814,11],[43816,43822,11],[43824,43866,11],[43867,43867,11],[43868,43871,11],[43872,43879,11],[43888,43967,11],[43968,44002,11],[44003,44004,14],[44005,44005,14],[44006,44007,14],[44008,44008,14],[44009,44010,14],[44012,44012,14],[44013,44013,14],[44016,44025,9],[44032,55203,11],[55216,55238,11],[55243,55291,11],[64256,64262,11],[64275,64279,11],[64285,64285,15],[64286,64286,14],[64287,64296,15],[64298,64310,15],[64312,64316,15],
[64318,64318,15],[64320,64321,15],[64323,64324,15],[64326,64335,15],[64336,64433,11],[64467,64829,11],[64848,64911,11],[64914,64967,11],[65008,65019,11],[65024,65039,14],[65040,65040,7],[65043,65043,10],[65044,65044,7],[65056,65071,14],[65075,65076,12],[65101,65103,12],[65104,65104,7],[65106,65106,8],[65108,65108,7],[65109,65109,10],[65136,65140,11],[65142,65276,11],[65279,65279,13],[65287,65287,8],[65292,65292,7],[65294,65294,8],[65296,65305,9],[65306,65306,10],[65307,65307,7],[65313,65338,11],[65343,
65343,12],[65345,65370,11],[65382,65391,17],[65392,65392,17],[65393,65437,17],[65438,65439,14],[65440,65470,11],[65474,65479,11],[65482,65487,11],[65490,65495,11],[65498,65500,11],[65529,65531,13],[65536,65547,11],[65549,65574,11],[65576,65594,11],[65596,65597,11],[65599,65613,11],[65616,65629,11],[65664,65786,11],[65856,65908,11],[66045,66045,14],[66176,66204,11],[66208,66256,11],[66272,66272,14],[66304,66335,11],[66349,66368,11],[66369,66369,11],[66370,66377,11],[66378,66378,11],[66384,66421,11],
[66422,66426,14],[66432,66461,11],[66464,66499,11],[66504,66511,11],[66513,66517,11],[66560,66639,11],[66640,66717,11],[66720,66729,9],[66736,66771,11],[66776,66811,11],[66816,66855,11],[66864,66915,11],[67072,67382,11],[67392,67413,11],[67424,67431,11],[67584,67589,11],[67592,67592,11],[67594,67637,11],[67639,67640,11],[67644,67644,11],[67647,67669,11],[67680,67702,11],[67712,67742,11],[67808,67826,11],[67828,67829,11],[67840,67861,11],[67872,67897,11],[67968,68023,11],[68030,68031,11],[68096,68096,
11],[68097,68099,14],[68101,68102,14],[68108,68111,14],[68112,68115,11],[68117,68119,11],[68121,68149,11],[68152,68154,14],[68159,68159,14],[68192,68220,11],[68224,68252,11],[68288,68295,11],[68297,68324,11],[68325,68326,14],[68352,68405,11],[68416,68437,11],[68448,68466,11],[68480,68497,11],[68608,68680,11],[68736,68786,11],[68800,68850,11],[68864,68899,11],[68900,68903,14],[68912,68921,9],[69376,69404,11],[69415,69415,11],[69424,69445,11],[69446,69456,14],[69600,69622,11],[69632,69632,14],[69633,
69633,14],[69634,69634,14],[69635,69687,11],[69688,69702,14],[69734,69743,9],[69759,69761,14],[69762,69762,14],[69763,69807,11],[69808,69810,14],[69811,69814,14],[69815,69816,14],[69817,69818,14],[69821,69821,13],[69837,69837,13],[69840,69864,11],[69872,69881,9],[69888,69890,14],[69891,69926,11],[69927,69931,14],[69932,69932,14],[69933,69940,14],[69942,69951,9],[69956,69956,11],[69957,69958,14],[69968,70002,11],[70003,70003,14],[70006,70006,11],[70016,70017,14],[70018,70018,14],[70019,70066,11],[70067,
70069,14],[70070,70078,14],[70079,70080,14],[70081,70084,11],[70089,70092,14],[70096,70105,9],[70106,70106,11],[70108,70108,11],[70144,70161,11],[70163,70187,11],[70188,70190,14],[70191,70193,14],[70194,70195,14],[70196,70196,14],[70197,70197,14],[70198,70199,14],[70206,70206,14],[70272,70278,11],[70280,70280,11],[70282,70285,11],[70287,70301,11],[70303,70312,11],[70320,70366,11],[70367,70367,14],[70368,70370,14],[70371,70378,14],[70384,70393,9],[70400,70401,14],[70402,70403,14],[70405,70412,11],
[70415,70416,11],[70419,70440,11],[70442,70448,11],[70450,70451,11],[70453,70457,11],[70459,70460,14],[70461,70461,11],[70462,70463,14],[70464,70464,14],[70465,70468,14],[70471,70472,14],[70475,70477,14],[70480,70480,11],[70487,70487,14],[70493,70497,11],[70498,70499,14],[70502,70508,14],[70512,70516,14],[70656,70708,11],[70709,70711,14],[70712,70719,14],[70720,70721,14],[70722,70724,14],[70725,70725,14],[70726,70726,14],[70727,70730,11],[70736,70745,9],[70750,70750,14],[70751,70751,11],[70784,70831,
11],[70832,70834,14],[70835,70840,14],[70841,70841,14],[70842,70842,14],[70843,70846,14],[70847,70848,14],[70849,70849,14],[70850,70851,14],[70852,70853,11],[70855,70855,11],[70864,70873,9],[71040,71086,11],[71087,71089,14],[71090,71093,14],[71096,71099,14],[71100,71101,14],[71102,71102,14],[71103,71104,14],[71128,71131,11],[71132,71133,14],[71168,71215,11],[71216,71218,14],[71219,71226,14],[71227,71228,14],[71229,71229,14],[71230,71230,14],[71231,71232,14],[71236,71236,11],[71248,71257,9],[71296,
71338,11],[71339,71339,14],[71340,71340,14],[71341,71341,14],[71342,71343,14],[71344,71349,14],[71350,71350,14],[71351,71351,14],[71352,71352,11],[71360,71369,9],[71453,71455,14],[71456,71457,14],[71458,71461,14],[71462,71462,14],[71463,71467,14],[71472,71481,9],[71680,71723,11],[71724,71726,14],[71727,71735,14],[71736,71736,14],[71737,71738,14],[71840,71903,11],[71904,71913,9],[71935,71935,11],[72096,72103,11],[72106,72144,11],[72145,72147,14],[72148,72151,14],[72154,72155,14],[72156,72159,14],[72160,
72160,14],[72161,72161,11],[72163,72163,11],[72164,72164,14],[72192,72192,11],[72193,72202,14],[72203,72242,11],[72243,72248,14],[72249,72249,14],[72250,72250,11],[72251,72254,14],[72263,72263,14],[72272,72272,11],[72273,72278,14],[72279,72280,14],[72281,72283,14],[72284,72329,11],[72330,72342,14],[72343,72343,14],[72344,72345,14],[72349,72349,11],[72384,72440,11],[72704,72712,11],[72714,72750,11],[72751,72751,14],[72752,72758,14],[72760,72765,14],[72766,72766,14],[72767,72767,14],[72768,72768,11],
[72784,72793,9],[72818,72847,11],[72850,72871,14],[72873,72873,14],[72874,72880,14],[72881,72881,14],[72882,72883,14],[72884,72884,14],[72885,72886,14],[72960,72966,11],[72968,72969,11],[72971,73008,11],[73009,73014,14],[73018,73018,14],[73020,73021,14],[73023,73029,14],[73030,73030,11],[73031,73031,14],[73040,73049,9],[73056,73061,11],[73063,73064,11],[73066,73097,11],[73098,73102,14],[73104,73105,14],[73107,73108,14],[73109,73109,14],[73110,73110,14],[73111,73111,14],[73112,73112,11],[73120,73129,
9],[73440,73458,11],[73459,73460,14],[73461,73462,14],[73728,74649,11],[74752,74862,11],[74880,75075,11],[77824,78894,11],[78896,78904,13],[82944,83526,11],[92160,92728,11],[92736,92766,11],[92768,92777,9],[92880,92909,11],[92912,92916,14],[92928,92975,11],[92976,92982,14],[92992,92995,11],[93008,93017,9],[93027,93047,11],[93053,93071,11],[93760,93823,11],[93952,94026,11],[94031,94031,14],[94032,94032,11],[94033,94087,14],[94095,94098,14],[94099,94111,11],[94176,94177,11],[94179,94179,11],[110592,
110592,17],[110948,110951,17],[113664,113770,11],[113776,113788,11],[113792,113800,11],[113808,113817,11],[113821,113822,14],[113824,113827,13],[119141,119142,14],[119143,119145,14],[119149,119154,14],[119155,119162,13],[119163,119170,14],[119173,119179,14],[119210,119213,14],[119362,119364,14],[119808,119892,11],[119894,119964,11],[119966,119967,11],[119970,119970,11],[119973,119974,11],[119977,119980,11],[119982,119993,11],[119995,119995,11],[119997,120003,11],[120005,120069,11],[120071,120074,
11],[120077,120084,11],[120086,120092,11],[120094,120121,11],[120123,120126,11],[120128,120132,11],[120134,120134,11],[120138,120144,11],[120146,120485,11],[120488,120512,11],[120514,120538,11],[120540,120570,11],[120572,120596,11],[120598,120628,11],[120630,120654,11],[120656,120686,11],[120688,120712,11],[120714,120744,11],[120746,120770,11],[120772,120779,11],[120782,120831,9],[121344,121398,14],[121403,121452,14],[121461,121461,14],[121476,121476,14],[121499,121503,14],[121505,121519,14],[122880,
122886,14],[122888,122904,14],[122907,122913,14],[122915,122916,14],[122918,122922,14],[123136,123180,11],[123184,123190,14],[123191,123197,11],[123200,123209,9],[123214,123214,11],[123584,123627,11],[123628,123631,14],[123632,123641,9],[124928,125124,11],[125136,125142,14],[125184,125251,11],[125252,125258,14],[125259,125259,11],[125264,125273,9],[126464,126467,11],[126469,126495,11],[126497,126498,11],[126500,126500,11],[126503,126503,11],[126505,126514,11],[126516,126519,11],[126521,126521,11],
[126523,126523,11],[126530,126530,11],[126535,126535,11],[126537,126537,11],[126539,126539,11],[126541,126543,11],[126545,126546,11],[126548,126548,11],[126551,126551,11],[126553,126553,11],[126555,126555,11],[126557,126557,11],[126559,126559,11],[126561,126562,11],[126564,126564,11],[126567,126570,11],[126572,126578,11],[126580,126583,11],[126585,126588,11],[126590,126590,11],[126592,126601,11],[126603,126619,11],[126625,126627,11],[126629,126633,11],[126635,126651,11],[127280,127305,11],[127312,
127337,11],[127344,127369,11],[127462,127487,18],[127995,127999,14],[917505,917505,13],[917536,917631,14],[917760,917999,14]]})(k||(k={}));(function(a){function b(a){return!Array.from(a).map(l).every(function(a){return 3===a||1===a||2===a||4===a})}function c(a){function c(c){return c>=a.length?a.length:g(a[c])?c+2:c+1}function b(c){return 0>c?19:c>=a.length?20:g(a[c])?l(a[c]+a[c+1]):l(a[c])}function d(a){return 11===a||15===a}if(0===a.length)return[];var e=[];var f=0;var n=19,h=19;var r=b(0);var k=
0;do{var A=f;f=c(f);r=[n,h,r,b(f)];var w=r[0];n=r[1];h=r[2];r=r[3];if(19===n)e.push(A);else{if(20===h){e.push(A);break}if(3!==n||1!==h)if(2===n||3===n||1===n)e.push(A);else if(2===h||3===h||1===h)e.push(A);else if(4!==n||4!=h){for(;13===h||14===h||16===h;)f=[f,c(f)],A=f[0],f=f[1],r=[r,b(f)],h=r[0],r=r[1];if(20===h){e.push(A);break}for(;13===r||14===r||16===r;)f=c(f),r=b(f);if(!d(n)||!d(h))if(!d(n)||!d(r)||10!==h&&8!==h&&6!==h)if(!d(w)||!d(h)||10!==n&&8!==n&&6!==n)if(15!==n||6!==h)if(15!==n||5!==h||
15!==r)if(15!==w||5!==n||15!==h)if(9!==n||9!==h)if(!d(n)||9!==h)if(9!==n||!d(h))if(9!==w||9!==h||7!==n&&8!==n&&6!==n)if(9!==n||9!==r||7!==h&&8!==h&&6!==h)if(17!==n||17!==h)if(!d(n)&&9!==n&&17!==n&&12!==n||12!==h)if(!d(h)&&9!==h&&17!==h||12!==n){if(18===h){if(k+=1,1==k%2)continue}else k=0;e.push(A)}}}}while(A<a.length);return e}function g(a){a=a.charCodeAt(0);return 55296<=a&&56319>=a}function l(a){a=a.codePointAt(0);return e(a,0,f.length-1)}function e(a,c,b){if(b<c)return 0;var d=c+~~((b-c)/2),g=
f[d];return a<g[0]?e(a,c,d-1):a>g[1]?e(a,d+1,b):g[2]}a.default_=function(a){var d=c(a);if(0==d.length)return[];for(var g=[],l=0;l<d.length-1;l++){var e=d[l+1],f=new h(a,d[l],e);b(f.text)?g.push(f):l==d.length-2&&(f=new h(a,e,e),g.push(f))}return g};var f=a.data.WORD_BREAK_PROPERTY,h=function(){function a(a,c,b){this._source=a;this.start=c;this.end=b}Object.defineProperty(a.prototype,"text",{get:function(){return this._source.substring(this.start,this.end)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,
"length",{get:function(){return this.end-this.start},enumerable:!0,configurable:!0});return a}()})(k||(k={}));k["default"]=k.default_;(function(a){a.placeholder=function(a){var c=0;return a.split(/\s+/).map(function(a){a={start:c,end:c+a.length,text:a,length:a.length};c=a.end;return a})}})(k||(k={}));"undefined"!==typeof module&&module.exports&&(module.exports.wordBreakers=k);(function(a){a.applyTransform=function(a,c){var b=c.left||"",d=b.length;b=b.substring(0,d-(d<a.deleteLeft?d:a.deleteLeft))+
(a.insert||"");d=c.right||"";var e=d.length;a=d.substring(e<a.deleteRight?e:a.deleteRight);return{left:b,right:a,startOfBuffer:c.startOfBuffer,endOfBuffer:c.endOfBuffer}};a.prependTransform=function(a,c){a.insert=c.insert+a.insert;a.deleteLeft+=c.deleteLeft;c.deleteRight&&(a.deleteRight=(a.deleteRight||0)+c.deleteRight)}})(h||(h={}));(function(a){function b(a,c,d){void 0===d&&(d=0);if("leaf"===a.type||d===c.length)return a;var g=c[d];return a.children[g]?b(a.children[g],c,d+1):null}function c(a,c,
b,d){void 0===d&&(d=12);var g=new f,l=[];if("leaf"===a.type){var e=0;for(a=a.entries;e<a.length;e++){var h=a[e];if(h.key.startsWith(c)&&(l.push({text:h.content,p:h.weight/b}),l.length>=d))break}}else{g.enqueue(a);var n=void 0;c=function(){if("type"in n)if("leaf"===n.type)g.enqueueAll(n.entries);else{var a=n;g.enqueueAll(n.values.map(function(c){return a.children[c]}))}else if(l.push({text:n.content,p:n.weight/b}),l.length>=d)return{value:l}};for(;n=g.pop();)if(e=c(),"object"===typeof e)return e.value}return l}
function g(a){return a.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase()}var l=function(){function c(a,c){void 0===c&&(c={});this._trie=new e(a.root,a.totalWeight,c.searchTermToKey||g);(a=c.wordBreaker)||(a=("undefined"!==typeof k?k:require("@keymanapp/models-wordBreakers").wordBreakers)["default"]);this.breakWords=a;this.punctuation=c.punctuation}c.prototype.configure=function(a){return this.configuration={leftContextCodePoints:a.maxLeftContextCodePoints,rightContextCodePoints:a.maxRightContextCodePoints}};
c.prototype.predict=function(c,b){function d(a){for(var c=[],b=0;b<a.length;b++){var d=a[b];c.push({sample:d,p:d.p})}return c}if(!c.insert&&b.startOfBuffer&&b.endOfBuffer)return d(this._trie.firstN(12).map(function(a){var c=a.text;return{transform:{insert:c,deleteLeft:0},displayAs:c,p:a.p}}));b=a.applyTransform(c,b);var g=c.deleteLeft-c.insert.kmwLength(),l=this.getLastWord(b.left);return d(this._trie.lookup(l).map(function(a){var c=a.text;a=a.p;return{transform:{insert:c,deleteLeft:g+l.kmwLength()},
displayAs:c,p:a}}))};c.prototype.getLastWord=function(a){a=this.breakWords(a);return 0<a.length?a.pop().text:""};c.prototype.wordbreak=function(a){return this.getLastWord(a.left)};return c}();a.TrieModel=l;var e=function(){function a(a,c,b){this.root=a;this.toKey=b;this.totalWeight=c}a.prototype.lookup=function(a){a=this.toKey(a);var d=b(this.root,a);return null===d?[]:c(d,a,this.totalWeight)};a.prototype.firstN=function(a){return c(this.root,"",this.totalWeight,a)};return a}(),f=function(){function a(){this._storage=
[]}a.prototype.enqueue=function(a){this._storage.push(a)};a.prototype.enqueueAll=function(a){this._storage=this._storage.concat(a)};a.prototype.pop=function(){this._storage.sort(function(a,c){return c.weight-a.weight});return this._storage.shift()};return a}()})(h||(h={}));"undefined"!=typeof module&&"undefined"!=typeof module.exports&&(module.exports.models=h);var p=function(){function a(b){this.lexicalModel=b;this.punctuation=a.determinePunctuationFromModel(b)}a.prototype.isWhitespace=function(a){if(""==
a.insert)return!1;a=a.insert;a=a.replace(/.*[\u0009\u000A\u000D\u0020\u00a0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u200b\u2028\u2029\u202f\u205f\u3000]/i,"");return""==a};a.prototype.isBackspace=function(a){return""==a.insert&&0<a.deleteLeft};a.prototype.predict=function(b,c){var d=[],l=this.punctuation,e={};b instanceof Array||(b=[{sample:b,p:1}]);var f=b.sort(function(a,c){return c.p-a.p})[0].sample,k=this.isWhitespace(f),n=this.isBackspace(f),v=h.applyTransform(f,
c),x=this.lexicalModel.wordbreak(v),p=null;v=function(a){var b=a.sample;if(t.isWhitespace(b)&&!k||t.isBackspace(b)&&!n)return"continue";var d=!1;if(t.isWhitespace(b)){var g=h.applyTransform(b,c);d=""==t.lexicalModel.wordbreak(g)}t.lexicalModel.predict(b,c).forEach(function(c){void 0!==b.id&&(c.sample.transformId=b.id);d&&h.prependTransform(c.sample.transform,b);0<c.sample.transform.insert.length&&(c.sample.transform.insert+=l.insertAfterWord);var g=c.sample.displayAs;if(g==x)p=c.sample,p.tag="keep";
else{var f=e[g];f?f.p+=c.p*a.p:e[g]={sample:c.sample,p:c.p*a.p}}})};for(var t=this,L=0;L<b.length;L++)v(b[L]);p||""==x||(p={displayAs:x,transformId:f.id,transform:{insert:f.insert+l.insertAfterWord,deleteLeft:f.deleteLeft,deleteRight:f.deleteRight,id:f.id},tag:"keep"});p&&(b=l.quotesForKeepSuggestion,f=b.open,b=b.close,p.displayAs=l.isRTL?b+p.displayAs+f:f+p.displayAs+b);for(var O in e)d.push(e[O]);d=d.sort(function(a,c){return c.p-a.p});d=d.splice(0,a.MAX_SUGGESTIONS).map(function(a){return a.sample});
p&&(d=[p].concat(d));return d};a.determinePunctuationFromModel=function(a){var c=f;if(!a.punctuation)return c;a=a.punctuation;var b=a.insertAfterWord;""===b||b||(b=c.insertAfterWord);var d=a.quotesForKeepSuggestion;d||(d=c.quotesForKeepSuggestion);return{insertAfterWord:b,quotesForKeepSuggestion:d,isRTL:a.isRTL}};a.MAX_SUGGESTIONS=12;return a}(),f={quotesForKeepSuggestion:{open:"\u201c",close:"\u201d"},insertAfterWord:" "},b=this&&this.__assign||function(){b=Object.assign||function(a){for(var b,c=
1,g=arguments.length;c<g;c++){b=arguments[c];for(var l in b)Object.prototype.hasOwnProperty.call(b,l)&&(a[l]=b[l])}return a};return b.apply(this,arguments)};e=function(){function a(a){void 0===a&&(a={importScripts:null,postMessage:null});this._postMessage=a.postMessage||postMessage;this._importScripts=a.importScripts||importScripts;this.setupConfigState()}a.prototype.error=function(a,c){this.cast("error",{log:a,error:c&&c.stack?c.stack:void 0})};a.prototype.onMessage=function(a){if(!a.data.message)throw Error("Missing required 'message' property: "+
a.data);a=a.data;if("load"==a.message){if(a.model==this._currentModelSource){"undefined"!==typeof console&&console.warn("Duplicate model load message detected - squashing!");return}this._currentModelSource=a.model}else"unload"==a.message&&(this._currentModelSource=null);this.state.handleMessage(a)};a.prototype.cast=function(a,c){var d=this._postMessage;d(b({message:a},c))};a.prototype.loadModel=function(a){try{var c=a.configure(this._platformCapabilities);c.leftContextCodePoints||(c.leftContextCodePoints=
c.leftContextCodeUnits);c.rightContextCodePoints||(c.rightContextCodePoints=c.rightContextCodeUnits);c.leftContextCodePoints||(c.leftContextCodePoints=this._platformCapabilities.maxLeftContextCodePoints);c.rightContextCodePoints||(c.rightContextCodePoints=this._platformCapabilities.maxRightContextCodePoints||0);this.transitionToReadyState(a);this.cast("ready",{configuration:c})}catch(g){this.error("loadModel failed!",g)}};a.prototype.loadModelFile=function(a){try{this._importScripts(a)}catch(c){this.error("Error occurred when attempting to load dictionary",
c)}};a.prototype.unloadModel=function(){this.transitionToLoadingState()};a.prototype.setupConfigState=function(){var a=this;this.state={name:"unconfigured",handleMessage:function(c){if("config"!==c.message)throw Error("invalid message; expected 'config' but got "+c.message);a._platformCapabilities=c.capabilities;a.transitionToLoadingState()}}};a.prototype.transitionToLoadingState=function(){var a=this;this.state={name:"modelless",handleMessage:function(c){if("load"!==c.message)throw Error("invalid message; expected 'load' but got "+
c.message);a.loadModelFile(c.model)}}};a.prototype.transitionToReadyState=function(a){var c=this;this.state={name:"ready",handleMessage:function(b){switch(b.message){case "predict":var d=b.transform,g=b.context;d=(new p(a)).predict(d,g);c.cast("suggestions",{token:b.token,suggestions:d});break;case "wordbreak":d=a.wordbreak(b.context);c.cast("currentword",{token:b.token,word:d});break;case "unload":c.unloadModel();break;default:throw Error("invalid message; expected one of {'predict', 'unload'} but got "+
b.message);}}}};a.install=function(b){var c=new a({postMessage:b.postMessage,importScripts:b.importScripts.bind(b)});b.onmessage=c.onMessage.bind(c);b.LMLayerWorker=c;b.models=h;b.wordBreakers=k;return c};return a}();"undefined"!==typeof module&&"undefined"!==typeof module.exports?(module.exports=e,module.exports.models=h,module.exports.wordBreakers=k,module.exports.ModelCompositor=p):"undefined"!==typeof self&&"postMessage"in self?e.install(self):window.LMLayerWorker=e}
(function(e,h){"function"===typeof define&&define.amd?define(h):"object"===typeof exports?module.exports=h():e.returnExports=h()})(this,function(){var e=Function.call.bind(Function.apply),h=Function.call.bind(Function.call),k=Array.isArray,p=Object.keys,f=function(a){try{return a(),!1}catch(z){return!0}},b=function(a){try{return a()}catch(z){return!1}},a=function(a){return function(){return!e(a,this,arguments)}}(f),d=function(){return!f(function(){return Object.defineProperty({},"x",{get:function(){}})})},
c=!!Object.defineProperty&&d(),g="foo"===function(){}.name,l=Function.call.bind(Array.prototype.forEach),r=Function.call.bind(Array.prototype.reduce),A=Function.call.bind(Array.prototype.filter),w=Function.call.bind(Array.prototype.some),n=function(a,b,d,g){!g&&b in a||(c?Object.defineProperty(a,b,{configurable:!0,enumerable:!1,writable:!0,value:d}):a[b]=d)},v=function(a,c,b){l(p(c),function(d){n(a,d,c[d],!!b)})},x=Function.call.bind(Object.prototype.toString),J="function"===typeof/abc/?function(a){return"function"===
typeof a&&"[object Function]"===x(a)}:function(a){return"function"===typeof a},t={getter:function(a,b,d){if(!c)throw new TypeError("getters require true ES5 support");Object.defineProperty(a,b,{configurable:!0,enumerable:!1,get:d})},proxy:function(a,b,d){if(!c)throw new TypeError("getters require true ES5 support");var g=Object.getOwnPropertyDescriptor(a,b);Object.defineProperty(d,b,{configurable:g.configurable,enumerable:g.enumerable,get:function(){return a[b]},set:function(c){a[b]=c}})},redefine:function(a,
b,d){if(c){var g=Object.getOwnPropertyDescriptor(a,b);g.value=d;Object.defineProperty(a,b,g)}else a[b]=d},defineByDescriptor:function(a,b,d){c?Object.defineProperty(a,b,d):"value"in d&&(a[b]=d.value)},preserveToString:function(a,c){c&&J(c.toString)&&n(a,"toString",c.toString.bind(c),!0)}},L=Object.create||function(a,c){var b=function(){};b.prototype=a;var d=new b;"undefined"!==typeof c&&p(c).forEach(function(a){t.defineByDescriptor(d,a,c[a])});return d},O=function(a,c){return Object.setPrototypeOf?
b(function(){var b=function sa(c){c=new a(c);Object.setPrototypeOf(c,sa.prototype);return c};Object.setPrototypeOf(b,a);b.prototype=L(a.prototype,{constructor:{value:b}});return c(b)}):!1},q=function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof global)return global;throw Error("unable to locate global object");}(),fa=q.isFinite,Da=Function.call.bind(String.prototype.indexOf),Ga=Function.apply.bind(Array.prototype.indexOf),ma=Function.call.bind(Array.prototype.concat),
N=Function.call.bind(String.prototype.slice),V=Function.call.bind(Array.prototype.push),X=Function.apply.bind(Array.prototype.push),ha=Function.call.bind(Array.prototype.shift),B=Math.max,S=Math.min,E=Math.floor,F=Math.abs,G=Math.exp,W=Math.log,Y=Math.sqrt,ta=Function.call.bind(Object.prototype.hasOwnProperty),ia=function(){},D=q.Map,Xb=D&&D.prototype["delete"],na=D&&D.prototype.get,oa=D&&D.prototype.has,db=D&&D.prototype.set,y=q.Symbol||{},Ha=y.species||"@@species",H=Number.isNaN||function(a){return a!==
a},Ia=Number.isFinite||function(a){return"number"===typeof a&&fa(a)},ja=J(Math.sign)?Math.sign:function(a){a=Number(a);return 0===a||H(a)?a:0>a?-1:1},ka=function(a){a=Number(a);return-1>a||H(a)?NaN:0===a||Infinity===a?a:-1===a?-Infinity:0===1+a-1?a:a*(W(1+a)/(1+a-1))},eb=function(a){return"[object Arguments]"===x(a)},Yb=function(a){return null!==a&&"object"===typeof a&&"number"===typeof a.length&&0<=a.length&&"[object Array]"!==x(a)&&"[object Function]"===x(a.callee)},Ja=eb(arguments)?eb:Yb,C={primitive:function(a){return null===
a||"function"!==typeof a&&"object"!==typeof a},string:function(a){return"[object String]"===x(a)},regex:function(a){return"[object RegExp]"===x(a)},symbol:function(a){return"function"===typeof q.Symbol&&"symbol"===typeof a}},u=function(a,c,b){var d=a[c];n(a,c,b,!0);t.preserveToString(a[c],d)},pa="function"===typeof y&&"function"===typeof y["for"]&&C.symbol(y()),P=C.symbol(y.iterator)?y.iterator:"_es6-shim iterator_";q.Set&&"function"===typeof(new q.Set)["@@iterator"]&&(P="@@iterator");q.Reflect||
n(q,"Reflect",{},!0);var Z=q.Reflect,Ka=String,La="undefined"!==typeof document&&document?document.all:null,T=null==La?function(a){return null==a}:function(a){return null==a&&a!==La},m={Call:function(a,c){var b=2<arguments.length?arguments[2]:[];if(!m.IsCallable(a))throw new TypeError(a+" is not a function");return e(a,c,b)},RequireObjectCoercible:function(a,c){if(T(a))throw new TypeError(c||"Cannot call method on "+a);return a},TypeIsObject:function(a){return void 0===a||null===a||!0===a||!1===a?
!1:"function"===typeof a||"object"===typeof a||a===La},ToObject:function(a,c){return Object(m.RequireObjectCoercible(a,c))},IsCallable:J,IsConstructor:function(a){return m.IsCallable(a)},ToInt32:function(a){return m.ToNumber(a)>>0},ToUint32:function(a){return m.ToNumber(a)>>>0},ToNumber:function(a){if("[object Symbol]"===x(a))throw new TypeError("Cannot convert a Symbol value to a number");return+a},ToInteger:function(a){a=m.ToNumber(a);return H(a)?0:0!==a&&Ia(a)?(0<a?1:-1)*E(F(a)):a},ToLength:function(a){a=
m.ToInteger(a);return 0>=a?0:a>Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:a},SameValue:function(a,c){return a===c?0===a?1/a===1/c:!0:H(a)&&H(c)},SameValueZero:function(a,c){return a===c||H(a)&&H(c)},IsIterable:function(a){return m.TypeIsObject(a)&&("undefined"!==typeof a[P]||Ja(a))},GetIterator:function(a){if(Ja(a))return new aa(a,"value");var c=m.GetMethod(a,P);if(!m.IsCallable(c))throw new TypeError("value is not an iterable");a=m.Call(c,a);if(!m.TypeIsObject(a))throw new TypeError("bad iterator");
return a},GetMethod:function(a,c){a=m.ToObject(a)[c];if(!T(a)){if(!m.IsCallable(a))throw new TypeError("Method not callable: "+c);return a}},IteratorComplete:function(a){return!!a.done},IteratorClose:function(a,c){var b=m.GetMethod(a,"return");if(void 0!==b){try{var d=m.Call(b,a)}catch(sa){var g=sa}if(!c){if(g)throw g;if(!m.TypeIsObject(d))throw new TypeError("Iterator's return method returned a non-object.");}}},IteratorNext:function(a){var c=1<arguments.length?a.next(arguments[1]):a.next();if(!m.TypeIsObject(c))throw new TypeError("bad iterator");
return c},IteratorStep:function(a){a=m.IteratorNext(a);return m.IteratorComplete(a)?!1:a},Construct:function(a,c,b,d){b="undefined"===typeof b?a:b;if(!d&&Z.construct)return Z.construct(a,c,b);d=b.prototype;m.TypeIsObject(d)||(d=Object.prototype);d=L(d);a=m.Call(a,d,c);return m.TypeIsObject(a)?a:d},SpeciesConstructor:function(a,c){a=a.constructor;if(void 0===a)return c;if(!m.TypeIsObject(a))throw new TypeError("Bad constructor");a=a[Ha];if(T(a))return c;if(!m.IsConstructor(a))throw new TypeError("Bad @@species");
return a},CreateHTML:function(a,c,b,d){a=m.ToString(a);var g="<"+c;""!==b&&(d=m.ToString(d).replace(/"/g,"&quot;"),g+=" "+b+'="'+d+'"');return g+">"+a+"</"+c+">"},IsRegExp:function(a){if(!m.TypeIsObject(a))return!1;var c=a[y.match];return"undefined"!==typeof c?!!c:C.regex(a)},ToString:function(a){return Ka(a)}};if(c&&pa){var ua=function(a){if(C.symbol(y[a]))return y[a];var c=y["for"]("Symbol."+a);Object.defineProperty(y,a,{configurable:!1,enumerable:!1,writable:!1,value:c});return c};if(!C.symbol(y.search)){var fb=
ua("search"),gb=String.prototype.search;n(RegExp.prototype,fb,function(a){return m.Call(gb,a,[this])});u(String.prototype,"search",function(a){var c=m.RequireObjectCoercible(this);if(!T(a)){var b=m.GetMethod(a,fb);if("undefined"!==typeof b)return m.Call(b,a,[c])}return m.Call(gb,c,[m.ToString(a)])})}if(!C.symbol(y.replace)){var hb=ua("replace"),ib=String.prototype.replace;n(RegExp.prototype,hb,function(a,c){return m.Call(ib,a,[this,c])});u(String.prototype,"replace",function(a,c){var b=m.RequireObjectCoercible(this);
if(!T(a)){var d=m.GetMethod(a,hb);if("undefined"!==typeof d)return m.Call(d,a,[b,c])}return m.Call(ib,b,[m.ToString(a),c])})}if(!C.symbol(y.split)){var jb=ua("split"),kb=String.prototype.split;n(RegExp.prototype,jb,function(a,c){return m.Call(kb,a,[this,c])});u(String.prototype,"split",function(a,c){var b=m.RequireObjectCoercible(this);if(!T(a)){var d=m.GetMethod(a,jb);if("undefined"!==typeof d)return m.Call(d,a,[b,c])}return m.Call(kb,b,[m.ToString(a),c])})}var lb=C.symbol(y.match),Zb=lb&&function(){var a=
{};a[y.match]=function(){return 42};return 42!=="a".match(a)}();if(!lb||Zb){var mb=ua("match"),nb=String.prototype.match;n(RegExp.prototype,mb,function(a){return m.Call(nb,a,[this])});u(String.prototype,"match",function(a){var c=m.RequireObjectCoercible(this);if(!T(a)){var b=m.GetMethod(a,mb);if("undefined"!==typeof b)return m.Call(b,a,[c])}return m.Call(nb,c,[m.ToString(a)])})}}var ob=function(a,b,d){t.preserveToString(b,a);Object.setPrototypeOf&&Object.setPrototypeOf(a,b);c?l(Object.getOwnPropertyNames(a),
function(c){c in ia||d[c]||t.proxy(a,c,b)}):l(Object.keys(a),function(c){c in ia||d[c]||(b[c]=a[c])});b.prototype=a.prototype;t.redefine(a.prototype,"constructor",b)},$b=function(){return this},qa=function(a){c&&!ta(a,Ha)&&t.getter(a,Ha,$b)},Q=function(a,c){c=c||function(){return this};n(a,P,c);!a[P]&&C.symbol(P)&&(a[P]=c)},pb=function(a,b,d){c?Object.defineProperty(a,b,{configurable:!0,enumerable:!0,writable:!0,value:d}):a[b]=d;if(!m.SameValue(a[b],d))throw new TypeError("property is nonconfigurable");
},Ma=function(a,c,b,d){if(!m.TypeIsObject(a))throw new TypeError("Constructor requires `new`: "+c.name);a=c.prototype;m.TypeIsObject(a)||(a=b);b=L(a);for(var g in d)ta(d,g)&&n(b,g,d[g],!0);return b};if(String.fromCodePoint&&1!==String.fromCodePoint.length){var ac=String.fromCodePoint;u(String,"fromCodePoint",function(a){return m.Call(ac,this,arguments)})}var qb={fromCodePoint:function(a){for(var c=[],b,d=0,g=arguments.length;d<g;d++){b=Number(arguments[d]);if(!m.SameValue(b,m.ToInteger(b))||0>b||
1114111<b)throw new RangeError("Invalid code point "+b);65536>b?V(c,String.fromCharCode(b)):(b-=65536,V(c,String.fromCharCode((b>>10)+55296)),V(c,String.fromCharCode(b%1024+56320)))}return c.join("")},raw:function(a){var c=m.ToObject(a,"bad callSite");c=m.ToObject(c.raw,"bad raw value");var b=m.ToLength(c.length);if(0>=b)return"";for(var d=[],g=0,l;g<b;){l=m.ToString(g);l=m.ToString(c[l]);V(d,l);if(g+1>=b)break;l=g+1<arguments.length?arguments[g+1]:"";l=m.ToString(l);V(d,l);g+=1}return d.join("")}};
String.raw&&"xy"!==String.raw({raw:{0:"x",1:"y",length:2}})&&u(String,"raw",qb.raw);v(String,qb);var bc=function Ea(a,c){if(1>c)return"";if(c%2)return Ea(a,c-1)+a;a=Ea(a,c/2);return a+a},ba={repeat:function(a){var c=m.ToString(m.RequireObjectCoercible(this));a=m.ToInteger(a);if(0>a||Infinity<=a)throw new RangeError("repeat count must be less than infinity and not overflow maximum string size");return bc(c,a)},startsWith:function(a){var c=m.ToString(m.RequireObjectCoercible(this));if(m.IsRegExp(a))throw new TypeError('Cannot call method "startsWith" with a regex');
var b=m.ToString(a),d;1<arguments.length&&(d=arguments[1]);d=B(m.ToInteger(d),0);return N(c,d,d+b.length)===b},endsWith:function(a){var c=m.ToString(m.RequireObjectCoercible(this));if(m.IsRegExp(a))throw new TypeError('Cannot call method "endsWith" with a regex');var b=m.ToString(a),d=c.length,g;1<arguments.length&&(g=arguments[1]);g="undefined"===typeof g?d:m.ToInteger(g);d=S(B(g,0),d);return N(c,d-b.length,d)===b},includes:function(a){if(m.IsRegExp(a))throw new TypeError('"includes" does not accept a RegExp');
var c=m.ToString(a),b;1<arguments.length&&(b=arguments[1]);return-1!==Da(this,c,b)},codePointAt:function(a){var c=m.ToString(m.RequireObjectCoercible(this)),b=m.ToInteger(a),d=c.length;if(0<=b&&b<d){a=c.charCodeAt(b);if(55296>a||56319<a||b+1===d)return a;c=c.charCodeAt(b+1);return 56320>c||57343<c?a:1024*(a-55296)+(c-56320)+65536}}};String.prototype.includes&&!1!=="a".includes("a",Infinity)&&u(String.prototype,"includes",ba.includes);if(String.prototype.startsWith&&String.prototype.endsWith){var cc=
f(function(){return"/a/".startsWith(/a/)}),dc=b(function(){return!1==="abc".startsWith("a",Infinity)});cc&&dc||(u(String.prototype,"startsWith",ba.startsWith),u(String.prototype,"endsWith",ba.endsWith))}pa&&(b(function(){var a=/a/;a[y.match]=!1;return"/a/".startsWith(a)})||u(String.prototype,"startsWith",ba.startsWith),b(function(){var a=/a/;a[y.match]=!1;return"/a/".endsWith(a)})||u(String.prototype,"endsWith",ba.endsWith),b(function(){var a=/a/;a[y.match]=!1;return"/a/".includes(a)})||u(String.prototype,
"includes",ba.includes));v(String.prototype,ba);var ec=/(^[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff]+)|([\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff]+$)/g,rb=function(){return m.ToString(m.RequireObjectCoercible(this)).replace(ec,"")},sb=/[\u0085\u200b\ufffe]/g,tb=/^[-+]0x[0-9a-f]+$/i;n(String.prototype,"trim",rb,!0);
var ca=function(a){return{value:a,done:0===arguments.length}},Na=function(a){m.RequireObjectCoercible(a);this._s=m.ToString(a);this._i=0};Na.prototype.next=function(){var a=this._s,c=this._i;if("undefined"===typeof a||c>=a.length)return this._s=void 0,ca();var b=a.charCodeAt(c);55296>b||56319<b||c+1===a.length?b=1:(b=a.charCodeAt(c+1),b=56320>b||57343<b?1:2);this._i=c+b;return ca(a.substr(c,b))};Q(Na.prototype);Q(String.prototype,function(){return new Na(this)});var va={from:function(a){var c;1<arguments.length&&
(c=arguments[1]);var b;if("undefined"===typeof c)var d=!1;else{if(!m.IsCallable(c))throw new TypeError("Array.from: when provided, the second argument must be a function");2<arguments.length&&(b=arguments[2]);d=!0}var g;if("undefined"!==typeof(Ja(a)||m.GetMethod(a,P))){var l=m.IsConstructor(this)?Object(new this):[];var e=m.GetIterator(a);for(g=0;;){var f=m.IteratorStep(e);if(!1===f)break;f=f.value;try{d&&(f="undefined"===typeof b?c(f,g):h(c,b,f,g)),l[g]=f}catch(fc){throw m.IteratorClose(e,!0),fc;
}g+=1}e=g}else for(f=m.ToObject(a),e=m.ToLength(f.length),l=m.IsConstructor(this)?Object(new this(e)):Array(e),g=0;g<e;++g){var n=f[g];d&&(n="undefined"===typeof b?c(n,g):h(c,b,n,g));pb(l,g,n)}l.length=e;return l},of:function(){for(var a=arguments.length,c=k(this)||!m.IsCallable(this)?Array(a):m.Construct(this,[a]),b=0;b<a;++b)pb(c,b,arguments[b]);c.length=a;return c}};v(Array,va);qa(Array);var aa=function(a,c){this.i=0;this.array=a;this.kind=c};v(aa.prototype,{next:function(){var a=this.i,c=this.array;
if(!(this instanceof aa))throw new TypeError("Not an ArrayIterator");if("undefined"!==typeof c)for(var b=m.ToLength(c.length);a<b;){b=this.kind;var d;"key"===b?d=a:"value"===b?d=c[a]:"entry"===b&&(d=[a,c[a]]);this.i=a+1;return ca(d)}this.array=void 0;return ca()}});Q(aa.prototype);Array.of===va.of||function(){var a=function(a){this.length=a};a.prototype=[];var c=Array.of.apply(a,[1,2]);return c instanceof a&&2===c.length}()||u(Array,"of",va.of);var Ra={copyWithin:function(a,c){var b=m.ToObject(this),
d=m.ToLength(b.length),g=m.ToInteger(a),l=m.ToInteger(c);g=0>g?B(d+g,0):S(g,d);l=0>l?B(d+l,0):S(l,d);var e;2<arguments.length&&(e=arguments[2]);e="undefined"===typeof e?d:m.ToInteger(e);e=0>e?B(d+e,0):S(e,d);d=S(e-l,d-g);e=1;l<g&&g<l+d&&(e=-1,l+=d-1,g+=d-1);for(;0<d;)l in b?b[g]=b[l]:delete b[g],l+=e,g+=e,--d;return b},fill:function(a){var c;1<arguments.length&&(c=arguments[1]);var b;2<arguments.length&&(b=arguments[2]);var d=m.ToObject(this),g=m.ToLength(d.length);c=m.ToInteger("undefined"===typeof c?
0:c);b=m.ToInteger("undefined"===typeof b?g:b);c=0>c?B(g+c,0):S(c,g);for(b=0>b?g+b:b;c<g&&c<b;++c)d[c]=a;return d},find:function(a){var c=m.ToObject(this),b=m.ToLength(c.length);if(!m.IsCallable(a))throw new TypeError("Array#find: predicate must be a function");for(var d=1<arguments.length?arguments[1]:null,g=0,l;g<b;g++)if(l=c[g],d){if(h(a,d,l,g,c))return l}else if(a(l,g,c))return l},findIndex:function(a){var c=m.ToObject(this),b=m.ToLength(c.length);if(!m.IsCallable(a))throw new TypeError("Array#findIndex: predicate must be a function");
for(var d=1<arguments.length?arguments[1]:null,g=0;g<b;g++)if(d){if(h(a,d,c[g],g,c))return g}else if(a(c[g],g,c))return g;return-1},keys:function(){return new aa(this,"key")},values:function(){return new aa(this,"value")},entries:function(){return new aa(this,"entry")}};Array.prototype.keys&&!m.IsCallable([1].keys().next)&&delete Array.prototype.keys;Array.prototype.entries&&!m.IsCallable([1].entries().next)&&delete Array.prototype.entries;Array.prototype.keys&&Array.prototype.entries&&!Array.prototype.values&&
Array.prototype[P]&&(v(Array.prototype,{values:Array.prototype[P]}),C.symbol(y.unscopables)&&(Array.prototype[y.unscopables].values=!0));if(g&&Array.prototype.values&&"values"!==Array.prototype.values.name){var gc=Array.prototype.values;u(Array.prototype,"values",function(){return m.Call(gc,this,arguments)});n(Array.prototype,P,Array.prototype.values,!0)}v(Array.prototype,Ra);0>1/[!0].indexOf(!0,-0)&&n(Array.prototype,"indexOf",function(a){var c=Ga(this,arguments);return 0===c&&0>1/c?0:c},!0);Q(Array.prototype,
function(){return this.values()});Object.getPrototypeOf&&Q(Object.getPrototypeOf([].values()));var hc=function(){return b(function(){return 0===Array.from({length:-1}).length})}(),ic=function(){var a=Array.from([0].entries());return 1===a.length&&k(a[0])&&0===a[0][0]&&0===a[0][1]}();hc&&ic||u(Array,"from",va.from);if(!function(){return b(function(){return Array.from([0],void 0)})}()){var ub=Array.from;u(Array,"from",function(a){return 1<arguments.length&&"undefined"!==typeof arguments[1]?m.Call(ub,
this,arguments):h(ub,this,a)})}var jc=-(Math.pow(2,32)-1),da=function(a,c){var d={length:jc};d[c?(d.length>>>0)-1:0]=!0;return b(function(){h(a,d,function(){throw new RangeError("should not reach here");},[]);return!0})};if(!da(Array.prototype.forEach)){var kc=Array.prototype.forEach;u(Array.prototype,"forEach",function(a){return m.Call(kc,0<=this.length?this:[],arguments)},!0)}if(!da(Array.prototype.map)){var lc=Array.prototype.map;u(Array.prototype,"map",function(a){return m.Call(lc,0<=this.length?
this:[],arguments)},!0)}if(!da(Array.prototype.filter)){var mc=Array.prototype.filter;u(Array.prototype,"filter",function(a){return m.Call(mc,0<=this.length?this:[],arguments)},!0)}if(!da(Array.prototype.some)){var nc=Array.prototype.some;u(Array.prototype,"some",function(a){return m.Call(nc,0<=this.length?this:[],arguments)},!0)}if(!da(Array.prototype.every)){var oc=Array.prototype.every;u(Array.prototype,"every",function(a){return m.Call(oc,0<=this.length?this:[],arguments)},!0)}if(!da(Array.prototype.reduce)){var pc=
Array.prototype.reduce;u(Array.prototype,"reduce",function(a){return m.Call(pc,0<=this.length?this:[],arguments)},!0)}if(!da(Array.prototype.reduceRight,!0)){var qc=Array.prototype.reduceRight;u(Array.prototype,"reduceRight",function(a){return m.Call(qc,0<=this.length?this:[],arguments)},!0)}var rc=8!==Number("0o10"),sc=2!==Number("0b10"),tc=w("\u0085\u200b\ufffe",function(a){return 0===Number(a+0+a)});if(rc||sc||tc){var U=Number,vb=/^0b[01]+$/i,wb=/^0o[0-7]+$/i,uc=vb.test.bind(vb),vc=wb.test.bind(wb),
wc=function(a){if("function"===typeof a.valueOf){var c=a.valueOf();if(C.primitive(c))return c}if("function"===typeof a.toString&&(c=a.toString(),C.primitive(c)))return c;throw new TypeError("No default value");},xc=sb.test.bind(sb),yc=tb.test.bind(tb),wa=function(){var a=function(c){var d=0<arguments.length?C.primitive(c)?c:wc(c,"number"):0;if("string"===typeof d)if(d=m.Call(rb,d),uc(d))d=parseInt(N(d,2),2);else if(vc(d))d=parseInt(N(d,2),8);else if(xc(d)||yc(d))d=NaN;var g=this,l=b(function(){U.prototype.valueOf.call(g);
return!0});return g instanceof a&&!l?new U(d):U(d)};return a}();ob(U,wa,{});v(wa,{NaN:U.NaN,MAX_VALUE:U.MAX_VALUE,MIN_VALUE:U.MIN_VALUE,NEGATIVE_INFINITY:U.NEGATIVE_INFINITY,POSITIVE_INFINITY:U.POSITIVE_INFINITY});Number=wa;t.redefine(q,"Number",wa)}var xb=Math.pow(2,53)-1;v(Number,{MAX_SAFE_INTEGER:xb,MIN_SAFE_INTEGER:-xb,EPSILON:2.220446049250313E-16,parseInt:q.parseInt,parseFloat:q.parseFloat,isFinite:Ia,isInteger:function(a){return Ia(a)&&m.ToInteger(a)===a},isSafeInteger:function(a){return Number.isInteger(a)&&
F(a)<=Number.MAX_SAFE_INTEGER},isNaN:H});n(Number,"parseInt",q.parseInt,Number.parseInt!==q.parseInt);1===[,1].find(function(){return!0})&&u(Array.prototype,"find",Ra.find);0!==[,1].findIndex(function(){return!0})&&u(Array.prototype,"findIndex",Ra.findIndex);var yb=Function.bind.call(Function.bind,Object.prototype.propertyIsEnumerable),xa=function(a,b){c&&yb(a,b)&&Object.defineProperty(a,b,{enumerable:!1})},zc=function(){var a=Number(this),c=arguments.length,b=c-a;b=Array(0>b?0:b);for(var d=a;d<c;++d)b[d-
a]=arguments[d];return b},zb=function(a){return function(c,b){c[b]=a[b];return c}},Ac=function(a,c){var b=p(Object(c)),d;m.IsCallable(Object.getOwnPropertySymbols)&&(d=A(Object.getOwnPropertySymbols(Object(c)),yb(c)));return r(ma(b,d||[]),zb(c),a)},Ab={assign:function(a,c){var b=m.ToObject(a,"Cannot convert undefined or null to object");return r(m.Call(zc,1,arguments),Ac,b)},is:function(a,c){return m.SameValue(a,c)}};Object.assign&&Object.preventExtensions&&function(){var a=Object.preventExtensions({1:2});
try{Object.assign(a,"xy")}catch(K){return"y"===a[1]}}()&&u(Object,"assign",Ab.assign);v(Object,Ab);if(c){var Bc={setPrototypeOf:function(a,c){var b=function(a,c){if(!m.TypeIsObject(a))throw new TypeError("cannot set prototype on a non-object");if(null!==c&&!m.TypeIsObject(c))throw new TypeError("can only set prototype to an object or null"+c);h(d,a,c);return a};try{var d=a.getOwnPropertyDescriptor(a.prototype,c).set;h(d,{},null)}catch(sa){if(a.prototype!=={}[c])return;d=function(a){this[c]=a};b.polyfill=
b(b({},null),a.prototype)instanceof a}return b}(Object,"__proto__")};v(Object,Bc)}Object.setPrototypeOf&&Object.getPrototypeOf&&null!==Object.getPrototypeOf(Object.setPrototypeOf({},null))&&null===Object.getPrototypeOf(Object.create(null))&&function(){var a=Object.create(null),c=Object.getPrototypeOf,b=Object.setPrototypeOf;Object.getPrototypeOf=function(b){b=c(b);return b===a?null:b};Object.setPrototypeOf=function(c,d){return b(c,null===d?a:d)};Object.setPrototypeOf.polyfill=!1}();if(f(function(){return Object.keys("foo")})){var Cc=
Object.keys;u(Object,"keys",function(a){return Cc(m.ToObject(a))});p=Object.keys}if(f(function(){return Object.keys(/a/g)})){var Dc=Object.keys;u(Object,"keys",function(a){if(C.regex(a)){var c=[],b;for(b in a)ta(a,b)&&V(c,b);return c}return Dc(a)});p=Object.keys}if(Object.getOwnPropertyNames&&f(function(){return Object.getOwnPropertyNames("foo")})){var Ec="object"===typeof window?Object.getOwnPropertyNames(window):[],Bb=Object.getOwnPropertyNames;u(Object,"getOwnPropertyNames",function(a){a=m.ToObject(a);
if("[object Window]"===x(a))try{return Bb(a)}catch(K){return ma([],Ec)}return Bb(a)})}if(Object.getOwnPropertyDescriptor&&f(function(){return Object.getOwnPropertyDescriptor("foo","bar")})){var Fc=Object.getOwnPropertyDescriptor;u(Object,"getOwnPropertyDescriptor",function(a,c){return Fc(m.ToObject(a),c)})}if(Object.seal&&f(function(){return Object.seal("foo")})){var Gc=Object.seal;u(Object,"seal",function(a){return m.TypeIsObject(a)?Gc(a):a})}if(Object.isSealed&&f(function(){return Object.isSealed("foo")})){var Hc=
Object.isSealed;u(Object,"isSealed",function(a){return m.TypeIsObject(a)?Hc(a):!0})}if(Object.freeze&&f(function(){return Object.freeze("foo")})){var Ic=Object.freeze;u(Object,"freeze",function(a){return m.TypeIsObject(a)?Ic(a):a})}if(Object.isFrozen&&f(function(){return Object.isFrozen("foo")})){var Jc=Object.isFrozen;u(Object,"isFrozen",function(a){return m.TypeIsObject(a)?Jc(a):!0})}if(Object.preventExtensions&&f(function(){return Object.preventExtensions("foo")})){var Kc=Object.preventExtensions;
u(Object,"preventExtensions",function(a){return m.TypeIsObject(a)?Kc(a):a})}if(Object.isExtensible&&f(function(){return Object.isExtensible("foo")})){var Lc=Object.isExtensible;u(Object,"isExtensible",function(a){return m.TypeIsObject(a)?Lc(a):!1})}if(Object.getPrototypeOf&&f(function(){return Object.getPrototypeOf("foo")})){var Mc=Object.getPrototypeOf;u(Object,"getPrototypeOf",function(a){return Mc(m.ToObject(a))})}var Nc=c&&function(){var a=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags");
return a&&m.IsCallable(a.get)}();c&&!Nc&&t.getter(RegExp.prototype,"flags",function(){if(!m.TypeIsObject(this))throw new TypeError("Method called on incompatible type: must be an object.");var a="";this.global&&(a+="g");this.ignoreCase&&(a+="i");this.multiline&&(a+="m");this.unicode&&(a+="u");this.sticky&&(a+="y");return a});var Oc=c&&b(function(){return"/a/i"===String(new RegExp(/a/g,"i"))}),Pc=pa&&c&&function(){var a=/./;a[y.match]=!1;return RegExp(a)===a}(),Cb=b(function(){return"/abc/"===RegExp.prototype.toString.call({source:"abc"})}),
Qc=Cb&&b(function(){return"/a/b"===RegExp.prototype.toString.call({source:"a",flags:"b"})});if(!Cb||!Qc){var Db=RegExp.prototype.toString;n(RegExp.prototype,"toString",function(){var a=m.RequireObjectCoercible(this);if(C.regex(a))return h(Db,a);var c=Ka(a.source);a=Ka(a.flags);return"/"+c+"/"+a},!0);t.preserveToString(RegExp.prototype.toString,Db)}if(c&&(!Oc||Pc)){var Rc=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags").get,Eb=Object.getOwnPropertyDescriptor(RegExp.prototype,"source")||{},
Sc=function(){return this.source},Tc=m.IsCallable(Eb.get)?Eb.get:Sc,Fb=RegExp,Sa=function(){return function Fa(a,c){var b=m.IsRegExp(a);return this instanceof Fa||!b||"undefined"!==typeof c||a.constructor!==Fa?C.regex(a)?(b=m.Call(Tc,a),a="undefined"===typeof c?m.Call(Rc,a):c,new Fa(b,a)):new Fb(a,c):a}}();ob(Fb,Sa,{$input:!0});RegExp=Sa;t.redefine(q,"RegExp",Sa)}if(c){var Ta={input:"$_",lastMatch:"$&",lastParen:"$+",leftContext:"$`",rightContext:"$'"};l(p(Ta),function(a){a in RegExp&&!(Ta[a]in RegExp)&&
t.getter(RegExp,Ta[a],function(){return RegExp[a]})})}qa(RegExp);var ya=1/Number.EPSILON,za=Math.pow(2,-23),Uc=Math.pow(2,127)*(2-za),Ua=Math.pow(2,-126),la=Math.E,Aa=Math.LOG2E,Vc=Math.LOG10E,Gb=Number.prototype.clz;delete Number.prototype.clz;var I={acosh:function(a){var c=Number(a);if(H(c)||1>a)return NaN;if(1===c)return 0;if(Infinity===c)return c;a=1/(c*c);if(2>c)return ka(c-1+Y(1-a)*c);c/=2;return ka(c+Y(1-a)*c-1)+1/Aa},asinh:function(a){var c=Number(a);if(0===c||!fa(c))return c;a=F(c);var b=
a*a;c=ja(c);return 1>a?c*ka(a+b/(Y(b+1)+1)):c*(ka(a/2+Y(1+1/b)*a/2-1)+1/Aa)},atanh:function(a){a=Number(a);if(0===a)return a;if(-1===a)return-Infinity;if(1===a)return Infinity;if(H(a)||-1>a||1<a)return NaN;var c=F(a);return ja(a)*ka(2*c/(1-c))/2},cbrt:function(a){a=Number(a);if(0===a)return a;var c=0>a;c&&(a=-a);if(Infinity===a)var b=Infinity;else b=G(W(a)/3),b=(a/(b*b)+2*b)/3;return c?-b:b},clz32:function(a){a=m.ToUint32(Number(a));return 0===a?32:Gb?m.Call(Gb,a):31-E(W(a+.5)*Aa)},cosh:function(a){a=
Number(a);if(0===a)return 1;if(H(a))return NaN;if(!fa(a))return Infinity;a=G(F(a)-1);return la/2*(a+1/(a*la*la))},expm1:function(a){a=Number(a);if(-Infinity===a)return-1;if(!fa(a)||0===a)return a;if(.5<F(a))return G(a)-1;for(var c=a,b=0,d=1;b+c!==b;)b+=c,d+=1,c*=a/d;return b},hypot:function(a,c){for(var b=0,d=0,g=0;g<arguments.length;++g){var l=F(Number(arguments[g]));d<l?(b*=d/l*(d/l),b+=1,d=l):b+=0<l?l/d*(l/d):l}return Infinity===d?Infinity:d*Y(b)},log2:function(a){return W(a)*Aa},log10:function(a){return W(a)*
Vc},log1p:ka,sign:ja,sinh:function(a){a=Number(a);if(!fa(a)||0===a)return a;var c=F(a);if(1>c)return c=Math.expm1(c),ja(a)*c*(1+1/(c+1))/2;c=G(c-1);return ja(a)*(c-1/(c*la*la))*(la/2)},tanh:function(a){a=Number(a);return H(a)||0===a?a:20<=a?1:-20>=a?-1:(Math.expm1(a)-Math.expm1(-a))/(G(a)+G(-a))},trunc:function(a){a=Number(a);return 0>a?-E(-a):E(a)},imul:function(a,c){a=m.ToUint32(a);c=m.ToUint32(c);var b=a&65535,d=c&65535;return b*d+((a>>>16&65535)*d+b*(c>>>16&65535)<<16>>>0)|0},fround:function(a){var c=
Number(a);if(0===c||Infinity===c||-Infinity===c||H(c))return c;a=ja(c);c=F(c);if(c<Ua)return a*(c/Ua/za+ya-ya)*Ua*za;var b=(1+za/Number.EPSILON)*c;c=b-(b-c);return c>Uc||H(c)?Infinity*a:a*c}};v(Math,I);n(Math,"sinh",I.sinh,Infinity===Math.sinh(710));n(Math,"cosh",I.cosh,Infinity===Math.cosh(710));n(Math,"log1p",I.log1p,-1E-17!==Math.log1p(-1E-17));n(Math,"asinh",I.asinh,Math.asinh(-1E7)!==-Math.asinh(1E7));n(Math,"asinh",I.asinh,Infinity===Math.asinh(1E300));n(Math,"atanh",I.atanh,0===Math.atanh(1E-300));
n(Math,"tanh",I.tanh,-2E-17!==Math.tanh(-2E-17));n(Math,"acosh",I.acosh,Infinity===Math.acosh(Number.MAX_VALUE));n(Math,"acosh",I.acosh,!(8>F(1-Math.acosh(1+Number.EPSILON)/Math.sqrt(2*Number.EPSILON))/Number.EPSILON));n(Math,"cbrt",I.cbrt,!(8>F(1-Math.cbrt(1E-300)/1E-100)/Number.EPSILON));n(Math,"sinh",I.sinh,-2E-17!==Math.sinh(-2E-17));var Hb=Math.expm1(10);n(Math,"expm1",I.expm1,22025.465794806718<Hb||22025.465794806718>Hb);var Wc=Math.round,Xc=0===Math.round(.5-Number.EPSILON/4)&&1===Math.round(-.5+
Number.EPSILON/3.99),Yc=[ya+1,2*ya-1].every(function(a){return Math.round(a)===a});n(Math,"round",function(a){var c=E(a);return.5>a-c?c:-1===c?-0:c+1},!Xc||!Yc);t.preserveToString(Math.round,Wc);var Ib=Math.imul;-5!==Math.imul(4294967295,5)&&(Math.imul=I.imul,t.preserveToString(Math.imul,Ib));2!==Math.imul.length&&u(Math,"imul",function(a,c){return m.Call(Ib,Math,arguments)});var Ba=function(){var a=q.setTimeout;if("function"===typeof a||"object"===typeof a){m.IsPromise=function(a){return m.TypeIsObject(a)&&
"undefined"!==typeof a._promise?!0:!1};var c=function(a){if(!m.IsConstructor(a))throw new TypeError("Bad promise constructor");var c=this;c.resolve=void 0;c.reject=void 0;c.promise=new a(function(a,b){if(void 0!==c.resolve||void 0!==c.reject)throw new TypeError("Bad Promise implementation!");c.resolve=a;c.reject=b});if(!m.IsCallable(c.resolve)||!m.IsCallable(c.reject))throw new TypeError("Bad promise constructor");},b;"undefined"!==typeof window&&m.IsCallable(window.postMessage)&&(b=function(){var a=
[];window.addEventListener("message",function(c){c.source===window&&"zero-timeout-message"===c.data&&(c.stopPropagation(),0!==a.length&&ha(a)())},!0);return function(c){V(a,c);window.postMessage("zero-timeout-message","*")}});var d=function(){var a=q.Promise,c=a&&a.resolve&&a.resolve();return c&&function(a){return c.then(a)}},g=m.IsCallable(q.setImmediate)?q.setImmediate:"object"===typeof process&&process.nextTick?process.nextTick:d()||(m.IsCallable(b)?b():function(c){a(c,0)}),l=function(a){return a},
e=function(a){throw a;},f={},n=function(a,c,b){g(function(){if(c===f)a(b);else{try{var d=a(b);var g=c.resolve}catch(Va){d=Va,g=c.reject}g(d)}})},r=function(a,c){var b=a._promise,d=b.reactionLength;if(0<d&&(n(b.fulfillReactionHandler0,b.reactionCapability0,c),b.fulfillReactionHandler0=void 0,b.rejectReactions0=void 0,b.reactionCapability0=void 0,1<d))for(var g=1,l=0;g<d;g++,l+=3)n(b[l+0],b[l+2],c),a[l+0]=void 0,a[l+1]=void 0,a[l+2]=void 0;b.result=c;b.state=1;b.reactionLength=0},k=function(a,c){var b=
a._promise,d=b.reactionLength;if(0<d&&(n(b.rejectReactionHandler0,b.reactionCapability0,c),b.fulfillReactionHandler0=void 0,b.rejectReactions0=void 0,b.reactionCapability0=void 0,1<d))for(var g=1,l=0;g<d;g++,l+=3)n(b[l+1],b[l+2],c),a[l+0]=void 0,a[l+1]=void 0,a[l+2]=void 0;b.result=c;b.state=2;b.reactionLength=0},A=function(a){var c=!1;return{resolve:function(b){if(!c){c=!0;if(b===a)return k(a,new TypeError("Self resolution"));if(!m.TypeIsObject(b))return r(a,b);try{var d=b.then}catch(Zc){return k(a,
Zc)}if(!m.IsCallable(d))return r(a,b);g(function(){var c=d,g=A(a),l=g.resolve;g=g.reject;try{x(c,b,l,g)}catch($c){g($c)}})}},reject:function(b){if(!c)return c=!0,k(a,b)}}},x=function(a,c,b,d){a===J?h(a,c,b,d,f):h(a,c,b,d)},w=function(){var a=function(c){if(!(this instanceof a))throw new TypeError('Constructor Promise requires "new"');if(this&&this._promise)throw new TypeError("Bad construction");if(!m.IsCallable(c))throw new TypeError("not a valid resolver");var b=Ma(this,a,t,{_promise:{result:void 0,
state:0,reactionLength:0,fulfillReactionHandler0:void 0,rejectReactionHandler0:void 0,reactionCapability0:void 0}}),d=A(b),g=d.reject;try{c(d.resolve,g)}catch(Va){g(Va)}return b};return a}();var t=w.prototype;var p=function(a,c,b,d){var g=!1;return function(l){g||(g=!0,c[a]=l,0===--d.count&&(l=b.resolve,l(c)))}};v(w,{all:function(a){if(!m.TypeIsObject(this))throw new TypeError("Promise is not object");var b=new c(this),d;try{var g=m.GetIterator(a);a=d={iterator:g,done:!1};for(var l=a.iterator,e=[],
f={count:1},h,n,r=0;;){try{h=m.IteratorStep(l);if(!1===h){a.done=!0;break}n=h.value}catch(Xa){throw a.done=!0,Xa;}e[r]=void 0;var k=this.resolve(n),v=p(r,e,b,f);f.count+=1;x(k.then,k,v,b.reject);r+=1}if(0===--f.count){var A=b.resolve;A(e)}return b.promise}catch(Xa){l=Xa;if(d&&!d.done)try{m.IteratorClose(g,!0)}catch(bd){l=bd}g=b.reject;g(l);return b.promise}},race:function(a){if(!m.TypeIsObject(this))throw new TypeError("Promise is not object");var b=new c(this),d;try{var g=m.GetIterator(a);a=d={iterator:g,
done:!1};for(var l=a.iterator,e,f,h;;){try{e=m.IteratorStep(l);if(!1===e){a.done=!0;break}f=e.value}catch(Wa){throw a.done=!0,Wa;}h=this.resolve(f);x(h.then,h,b.resolve,b.reject)}return b.promise}catch(Wa){l=Wa;if(d&&!d.done)try{m.IteratorClose(g,!0)}catch(ad){l=ad}g=b.reject;g(l);return b.promise}},reject:function(a){if(!m.TypeIsObject(this))throw new TypeError("Bad promise constructor");var b=new c(this),d=b.reject;d(a);return b.promise},resolve:function(a){if(!m.TypeIsObject(this))throw new TypeError("Bad promise constructor");
if(m.IsPromise(a)&&a.constructor===this)return a;var b=new c(this),d=b.resolve;d(a);return b.promise}});v(t,{"catch":function(a){return this.then(null,a)},then:function(a,b){if(!m.IsPromise(this))throw new TypeError("not a promise");var d=m.SpeciesConstructor(this,w);d=2<arguments.length&&arguments[2]===f&&d===w?f:new c(d);var g=m.IsCallable(a)?a:l,h=m.IsCallable(b)?b:e,r=this._promise;if(0===r.state){if(0===r.reactionLength)r.fulfillReactionHandler0=g,r.rejectReactionHandler0=h,r.reactionCapability0=
d;else{var k=3*(r.reactionLength-1);r[k+0]=g;r[k+1]=h;r[k+2]=d}r.reactionLength+=1}else if(1===r.state)r=r.result,n(g,d,r);else if(2===r.state)r=r.result,n(h,d,r);else throw new TypeError("unexpected Promise state");return d.promise}});f=new c(w);var J=t.then;return w}}();q.Promise&&(delete q.Promise.accept,delete q.Promise.defer,delete q.Promise.prototype.chain);if("function"===typeof Ba){v(q,{Promise:Ba});var cd=O(q.Promise,function(a){return a.resolve(42).then(function(){})instanceof a}),dd=!f(function(){return q.Promise.reject(42).then(null,
5).then(null,ia)}),ed=f(function(){return q.Promise.call(3,ia)}),fd=function(a){var c=a.resolve(5);c.constructor={};a=a.resolve(c);try{a.then(null,ia).then(null,ia)}catch(Ea){return!0}return c===a}(q.Promise),gd=c&&function(){var a=0,c=Object.defineProperty({},"then",{get:function(){a+=1}});Promise.resolve(c);return 1===a}(),Ya=function(a){var c=new Promise(a);a(3,function(){});this.then=c.then;this.constructor=BadResolverPromise_2};Ya.prototype=Promise.prototype;Ya.all=Promise.all;var hd=b(function(){return!!Ya.all([1,
2])});cd&&dd&&ed&&!fd&&gd&&!hd||(Promise=Ba,u(q,"Promise",Ba));if(1!==Promise.all.length){var id=Promise.all;u(Promise,"all",function(a){return m.Call(id,this,arguments)})}if(1!==Promise.race.length){var jd=Promise.race;u(Promise,"race",function(a){return m.Call(jd,this,arguments)})}if(1!==Promise.resolve.length){var kd=Promise.resolve;u(Promise,"resolve",function(a){return m.Call(kd,this,arguments)})}if(1!==Promise.reject.length){var ld=Promise.reject;u(Promise,"reject",function(a){return m.Call(ld,
this,arguments)})}xa(Promise,"all");xa(Promise,"race");xa(Promise,"resolve");xa(Promise,"reject");qa(Promise)}var Jb=function(a){var c=p(r(a,function(a,c){a[c]=!0;return a},{}));return a.join(":")===c.join(":")},md=Jb(["z","a","bb"]),nd=Jb(["z",1,"a","3",2]);if(c){var ea=function(a,c){return c||md?T(a)?"^"+m.ToString(a):"string"===typeof a?"$"+a:"number"===typeof a?nd?a:"n"+a:"boolean"===typeof a?"b"+a:null:null},Ca=function(){return Object.create?Object.create(null):{}},Za=function(a,c,b){if(k(b)||
C.string(b))l(b,function(a){if(!m.TypeIsObject(a))throw new TypeError("Iterator value "+a+" is not an entry object");c.set(a[0],a[1])});else if(b instanceof a)h(a.prototype.forEach,b,function(a,b){c.set(b,a)});else{if(!T(b)){var d=c.set;if(!m.IsCallable(d))throw new TypeError("bad map");var g=m.GetIterator(b)}if("undefined"!==typeof g)for(;;){a=m.IteratorStep(g);if(!1===a)break;a=a.value;try{if(!m.TypeIsObject(a))throw new TypeError("Iterator value "+a+" is not an entry object");h(d,c,a[0],a[1])}catch(Oa){throw m.IteratorClose(g,
!0),Oa;}}}},Kb=function(a,c,b){if(k(b)||C.string(b))l(b,function(a){c.add(a)});else if(b instanceof a)h(a.prototype.forEach,b,function(a){c.add(a)});else{if(!T(b)){var d=c.add;if(!m.IsCallable(d))throw new TypeError("bad set");var g=m.GetIterator(b)}if("undefined"!==typeof g)for(;;){a=m.IteratorStep(g);if(!1===a)break;a=a.value;try{h(d,c,a)}catch(Oa){throw m.IteratorClose(g,!0),Oa;}}}},ra={Map:function(){var a={},c=function(a,c){this.key=a;this.value=c;this.prev=this.next=null};c.prototype.isRemoved=
function(){return this.key===a};var b=function(a,c){if(!m.TypeIsObject(a)||!a._es6map)throw new TypeError("Method Map.prototype."+c+" called on incompatible receiver "+m.ToString(a));},d=function(a,c){b(a,"[[MapIterator]]");this.i=this.head=a._head;this.kind=c};d.prototype={isMapIterator:!0,next:function(){if(!this.isMapIterator)throw new TypeError("Not a MapIterator");var a=this.i,c=this.kind,b=this.head;if("undefined"===typeof this.i)return ca();for(;a.isRemoved()&&a!==b;)a=a.prev;for(;a.next!==
b;)if(a=a.next,!a.isRemoved())return c="key"===c?a.key:"value"===c?a.value:[a.key,a.value],this.i=a,ca(c);this.i=void 0;return ca()}};Q(d.prototype);var g=function Qa(){if(!(this instanceof Qa))throw new TypeError('Constructor Map requires "new"');if(this&&this._es6map)throw new TypeError("Bad construction");var a=Ma(this,Qa,l,{_es6map:!0,_head:null,_map:D?new D:null,_size:0,_storage:Ca()}),b=new c(null,null);b.next=b.prev=b;a._head=b;0<arguments.length&&Za(Qa,a,arguments[0]);return a};var l=g.prototype;
t.getter(l,"size",function(){if("undefined"===typeof this._size)throw new TypeError("size method called on incompatible Map");return this._size});v(l,{get:function(a){b(this,"get");var c=ea(a,!0);if(null!==c){if(a=this._storage[c])return a.value}else if(this._map){if(a=na.call(this._map,a))return a.value}else for(var d=c=this._head;(d=d.next)!==c;)if(m.SameValueZero(d.key,a))return d.value},has:function(a){b(this,"has");var c=ea(a,!0);if(null!==c)return"undefined"!==typeof this._storage[c];if(this._map)return oa.call(this._map,
a);for(var d=c=this._head;(d=d.next)!==c;)if(m.SameValueZero(d.key,a))return!0;return!1},set:function(a,d){b(this,"set");var g=this._head,l=g,e=ea(a,!0);if(null!==e){if("undefined"!==typeof this._storage[e])return this._storage[e].value=d,this;var f=this._storage[e]=new c(a,d);l=g.prev}else this._map&&(oa.call(this._map,a)?na.call(this._map,a).value=d:(f=new c(a,d),db.call(this._map,a,f),l=g.prev));for(;(l=l.next)!==g;)if(m.SameValueZero(l.key,a))return l.value=d,this;f=f||new c(a,d);m.SameValue(-0,
a)&&(f.key=0);f.next=this._head;f.prev=this._head.prev;f.prev.next=f;f.next.prev=f;this._size+=1;return this},"delete":function(c){b(this,"delete");var d=this._head,g=d,l=ea(c,!0);if(null!==l){if("undefined"===typeof this._storage[l])return!1;g=this._storage[l].prev;delete this._storage[l]}else if(this._map){if(!oa.call(this._map,c))return!1;g=na.call(this._map,c).prev;Xb.call(this._map,c)}for(;(g=g.next)!==d;)if(m.SameValueZero(g.key,c))return g.key=a,g.value=a,g.prev.next=g.next,g.next.prev=g.prev,
--this._size,!0;return!1},clear:function(){b(this,"clear");this._map=D?new D:null;this._size=0;this._storage=Ca();for(var c=this._head,d,g=c.next;(d=g)!==c;)d.key=a,d.value=a,g=d.next,d.next=d.prev=c;c.next=c.prev=c},keys:function(){b(this,"keys");return new d(this,"key")},values:function(){b(this,"values");return new d(this,"value")},entries:function(){b(this,"entries");return new d(this,"key+value")},forEach:function(a){b(this,"forEach");for(var c=1<arguments.length?arguments[1]:null,d=this.entries(),
g=d.next();!g.done;g=d.next())c?h(a,c,g.value[1],g.value[0],this):a(g.value[1],g.value[0],this)}});Q(l,l.entries);return g}(),Set:function(){var a=function(a,c){if(!m.TypeIsObject(a)||!a._es6set||"undefined"===typeof a._storage)throw new TypeError("Set.prototype."+c+" called on incompatible receiver "+m.ToString(a));},c=function Pa(){if(!(this instanceof Pa))throw new TypeError('Constructor Set requires "new"');if(this&&this._es6set)throw new TypeError("Bad construction");var a=Ma(this,Pa,b,{_es6set:!0,
"[[SetData]]":null,_storage:Ca()});if(!a._es6set)throw new TypeError("bad set");0<arguments.length&&Kb(Pa,a,arguments[0]);return a};var b=c.prototype;var d=function(a){if(!a["[[SetData]]"]){var c=new ra.Map;a["[[SetData]]"]=c;l(p(a._storage),function(a){if("^null"===a)a=null;else if("^undefined"!==a){var b=a.charAt(0);a="$"===b?N(a,1):"n"===b?+N(a,1):"b"===b?"btrue"===a:+a}else a=void 0;c.set(a,a)});a["[[SetData]]"]=c}a._storage=null};t.getter(c.prototype,"size",function(){a(this,"size");if(this._storage)return p(this._storage).length;
d(this);return this["[[SetData]]"].size});v(c.prototype,{has:function(c){a(this,"has");var b;if(this._storage&&null!==(b=ea(c)))return!!this._storage[b];d(this);return this["[[SetData]]"].has(c)},add:function(c){a(this,"add");var b;if(this._storage&&null!==(b=ea(c)))return this._storage[b]=!0,this;d(this);this["[[SetData]]"].set(c,c);return this},"delete":function(c){a(this,"delete");var b;if(this._storage&&null!==(b=ea(c)))return c=ta(this._storage,b),delete this._storage[b]&&c;d(this);return this["[[SetData]]"]["delete"](c)},
clear:function(){a(this,"clear");this._storage&&(this._storage=Ca());this["[[SetData]]"]&&this["[[SetData]]"].clear()},values:function(){a(this,"values");d(this);return new g(this["[[SetData]]"].values())},entries:function(){a(this,"entries");d(this);return new g(this["[[SetData]]"].entries())},forEach:function(c){a(this,"forEach");var b=1<arguments.length?arguments[1]:null,g=this;d(g);this["[[SetData]]"].forEach(function(a,d){b?h(c,b,d,d,g):c(d,d,g)})}});n(c.prototype,"keys",c.prototype.values,!0);
Q(c.prototype,c.prototype.values);var g=function(a){this.it=a};g.prototype={isSetIterator:!0,next:function(){if(!this.isSetIterator)throw new TypeError("Not a SetIterator");return this.it.next()}};Q(g.prototype);return c}()};q.Set&&!Set.prototype["delete"]&&Set.prototype.remove&&Set.prototype.items&&Set.prototype.map&&Array.isArray((new Set).keys)&&(q.Set=ra.Set);if(q.Map||q.Set){b(function(){return 2===(new Map([[1,2]])).get(1)})||(q.Map=function K(){if(!(this instanceof K))throw new TypeError('Constructor Map requires "new"');
var a=new D;0<arguments.length&&Za(K,a,arguments[0]);delete a.constructor;Object.setPrototypeOf(a,q.Map.prototype);return a},q.Map.prototype=L(D.prototype),n(q.Map.prototype,"constructor",q.Map,!0),t.preserveToString(q.Map,D));var Lb=new Map,Mb=function(){var a=new Map([[1,0],[2,0],[3,0],[4,0]]);a.set(-0,a);return a.get(0)===a&&a.get(-0)===a&&a.has(0)&&a.has(-0)}(),od=Lb.set(1,2)===Lb;Mb&&od||u(Map.prototype,"set",function(a,c){h(db,this,0===a?0:a,c);return this});Mb||(v(Map.prototype,{get:function(a){return h(na,
this,0===a?0:a)},has:function(a){return h(oa,this,0===a?0:a)}},!0),t.preserveToString(Map.prototype.get,na),t.preserveToString(Map.prototype.has,oa));var $a=new Set,Nb=Set.prototype["delete"]&&Set.prototype.add&&Set.prototype.has&&function(a){a["delete"](0);a.add(-0);return!a.has(0)}($a),pd=$a.add(1)===$a;if(!Nb||!pd){var Ob=Set.prototype.add;Set.prototype.add=function(a){h(Ob,this,0===a?0:a);return this};t.preserveToString(Set.prototype.add,Ob)}if(!Nb){var Pb=Set.prototype.has;Set.prototype.has=
function(a){return h(Pb,this,0===a?0:a)};t.preserveToString(Set.prototype.has,Pb);var Qb=Set.prototype["delete"];Set.prototype["delete"]=function(a){return h(Qb,this,0===a?0:a)};t.preserveToString(Set.prototype["delete"],Qb)}var Rb=O(q.Map,function(a){var c=new a([]);c.set(42,42);return c instanceof a}),qd=Object.setPrototypeOf&&!Rb;try{var Sb=!(q.Map()instanceof q.Map)}catch(z){Sb=z instanceof TypeError}if(0!==q.Map.length||qd||!Sb)q.Map=function K(){if(!(this instanceof K))throw new TypeError('Constructor Map requires "new"');
var a=new D;0<arguments.length&&Za(K,a,arguments[0]);delete a.constructor;Object.setPrototypeOf(a,K.prototype);return a},q.Map.prototype=D.prototype,n(q.Map.prototype,"constructor",q.Map,!0),t.preserveToString(q.Map,D);var rd=O(q.Set,function(a){var c=new a([]);c.add(42,42);return c instanceof a}),sd=Object.setPrototypeOf&&!rd;try{var Tb=!(q.Set()instanceof q.Set)}catch(z){Tb=z instanceof TypeError}if(0!==q.Set.length||sd||!Tb){var ab=q.Set;q.Set=function K(){if(!(this instanceof K))throw new TypeError('Constructor Set requires "new"');
var a=new ab;0<arguments.length&&Kb(K,a,arguments[0]);delete a.constructor;Object.setPrototypeOf(a,K.prototype);return a};q.Set.prototype=ab.prototype;n(q.Set.prototype,"constructor",q.Set,!0);t.preserveToString(q.Set,ab)}var bb=new q.Map,td=!b(function(){return bb.keys().next().done});("function"!==typeof q.Map.prototype.clear||0!==(new q.Set).size||0!==bb.size||"function"!==typeof q.Map.prototype.keys||"function"!==typeof q.Set.prototype.keys||"function"!==typeof q.Map.prototype.forEach||"function"!==
typeof q.Set.prototype.forEach||a(q.Map)||a(q.Set)||"function"!==typeof bb.keys().next||td||!Rb)&&v(q,{Map:ra.Map,Set:ra.Set},!0);q.Set.prototype.keys!==q.Set.prototype.values&&n(q.Set.prototype,"keys",q.Set.prototype.values,!0);Q(Object.getPrototypeOf((new q.Map).keys()));Q(Object.getPrototypeOf((new q.Set).keys()));if(g&&"has"!==q.Set.prototype.has.name){var ud=q.Set.prototype.has;u(q.Set.prototype,"has",function(a){return h(ud,this,a)})}}v(q,ra);qa(q.Map);qa(q.Set)}var R=function(a){if(!m.TypeIsObject(a))throw new TypeError("target must be an object");
},M={apply:function(){return m.Call(m.Call,null,arguments)},construct:function(a,c){if(!m.IsConstructor(a))throw new TypeError("First argument must be a constructor.");var b=2<arguments.length?arguments[2]:a;if(!m.IsConstructor(b))throw new TypeError("new.target must be a constructor.");return m.Construct(a,c,b,"internal")},deleteProperty:function(a,b){R(a);if(c){var d=Object.getOwnPropertyDescriptor(a,b);if(d&&!d.configurable)return!1}return delete a[b]},has:function(a,c){R(a);return c in a}};Object.getOwnPropertyNames&&
Object.assign(M,{ownKeys:function(a){R(a);var c=Object.getOwnPropertyNames(a);m.IsCallable(Object.getOwnPropertySymbols)&&X(c,Object.getOwnPropertySymbols(a));return c}});Object.preventExtensions&&Object.assign(M,{isExtensible:function(a){R(a);return Object.isExtensible(a)},preventExtensions:function(a){R(a);return!f(function(){return Object.preventExtensions(a)})}});if(c){var Ub=function(a,c,b){var d=Object.getOwnPropertyDescriptor(a,c);if(!d)return a=Object.getPrototypeOf(a),null===a?void 0:Ub(a,
c,b);if("value"in d)return d.value;if(d.get)return m.Call(d.get,b)},Vb=function(a,c,b,d){var g=Object.getOwnPropertyDescriptor(a,c);if(!g){a=Object.getPrototypeOf(a);if(null!==a)return Vb(a,c,b,d);g={value:void 0,writable:!0,enumerable:!0,configurable:!0}}return"value"in g?g.writable&&m.TypeIsObject(d)?Object.getOwnPropertyDescriptor(d,c)?Z.defineProperty(d,c,{value:b}):Z.defineProperty(d,c,{value:b,writable:!0,enumerable:!0,configurable:!0}):!1:g.set?(h(g.set,d,b),!0):!1};Object.assign(M,{defineProperty:function(a,
c,b){R(a);return!f(function(){return Object.defineProperty(a,c,b)})},getOwnPropertyDescriptor:function(a,c){R(a);return Object.getOwnPropertyDescriptor(a,c)},get:function(a,c){R(a);return Ub(a,c,2<arguments.length?arguments[2]:a)},set:function(a,c,b){R(a);return Vb(a,c,b,3<arguments.length?arguments[3]:a)}})}if(Object.getPrototypeOf){var vd=Object.getPrototypeOf;M.getPrototypeOf=function(a){R(a);return vd(a)}}Object.setPrototypeOf&&M.getPrototypeOf&&Object.assign(M,{setPrototypeOf:function(a,c){R(a);
if(null!==c&&!m.TypeIsObject(c))throw new TypeError("proto must be an object or null");if(c===Z.getPrototypeOf(a))return!0;if(Z.isExtensible&&!Z.isExtensible(a))return!1;var b;a:{for(b=c;b;){if(a===b){b=!0;break a}b=M.getPrototypeOf(b)}b=!1}if(b)return!1;Object.setPrototypeOf(a,c);return!0}});var wd=function(a,c){m.IsCallable(q.Reflect[a])?b(function(){q.Reflect[a](1);q.Reflect[a](NaN);q.Reflect[a](!0);return!0})&&u(q.Reflect,a,c):n(q.Reflect,a,c)};Object.keys(M).forEach(function(a){wd(a,M[a])});
var cb=q.Reflect.getPrototypeOf;g&&cb&&"getPrototypeOf"!==cb.name&&u(q.Reflect,"getPrototypeOf",function(a){return h(cb,q.Reflect,a)});q.Reflect.setPrototypeOf&&b(function(){q.Reflect.setPrototypeOf(1,{});return!0})&&u(q.Reflect,"setPrototypeOf",M.setPrototypeOf);q.Reflect.defineProperty&&(b(function(){var a=!q.Reflect.defineProperty(1,"test",{value:1}),c="function"!==typeof Object.preventExtensions||!q.Reflect.defineProperty(Object.preventExtensions({}),"test",{});return a&&c})||u(q.Reflect,"defineProperty",
M.defineProperty));q.Reflect.construct&&(b(function(){var a=function(){};return q.Reflect.construct(function(){},[],a)instanceof a})||u(q.Reflect,"construct",M.construct));if("Invalid Date"!==String(new Date(NaN))){var xd=Date.prototype.toString;u(Date.prototype,"toString",function(){var a=+this;return a!==a?"Invalid Date":m.Call(xd,this)})}var Wb={anchor:function(a){return m.CreateHTML(this,"a","name",a)},big:function(){return m.CreateHTML(this,"big","","")},blink:function(){return m.CreateHTML(this,
"blink","","")},bold:function(){return m.CreateHTML(this,"b","","")},fixed:function(){return m.CreateHTML(this,"tt","","")},fontcolor:function(a){return m.CreateHTML(this,"font","color",a)},fontsize:function(a){return m.CreateHTML(this,"font","size",a)},italics:function(){return m.CreateHTML(this,"i","","")},link:function(a){return m.CreateHTML(this,"a","href",a)},small:function(){return m.CreateHTML(this,"small","","")},strike:function(){return m.CreateHTML(this,"strike","","")},sub:function(){return m.CreateHTML(this,
"sub","","")},sup:function(){return m.CreateHTML(this,"sup","","")}};l(Object.keys(Wb),function(a){var c=String.prototype[a];if(m.IsCallable(c)){c=h(c,"",' " ');var b=ma([],c.match(/"/g)).length;c=c!==c.toLowerCase()||2<b}else c=!0;c&&u(String.prototype,a,Wb[a])});var yd=function(){if(!pa)return!1;var a="object"===typeof JSON&&"function"===typeof JSON.stringify?JSON.stringify:null;if(!a)return!1;if("undefined"!==typeof a(y())||"[null]"!==a([y()]))return!0;var c={a:y()};c[y()]=!0;return"{}"!==a(c)?
!0:!1}(),zd=b(function(){return pa?"{}"===JSON.stringify(Object(y()))&&"[{}]"===JSON.stringify([Object(y())]):!0});if(yd||!zd){var Ad=JSON.stringify;u(JSON,"stringify",function(a){if("symbol"!==typeof a){var c;1<arguments.length&&(c=arguments[1]);var b=[a];if(k(c))b.push(c);else{var d=m.IsCallable(c)?c:null;b.push(function(a,c){a=d?h(d,this,a,c):c;if("symbol"!==typeof a)return C.symbol(a)?zb({})(a):a})}2<arguments.length&&b.push(arguments[2]);return Ad.apply(this,b)}})}return q});
(function(e){(function(e){(function(e){(function(e){var f=function(){function b(){this._promises=new Map}Object.defineProperty(b.prototype,"length",{get:function(){return this._promises.size},enumerable:!0,configurable:!0});b.prototype.make=function(a,b,c){if(this._promises.has(a))return c("Existing request with token "+a);this._promises.set(a,{reject:c,resolve:b})};b.prototype.keep=function(a,b){var c=this._promises.get(a);if(!c)throw Error("No promise associated with token: "+a);c=c.resolve;this._promises.delete(a);
return c(b)};b.prototype.break=function(a,b){var c=this._promises.get(a);if(!c)throw Error("No promise associated with token: "+a);this._promises.delete(a);c.reject(b)};return b}();e.PromiseStore=f})(e.prediction||(e.prediction={}))})(e.text||(e.text={}))})(e.keyman||(e.keyman={}))})(com||(com={}));
(function(e){(function(e){(function(e){(function(e){var f=function(){function b(a,b){this._worker=b||e.DefaultWorker.constructInstance();this._worker.onmessage=this.onMessage.bind(this);this._declareLMLayerReady=null;this._predictPromises=new e.PromiseStore;this._wordbreakPromises=new e.PromiseStore;this._nextToken=Number.MIN_SAFE_INTEGER;this.sendConfig(a)}b.prototype.sendConfig=function(a){this._worker.postMessage({message:"config",capabilities:a})};b.prototype.loadModel=function(a){var b=this;
return new Promise(function(c,d){b._declareLMLayerReady=c;b._worker.postMessage({message:"load",model:a})})};b.prototype.unloadModel=function(){this._worker.postMessage({message:"unload"})};b.prototype.predict=function(a,b){var c=this,d=this._nextToken++;return new Promise(function(g,e){c._predictPromises.make(d,g,e);c._worker.postMessage({message:"predict",token:d,transform:a,context:b})})};b.prototype.wordbreak=function(a){var b=this,c=this._nextToken++;return new Promise(function(d,l){b._wordbreakPromises.make(c,
d,l);b._worker.postMessage({message:"wordbreak",token:c,context:a})})};b.prototype.onMessage=function(a){var b=a.data;if("error"===b.message)console.error(b.log),b.error&&console.error(b.error);else if("ready"===b.message)this._declareLMLayerReady(a.data.configuration);else if("suggestions"===b.message)this._predictPromises.keep(b.token,b.suggestions);else if("currentword"===b.message)this._wordbreakPromises.keep(b.token,b.word);else throw Error("Message not implemented: "+b.message);};b.prototype.shutdown=
function(){this._worker.terminate()};b.unwrap=function(a){return a.toString().match(/function[^{]+{((?:.|\r|\n)+)}[^}]*$/)[1]};return b}();e.LMLayer=f})(e.prediction||(e.prediction={}))})(e.text||(e.text={}))})(e.keyman||(e.keyman={}))})(com||(com={}));(function(){var e=com.keyman.text.prediction;"undefined"!==typeof module&&"undefined"!==typeof module.exports?(module.exports=e.LMLayer,e.LMLayer.PromiseStore=e.PromiseStore):window.LMLayer=e.LMLayer})();
(function(e){(function(e){(function(e){(function(h){var f=function(){return function(a,c){this.left=a.getTextBeforeCaret();this.startOfBuffer=this.left._kmwLength()>c.leftContextCodePoints;this.startOfBuffer||(this.left=this.left._kmwSubstr(-c.leftContextCodePoints));this.right=a.getTextAfterCaret();this.endOfBuffer=this.right._kmwLength()>c.leftContextCodePoints;this.endOfBuffer||(this.right=this.right._kmwSubstr(0,c.leftContextCodePoints))}}();h.TranscriptionContext=f;var b=function(){return function(a,
c){this.suggestions=a;this.transcriptionID=c}}();h.ReadySuggestions=b;var a=function(a){function c(){var c=null!==a&&a.apply(this,arguments)||this;c.recentTranscriptions=[];c._mayPredict=!0;c._mayCorrect=!0;return c}__extends(c,a);c.prototype.init=function(a){void 0===a&&(a=!1);a={maxLeftContextCodePoints:64,maxRightContextCodePoints:a?0:64};this.canEnable()&&(this.lmEngine=new h.LMLayer(a))};Object.defineProperty(c.prototype,"activeModel",{get:function(){return this.currentModel},enumerable:!0,configurable:!0});
c.prototype.unloadModel=function(){this.lmEngine.unloadModel();delete this.currentModel;delete this.configuration;this.emit("statechange","inactive")};c.prototype.loadModel=function(a){if(!a)throw Error("Null reference not allowed.");var c=this;return this.lmEngine.loadModel(a.path).then(function(b){c.currentModel=a;c.configuration=b;try{c.emit("statechange","active")}catch(A){console.error("Could not load model '"+a.id+"': "+A.message)}})};c.prototype.invalidateContext=function(a){this.emit("invalidatesuggestions",
"context");this.currentModel&&this.configuration&&a&&this.predict_internal(a.buildTranscriptionFrom(a,null))};c.prototype.wordbreak=function(a){if(!this.isActive)return null;a=new f(e.Mock.from(a),this.configuration);return this.lmEngine.wordbreak(a)};c.prototype.predict=function(a){if(!this.isActive||!this.currentModel||!this.configuration)return null;this.emit("invalidatesuggestions","new");return this.predict_internal(a)};c.prototype.predictFromTarget=function(a){if(!a)return null;a=a.buildTranscriptionFrom(a,
null);return this.predict(a)};c.prototype.predict_internal=function(a){if(!a)return null;var c=new f(a.preInput,this.configuration);this.recordTranscription(a);var d=a.transform,g=this.currentPromise=this.lmEngine.predict(a.alternates||a.transform,c),e=this;return g.then(function(a){if(g==e.currentPromise){var c=new b(a,d.id);e.emit("suggestionsready",c);e.currentPromise=null}return a})};c.prototype.recordTranscription=function(a){this.recentTranscriptions.push(a);this.recentTranscriptions.length>
c.TRANSCRIPTION_BUFFER&&this.recentTranscriptions.splice(0,1)};c.prototype.getPredictionState=function(a){var c=this.recentTranscriptions.filter(function(c){return c.token==a});return 0==c.length?null:c[0]};c.prototype.shutdown=function(){this.lmEngine.shutdown()};Object.defineProperty(c.prototype,"isActive",{get:function(){return this.canEnable()?this.activeModel&&this._mayPredict:this._mayPredict=!1},enumerable:!0,configurable:!0});c.prototype.canEnable=function(){return!0};Object.defineProperty(c.prototype,
"mayPredict",{get:function(){return this._mayPredict},set:function(a){if(this.canEnable()){var c=this._mayPredict;this._mayPredict=a;c!=a&&this.emit("statechange",a?"active":"inactive")}},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"mayCorrect",{get:function(){return this._mayCorrect},set:function(a){this._mayCorrect=a},enumerable:!0,configurable:!0});c.prototype.tryAcceptSuggestion=function(a){return!this.emit("tryaccept",a)};c.prototype.tryRevertSuggestion=function(){return!this.emit("tryrevert",
null)};return c}(EventEmitter);h.LanguageProcessor=a})(e.prediction||(e.prediction={}))})(e.text||(e.text={}))})(e.keyman||(e.keyman={}))})(com||(com={}));
(function(e){(function(e){(function(h){var k=function(){function f(b){b||(b=f.DEFAULT_OPTIONS);this.kbdProcessor=new h.KeyboardProcessor(b);this.lngProcessor=new h.prediction.LanguageProcessor}Object.defineProperty(f.prototype,"languageProcessor",{get:function(){return this.lngProcessor},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"keyboardProcessor",{get:function(){return this.kbdProcessor},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"keyboardInterface",
{get:function(){return this.keyboardProcessor.keyboardInterface},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"activeKeyboard",{get:function(){return this.keyboardInterface.activeKeyboard},set:function(b){this.keyboardInterface.activeKeyboard=b;this.resetContext()},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"activeModel",{get:function(){return this.languageProcessor.activeModel},enumerable:!0,configurable:!0});f.prototype.processKeyEvent=function(b){var a=
b.Ltarg,d=b.isSynthetic;if((b.device.formFactor==e.utils.FormFactor.Desktop||!this.activeKeyboard||this.activeKeyboard.usesDesktopLayoutOnDevice(b.device))&&d&&this.keyboardProcessor.selectLayer(b)||!d&&this.keyboardProcessor.doModifierPress(b,!d))return!0;if(!this.languageProcessor.isActive||("K_BKSP"!=b.kName&&b.Lcode!=h.Codes.keyCodes.K_BKSP||!this.languageProcessor.tryRevertSuggestion())&&("K_SPACE"!=b.kName&&b.Lcode!=h.Codes.keyCodes.K_SPACE||!this.languageProcessor.tryAcceptSuggestion("space"))){d=
h.Mock.from(a);var c=this.keyboardProcessor.processKeystroke(b,a);b.kNextLayer&&this.keyboardProcessor.selectLayer(b);if(null!=c){var g=void 0;if(this.languageProcessor.isActive&&!c.triggersDefaultCommand&&b.keyDistribution&&b.kbdLayer){var l=this.activeKeyboard.layout(b.device.formFactor);g=[];for(var f=0,k=b.keyDistribution;f<k.length;f++){var w=k[f],n=h.Mock.from(d),v=l.getLayer(b.kbdLayer).getKey(w.keyId);if(v){if(v=v.constructKeyEvent(this.keyboardProcessor,n,b.device),n=this.keyboardProcessor.processKeystroke(v,
n))n=n.transcription.transform,n.id=c.transcription.token,g.push({sample:n,p:w.p})}else console.warn("Potential fat-finger key could not be found in layer!")}}c.finalize(this.keyboardProcessor);c.transcription.alternates=g;c.predictionPromise=this.languageProcessor.predict(c.transcription);c.triggersDefaultCommand||a.doInputEvent()}return c}};f.prototype.resetContext=function(){this.keyboardProcessor.resetContext();this.languageProcessor.invalidateContext()};f.DEFAULT_OPTIONS={baseLayout:"us"};return f}();
h.InputProcessor=k})(e.text||(e.text={}))})(e.keyman||(e.keyman={}))})(com||(com={}));
(function(e){(function(h){(function(k){k.KeyboardInterface.prototype.registerKeyboard=function(h){e.keyman.singleton.keyboardManager._registerKeyboard(h)};k.KeyboardInterface.prototype.registerStub=function(h){return e.keyman.singleton.keyboardManager._registerStub(h)};k.KeyboardInterface.prototype.insertText=function(k,f){var b=e.keyman.singleton;this.resetContextCache();var a=this.activeTargetOutput?this.activeTargetOutput:h.dom.Utils.getOutputTarget();return null!=a?(b.uiManager.setActivatingUI(!0),
h.dom.DOMEventHandlers.states._IgnoreNextSelChange=100,b.domManager.focusLastActiveElement(),h.dom.DOMEventHandlers.states._IgnoreNextSelChange=0,null!=k&&this.output(0,a,k),"undefined"!==typeof f&&null!==f&&this.deadkeyOutput(0,a,f),a.invalidateSelection(),!0):!1};k.KeyboardInterface.prototype.saveFocus=function(){h.dom.DOMEventHandlers.states._IgnoreNextSelChange=1};k.KeyboardInterface.prototype.getLastActiveElement=function(){return h.dom.Utils.getOutputTarget()};k.KeyboardInterface.prototype.focusLastActiveElement=
function(){e.keyman.singleton.domManager.focusLastActiveElement()};k.KeyboardInterface.prototype.hideHelp=function(){e.keyman.singleton.osk._Hide(!0)};k.KeyboardInterface.prototype.showHelp=function(h,f){e.keyman.singleton.osk._Show(h,f)};k.KeyboardInterface.prototype.showPinnedHelp=function(){var h=e.keyman.singleton;h.osk.userPositioned=!0;h.osk._Show(-1,-1)};k.KeyboardInterface.prototype.GetLastActiveElement=k.KeyboardInterface.prototype.getLastActiveElement;k.KeyboardInterface.prototype.FocusLastActiveElement=
k.KeyboardInterface.prototype.focusLastActiveElement;k.KeyboardInterface.prototype.HideHelp=k.KeyboardInterface.prototype.hideHelp;k.KeyboardInterface.prototype.ShowHelp=k.KeyboardInterface.prototype.showHelp;k.KeyboardInterface.prototype.ShowPinnedHelp=k.KeyboardInterface.prototype.showPinnedHelp})(h.text||(h.text={}))})(e.keyman||(e.keyman={}))})(com||(com={}));
(function(e){(function(e){(function(e){var h=function(){return function(e){this.popupCanvasBackgroundColor="Android"==e.OS?"#999":"dark"==e.colorScheme?"#0f1319":"#ffffff"}}();e.StyleConstants=h})(e.utils||(e.utils={}))})(e.keyman||(e.keyman={}))})(com||(com={}));
(function(e){(function(e){var h=function(){function h(){this.detected=!1;this.touchable=!!("ontouchstart"in window);this.OS="";this.formFactor="desktop";this.dyLandscape=this.dyPortrait=0;this.version="0";this.orientation=window.orientation;this.browser=""}h.prototype.getDPI=function(){var e=document.createElement("DIV"),b=e.style,a=96;if("complete"!==document.readyState)return a;e.id="calculateDPI";b.position="absolute";b.display="block";b.visibility="hidden";b.left="10px";b.top="10px";b.width="1in";
b.height="10px";document.body.appendChild(e);a="undefined"==typeof window.devicePixelRatio?e.offsetWidth:e.offsetWidth*window.devicePixelRatio;document.body.removeChild(e);return a};h.prototype.detect=function(){var f=h._GetIEVersion(),b=!1;if(navigator&&navigator.userAgent){var a=navigator.userAgent;if(0<=a.indexOf("iPad"))this.OS="iOS",this.formFactor="tablet",this.dyPortrait=this.dyLandscape=0;else if(0<=a.indexOf("iPhone"))this.OS="iOS",this.formFactor="phone",this.dyPortrait=this.dyLandscape=
25;else if(0<=a.indexOf("Android")){this.OS="Android";this.formFactor="phone";this.dyPortrait=75;this.dyLandscape=25;try{this.version=a.match(/(?:Android\s+)(\d+\.\d+\.\d+)/)[1]}catch(d){}}else 0<=a.indexOf("Linux")?this.OS="Linux":0<=a.indexOf("Macintosh")?(a=/Intel Mac OS X (10(?:[_\.]\d+)+)/i.exec(a),1<a.length&&a[1]&&(b=a[1].replace("_","."),b=new e.utils.Version(b),b=0>=e.utils.Version.MAC_POSSIBLE_IPAD_ALIAS.compareTo(b),this.OS="MacOSX")):0<=a.indexOf("Windows NT")&&(this.OS="Windows",0<=a.indexOf("Touch")&&
(this.formFactor="phone"),"number"==typeof navigator.msMaxTouchPoints&&0<navigator.msMaxTouchPoints&&(this.touchable=!0))}"tablet"==this.formFactor&&400>Math.min(screen.width,screen.height)&&(this.formFactor="phone");"phone"==this.formFactor&&720<Math.max(screen.width,screen.height)&&"iOS"!=this.OS&&(this.formFactor="tablet");a="Win32"==navigator.platform||"MacIntel"==navigator.platform;"iOS"!=this.OS||"ongesturestart"in window||a||(this.OS="Android");this.browser="web";if(999>f)this.browser="ie";
else{if("iOS"==this.OS||"macosx"==this.OS.toLowerCase())this.browser="safari";/Firefox|Chrome|OPR|Safari|Edge/.test(navigator.userAgent)&&(0<=navigator.userAgent.indexOf("Firefox")&&"onmozorientationchange"in screen?this.browser="firefox":0<=navigator.userAgent.indexOf("OPR")?this.browser="opera":0<=navigator.userAgent.indexOf(" Edge/")?this.browser="edge":0<=navigator.userAgent.indexOf("Chrome")?this.browser="chrome":0<=navigator.userAgent.indexOf("Safari")&&(this.browser="safari"))}b&&"safari"==
this.browser&&window.TouchEvent&&(this.OS="iOS",this.formFactor="tablet",this.dyPortrait=this.dyLandscape=0,f=screen.height/screen.width,1>f&&(f=1/f),1.6<f&&(this.formFactor="phone",this.dyPortrait=this.dyLandscape=25));this.colorScheme=this.prefersDarkMode()?"dark":"light";this.detected=!0};h._GetIEVersion=function(){var e="";"userAgent"in navigator&&(e=navigator.userAgent);if("selection"in document){var b=navigator.appVersion;var a=b.indexOf("MSIE ");if(0<=a){if("BackCompat"==document.compatMode)return 6;
b=b.substr(a+5);a=b.indexOf(".");if(0<a)return parseInt(b.substr(0,a),10)}}a=e.indexOf("Trident/");if(0>a)return 999;e=e.substr(a+8);a=e.indexOf(".");return 0<a?parseInt(e.substr(0,a),10)+4:999};h.prototype.prefersDarkMode=function(){return window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches};Object.defineProperty(h.prototype,"styles",{get:function(){this._styles||(this.detected||this.detect(),this._styles=new e.utils.StyleConstants(this));return this._styles},enumerable:!0,
configurable:!0});Object.defineProperty(h.prototype,"coreSpec",{get:function(){return new e.utils.DeviceSpec(this.browser,this.formFactor,this.OS,this.touchable)},enumerable:!0,configurable:!0});return h}();e.Device=h})(e.keyman||(e.keyman={}))})(com||(com={}));
(function(e){(function(h){(function(h){var k=function(){function f(){}f.getOutputTarget=function(b){if(!b){var a=e.keyman.singleton;a&&(b=a.domManager.getLastActiveElement());if(!b)return null}if(b._kmwAttachment&&b._kmwAttachment.interface)return b._kmwAttachment.interface;throw Error("OSK could not find element output target data!");};f.getAbsoluteX=function(b){if(!b)return 0;var a=b.offsetLeft?b.offsetLeft:0;var d=b;if(d.offsetParent){for(;d.offsetParent;)d=d.offsetParent,a+=d.offsetLeft;var c=
d.ownerDocument;"fixed"==d.style.position&&c&&c.scrollingElement&&(a+=c.scrollingElement.scrollLeft)}return d&&d.ownerDocument&&b.ownerDocument!=window.document&&(b=d.ownerDocument)&&b.defaultView&&b.defaultView.frameElement?a+f.getAbsoluteX(b.defaultView.frameElement)-b.documentElement.scrollLeft:a};f.getAbsoluteY=function(b){if(!b)return 0;var a=b.offsetTop?b.offsetTop:0;var d=b;if(d.ownerDocument&&d instanceof d.ownerDocument.defaultView.HTMLElement){for(;d.offsetParent;)d=d.offsetParent,a+=d.offsetTop;
var c=d.ownerDocument;"fixed"==d.style.position&&c&&c.scrollingElement&&(a+=c.scrollingElement.scrollTop)}return d&&d.ownerDocument&&b.ownerDocument!=window.document&&(b=d.ownerDocument)&&b.defaultView&&b.defaultView.frameElement?a+f.getAbsoluteY(b.defaultView.frameElement):a};f.instanceof=function(b,a){if("TouchAliasElement"==a)return this.instanceof(b,"HTMLDivElement")?void 0!==b.base:!1;var d;if(!b)return!1;if(b.Window)return"Window"==a;b.defaultView?d=b.defaultView[a]:b.ownerDocument?d=b.ownerDocument.defaultView[a]:
b.target&&(this.instanceof(b.target,"Window")?d=b.target[a]:this.instanceof(b.target,"Document")?d=b.target.defaultView[a]:this.instanceof(b.target,"HTMLElement")&&(d=b.target.ownerDocument.defaultView[a]));return d?b instanceof d:!1};f.forceScroll=function(b){if(e&&e.keyman&&e.keyman.DOMEventHandlers&&!e.keyman.singleton.isEmbedded){var a=e.keyman.DOMEventHandlers,d=b.selectionStart,c=b.selectionEnd;a.states._IgnoreBlurFocus=!0;b.blur();b.focus();a.states._IgnoreBlurFocus=!1;b.selectionStart=d;b.selectionEnd=
c}};return f}();h.Utils=k})(h.dom||(h.dom={}))})(e.keyman||(e.keyman={}))})(com||(com={}));
(function(e){(function(h){(function(h){h.constructTouchAlias=function(e){var b=document.createElement("div"),a=new k,d;for(d in a)b.hasOwnProperty(d)||(b[d]=a[d]);e?b.initWithBase(e):b.init();return b};var k=function(){function f(){this.base=null;this.__activeCaret=!1}f.getDevice=function(){if(!f.device){var b=new e.keyman.Device;b.detect();f.device=b}return f.device};f.getOS=function(){return this.getDevice().OS};f.prototype.isMultiline=function(){return this.base&&"TEXTAREA"==this.base.nodeName};
f.prototype.initCaret=function(){this.__caretDiv=document.createElement("DIV");var b=this.__caretDiv.style;b.position="absolute";b.height="16px";b.width="2px";b.backgroundColor="blue";b.border="none";b.left=b.top="0px";b.display="block";b.visibility="hidden";b.zIndex="9998";this.__caretTimerId=window.setInterval(this.flashCaret.bind(this),500)};f.prototype.init=function(){this.className="keymanweb-input";var b=this.__scrollDiv=document.createElement("div"),a=this.style;a.overflow="hidden";a.position=
"absolute";a.border="hidden";a.border="none";a.borderRadius="5px";var d=this.__scrollBar=document.createElement("div"),c=d.style;c.position="absolute";c.height=c.width="4px";c.left=c.top="0";c.display="block";c.visibility="hidden";c.backgroundColor="#808080";c.borderRadius="2px";this.__preCaret=document.createElement("span");this.__postCaret=document.createElement("span");this.__caretSpan=document.createElement("span");this.__preCaret.innerHTML=this.__postCaret.innerHTML=this.__caretSpan.innerHTML=
"";this.__preCaret.className=this.__postCaret.className=this.__caretSpan.className="keymanweb-font";b.appendChild(this.__preCaret);b.appendChild(this.__caretSpan);b.appendChild(this.__postCaret);this.appendChild(b);this.appendChild(d);b=b.style;b.position="absolute";d=this.__preCaret.style;c=this.__postCaret.style;var g=this.__caretSpan.style;d.border=c.border="none";d.height=c.height="100%";g.border="1px solid red";g.visibility="hidden";g.marginLeft=g.marginRight="-1px";a.padding="8px";b.padding=
"0px 2px";this.tabIndex=0;this.style.msTouchAction="none";b.minWidth=a.width;b.height=a.height;this.initCaret()};f.prototype.initWithBase=function(b){this.base=b;this.init();this.base.kmw_ip=this;b.disabled=!0;var a=window.getComputedStyle(b,null),d=this.__scrollDiv.style,c=this.__preCaret.style,g=this.__postCaret.style;this.dir=b.dir;c.fontFamily=g.fontFamily=d.fontFamily=a.fontFamily;"input"!=b.nodeName.toLowerCase()||isNaN(parseInt(a.height,10))||(c.lineHeight=g.lineHeight=a.height);"Android"==
f.getOS()&&"transparent"==a.backgroundColor?d.backgroundColor="#fff":d.backgroundColor=a.backgroundColor;"textarea"==this.base.nodeName.toLowerCase()?c.whiteSpace=g.whiteSpace="pre-wrap":c.whiteSpace=g.whiteSpace="pre";this.base.parentNode.appendChild(this);this.updateInput();c=this.style;c.color=a.color;c.fontFamily=a.fontFamily;c.fontSize=a.fontSize;c.fontWeight=a.fontWeight;c.textDecoration=a.textDecoration;c.padding=a.padding;c.margin=a.margin;c.border=a.border;c.borderRadius=a.borderRadius;"webkitTapHighlightColor"in
c&&(c.webkitTapHighlightColor="rgba(0,0,0,0)");b instanceof b.ownerDocument.defaultView.HTMLTextAreaElement?(2==b.rows&&(g=parseInt(a.height,10)-parseInt(a.paddingTop,10)-parseInt(a.paddingBottom,10),a=parseInt(a.fontSize,10),a=Math.round(g/a),a>b.rows+1&&(b.rows=a)),d.width=c.width,d.minHeight=c.height):(d.minWidth=c.width,d.height=c.height);b.style.visibility="hidden";(function(a){a.__resizeHandler=function(){window.setTimeout(function(){a.updateInput()},1)};a.base.addEventListener("resize",a.__resizeHandler,
!1);a.base.addEventListener("orientationchange",a.__resizeHandler,!1)})(this);this.setText(b instanceof b.ownerDocument.defaultView.HTMLTextAreaElement||b instanceof b.ownerDocument.defaultView.HTMLInputElement?b.value:b.textContent,null)};f.prototype.setText=function(b,a){if(null===b){var d=this.__preCaret.textContent;b=this.__postCaret.textContent;b=d+b}0>a&&(a=0);d=b._kmwLength();if(null===a||void 0===a||a>d)a=d;d=b._kmwSubstr(0,a);b=b._kmwSubstr(a);this.__preCaret.textContent=d;this.__postCaret.textContent=
b;this.updateBaseElement()};f.prototype.getTextBeforeCaret=function(){return this.__preCaret.textContent};f.prototype.getTextAfterCaret=function(){return this.__postCaret.textContent};f.prototype.setTextBeforeCaret=function(b){this.isMultiline()||(b=b.replace(/\s+$/," "));this.__preCaret.textContent=b;this.updateBaseElement();this.scrollInput()};f.prototype.getTextCaret=function(){return this.getTextBeforeCaret()._kmwLength()};f.prototype.setTextCaret=function(b){this.setText(null,b);this.showCaret()};
f.prototype.updateBaseElement=function(){if(this.base){var b=this.base.ownerDocument.defaultView;this.base instanceof b.HTMLInputElement||this.base instanceof b.HTMLTextAreaElement?this.base.value=this.getText():this.base.textContent=this.getText();b=this.getText()._kmwLength();this.style.backgroundColor=0==b?"transparent":window.getComputedStyle(this.base,null).backgroundColor;"iOS"==f.getOS()&&(this.base.style.visibility=0==b?"visible":"hidden")}};f.prototype.flashCaret=function(){if(this.__activeCaret){var b=
this.__caretDiv.style;b.visibility="visible"!=b.visibility?"visible":"hidden"}};f.prototype.showCaret=function(){var b=this.__scrollDiv,a=this.__caretDiv.style,d=this.__caretSpan;this.__caretDiv.parentNode!=b&&b.appendChild(this.__caretDiv);a.left=d.offsetLeft+"px";a.top=d.offsetTop+"px";a.height=d.offsetHeight-1+"px";a.visibility="hidden";this.__activeCaret=!0;this.scrollBody();this.setScrollBar()};f.prototype.hideCaret=function(){if(this.base instanceof this.base.ownerDocument.defaultView.HTMLTextAreaElement||
this.base instanceof this.base.ownerDocument.defaultView.HTMLInputElement)this.base.value=this.getText();this.setText(null,1E5);var b=this.__scrollDiv.style;this.isMultiline()?b.top="0":b.left="rtl"==this.base.dir?this.offsetWidth-this.__scrollDiv.offsetWidth-8+"px":"0";this.__caretDiv.parentNode&&this.__caretDiv.parentNode.removeChild(this.__caretDiv);this.__caretDiv.style.visibility="hidden";this.__scrollBar.style.visibility="hidden";this.__activeCaret=!1};f.prototype.getText=function(){return this.textContent};
f.prototype.updateInput=function(){if(this.base){var b=this.style,a=this.base,d=window.getComputedStyle(a,null),c=parseInt(d.marginLeft,10),g=parseInt(d.marginTop,10),l=h.Utils.getAbsoluteX(a),e=h.Utils.getAbsoluteY(a),k=this.offsetParent;k&&(l-=h.Utils.getAbsoluteX(k),e-=h.Utils.getAbsoluteY(k));isNaN(c)&&(c=0);isNaN(g)&&(g=0);b.left=l-c+"px";b.top=e-g+"px";"undefined"!=typeof d.MozBoxSizing&&(b.left=l+"px",b.top=e+"px");c=a.offsetWidth;a=a.offsetHeight;g=parseInt(d.paddingLeft,10);l=parseInt(d.paddingRight,
10);e=parseInt(d.paddingTop,10);k=parseInt(d.paddingBottom,10);var w=parseInt(d.borderLeft,10),n=parseInt(d.borderRight,10),v=parseInt(d.borderTop,10),x=parseInt(d.borderBottom,10),p="undefined";"undefined"!=typeof d.boxSizing?p=d.boxSizing:"undefined"!=typeof d.MozBoxSizing&&(p=d.MozBoxSizing);"content-box"==p&&(isNaN(g)||(c-=g),isNaN(l)||(c-=l),isNaN(w)||(c-=w),isNaN(n)||(c-=n),isNaN(e)||(a-=e),isNaN(k)||(a-=k),isNaN(v)||(a-=v),isNaN(x)||(a-=x));"Android"==f.getOS()&&("undefined"!=typeof d.MozBoxSizing?
(b.paddingTop=e+1+"px",b.paddingLeft=g+"px",this.isMultiline()?b.marginTop="1px":b.marginLeft="1px",c--,a--):(c++,a++));b.width=c+"px";b.height=a+"px"}};f.prototype.scrollInput=function(){var b=this.__scrollDiv,a=this.__caretSpan,d=h.Utils.getAbsoluteX(a);a=h.Utils.getAbsoluteY(a);var c=h.Utils.getAbsoluteX(this),g=h.Utils.getAbsoluteY(this),l=parseInt(b.style.left,10),e=parseInt(b.style.top,10),f=0,k=0;isNaN(l)&&(l=0);isNaN(e)&&(e=0);this.isMultiline()?(d=Math.round(this.offsetHeight/this.base.rows),
a<g&&(k=a-g),a>g+this.offsetHeight-d&&(k=a-g-this.offsetHeight+d),0!=k&&(b.style.top=(e<k?e-k:0)+"px")):(d<c+8&&(f=d-c-12),d>c+this.offsetWidth-12&&(f=d-c-this.offsetWidth+12),0!=f&&(b.style.left=(l<f?l-f:0)+"px"));this.showCaret()};f.prototype.scrollBody=function(){var b=0;if(window.keyman){var a=window.keyman.osk;a&&a._Box&&(b=a._Box.offsetHeight)}a=this.__caretSpan;var d=h.Utils.getAbsoluteY(a),c=window.pageYOffset;d<c?b=d-c:(b=d-c-(window.innerHeight-b-a.offsetHeight-2),0>b&&(b=0));0!=b&&window.scrollTo(0,
b+window.pageYOffset)};f.prototype.setScrollBar=function(){var b=this.__scrollDiv,a=this.__scrollBar.style;(b.offsetWidth>this.offsetWidth||0>b.offsetLeft)&&!this.isMultiline()?(a.height="4px",a.width=this.offsetWidth/b.offsetWidth*100+"%",a.left=-b.offsetLeft/b.offsetWidth*100+"%",a.top="0",a.visibility="visible"):b.offsetHeight>this.offsetHeight||0>b.offsetTop?(a.width="4px",a.height=this.offsetHeight/b.offsetHeight*100+"%",a.top=-b.offsetTop/b.offsetHeight*100+"%",a.left="0",a.visibility="visible"):
a.visibility="hidden"};return f}()})(h.dom||(h.dom={}))})(e.keyman||(e.keyman={}))})(com||(com={}));
(function(e){(function(h){(function(k){var p=function(){function f(){}f._GetEventKeyCode=function(b){return b.keyCode?b.keyCode:b.which?b.which:null};f._GetKeyEventProperties=function(b,a){a=e.keyman.singleton;var d=a.core,c=new h.text.KeyEvent;b=a._GetEventObject(b);if(!0===b.cancelBubble)return null;var g=a.util.eventTarget(b);if(null==g)return null;3==g.nodeType&&(g=g.parentNode);c.Ltarg=k.Utils.getOutputTarget(g);c.Lcode=this._GetEventKeyCode(b);if(null==c.Lcode)return null;var l=d.keyboardProcessor.modStateFlags,
f=!1,A=!1;g=h.text.Codes.keyCodes;switch(c.Lcode){case g.K_CTRL:case g.K_LCTRL:case g.K_RCTRL:case g.K_CONTROL:case g.K_LCONTROL:case g.K_RCONTROL:f=!0;break;case g.K_LMENU:case g.K_RMENU:case g.K_ALT:case g.K_LALT:case g.K_RALT:A=!0}g=0|(b.getModifierState("Shift")?16:0);var w=h.text.Codes.modifierCodes;b.getModifierState("Control")&&(g|=0!=b.location&&f?1==b.location?w.LCTRL:w.RCTRL:l&3);b.getModifierState("Alt")&&(g|=0!=b.location&&A?1==b.location?w.LALT:w.RALT:l&12);c.Lstates=0;c.Lstates|=b.getModifierState("CapsLock")?
w.CAPS:w.NO_CAPS;c.Lstates|=b.getModifierState("NumLock")?w.NUM_LOCK:w.NO_NUM_LOCK;c.Lstates|=b.getModifierState("ScrollLock")||b.getModifierState("Scroll")?w.SCROLL_LOCK:w.NO_SCROLL_LOCK;g|=c.Lstates;c.LmodifierChange=d.keyboardProcessor.modStateFlags!=g;d.keyboardProcessor.modStateFlags=g;f=w.RALT|w.LCTRL;(l&f)==f&&(g&f)!=f&&(g&=~f);g&w.RALT&&(g&=~w.LCTRL);f=h.text.Codes.modifierBitmasks;(l=d.activeKeyboard)&&l.isChiral?(c.Lmodifiers=g&f.CHIRAL,l.emulatesAltGr&&(c.Lmodifiers&f.ALT_GR_SIM)==f.ALT_GR_SIM&&
(c.Lmodifiers^=f.ALT_GR_SIM,c.Lmodifiers|=w.RALT)):c.Lmodifiers=g&16|(g&(w.LCTRL|w.RCTRL)?32:0)|(g&(w.LALT|w.RALT)?64:0);l&&l.isMnemonic&&h.text.KeyboardProcessor.setMnemonicCode(c,b.getModifierState("Shift"),b.getModifierState("CapsLock"));c.LisVirtualKey="undefined"!=typeof b.charCode&&null!=b.charCode&&(0==b.charCode||0!=(c.Lmodifiers&111))||"keypress"!=b.type;c.device=a.util.physicalDevice.coreSpec;c.isSynthetic=!1;l&&!l.isMnemonic&&((b=h.KeyMapping.languageMap[d.keyboardProcessor.baseLayout])&&
b["k"+c.Lcode]&&(c.Lcode=b["k"+c.Lcode]),l.definesPositionalOrMnemonic||c.Lmodifiers&96||(c={Lcode:h.KeyMapping._USKeyCodeToCharCode(c),Ltarg:c.Ltarg,Lmodifiers:0,LisVirtualKey:!1,vkCode:c.Lcode,Lstates:c.Lstates,kName:"",device:a.util.physicalDevice.coreSpec,isSynthetic:!1}));!a.isEmbedded&&c.device.browser==h.utils.Browser.Firefox&&h.KeyMapping.browserMap.FF["k"+c.Lcode]&&(c.Lcode=h.KeyMapping.browserMap.FF["k"+c.Lcode]);return c};f.keyDown=function(b){var a=e.keyman.singleton.core;k.DOMEventHandlers.states.swallowKeypress=
!1;var d=this._GetKeyEventProperties(b,!0);if(null==d)return!0;(a=null!=a.processKeyEvent(d))?(b&&b.preventDefault&&(b.preventDefault(),b.stopPropagation()),k.DOMEventHandlers.states.swallowKeypress=!!d.Lcode,8==d.Lcode&&(k.DOMEventHandlers.states.swallowKeypress=!1)):k.DOMEventHandlers.states.swallowKeypress=!1;return!a};f.keyUp=function(b){var a=e.keyman.singleton.core;b=this._GetKeyEventProperties(b,!1);return null==b?!0:a.keyboardProcessor.doModifierPress(b,!1)};f.keyPress=function(b){var a=e.keyman.singleton,
d=a.core,c=this._GetKeyEventProperties(b);if(null==c||c.LisVirtualKey)return!0;if(!d.activeKeyboard.isMnemonic){if(!k.DOMEventHandlers.states.swallowKeypress||32>c.Lcode||a._BrowserIsSafari&&63232<c.Lcode&&63744>c.Lcode)return!0;if(b=a._GetEventObject(b))b.returnValue=!1;return!1}if(k.DOMEventHandlers.states.swallowKeypress||d.keyboardInterface.processKeystroke(c.Ltarg,c))return k.DOMEventHandlers.states.swallowKeypress=!1,b&&b.preventDefault&&(b.preventDefault(),b.stopPropagation()),!1;k.DOMEventHandlers.states.swallowKeypress=
!1;return!0};return f}();k.PreProcessor=p})(h.dom||(h.dom={}))})(e.keyman||(e.keyman={}))})(com||(com={}));
(function(e){(function(h){(function(h){var k=function(){function a(){this._DisableInput=!1;this._IgnoreNextSelChange=0;this._IgnoreBlurFocus=!1;this._SelectionControl=this._Selection=null}a.prototype.setFocusTimer=function(){this.focusing=!0;this.focusTimer=window.setTimeout(function(){this.focusing=!1}.bind(this),1E3)};return a}();h.CommonDOMStates=k;var f=function(){function a(d){this.setFocus=function(a){}.bind(this);this.setBlur=function(a){}.bind(this);this._ControlFocus=function(c){var d=this.keyman.util.device,
l=this.keyman.osk;c=this.keyman._GetEventObject(c);c=this.keyman.util.eventTarget(c);if(null==c)return!0;c.body&&(c=c.body);if(d.touchable&&(null==c.className||0>c.className.indexOf("keymanweb-input")))return!0;c.nodeName.toLowerCase();if(c.ownerDocument&&c instanceof c.ownerDocument.defaultView.HTMLInputElement){var e=c.type.toLowerCase();if("text"!=e&&"search"!=e)return!0}else if(!(c.ownerDocument&&"on"==c.ownerDocument.designMode||!d.touchable&&c.isContentEditable||c.ownerDocument&&c instanceof
c.ownerDocument.defaultView.HTMLTextAreaElement))return!0;b.states.activeElement=c;3==c.nodeType&&(c=c.parentNode);e=c;(null==c.className||0>c.className.indexOf("keymanweb-input"))&&this instanceof b&&this.scrollBody(c);c.ownerDocument&&c instanceof c.ownerDocument.defaultView.HTMLIFrameElement&&(this.keyman.domManager._AttachToIframe(c),c=c.contentWindow.document.body);var f=a.states.lastActiveElement;a.states.lastActiveElement=c;this.keyman.uiManager.justActivated?this._BlurKeyboardSettings():this._FocusKeyboardSettings(f?
!1:!0);if(this._CommonFocusHelper(c))return!0;c.ownerDocument&&c instanceof c.ownerDocument.defaultView.HTMLElement&&this.keyman.domManager._SetTargDir(c);this.doControlFocused(e,a.states.lastActiveElement);d.touchable?l._Enabled=!0:l.ready&&(this.keyman.isCJK()&&(l._Enabled=!0),l._Enabled?l._Show():l._Hide(!1));return!0}.bind(this);this._ControlBlur=function(c){c=this.keyman._GetEventObject(c);var b=this.keyman.util.eventTarget(c);if(null==b)return!0;b.body&&(b=b.body);if(a.states._IgnoreBlurFocus)return c.cancelBubble=
!0,c.stopPropagation(),!0;h.Utils.instanceof(a.states.activeElement,"TouchAliasElement")&&a.states.activeElement.hideCaret();a.states.activeElement=null;3==b.nodeType&&(b=b.parentNode);b.ownerDocument&&b instanceof b.ownerDocument.defaultView.HTMLIFrameElement&&(b=b.contentWindow.frameElement);this._BlurKeyboardSettings();a.states.lastActiveElement=b;this.keyman.uiManager.justActivated=!1;var d=this.keyman.uiManager.isActivating,f=e.keyman.singleton.core.activeKeyboard;!d&&f&&f.notify(0,h.Utils.getOutputTarget(b),
0);this.doControlBlurred(b,c,d);this.keyman.osk.ready&&!d&&this.keyman.osk._Hide(!1);this.doChangeEvent(b);this.keyman.resetContext();return!0}.bind(this);this._SelectionChange=function(){a.states._IgnoreNextSelChange&&a.states._IgnoreNextSelChange--;return!0}.bind(this);this._KeyDown=function(c){var b=this.keyman.core.activeKeyboard,d=this.keyman.osk,e=this.keyman.util;if(a.states._DisableInput||null==b)return!0;b=e.eventTarget(c);if(e.device.touchable){if(b&&"undefined"!=typeof b.kmwInput&&0==b.kmwInput)return!0}else if(b&&
0<=b.className.indexOf("kmw-disabled"))return!0;return d.ready?h.PreProcessor.keyDown(c):!0}.bind(this);this._KeyPress=function(c){return a.states._DisableInput||null==this.keyman.core.activeKeyboard?!0:h.PreProcessor.keyPress(c)}.bind(this);this._KeyUp=function(a){var c=this.keyman.osk,b=h.PreProcessor._GetKeyEventProperties(a,!1);if(null==b||!c.ready)return!0;c=b.Ltarg.getElement();if(13==b.Lcode){var d=!1;b.Ltarg instanceof c.ownerDocument.defaultView.HTMLTextAreaElement&&(d=!0);c.base&&c.base instanceof
c.base.ownerDocument.defaultView.HTMLTextAreaElement&&(d=!0);if(!d)return c instanceof c.ownerDocument.defaultView.HTMLInputElement&&("search"==c.type||"submit"==c.type?c.form.submit():this.keyman.domManager.moveToNext(!1)),!0}return h.PreProcessor.keyUp(a)}.bind(this);this.keyman=d}a.prototype.doControlFocused=function(a,c){var b={};b.target=a;b.activeControl=c;return this.keyman.util.callEvent("kmw.controlfocused",b)};a.prototype.doControlBlurred=function(a,c,b){var d={};d.target=a;d.event=c;d.isActivating=
b;return this.keyman.util.callEvent("kmw.controlblurred",d)};a.prototype._BlurKeyboardSettings=function(b,c){var d=this.keyman.core.activeKeyboard?this.keyman.core.activeKeyboard.id:"",l=this.keyman.keyboardManager.getActiveLanguage();void 0!==b&&void 0!==c&&(d=b,l=c);(b=a.states.lastActiveElement)&&null!=b._kmwAttachment.keyboard?(b._kmwAttachment.keyboard=d,b._kmwAttachment.languageCode=l):(this.keyman.globalKeyboard=d,this.keyman.globalLanguageCode=l)};a.prototype._FocusKeyboardSettings=function(b){var c=
a.states.lastActiveElement;c&&null!=c._kmwAttachment.keyboard?this.keyman.keyboardManager.setActiveKeyboard(c._kmwAttachment.keyboard,c._kmwAttachment.languageCode):b||this.keyman.keyboardManager.setActiveKeyboard(this.keyman.globalKeyboard,this.keyman.globalLanguageCode);this.keyman.modelManager&&this.keyman.core.languageProcessor.invalidateContext()};a.prototype._CommonFocusHelper=function(b){var c=e.keyman.singleton,d=this.keyman.uiManager;if(b.ownerDocument&&b instanceof b.ownerDocument.defaultView.HTMLIFrameElement&&
(!this.keyman.domManager._IsIEEditableIframe(b,1)||!this.keyman.domManager._IsMozillaEditableIframe(b,1)))return a.states._DisableInput=!0;a.states._DisableInput=!1;var l=c.core.activeKeyboard;d.justActivated||(b&&h.Utils.getOutputTarget(b)&&h.Utils.getOutputTarget(b).deadkeys().clear(),l&&l.notify(0,h.Utils.getOutputTarget(b),1));d.justActivated||a.states._SelectionControl==b||(d.isActivating=!1);d.justActivated=!1;a.states._SelectionControl=b;c.core.languageProcessor.isActive&&c.core.languageProcessor.predictFromTarget(h.Utils.getOutputTarget(b));
return!1};a.prototype.doChangeEvent=function(b){if(a.states.changed){if("function"==typeof Event)var c=new Event("change",{bubbles:!0,cancelable:!1});else c=document.createEvent("HTMLEvents"),c.initEvent("change",!0,!1);b.base&&b.base.kmw_ip&&(b=b.base);b.dispatchEvent(c)}a.states.changed=!1};a.states=new k;return a}();h.DOMEventHandlers=f;var b=function(a){function b(c){c=a.call(this,c)||this;c.setFocus=function(a){f.states.setFocusTimer();a&&h.Utils.instanceof(a,"TouchEvent")?a=a.touches[0]:(a=
{clientX:0,clientY:0},a.target=f.states.lastActiveElement?f.states.lastActiveElement.kmw_ip:this.keyman.domManager.sortedInputs[0].kmw_ip);this.setFocusWithTouch(a)}.bind(c);c.setBlur=function(a){if("relatedTarget"in a&&a.relatedTarget)var c=a.relatedTarget;this.keyman.resetContext();if(c&&(this.doChangeEvent(c),"DIV"!=c.nodeName||-1==c.className.indexOf("keymanweb-input"))){this.cancelInput();return}f.states.focusing||this.cancelInput()}.bind(c);c.dragInput=function(a){a.preventDefault();a.stopPropagation();
var c=h.Utils.instanceof(a,"TouchEvent")?a.targetTouches[0].target:a.target;if(null!=c){if(null==c.className||0>c.className.indexOf("keymanweb-input"))c=c.parentNode;if(null==c.className||0>c.className.indexOf("keymanweb-input"))c=c.parentNode;if(!(null==c.className||0>c.className.indexOf("keymanweb-input"))){if(h.Utils.instanceof(a,"TouchEvent")){var b=a.touches[0].screenX;var d=a.touches[0].screenY}else b=a.screenX,d=a.screenY;if("undefined"==typeof this.firstTouch||null==this.firstTouch)this.firstTouch=
{x:b,y:d};else{var g=this.firstTouch.x,e=this.firstTouch.y;a=c.firstChild;if("TEXTAREA"==c.base.nodeName){if(b=parseInt(a.style.top,10),isNaN(b)&&(b=0),g=e-d,-4>g||4<g)a.style.top=(b<g?b-g:0)+"px",this.firstTouch.y=d}else{d=parseInt(a.style.left,10);isNaN(d)&&(d=0);var f=g-b;if(-4>f||4<f)g=0,e=h.Utils.getAbsoluteX(c)+c.offsetWidth-a.offsetWidth-32,"rtl"==c.base.dir?g=16:e-=24,d-=f,d>g&&(d=g),d<e&&(d=e),a.style.left=d+"px",this.firstTouch.x=b}}this.setScrollBar(c)}}}.bind(c);return c}__extends(b,a);
b.prototype.setFocusWithTouch=function(a){var c=this.keyman.osk,b=a.clientX,d=a.clientY,e=a.target;var k=e&&h.Utils.instanceof(e,"HTMLSpanElement")?e.parentNode:e&&null!=e.className&&0<=e.className.indexOf("keymanweb-input")?e.firstChild:e;a=k.parentNode;if(f.states.activeElement!=a){var n=f.states.activeElement;n&&n.hideCaret();f.states.activeElement=a;a.focus()}this.keyman.domManager._SetTargDir(a);c.ready&&!c._Visible&&c._Show();if(e&&h.Utils.instanceof(e,"TouchAliasElement"))d=h.Utils.getAbsoluteX(k.firstChild),
"rtl"==a.dir?(d+=k.firstChild.offsetWidth,c=b>d?0:1E5):c=b<d?0:1E5,a.setTextCaret(c),a.scrollInput();else{var v;k=k.childNodes[1];e=0;n=a.getText()._kmwLength();c=a.getTextCaret();var x=document.body.scrollTop;if(a.base instanceof a.base.ownerDocument.defaultView.HTMLTextAreaElement){var p=Math.round(a.base.offsetHeight/a.base.rows);for(v=0;16>v;v++){var t=h.Utils.getAbsoluteY(k)-x;if(t>d&&c>e&&c!=n)n=c,c=Math.round((c+e)/2);else if(t<d-p&&c<n&&c!=e)e=c,c=Math.round((c+n)/2);else break;a.setTextCaret(c)}for(;h.Utils.getAbsoluteY(k)-
x>d&&c>e;)a.setTextCaret(--c);for(;h.Utils.getAbsoluteY(k)-x<d-p&&c<n;)a.setTextCaret(++c)}t="rtl"==a.dir?function(a,c){return a<c}:function(a,c){return a>c};for(v=0;16>v;v++){d=h.Utils.getAbsoluteX(k);if(t(d,b)&&c>e&&c!=n)n=c,c=Math.round((c+e)/2);else if(!t(d,b)&&c<n&&c!=e)e=c,c=Math.round((c+n)/2);else break;a.setTextCaret(c)}for(;t(h.Utils.getAbsoluteX(k),b)&&c>e;)a.setTextCaret(--c);for(;!t(h.Utils.getAbsoluteX(k),b)&&c<n;)a.setTextCaret(++c)}this._BlurKeyboardSettings();f.states.lastActiveElement=
a;a.showCaret();this._FocusKeyboardSettings(!1);this._CommonFocusHelper(a)};b.prototype.cancelInput=function(){f.states.activeElement&&h.Utils.instanceof(f.states.activeElement,"TouchAliasElement")&&f.states.activeElement.hideCaret();f.states.activeElement=null;this.keyman.osk.hideNow()};b.prototype.setScrollBar=function(a){var c=a.childNodes[0],b=a.childNodes[1].style;(c.offsetWidth>a.offsetWidth||0>c.offsetLeft)&&"TEXTAREA"!=a.base.nodeName?(b.height="4px",b.width=a.offsetWidth/c.offsetWidth*100+
"%",b.left=-c.offsetLeft/c.offsetWidth*100+"%",b.top="0",b.visibility="visible"):c.offsetHeight>a.offsetHeight||0>c.offsetTop?(b.width="4px",b.height=a.offsetHeight/c.offsetHeight*100+"%",b.top=-c.offsetTop/c.offsetHeight*100+"%",b.left="0",b.visibility="visible"):b.visibility="hidden"};b.prototype.scrollBody=function(a){var c=this.keyman.osk;if(a&&null!=a.className&&!(0>a.className.indexOf("keymanweb-input"))&&c.ready){a=a.firstChild.childNodes[1];var b=h.Utils.getAbsoluteY(a),d=window.pageYOffset;
b<d?c=b-d:(c=b-d-(window.innerHeight-c._Box.offsetHeight-a.offsetHeight-2),0>c&&(c=0));0!=c&&window.scrollTo(0,c+window.pageYOffset)}};return b}(f);h.DOMTouchHandlers=b})(h.dom||(h.dom={}))})(e.keyman||(e.keyman={}))})(com||(com={}));
(function(e){(function(h){(function(k){var p=h.text.DefaultOutput,f=h.text.Codes,b=p.isCommand,a=p.applyCommand;p.isCommand=function(a){switch(p.codeForEvent(a)){case f.keyCodes.K_TAB:case f.keyCodes.K_TABBACK:case f.keyCodes.K_TABFWD:return!0;default:return b(a)}};p.applyCommand=function(b){var c=p.codeForEvent(b),d=e.keyman.singleton.domManager;switch(c){case f.keyCodes.K_TAB:d.moveToNext(0!=(b.Lmodifiers&h.text.Codes.modifierCodes.SHIFT));break;case f.keyCodes.K_TABBACK:d.moveToNext(!0);break;
case f.keyCodes.K_TABFWD:d.moveToNext(!1)}a(b)}})(h.dom||(h.dom={}))})(e.keyman||(e.keyman={}))})(com||(com={}));
(function(e){(function(h){(function(k){h.text.prediction.LanguageProcessor.prototype.canEnable=function(){var f=e.keyman.singleton;return 10==f.util.getIEVersion()?(console.warn("KeymanWeb cannot properly initialize its WebWorker in this version of IE."),!1):10>f.util.getIEVersion()?(console.warn("WebWorkers are not supported in this version of IE."),!1):!0};var p=h.text.RuleBehavior.prototype.finalize;h.text.RuleBehavior.prototype.finalize=function(f){var b=this.transcription.keystroke.Ltarg;p.call(this,
f);f=this.transcription.transform;(""!=f.insert||0<f.deleteLeft||0<f.deleteRight)&&b instanceof k.targets.OutputTarget&&b.getElement()==k.DOMEventHandlers.states.activeElement&&(k.DOMEventHandlers.states.changed=!0);var a=e.keyman.singleton;a.isEmbedded&&(a.oninserttext(f.deleteLeft,f.insert,f.deleteRight),b instanceof k.targets.OutputTarget&&a.refreshElementContent(b.getElement()))}})(h.dom||(h.dom={}))})(e.keyman||(e.keyman={}))})(com||(com={}));
(function(e){(function(e){(function(h){(function(h){var f=function(b){function a(){return null!==b&&b.apply(this,arguments)||this}__extends(a,b);a.prototype.dispatchInputEventOn=function(a){var c;window.InputEvent&&(c=new InputEvent("input",{bubbles:!0,cancelable:!1}));a&&c&&a.dispatchEvent(c)};return a}(e.text.OutputTarget);h.OutputTarget=f})(h.targets||(h.targets={}))})(e.dom||(e.dom={}))})(e.keyman||(e.keyman={}))})(com||(com={}));
(function(e){(function(h){(function(k){(function(k){var f=function(b){function a(a){var c=b.call(this)||this;c.root=a;c._cachedSelectionStart=-1;return c}__extends(a,b);Object.defineProperty(a.prototype,"isSynthetic",{get:function(){return!1},enumerable:!0,configurable:!0});a.prototype.getElement=function(){return this.root};a.prototype.clearSelection=function(){var a=this.getCaret();this.root.value=this.root.value._kmwSubstring(0,a)+this.root.value._kmwSubstring(this.processedSelectionEnd);this.setCaret(a)};
a.prototype.hasSelection=function(){return!0};a.prototype.invalidateSelection=function(){this._cachedSelectionStart=-1};a.prototype.getCaret=function(){this.root.selectionStart!=this._cachedSelectionStart&&(this._cachedSelectionStart=this.root.selectionStart,this.processedSelectionStart=this.root.value._kmwCodeUnitToCodePoint(this.root.selectionStart),this.processedSelectionEnd=this.root.value._kmwCodeUnitToCodePoint(this.root.selectionEnd));return this.processedSelectionStart};a.prototype.getDeadkeyCaret=
function(){return this.getCaret()};a.prototype.setCaret=function(a){this.setSelection(a,a)};a.prototype.setSelection=function(a,c){var b=this.root.value._kmwCodePointToCodeUnit(a),d=this.root.value._kmwCodePointToCodeUnit(c);this.root.setSelectionRange(b,d);this.processedSelectionStart=a;this.processedSelectionEnd=c;h.dom.Utils.forceScroll(this.root)};a.prototype.getTextBeforeCaret=function(){return this.getText()._kmwSubstring(0,this.getCaret())};a.prototype.setTextBeforeCaret=function(a){this.getCaret();
var c=a._kmwLength();this.root.value=a+this.getText()._kmwSubstring(this.processedSelectionStart);this.setCaret(c)};a.prototype.setTextAfterCaret=function(a){var c=this.getCaret();this.root.value=this.getTextBeforeCaret()+a;this.setCaret(c)};a.prototype.getTextAfterCaret=function(){this.getCaret();return this.getText()._kmwSubstring(this.processedSelectionEnd)};a.prototype.getText=function(){return this.root.value};a.prototype.deleteCharsBeforeCaret=function(a){if(0<a){var c=this.getTextBeforeCaret(),
b=this.getCaret();a>b&&(a=b);this.adjustDeadkeys(-a);this.setTextBeforeCaret(c.kmwSubstring(0,this.getCaret()-a));this.setCaret(b-a)}};a.prototype.insertTextBeforeCaret=function(a){if(a){var c=this.getCaret(),b=this.getTextBeforeCaret(),d=this.getText()._kmwSubstring(this.processedSelectionStart);this.adjustDeadkeys(a._kmwLength());this.root.value=b+a+d;this.setCaret(c+a._kmwLength())}};a.prototype.handleNewlineAtCaret=function(){a.newlineHandler(this.root)};a.newlineHandler=function(a){!a||"search"!=
a.type&&"submit"!=a.type?e.keyman.singleton&&e.keyman.singleton.domManager.moveToNext(!1):(a.disabled=!1,a.form.submit())};a.prototype.doInputEvent=function(){this.dispatchInputEventOn(this.root)};return a}(k.OutputTarget);k.Input=f})(k.targets||(k.targets={}))})(h.dom||(h.dom={}))})(e.keyman||(e.keyman={}))})(com||(com={}));
(function(e){(function(e){(function(e){(function(h){var f=function(b){function a(a){var c=b.call(this)||this;c.root=a;c._cachedSelectionStart=-1;return c}__extends(a,b);Object.defineProperty(a.prototype,"isSynthetic",{get:function(){return!1},enumerable:!0,configurable:!0});a.prototype.getElement=function(){return this.root};a.prototype.clearSelection=function(){var a=this.getCaret();this.root.value=this.root.value._kmwSubstring(0,a)+this.root.value._kmwSubstring(this.processedSelectionEnd);this.setCaret(a)};
a.prototype.hasSelection=function(){return!0};a.prototype.invalidateSelection=function(){this._cachedSelectionStart=-1};a.prototype.getCaret=function(){this.root.selectionStart!=this._cachedSelectionStart&&(this._cachedSelectionStart=this.root.selectionStart,this.processedSelectionStart=this.root.value._kmwCodeUnitToCodePoint(this.root.selectionStart),this.processedSelectionEnd=this.root.value._kmwCodeUnitToCodePoint(this.root.selectionEnd));return this.processedSelectionStart};a.prototype.getDeadkeyCaret=
function(){return this.getCaret()};a.prototype.setCaret=function(a){this.setSelection(a,a)};a.prototype.setSelection=function(a,c){var b=this.root.value._kmwCodePointToCodeUnit(a),d=this.root.value._kmwCodePointToCodeUnit(c);this.root.setSelectionRange(b,d);this.processedSelectionStart=a;this.processedSelectionEnd=c;e.Utils.forceScroll(this.root)};a.prototype.getTextBeforeCaret=function(){return this.getText()._kmwSubstring(0,this.getCaret())};a.prototype.setTextBeforeCaret=function(a){this.getCaret();
var c=a._kmwLength();this.root.value=a+this.getText()._kmwSubstring(this.processedSelectionStart);this.setCaret(c)};a.prototype.setTextAfterCaret=function(a){var c=this.getCaret();this.root.value=this.getTextBeforeCaret()+a;this.setCaret(c)};a.prototype.getTextAfterCaret=function(){this.getCaret();return this.getText()._kmwSubstring(this.processedSelectionEnd)};a.prototype.getText=function(){return this.root.value};a.prototype.deleteCharsBeforeCaret=function(a){if(0<a){var c=this.getTextBeforeCaret(),
b=this.getCaret();a>b&&(a=b);this.adjustDeadkeys(-a);this.setTextBeforeCaret(c.kmwSubstring(0,this.getCaret()-a));this.setCaret(b-a)}};a.prototype.insertTextBeforeCaret=function(a){if(a){var c=this.getCaret(),b=this.getTextBeforeCaret(),d=this.getText()._kmwSubstring(this.processedSelectionStart);this.adjustDeadkeys(a._kmwLength());this.root.value=b+a+d;this.setCaret(c+a._kmwLength())}};a.prototype.handleNewlineAtCaret=function(){this.insertTextBeforeCaret("\n")};a.prototype.doInputEvent=function(){this.dispatchInputEventOn(this.root)};
return a}(h.OutputTarget);h.TextArea=f})(e.targets||(e.targets={}))})(e.dom||(e.dom={}))})(e.keyman||(e.keyman={}))})(com||(com={}));
(function(e){(function(e){(function(e){(function(e){var f=function(){return function(a,c){this.node=a;this.offset=c}}(),b=function(){return function(a,c){this.start=a;this.end=c}}(),a=function(a){function c(c){if(c.isContentEditable){var b=a.call(this)||this;b.root=c}else throw"Specified element is not already content-editable!";return b}__extends(c,a);Object.defineProperty(c.prototype,"isSynthetic",{get:function(){return!1},enumerable:!0,configurable:!0});c.prototype.getElement=function(){return this.root};
c.prototype.hasSelection=function(){var a=this.root.ownerDocument.getSelection(),c=function(a,c){return 3!=c.nodeType?null:0!=(c.compareDocumentPosition(a)&8)};return this.root!=a.anchorNode&&!this.root.contains(a.anchorNode)&&!c(this.root,a.anchorNode)||this.root!=a.focusNode&&!this.root.contains(a.focusNode)&&!c(this.root,a.anchorNode)?!1:!0};c.prototype.clearSelection=function(){if(this.hasSelection()){var a=this.root.ownerDocument.getSelection();a.isCollapsed||a.deleteFromDocument()}else console.warn("Attempted to clear an unowned Selection!")};
c.prototype.invalidateSelection=function(){};c.prototype.getCarets=function(){var a=this.root.ownerDocument.getSelection(),c=a.anchorNode.compareDocumentPosition(a.focusNode);if(a.isCollapsed)return c=new f(a.anchorNode,a.anchorOffset),new b(c,c);var d=new f(a.anchorNode,a.anchorOffset);a=new f(a.focusNode,a.focusOffset);d.node==a.node&&(c=0<a.offset-d.offset?2:4);return c&2?new b(d,a):new b(a,d)};c.prototype.getDeadkeyCaret=function(){return this.getTextBeforeCaret().kmwLength()};c.prototype.getTextBeforeCaret=
function(){if(this.hasSelection()){var a=this.getCarets().start;return 3!=a.node.nodeType?"":a.node.textContent.substr(0,a.offset)}};c.prototype.getTextAfterCaret=function(){if(this.hasSelection()){var a=this.getCarets().end;return 3!=a.node.nodeType?"":a.node.textContent.substr(a.offset)}};c.prototype.getText=function(){return this.root.innerText};c.prototype.deleteCharsBeforeCaret=function(a){if(this.hasSelection()&&!(0>=a)){var c=this.getCarets().start;a>c.offset&&(a=c.offset);if(3!=c.node.nodeType)console.warn("Deletion of characters requested without available context!");
else{var b=this.root.ownerDocument.createRange(),d=c.offset-c.node.nodeValue.substr(0,c.offset)._kmwSubstr(-a).length;b.setStart(c.node,d);b.setEnd(c.node,c.offset);this.adjustDeadkeys(-a);b.deleteContents()}}};c.prototype.insertTextBeforeCaret=function(a){if(this.hasSelection()){var c=this.getCarets().start,b=a._kmwLength(),d=this.root.ownerDocument.getSelection();if(0!=b){this.adjustDeadkeys(b);b=this.root.ownerDocument.createRange();if(3==c.node.nodeType){var g=c.node;g.insertData(c.offset,a);
b.setStart(g,c.offset+a.length)}else{g=c.node.ownerDocument.createTextNode(a);var e=this.root.ownerDocument.createRange();e.setStart(c.node,c.offset);e.collapse(!0);e.insertNode(g);b.setStart(g,a.length)}b.collapse(!0);d.removeAllRanges();try{d.addRange(b)}catch(v){c.node.parentElement.scrollIntoView(),d.addRange(b)}d.collapseToEnd()}}};c.prototype.handleNewlineAtCaret=function(){};c.prototype.setTextAfterCaret=function(a){if(this.hasSelection()){var c=this.getCarets().end,b=a._kmwLength();this.root.ownerDocument.getSelection();
0!=b&&(3==c.node.nodeType?(b=c.node,b.replaceData(c.offset,b.length,a)):(a=c.node.ownerDocument.createTextNode(a),b=this.root.ownerDocument.createRange(),b.setStart(c.node,c.offset),b.collapse(!0),b.insertNode(a)))}};c.prototype.doInputEvent=function(){this.dispatchInputEventOn(this.root)};return c}(e.OutputTarget);e.ContentEditable=a})(e.targets||(e.targets={}))})(e.dom||(e.dom={}))})(e.keyman||(e.keyman={}))})(com||(com={}));
(function(e){(function(e){(function(e){(function(e){var f=function(){return function(a,b){this.node=a;this.offset=b}}(),b=function(){return function(a,b){this.start=a;this.end=b}}(),a=function(){return function(a,b){this.cmd=a;this.stateType=b}}(),d=function(c){function d(a){var b=c.call(this)||this;b.root=a;if(a.contentWindow&&a.contentWindow.document&&"on"==a.contentWindow.document.designMode)b.doc=a.contentWindow.document,b.docRoot=a.contentWindow.document.documentElement;else throw"Specified IFrame is not in design-mode!";
return b}__extends(d,c);Object.defineProperty(d.prototype,"isSynthetic",{get:function(){return!1},enumerable:!0,configurable:!0});d.prototype.getElement=function(){return this.root};d.prototype.hasSelection=function(){this.doc.getSelection();document.getSelection();return!0};d.prototype.clearSelection=function(){if(this.hasSelection()){var a=this.doc.getSelection();a.isCollapsed||a.deleteFromDocument()}else console.warn("Attempted to clear an unowned Selection!")};d.prototype.invalidateSelection=
function(){};d.prototype.getCarets=function(){var a=this.doc.getSelection(),c=a.anchorNode.compareDocumentPosition(a.focusNode);if(a.isCollapsed)return c=new f(a.anchorNode,a.anchorOffset),new b(c,c);var d=new f(a.anchorNode,a.anchorOffset);a=new f(a.focusNode,a.focusOffset);d.node==a.node&&(c=0<a.offset-d.offset?2:4);return c&2?new b(d,a):new b(a,d)};d.prototype.getDeadkeyCaret=function(){return this.getTextBeforeCaret().kmwLength()};d.prototype.getTextBeforeCaret=function(){if(this.hasSelection()){var a=
this.getCarets().start;return 3!=a.node.nodeType?"":a.node.textContent.substr(0,a.offset)}};d.prototype.getTextAfterCaret=function(){if(this.hasSelection()){var a=this.getCarets().end;return 3!=a.node.nodeType?"":a.node.textContent.substr(a.offset)}};d.prototype.getText=function(){return this.docRoot.innerText};d.prototype.deleteCharsBeforeCaret=function(a){if(this.hasSelection()&&!(0>=a)){var c=this.getCarets().start;a>c.offset&&(a=c.offset);if(3!=c.node.nodeType)console.warn("Deletion of characters requested without available context!");
else{var b=this.doc.createRange(),d=c.offset-c.node.nodeValue.substr(0,c.offset)._kmwSubstr(-a).length;b.setStart(c.node,d);b.setEnd(c.node,c.offset);this.adjustDeadkeys(-a);b.deleteContents()}}};d.prototype.insertTextBeforeCaret=function(a){if(this.hasSelection()){var c=this.getCarets().start,b=a._kmwLength(),d=this.doc.getSelection();if(0!=b){this.adjustDeadkeys(b);b=this.root.ownerDocument.createRange();if(3==c.node.nodeType){var g=c.node;g.insertData(c.offset,a);b.setStart(g,c.offset+a.length)}else{g=
this.doc.createTextNode(a);var e=this.doc.createRange();e.setStart(c.node,c.offset);e.collapse(!0);e.insertNode(g);b.setStart(g,a.length)}b.collapse(!0);d.removeAllRanges();try{d.addRange(b)}catch(x){c.node.parentElement.scrollIntoView(),d.addRange(b)}d.collapseToEnd()}}};d.prototype.handleNewlineAtCaret=function(){};d.prototype.setTextAfterCaret=function(a){if(this.hasSelection()){var c=this.getCarets().end,b=a._kmwLength();this.doc.getSelection();0!=b&&(3==c.node.nodeType?(b=c.node,b.replaceData(c.offset,
b.length,a)):(a=c.node.ownerDocument.createTextNode(a),b=this.root.ownerDocument.createRange(),b.setStart(c.node,c.offset),b.collapse(!0),b.insertNode(a)))}};d.prototype.saveProperties=function(){var c=[new a("backcolor",1),new a("fontname",1),new a("fontsize",1),new a("forecolor",1),new a("bold",0),new a("italic",0),new a("strikethrough",0),new a("subscript",0),new a("superscript",0),new a("underline",0)];this.doc.defaultView&&c.push(new a("hilitecolor",1));for(var b=0;b<c.length;b++){var d=c[b];
d.cache=1==d.stateType?this.doc.queryCommandValue(d.cmd):this.doc.queryCommandState(d.cmd)}this.commandCache=c};d.prototype.restoreProperties=function(a){this.commandCache||console.error("No command cache exists to restore!");for(var c=0;c<this.commandCache.length;c++){var b=this.commandCache[c];1==b.stateType?this.doc.queryCommandValue(b.cmd)!=b.cache&&(a&&a(),this.doc.execCommand(b.cmd,!1,b.cache)):this.doc.queryCommandState(b.cmd)!=b.cache&&(a&&a(),this.doc.execCommand(b.cmd,!1,null))}};d.prototype.doInputEvent=
function(){this.dispatchInputEventOn(this.root)};return d}(e.OutputTarget);e.DesignIFrame=d})(e.targets||(e.targets={}))})(e.dom||(e.dom={}))})(e.keyman||(e.keyman={}))})(com||(com={}));
(function(e){(function(e){(function(e){(function(h){var f=function(b){function a(a){var c=b.call(this)||this;c.root=a;return c}__extends(a,b);a.prototype.getElement=function(){return this.root};a.prototype.clearSelection=function(){};a.prototype.invalidateSelection=function(){};a.prototype.hasSelection=function(){return!0};a.prototype.getDeadkeyCaret=function(){return this.root.getTextCaret()};a.prototype.getTextBeforeCaret=function(){return this.root.getTextBeforeCaret()};a.prototype.getTextAfterCaret=
function(){return this.root.getTextAfterCaret()};a.prototype.getText=function(){return this.root.getText()};a.prototype.deleteCharsBeforeCaret=function(a){if(0<a){var c=this.getTextBeforeCaret();this.getDeadkeyCaret()<a&&(a=this.getDeadkeyCaret());this.adjustDeadkeys(-a);this.root.setTextBeforeCaret(c.kmwSubstring(0,this.root.getTextCaret()-a))}};a.prototype.insertTextBeforeCaret=function(a){this.adjustDeadkeys(a._kmwLength());this.root.setTextBeforeCaret(this.root.getTextBeforeCaret()+a)};a.prototype.handleNewlineAtCaret=
function(){"TEXTAREA"==this.root.base.nodeName?this.insertTextBeforeCaret("\n"):e.Utils.instanceof(this.root.base,"HTMLInputElement")?h.Input.newlineHandler(this.root.base):console.warn("TouchAlias OutputTarget cannot output newlines for unexpected base element types!")};a.prototype.setTextAfterCaret=function(a){this.root.setText(this.getTextBeforeCaret()+a,this.getTextBeforeCaret()._kmwLength())};a.prototype.doInputEvent=function(){this.dispatchInputEventOn(this.root.base)};return a}(h.OutputTarget);
h.TouchAlias=f})(e.targets||(e.targets={}))})(e.dom||(e.dom={}))})(e.keyman||(e.keyman={}))})(com||(com={}));
(function(e){(function(e){(function(e){(function(h){h.wrapElement=function(f){return e.Utils.instanceof(f,"HTMLInputElement")?new h.Input(f):e.Utils.instanceof(f,"HTMLTextAreaElement")?new h.TextArea(f):e.Utils.instanceof(f,"TouchAliasElement")?new h.TouchAlias(f):e.Utils.instanceof(f,"HTMLIFrameElement")&&f.contentWindow&&f.contentWindow.document&&"on"==f.contentWindow.document.designMode?new h.DesignIFrame(f):f.isContentEditable?new h.ContentEditable(f):null}})(e.targets||(e.targets={}))})(e.dom||
(e.dom={}))})(e.keyman||(e.keyman={}))})(com||(com={}));
(function(e){(function(h){(function(h){var k=function(){function f(){}f.prototype.loadStore=function(b,a){b=e.keyman.singleton.util.loadCookie("KeymanWeb_"+b+"_Option_"+a);"undefined"!=typeof b[a]&&(b[a]=decodeURIComponent(b[a]));return b||{}};f.prototype.saveStore=function(b,a,d){b="KeymanWeb_"+b+"_Option_"+a;d[a]=encodeURIComponent(d[a]);e.keyman.singleton.util.saveCookie(b,d)};return f}();h.VariableStoreCookieSerializer=k})(h.dom||(h.dom={}))})(e.keyman||(e.keyman={}))})(com||(com={}));
(function(e){(function(h){(function(k){var p=function(){function b(a){this.e=a;this.c=a.style.backgroundColor}b.prototype.reset=function(){this.e.style.backgroundColor=this.c};return b}(),f=function(){function b(a){this.inputList=[];this.sortedInputs=[];this._BeepObjects=[];this._BeepTimeout=0;this.nonKMWTouchHandler=function(a){k.DOMEventHandlers.states.focusing=!1;clearTimeout(k.DOMEventHandlers.states.focusTimer);this.keyman.osk.hideNow()}.bind(this);this._EnablementMutationObserverCore=function(a){for(var c=
0;c<a.length;c++){var b=a[c],d=b.oldValue?0<=b.oldValue.indexOf("kmw-disabled"):!1,e=0<=b.target.className.indexOf("kmw-disabled");d&&!e?this._EnableControl(b.target):!d&&e&&this._DisableControl(b.target);!e&&"readonly"==b.attributeName&&(d=b.oldValue?null!=b.oldValue:!1,e=b.target,e instanceof e.ownerDocument.defaultView.HTMLInputElement||e instanceof e.ownerDocument.defaultView.HTMLTextAreaElement)&&(e=e.readOnly,d&&!e?this._EnableControl(b.target):!d&&e&&this._DisableControl(b.target))}}.bind(this);
this._AutoAttachObserverCore=function(a){for(var c=[],b=[],d=0;d<a.length;d++){for(var e=a[d],f=0;f<e.addedNodes.length;f++)c=c.concat(this._GetDocumentEditables(e.addedNodes[f]));for(f=0;f<e.removedNodes.length;f++)b=b.concat(this._GetDocumentEditables(e.removedNodes[f]))}for(a=0;a<c.length;a++)this.isKMWInput(c[a])&&this._MutationAdditionObserved(c[a]);for(a=0;a<b.length;a++)this.isKMWInput(b[a])&&this._MutationRemovalObserved(b[a]);if(c.length||b.length)if(!this.keyman.util.device.touchable)this.listInputs();
else if(this.keyman.util.device.touchable){var h=this;window.setTimeout(function(){h.listInputs();for(var a=0;a<this.sortedInputs.length;a++)this.sortedInputs[a].kmw_ip&&this.sortedInputs[a].kmw_ip.updateInput()}.bind(this),1)}}.bind(this);this._MutationAdditionObserved=function(a){if(a instanceof a.ownerDocument.defaultView.HTMLIFrameElement&&!this.keyman.util.device.touchable){var c=this;a.addEventListener("load",function(){window.setTimeout(function(){c.attachToControl(a)},1)})}else this.attachToControl(a)};
this._MutationRemovalObserved=function(a){this.keyman.util.device.touchable&&this.disableTouchElement(a);this.disableInputElement(a);this.clearElementAttachment(a)};this.enableControl=function(a){this.isAttached(a)||console.warn("KeymanWeb is not attached to element "+a);var c=a.className;0<=c.indexOf("kmw-disabled")&&(a.className=c.replace("kmw-disabled","").trim())};this._WindowLoad=function(a){document.body.scrollTop=0;"undefined"!=typeof document.documentElement&&(document.documentElement.scrollTop=
0)}.bind(this);this._WindowUnload=function(){this.keyman.uiManager.doUnload();this.keyman.osk.ready&&(this.keyman.osk.shutdown(),this.keyman.osk._Unload());this.clearLastActiveElement()}.bind(this);this.init=function(a){var c,d=this.keyman.osk;var e=this.keyman.util;var f=e.device;this.keyman.core.keyboardProcessor.beepHandler=this.doBeep.bind(this);this.keyman.core.keyboardProcessor.warningLogger=console.warn.bind(console);this.keyman.core.keyboardProcessor.errorLogger=console.error.bind(console);
var h=function(a){if(0==a.length)return a;"/"!=a.substr(a.length-1,1)&&(a+="/");return"http"==a.replace(/^(http)s?:.*/,"$1")||"file"==a.replace(/^(file):.*/,"$1")?a:"//"==a.substr(0,2)?this.keyman.protocol+a:"/"==a.substr(0,1)?this.keyman.rootPath+a.substr(1):this.keyman.srcPath+a}.bind(this);var k=this.keyman.options;if("object"==typeof a&&null!==a)for(c in k)a.hasOwnProperty(c)&&(k[c]=a[c]);""!=k.root&&(this.keyman.rootPath=h(k.root));""==k.resources&&(k.resources=this.keyman.srcPath);k.resources=
h(k.resources);k.keyboards=h(k.keyboards);k.fonts=h(k.fonts);""==k.attachType&&(k.attachType="auto");this.keyman.setDefaultDeviceOptions(k);if(this.keyman.initialized)return Promise.resolve();var n=this.keyman,v=this;if("complete"!==document.readyState)return new Promise(function(c){window.setTimeout(function(){v.init(a).then(function(){c()})},50)});n.modelManager.init();this.keyman._MasterDocument=window.document;"Android"==f.OS&&(k=f.getDPI(),f.formFactor=screen.height<4*k||screen.width<4*k?"phone":
"tablet");this.keyman.setInitialized(1);d.prepare();e.prepareWait();this.keyman.keyboardManager.registerDeferredStubs();this.initializeUI();this.keyman.keyboardManager.registerDeferredKeyboards();if(this.keyman.isEmbedded)return this.keyman.keyboardManager.setDefaultKeyboard()||console.error("No keyboard stubs exist - cannot initialize keyboard!"),Promise.resolve();this.keyman.appliedFont=this.keyman.baseFont=this.getBaseFont();f.touchable&&this.keyman.handleRotationEvents();"manual"!=this.keyman.options.attachType&&
this._SetupDocument(document.documentElement);this.listInputs();f.touchable&&(d._Box.addEventListener("touchend",function(a){a.stopPropagation()},!1),e=document.createElement("DIV"),k=e.style,k.width="100%",k.height=screen.width/2+"px",document.body.appendChild(e),"Android"==f.OS&&0<navigator.userAgent.indexOf("Chrome")?(this.keyman.hideOskWhileScrolling=function(a){if("undefined"!=typeof d._Box&&"undefined"!=typeof d._Box.style){c=a.target.parentNode;if("undefined"!=typeof c&&null!=c&&(0<=c.className.indexOf("keymanweb-input")||
0<=c.className.indexOf("kmw-key-")||"undefined"!=typeof c.parentNode&&(c=c.parentNode,0<=c.className.indexOf("keymanweb-input")||0<=c.className.indexOf("kmw-key-"))))return;d.hideNow()}},this.keyman.util.attachDOMEvent(document.body,"touchstart",this.keyman.hideOskWhileScrolling,!1)):(this.keyman.conditionallyHideOsk=function(){n.hideOnRelease&&!d.lgList&&d.hideNow();n.hideOnRelease=!1},this.keyman.hideOskIfOnBody=function(a){n.touchY=a.touches[0].screenY;n.hideOnRelease=!0},this.keyman.cancelHideIfScrolling=
function(a){a=a.touches[0].screenY;var c=n.touchY;if(5<a-c||5>c-a)n.hideOnRelease=!1},this.keyman.util.attachDOMEvent(document.body,"touchstart",this.keyman.hideOskIfOnBody,!1),this.keyman.util.attachDOMEvent(document.body,"touchmove",this.keyman.cancelHideIfScrolling,!1),this.keyman.util.attachDOMEvent(document.body,"touchend",this.keyman.conditionallyHideOsk,!1)));this.keyman.keyboardManager.restoreCurrentKeyboard();MutationObserver?(f=document.querySelector("body"),"manual"!=this.keyman.options.attachType&&
(e={childList:!0,subtree:!0},this.attachmentObserver=new MutationObserver(this._AutoAttachObserverCore),this.attachmentObserver.observe(f,e)),e={subtree:!0,attributes:!0,attributeOldValue:!0,attributeFilter:["class","readonly"]},this.enablementObserver=new MutationObserver(this._EnablementMutationObserverCore),this.enablementObserver.observe(f,e)):console.warn("Your browser is outdated and does not support MutationObservers, a web feature needed by KeymanWeb to support dynamically-added elements.");
this.keyman.util.attachDOMEvent(document.body,"focus",b.suppressFocusCheck,!0);this.keyman.util.attachDOMEvent(document.body,"blur",b.suppressFocusCheck,!0);this.keyman.setInitialized(2);return Promise.resolve()}.bind(this);this.keyman=a;a.util.device.touchable&&(this.touchHandlers=new k.DOMTouchHandlers(a));this.nonTouchHandlers=new k.DOMEventHandlers(a)}b.prototype.shutdown=function(){try{this.enablementObserver&&this.enablementObserver.disconnect();this.attachmentObserver&&this.attachmentObserver.disconnect();
for(var a=0,d=this.inputList;a<d.length;a++)this.disableInputElement(d[a]);this.keyman.util.detachDOMEvent(document.body,"focus",b.suppressFocusCheck,!0);this.keyman.util.detachDOMEvent(document.body,"blur",b.suppressFocusCheck,!0)}catch(c){console.error("Error occurred during shutdown"),console.error(c)}};b.prototype.doBeep=function(a){var b=e.keyman.singleton;if("beepKeyboard"in b)b.beepKeyboard();else if(a instanceof k.targets.OutputTarget&&(b=a.getElement(),a instanceof k.targets.DesignIFrame&&
(b=a.docRoot),b&&b.style&&"undefined"!=typeof b.style.backgroundColor)){for(a=0;a<this._BeepObjects.length;a++)if(this._BeepObjects[a].e==b)return;this._BeepObjects=e.keyman.singleton._push(this._BeepObjects,new p(b));b.style.backgroundColor="#000000";0==this._BeepTimeout&&(this._BeepTimeout=1,window.setTimeout(this.beepReset.bind(this),50))}};b.prototype.beepReset=function(){e.keyman.singleton.core.keyboardInterface.resetContextCache();var a;for(a=this._BeepTimeout=0;a<this._BeepObjects.length;a++)this._BeepObjects[a].reset();
this._BeepObjects=[]};b.prototype.getHandlers=function(a){return(a=a.base?a.base._kmwAttachment:a._kmwAttachment)?a.touchEnabled?this.touchHandlers:this.nonTouchHandlers:this.keyman.touchAliasing};b.prototype.enableTouchElement=function(a){if("iframe"==a.tagName.toLowerCase())return!1;if(this.isKMWDisabled(a))return this.setupNonKMWTouchElement(a),!1;a.kmwInput=!0;a.removeEventListener("touchstart",this.nonKMWTouchHandler);if(a.kmw_ip){if(-1!=this.inputList.indexOf(a.kmw_ip))return!1;this.inputList.push(a.kmw_ip);
console.log("Unexpected state - this element's simulated input DIV should have been removed from the page!");return!0}var b=k.constructTouchAlias(a);this.isAttached(b)?b._kmwAttachment.interface=k.targets.wrapElement(b):this.setupElementAttachment(b);a._kmwAttachment=b._kmwAttachment;this.enableInputElement(b,!0);var c=this.touchHandlers;b.addEventListener("touchstart",c.setFocus);b.onmspointerdown=function(a){a.preventDefault();a.stopPropagation();return c.setFocus(a)};b.addEventListener("touchend",
function(a){a.stopPropagation()});b.onmspointerup=function(a){a.stopPropagation()};b.addEventListener("touchmove",c.dragInput,!1);b.onmspointermove=c.dragInput;b.onblur=c.setBlur;return!0};b.prototype.disableTouchElement=function(a){if("iframe"!=a.tagName.toLowerCase()){if(a.kmw_ip){var b=this.inputList.indexOf(a.kmw_ip);-1!=b&&this.inputList.splice(b,1);a.style.visibility="visible";a.disabled=!1;a.removeEventListener("resize",a.kmw_ip._kmwResizeHandler);this.disableInputElement(a.kmw_ip);a._kmwAttachment.interface=
k.targets.wrapElement(a);a.parentNode&&a.parentNode.removeChild(a.kmw_ip);delete a.kmw_ip}this.setupNonKMWTouchElement(a)}};b.prototype.setupNonKMWTouchElement=function(a){this.keyman.util.attachDOMEvent(a,"touchstart",this.nonKMWTouchHandler,!1);this.isAttached(a)&&(a._kmwAttachment.touchEnabled=!1)};b.prototype.enableInputElement=function(a,b){var c=b?a.base:a;this.isKMWDisabled(c)||(a instanceof a.ownerDocument.defaultView.HTMLIFrameElement?this._AttachToIframe(a):(b||this.setupElementAttachment(a),
c.className=c.className?c.className+" keymanweb-font":"keymanweb-font",this.inputList.push(a),this.keyman.util.attachDOMEvent(c,"focus",this.getHandlers(a)._ControlFocus),this.keyman.util.attachDOMEvent(c,"blur",this.getHandlers(a)._ControlBlur),a.onkeypress=this.getHandlers(a)._KeyPress,a.onkeydown=this.getHandlers(a)._KeyDown,a.onkeyup=this.getHandlers(a)._KeyUp))};b.prototype.disableInputElement=function(a,b){if(a){var c=b?a.base:a;if(a.ownerDocument.defaultView&&a instanceof a.ownerDocument.defaultView.HTMLIFrameElement||
a instanceof HTMLIFrameElement)this._DetachFromIframe(a);else{0<c.className.indexOf("keymanweb-font")&&!b&&(c.className=c.className.replace("keymanweb-font","").trim());var d=this.inputList.indexOf(a);-1<d&&this.inputList.splice(d,1);b||(this.keyman.util.detachDOMEvent(c,"focus",this.getHandlers(a)._ControlFocus),this.keyman.util.detachDOMEvent(c,"blur",this.getHandlers(a)._ControlBlur));a.onkeypress=null;a.onkeydown=null;a.onkeyup=null}b&&(this.inputList.push(c),c.onkeypress=this.getHandlers(a)._KeyPress,
c.onkeydown=this.getHandlers(a)._KeyDown,c.onkeyup=this.getHandlers(a)._KeyUp);b=this.getLastActiveElement();if(b==a||b==a.kmw_ip)this.clearLastActiveElement(),this.keyman.osk._Hide(!1)}};b.prototype.isKMWDisabled=function(a){var b=a.className;return a.readOnly||b&&0<=b.indexOf("kmw-disabled")?!0:!1};b.prototype.attachToControl=function(a){var b=this.keyman.util.device.touchable;if(!this.isAttached(a)||a instanceof a.ownerDocument.defaultView.HTMLIFrameElement)this.isKMWInput(a)?this.isKMWDisabled(a)?
b&&this.setupNonKMWTouchElement(a):b&&!this.keyman.isEmbedded?this.enableTouchElement(a):this.enableInputElement(a):b&&this.setupNonKMWTouchElement(a)};b.prototype.detachFromControl=function(a){if(this.isAttached(a)||a instanceof a.ownerDocument.defaultView.HTMLIFrameElement)this.isKMWInput(a)&&(this.isKMWDisabled(a)||this._DisableControl(a)),this.clearElementAttachment(a)};b.prototype.isAttached=function(a){return a._kmwAttachment?!0:!1};b.prototype.isKMWInput=function(a){var b=this.keyman.util.device.touchable;
if(a instanceof a.ownerDocument.defaultView.HTMLTextAreaElement)return!0;if(a instanceof a.ownerDocument.defaultView.HTMLInputElement){if("text"==a.type||"search"==a.type)return!0}else if(a instanceof a.ownerDocument.defaultView.HTMLIFrameElement&&!b)try{if(a.contentWindow&&a.contentWindow.document)return!0}catch(c){console.warn("Error during attachment to / detachment from iframe: "),console.warn(c)}else if(a.isContentEditable&&!b)return!0;return!1};b.prototype.setupElementAttachment=function(a){if(!a._kmwAttachment){var b=
k.targets.wrapElement(a);b||k.Utils.instanceof(a,"HTMLIFrameElement")||console.warn("Could not create processing interface for newly-attached element!");a._kmwAttachment=new h.AttachmentInfo(b,null,this.keyman.util.device.touchable)}};b.prototype.clearElementAttachment=function(a){a._kmwAttachment=null};b.prototype._AttachToIframe=function(a){var b=this.keyman.util;try{var c=a.contentWindow.document;c&&("on"==c.designMode.toLowerCase()?("firefox"==b.device.browser?(b.attachDOMEvent(c,"focus",this.getHandlers(a)._ControlFocus),
b.attachDOMEvent(c,"blur",this.getHandlers(a)._ControlBlur)):(b.attachDOMEvent(c.body,"focus",this.getHandlers(a)._ControlFocus),b.attachDOMEvent(c.body,"blur",this.getHandlers(a)._ControlBlur)),b.attachDOMEvent(c.body,"keydown",this.getHandlers(a)._KeyDown),b.attachDOMEvent(c.body,"keypress",this.getHandlers(a)._KeyPress),b.attachDOMEvent(c.body,"keyup",this.getHandlers(a)._KeyUp),this.setupElementAttachment(a),c.body._kmwAttachment=a._kmwAttachment):this._SetupDocument(c.body))}catch(g){}};b.prototype._DetachFromIframe=
function(a){var b=this.keyman.util;try{var c=a.contentWindow.document;c&&("on"==c.designMode.toLowerCase()?("firefox"==b.device.browser?(b.detachDOMEvent(c,"focus",this.getHandlers(a)._ControlFocus),b.detachDOMEvent(c,"blur",this.getHandlers(a)._ControlBlur)):(b.detachDOMEvent(c.body,"focus",this.getHandlers(a)._ControlFocus),b.detachDOMEvent(c.body,"blur",this.getHandlers(a)._ControlBlur)),b.detachDOMEvent(c.body,"keydown",this.getHandlers(a)._KeyDown),b.detachDOMEvent(c.body,"keypress",this.getHandlers(a)._KeyPress),
b.detachDOMEvent(c.body,"keyup",this.getHandlers(a)._KeyUp),c.body._kmwAttachment=null):this._ClearDocument(c.body))}catch(g){}};b.prototype._GetDocumentEditables=function(a){var b=this.keyman.util,c=[];if(a.ownerDocument&&a instanceof a.ownerDocument.defaultView.HTMLElement){var g=a.ownerDocument.defaultView;a instanceof g.HTMLInputElement||a instanceof g.HTMLTextAreaElement?c.push(a):a instanceof g.HTMLIFrameElement&&c.push(a)}a.getElementsByTagName&&(c=c.concat(b.arrayFromNodeList(a.getElementsByTagName("INPUT")),
b.arrayFromNodeList(a.getElementsByTagName("TEXTAREA")),b.arrayFromNodeList(a.getElementsByTagName("IFRAME"))));a.querySelectorAll&&(c=c.concat(b.arrayFromNodeList(a.querySelectorAll("[contenteditable]"))));a.ownerDocument&&a instanceof a.ownerDocument.defaultView.HTMLElement&&a.isContentEditable&&c.push(a);return c};b.prototype._SetupDocument=function(a){a=this._GetDocumentEditables(a);for(var b=0;b<a.length;b++)this.attachToControl(a[b])};b.prototype._ClearDocument=function(a){a=this._GetDocumentEditables(a);
for(var b=0;b<a.length;b++)this.detachFromControl(a[b])};b.prototype._SetTargDir=function(a){var b=e.keyman.singleton.core.activeKeyboard;b=b&&b.isRTL?"rtl":"ltr";a&&(this.keyman.util.device.touchable?0==a.textContent.length&&(a.base.dir=a.dir=b,a.setTextCaret(1E4)):a instanceof a.ownerDocument.defaultView.HTMLInputElement||a instanceof a.ownerDocument.defaultView.HTMLTextAreaElement?0==a.value.length&&(a.dir=b):"string"==typeof a.textContent&&0==a.textContent.length&&(a.dir=b))};b.prototype._DisableControl=
function(a){if(this.isAttached(a)||a instanceof a.ownerDocument.defaultView.HTMLIFrameElement)this.keyman.util.device.touchable?(this.disableTouchElement(a),this.setupNonKMWTouchElement(a),window.setTimeout(function(){this.listInputs();for(var a=0;a<this.sortedInputs.length;a++)this.sortedInputs[a].kmw_ip&&this.sortedInputs[a].kmw_ip.updateInput(this.sortedInputs[a].kmw_ip)}.bind(this),1)):this.listInputs(),this.disableInputElement(a)};b.prototype._EnableControl=function(a){if(this.isAttached(a))if(this.keyman.util.device.touchable){this.enableTouchElement(a);
var b=this.keyman;window.setTimeout(function(){b.domManager.listInputs();for(var a=0;a<this.sortedInputs.length;a++)this.sortedInputs[a].kmw_ip&&this.sortedInputs[a].kmw_ip.updateInput(this.sortedInputs[a].kmw_ip)}.bind(this),1)}else this.enableInputElement(a)};b.prototype.listInputs=function(){var a,b=[],c=document.getElementsByTagName("input"),g=document.getElementsByTagName("textarea");for(a=0;a<c.length;a++)switch(c[a].type){case "text":case "search":case "email":case "url":0>c[a].className.indexOf("kmw-disabled")&&
b.push({ip:c[a],x:k.Utils.getAbsoluteX(c[a]),y:k.Utils.getAbsoluteY(c[a])})}for(a=0;a<g.length;a++)0>g[a].className.indexOf("kmw-disabled")&&b.push({ip:g[a],x:k.Utils.getAbsoluteX(g[a]),y:k.Utils.getAbsoluteY(g[a])});b.sort(function(a,c){return a.y!=c.y?a.y-c.y:a.x-c.x});c=[];for(a=0;a<b.length;a++)c.push(b[a].ip);this.sortedInputs=c};b.prototype.disableControl=function(a){this.isAttached(a)||console.warn("KeymanWeb is not attached to element "+a);var b=a.className;0>b.indexOf("kmw-disabled")&&(a.className=
b?b+" kmw-disabled":"kmw-disabled")};b.prototype.setKeyboardForControl=function(a,b,c){null!==b&&void 0!==b?0>b.indexOf("Keyboard_")&&""!=b&&(b="Keyboard_"+b):c=null;if(a instanceof a.ownerDocument.defaultView.HTMLIFrameElement)console.warn("'keymanweb.setKeyboardForControl' cannot set keyboard on iframes.");else if(this.isAttached(a)){a._kmwAttachment.keyboard=b;a._kmwAttachment.languageCode=c;var d=this.getLastActiveElement();!d||d!=a&&d!=a.kmw_ip||(null!=b&&null!=c?this.keyman.keyboardManager.setActiveKeyboard(b,
c):this.keyman.keyboardManager.setActiveKeyboard(this.keyman.globalKeyboard,this.keyman.globalLanguageCode))}else console.error("KeymanWeb is not attached to element "+a)};b.prototype.getKeyboardForControl=function(a){if(this.isAttached(a))return a._kmwAttachment.keyboard;console.error("KeymanWeb is not attached to element "+a);return null};b.prototype.getLanguageForControl=function(a){if(this.isAttached(a))return a._kmwAttachment.languageCode;console.error("KeymanWeb is not attached to element "+
a);return null};b.prototype.focusLastActiveElement=function(){var a=this.getLastActiveElement();a&&(this.keyman.uiManager.justActivated=!0,a.ownerDocument&&a instanceof a.ownerDocument.defaultView.HTMLIFrameElement&&this.keyman.domManager._IsMozillaEditableIframe(a,0)?a.ownerDocument.defaultView.focus():a.focus&&a.focus())};b.prototype.getLastActiveElement=function(){return k.DOMEventHandlers.states.lastActiveElement};b.prototype.clearLastActiveElement=function(){k.DOMEventHandlers.states.lastActiveElement=
null};b.prototype.getActiveElement=function(){return k.DOMEventHandlers.states.activeElement};b.prototype._setActiveElement=function(a){k.DOMEventHandlers.states.activeElement=a};b.prototype.setActiveElement=function(a,b){"string"==typeof a&&(a=document.getElementById(a));if(this.keyman.isEmbedded)this.isAttached(a)||this.attachToControl(a);else if(!this.isAttached(a)){console.warn("Cannot set an element KMW is not attached to as the active element.");return}a=a.kmw_ip?a.kmw_ip:a;this.keyman.isEmbedded||
this.keyman.touchAliasing._BlurKeyboardSettings();k.DOMEventHandlers.states.activeElement!=a&&this.keyman.resetContext(a);k.DOMEventHandlers.states.activeElement=k.DOMEventHandlers.states.lastActiveElement=a;this.keyman.isEmbedded||this.keyman.touchAliasing._FocusKeyboardSettings(!1);1<arguments.length&&b&&(this.keyman.util.device.touchable?this.keyman.touchAliasing.setFocusWithTouch({clientX:0,clientY:0,target:a}):this.focusLastActiveElement())};b.prototype.initActiveElement=function(a){null==k.DOMEventHandlers.states.activeElement&&
(k.DOMEventHandlers.states.activeElement=a)};b.prototype.moveToNext=function(a){var b,c=this.sortedInputs,g=this.getActiveElement(),e=this.keyman.util.device.touchable;if(0!=c.length){e&&(g=g.base);for(b=0;b<c.length&&c[b]!=g;b++);b=a?b-1:b+1;b=b>=c.length?b-c.length:b;b=0>b?b+c.length:b;e?(k.DOMEventHandlers.states.focusing=!0,a=c[b].kmw_ip,"undefined"==typeof a?c[b].focus():(this.keyman.domManager.setActiveElement(a),a.setTextCaret(1E4),a.scrollInput(),a.focus())):c[b].focus()}};b.prototype.moveToElement=
function(a){"string"==typeof a&&(a=document.getElementById(a));this.keyman.util.device.touchable&&a.kmw_ip?a.kmw_ip.focus():a.focus()};b.prototype._IsIEEditableIframe=function(a,b){var c,d=a&&(c=a.tagName)&&"body"==c.toLowerCase()&&(c=a.ownerDocument)&&c.parentWindow;return!b&&d||b&&(!d||a.isContentEditable)};b.prototype._IsMozillaEditableIframe=function(a,b){var c;a=a&&(c=a.defaultView)&&c.frameElement;return!b&&a||b&&(!a||"on"==c.document.designMode.toLowerCase())};b.prototype.getBaseFont=function(){var a=
this.keyman.util,b=document.getElementsByTagName("input"),c=document.getElementsByTagName("textarea"),g=0;if(0==b.length&&0==c.length)g=0;else if(0<b.length&&0==c.length)g=1;else if(0==b.length&&0<c.length)g=2;else{var e=b[0],f=c[0];e.offsetTop<f.offsetTop?g=1:e.offsetTop>f.offsetTop?g=2:e.offsetLeft<f.offsetLeft?g=1:e.offsetLeft>f.offsetLeft&&(g=2)}switch(g){case 0:case 1:a.getStyleValue(b[0],"font-family");case 2:var h=a.getStyleValue(c[0],"font-family")}if("undefined"==typeof h||"monospace"==h)h=
"Arial,sans-serif";return h};b.prototype.initializeUI=function(){this.keyman.ui&&this.keyman.ui.initialize instanceof Function?(this.keyman.ui.initialize(),this.keyman.osk._Show()):this.keyman.isEmbedded||window.setTimeout(this.initializeUI.bind(this),1E3)};b.suppressFocusCheck=function(a){k.DOMEventHandlers.states._IgnoreBlurFocus&&(a.stopPropagation(),a.cancelBubble=!0);return!0};return b}();k.DOMManager=f})(h.dom||(h.dom={}))})(e.keyman||(e.keyman={}))})(com||(com={}));
(function(e){(function(h){var k=function(){function e(b,a,d,c){this.Pelem=b;this.Peventname=a.toLowerCase();this.Phandler=d;this.PuseCapture=c}e.prototype.equals=function(b){return this.Pelem==b.Pelem&&this.Peventname==b.Peventname&&this.Phandler==b.Phandler&&this.PuseCapture==b.PuseCapture};return e}(),p=function(){function f(b){this.linkedStylesheets=[];this.events={};this.currentEvents=[];this.domEvents=[];this.embeddedFonts=[];this._GetAbsolute=this.getAbsolute;this.selectStartHandler=function(){return!1};
this._CancelMouse=function(a){(a=e.keyman.singleton._GetEventObject(a))&&a.preventDefault&&a.preventDefault();a&&(a.cancelBubble=!0,a.returnValue=!1);return!1};this.createElement=this._CreateElement;this.initDevices();this.keyman=b}f.prototype.getLanguageCodes=function(b){return-1==b.indexOf("-")?[b]:b.split("-")};f.prototype.initDevices=function(){this.device=new h.Device;this.physicalDevice=new h.Device;this.activeDevice=this.device;this.device.detect();"desktop"==this.device.formFactor&&(this.device.touchable=
!1);this.physicalDevice=new h.Device;this.physicalDevice.touchable=!1;this.physicalDevice.browser=this.device.browser;this.physicalDevice.formFactor="desktop";this.physicalDevice.OS=this.device.OS};f.prototype.arrayFromNodeList=function(b){for(var a=[],d=0;d<b.length;d++)a.push(b[d]);return a};f.prototype.addEventListener=function(b,a){this.removeEventListener(b,a);this.events[b].push(a);return!0};f.prototype.removeEventListener=function(b,a){"undefined"==typeof this.events[b]&&(this.events[b]=[]);
for(var d=0;d<this.events[b].length;d++)if(this.events[b][d]==a)return this.events[b].splice(d,1),!0;return!1};f.prototype.callEvent=function(b,a){if("undefined"==typeof this.events[b])return!0;if(-1!=this.currentEvents.indexOf(b))return!1;this.currentEvents.push(b);for(var d=0;d<this.events[b].length;d++){var c=this.events[b][d],g=!1;try{g=c(a)}catch(l){console.error(l),g=!1}if(!1===g)return this.currentEvents.pop(),!1}this.currentEvents.pop();return!0};f.prototype.attachDOMEvent=function(b,a,d,
c){this.detachDOMEvent(b,a,d,c);b.addEventListener(a,d,c?!0:!1);b=new k(b,a,d,c);this.domEvents.push(b)};f.prototype.detachDOMEvent=function(b,a,d,c){b.removeEventListener(a,d,c);b=new k(b,a,d,c);for(a=0;a<this.domEvents.length;a++)if(this.domEvents[a].equals(b)){this.domEvents.splice(a,1);break}};f.prototype.getOption=function(b,a){return b in this.keyman.options?this.keyman.options[b]:1<arguments.length?a:""};f.prototype.hasClass=function(b,a){a=" "+a+" ";return 0<=(" "+b.className+" ").replace(/[\n\t\r\f]/g,
" ").indexOf(a)};f.prototype.setOption=function(b,a){this.keyman.options[b]=a};f.prototype.getAbsoluteX=function(b){return h.dom.Utils.getAbsoluteX(b)};f.prototype.getAbsoluteY=function(b){return h.dom.Utils.getAbsoluteY(b)};f.prototype.getAbsolute=function(b){return{x:this.getAbsoluteX(b),y:this.getAbsoluteY(b)}};f.prototype.mouseDownPreventDefaultHandler=function(b){b&&b.preventDefault()};f.prototype._CreateElement=function(b){b=document.createElement(b);"undefined"!=typeof b.onselectstart?b.onselectstart=
this.selectStartHandler:(b.style.MozUserSelect="none",b.style.KhtmlUserSelect="none",b.style.UserSelect="none",b.style.WebkitUserSelect="none");return b};f.prototype.getIEVersion=function(){return h.Device._GetIEVersion()};f.prototype.getFontSizeStyle=function(b){var a="string"==typeof b?b:b.style.fontSize;return-1!=a.indexOf("em")?(b=parseFloat(a.substr(0,a.indexOf("em"))),{val:b,absolute:!1}):-1!=a.indexOf("px")?(b=parseFloat(a.substr(0,a.indexOf("px"))),{val:b,absolute:!0}):-1!=a.indexOf("pt")?
(b=parseFloat(a.substr(0,a.indexOf("pt"))),{val:4*b/3,absolute:!0}):-1!=a.indexOf("%")?(b=parseFloat(a.substr(0,a.indexOf("%"))),{val:b/100,absolute:!1}):isNaN(b=Number(a))?(console.error("Could not properly parse specified fontsize info: '"+a+"'."),null):{val:4*b/3,absolute:!0}};f.prototype.getStyleValue=function(b,a){try{if(b&&"undefined"!=typeof window.getComputedStyle)return window.getComputedStyle(b,"").getPropertyValue(a)}catch(d){}return""};f.prototype.getStyleInt=function(b,a,d){b=parseInt(this.getStyleValue(b,
a),10);return isNaN(b)?"number"==typeof d?d:0:b};f.prototype.isTouchDevice=function(){return this.device.touchable};f.prototype.portraitView=function(){return!this.landscapeView()};f.prototype.landscapeView=function(){if("undefined"!=typeof window.orientation)var b=window.orientation;else"undefined"!=typeof window.screen.orientation&&(b=window.screen.orientation.angle);return void 0!==b?1==Math.abs(b/90):!1};f.prototype.getViewportScale=function(){try{if(screen.width>document.documentElement.clientWidth)return 1;
var b=screen.width;this.landscapeView()?screen.width<screen.height&&(b=screen.height):screen.width>screen.height&&(b=screen.height);return Math.round(100*b/window.innerWidth)/100}catch(a){return 1}};f.prototype.barHeight=function(){var b=0;"phone"==this.device.formFactor&&(b=screen.height/2-window.innerHeight-(this.landscapeView()?this.device.dyLandscape:this.device.dyPortrait));return b};f.prototype._EncodeEntities=function(b){return b.replace("&","&amp;").replace("<","&lt;").replace(">","&gt;")};
f.prototype.createShim=function(){console.warn("The util.createShim function is deprecated, as its old functionality is no longer needed.  It and references to its previously-produced shims may be safely removed.")};f.prototype.showShim=function(b,a,d){console.warn("The util.showShim function is deprecated, as its old functionality is no longer needed.  It may be safely removed.")};f.prototype.hideShim=function(b){console.warn("The util.hideShim function is deprecated, as its old functionality is no longer needed.  It may be safely removed.")};
f.prototype.rgba=function(b,a,d,c,g){b="transparent";try{b="rgba("+a+","+d+","+c+","+g+")"}catch(l){b="rgb("+a+","+d+","+c+")"}return b};f.prototype.addStyleSheet=function(b){var a=document.createElement("style");a.type="text/css";a.appendChild(document.createTextNode(b));b=document.getElementsByTagName("HEAD");0<b.length?b[0].appendChild(a):document.body.appendChild(a);this.linkedStylesheets.push(a);return a};f.prototype.removeStyleSheet=function(b){if(null==b||"object"!=typeof b||"STYLE"!=b.nodeName||
"undefined"==typeof b.parentNode||null==b.parentNode)return!1;b.parentNode.removeChild(b);return!0};f.prototype.linkStyleSheet=function(b){var a=document.getElementsByTagName("head");if(0<a.length){var d=document.createElement("link");d.type="text/css";d.rel="stylesheet";d.href=b;this.linkedStylesheets.push(d);a[0].appendChild(d)}};f.prototype.addFontFaceStyleSheet=function(b){if("undefined"!=typeof b&&("undefined"==typeof b.files&&(b.files=b.source),"undefined"!=typeof b.files)){var a,d="",c="",
g="",e="",f=[];for(a=0;a<this.embeddedFonts.length;a++)if(this.embeddedFonts[a]==b.family)return;"string"==typeof b.files?f[0]=b.files:f=b.files;for(a=0;a<f.length;a++)0<f[a].toLowerCase().indexOf(".otf")&&(d=f[a]),0<f[a].toLowerCase().indexOf(".ttf")&&(d=f[a]),0<f[a].toLowerCase().indexOf(".woff")&&(c=f[a]),0<f[a].toLowerCase().indexOf(".eot")&&(g=f[a]),0<f[a].toLowerCase().indexOf(".svg")&&(e=f[a]);""!=d&&0>d.indexOf("/")&&(d=this.keyman.options.fonts+d);""!=c&&0>c.indexOf("/")&&(c=this.keyman.options.fonts+
c);""!=g&&0>g.indexOf("/")&&(g=this.keyman.options.fonts+g);""!=e&&0>e.indexOf("/")&&(e=this.keyman.options.fonts+e);a="@font-face {\nfont-family:"+b.family+";\nfont-style:normal;\nfont-weight:normal;\n";if(9<=h.Device._GetIEVersion())if("iOS"==this.device.OS)if(""!=d)d=this.unCached(d),a=a+"src:url('"+d+"') format('truetype');";else return;else{g=[];"Android"==this.device.OS?(""!=e&&g.push("url('"+e+"') format('svg')"),""!=c&&g.push("url('"+c+"') format('woff')"),""!=d&&g.push("url('"+d+"') format('truetype')")):
(""!=c&&g.push("url('"+c+"') format('woff')"),""!=d&&g.push("url('"+d+"') format('truetype')"),""!=e&&g.push("url('"+e+"') format('svg')"));if(0==g.length)return;a+="src:"+g.join(",")+";"}else if(""!=g)a=a+"src:url('"+g+"');";else return;this.addStyleSheet(a+"\n}\n");this.embeddedFonts.push(b.family)}};f.prototype.unCached=function(b){return b};f.prototype.loadCookie=function(b){var a={};if(0<arguments.length){var d=this.loadCookie(),c;for(c in d)if(c==b)for(var g=decodeURIComponent(d[c]).split(";"),
e=0;e<g.length;e++){var f=g[e].split("=");a[f[0]]=1<f.length?f[1]:""}}else if("undefined"!=typeof document.cookie&&""!=document.cookie)for(d=document.cookie.split(/;\s*/),e=0;e<d.length;e++)g=d[e].split("="),2==g.length&&(a[g[0]]=g[1]);return a};f.prototype.saveCookie=function(b,a){var d="",c;for(c in a)d=d+c+"="+a[c]+";";a=(new Date((new Date).valueOf()+2592E6)).toUTCString();document.cookie=b+"="+encodeURIComponent(d)+"; path=/; expires="+a};f.prototype.toNumber=function(b,a){b=parseInt(b,10);return isNaN(b)?
a:b};f.prototype.toFloat=function(b,a){b=parseFloat(b);return isNaN(b)?a:b};f.prototype.nzString=function(b,a){var d="";1<arguments.length&&(d=a);return"undefined"==typeof b||null==b||0==b||""==b?d:""+b};f.prototype.eventTarget=function(b){return b?b.target?b.target:b.srcElement?b.srcElement:window.event?window.event.srcElement:null:null};f.prototype.eventType=function(b){return b&&b.type?b.type:window.event?window.event.type:""};f.prototype.alert=function(b,a){var d=this.waiting,c=d.firstChild.childNodes;
c[0].style.display="block";c[1].className="kmw-alert-text";c[1].innerHTML=b;c[2].style.display="none";d.style.display="block";d.dismiss=1<arguments.length?a:null};f.prototype.wait=function(b){};f.prototype.prepareWait=function(){var b=document.createElement("DIV"),a=document.createElement("DIV"),d=document.createElement("DIV"),c=document.createElement("DIV"),g=document.createElement("DIV");b.className="kmw-wait-background";a.className="kmw-wait-box";b.dismiss=null;d.className="kmw-wait-text";c.className=
"kmw-wait-graphic";g.className="kmw-alert-close";a.onmousedown=a.onclick=function(a){"block"==g.style.display&&(b.style.display="none",b.dismiss&&b.dismiss())};a.addEventListener("touchstart",a.onclick,!1);b.onmousedown=b.onclick=function(a){a.preventDefault();a.stopPropagation()};b.addEventListener("touchstart",b.onclick,!1);a.appendChild(g);a.appendChild(d);a.appendChild(c);b.appendChild(a);document.body.appendChild(b);this.waiting=b};f.prototype.shutdown=function(){this.events={};for(var b=0,a=
this.domEvents;b<a.length;b++){var d=a[b];this.detachDOMEvent(d.Pelem,d.Peventname,d.Phandler,d.PuseCapture)}this.waiting.parentNode.removeChild(this.waiting);b=0;for(a=this.linkedStylesheets;b<a.length;b++)d=a[b],d.remove?d.remove():d.parentNode&&d.parentNode.removeChild(d)};f.prototype.myPath=function(b){var a,d=document.getElementsByTagName("script");for(a=0;a<d.length;a++){var c=d[a];if(0<=c.src.indexOf(b))return c.src.substr(0,c.src.lastIndexOf("/")+1)}return""};f.prototype.prependProtocol=function(b){return/^https?:/.test(b)?
b:"//"==b.substr(0,2)?this.keyman.protocol+b:"/"==b.substr(0,1)?this.keyman.protocol+"/"+b:this.keyman.protocol+"//"+b};f.prototype.testString=function(b){var a=b.family;if("sample"in b&&"string"==typeof b.sample)return"BESbswy"+b.sample;var d="TamilWeb TibetanWeb LatinWeb CherokeeWeb EgyptianWeb SinhalaWeb KhmerWeb ArabicWeb BurmeseWeb LaoWeb OriyaWeb GeezWeb".split(" "),c="\u0bbe\u0bf5 \u0f7f\u0fd0 \u02b0\u02a4 \u13d0\u13c9 \ua723\uf7d3 \u0dd8\u0da3 \u17d6\u178e \u0639\u06b3 \u1038\u1024 \u0ec0\u0edd \u0b03\u0b06 \u1361\u132c".split(" ");
for(b=0;b<d.length;b++)if(a==d[b])return"BESbswy"+c[b];return"BESbswy"};f.prototype.checkFont=function(b){var a=b.family,d=document.createElement("DIV"),c=d.style,g=document.createElement("P"),e=document.createElement("P"),f=document.createElement("SPAN"),h=f.style,k=document.createElement("SPAN"),n=k.style;c.position="absolute";c.top="10px";c.left="10px";c.visibility="hidden";document.body.appendChild(d);d.appendChild(g);d.appendChild(e);g.appendChild(f);e.appendChild(k);f.setAttribute("style","font-family:monospace !important");
n.fontFamily=a+",monospace";h.fontSize=n.fontSize="24px";f.innerHTML=k.innerHTML=this.testString(b);f.offsetWidth!=k.offsetWidth&&(f.setAttribute("style","font-family:sans-serif !important"),n.fontFamily=a+",sans-serif",f.offsetWidth!=k.offsetWidth&&(f.setAttribute("style","font-family:serif !important"),n.fontFamily=a+",serif"));b=f.offsetWidth!=k.offsetWidth;g.removeChild(f);e.removeChild(k);d.removeChild(g);d.removeChild(e);document.body.removeChild(d);return b};f.prototype.checkFontDescriptor=
function(b){return"undefined"==typeof b||"string"!=typeof b.family?!0:this.checkFont(b)};return f}();h.Util=p})(e.keyman||(e.keyman={}))})(com||(com={}));var Util=com.keyman.Util;
(function(e){(function(h){(function(h){var k=function(){function a(a,b){this.id=a;this.language=b}a.prototype.toString=function(){var a=this.id;this.language?(a=a+"@"+this.language,this.version&&(a=a+"@"+this.version)):this.version&&(a=a+"@@"+this.version);return a};return a}(),f=function(){return function(a,b){this.family=a.family;this.files=a.source;this.path=b}}(),b=function(){return function(a,b){this.KI="Keyboard_"+a;this.KLC=b}}();h.KeyboardStub=b;var a=function(){return function(){this.stores=
{}}}();h.KeyboardTag=a;var d=function(){function c(a){this.activeStub=null;this.keyboardStubs=[];this.deferredStubs=[];this.deferredKRS=[];this.deferredKR=[];this.dfltStub=null;this.keyboards=[];this.languageList=null;this.languagesPending=[];this.linkedScripts=[];this._GetKeyboardDetail=function(a){var b={};b.Name=a.KN;b.InternalName=a.KI;b.LanguageName=a.KL;b.LanguageCode=a.KLC;b.RegionName=a.KR;b.RegionCode=a.KRC;b.CountryName=a.KC;b.CountryCode=a.KCC;b.KeyboardID=a.KD;b.Font=a.KFont;b.OskFont=
a.KOskFont;return b};this.keymanweb=a}c.prototype.getActiveKeyboardName=function(){var a=e.keyman.singleton.core;return a.activeKeyboard?a.activeKeyboard.id:""};c.prototype.getActiveLanguage=function(a){return null==this.activeStub?"":a?this.activeStub.KL:this.activeStub.KLC};c.prototype.getDetailedKeyboards=function(){var a=[],b;for(b=0;b<this.keyboardStubs.length;b++){var c=this.keyboardStubs[b];c=this._GetKeyboardDetail(c);a=this.keymanweb._push(a,c)}return a};c.prototype.registerDeferredStubs=
function(){this.addKeyboardArray(this.deferredStubs);for(var a=0;a<this.deferredKRS.length;a++)this._registerStub(this.deferredKRS[a])};c.prototype.registerDeferredKeyboards=function(){for(var a=0;a<this.deferredKR.length;a++)this._registerKeyboard(this.deferredKR[a])};c.prototype.addStub=function(a){if("string"!=typeof a.id)return!1;"undefined"!=typeof a.language&&(console.warn("The 'language' property for keyboard stubs has been deprecated.  Please use the 'languages' property instead."),a.languages=
a.language);if("undefined"==typeof a.languages)return!1;"string"!=typeof a.name&&(a.name=a.id.replace("_"," "),a.name=a.name.substr(0,1).toUpperCase()+a.name.substr(1));var b=a.languages,c=[];"undefined"==typeof b.length?c[0]=b:c=b;var d={keyboardBaseUri:this.keymanweb.options.keyboards,fontBaseUri:this.keymanweb.options.fonts};for(b=0;b<c.length;b++)this.mergeStub(a,c[b],d);return!0};c.prototype.mergeStub=function(a,d,e){var g=this.findStub(a.id,d.id),l=!1;null==g&&(g=new b(a.id,d.id),this.keyboardStubs.push(g),
l=!0);var h=d.region,k=0;if("number"==typeof h)k=1>h||9<h?0:h-1;else if("string"==typeof h)for(var r=2==h.length?c.regionCodes:c.regions,p=0;p<r.length;p++)if(h.toLowerCase()==r[p].toLowerCase()){k=p;break}g.KL="undefined"===typeof g.KL?d.name:g.KL;g.KR="undefined"===typeof g.KR?c.regions[k]:g.KR;g.KRC="undefined"===typeof g.KRC?c.regionCodes[k]:g.KRC;g.KN="undefined"===typeof g.KN?a.name:g.KN;"undefined"==typeof g.KF&&(h=/^(([\.]\/)|([\.][\.]\/)|(\/))|(:)/,g.KF=a.filename,h.test(g.KF)||(g.KF=e.keyboardBaseUri+
g.KF));a=e.fontBaseUri;""!=this.keymanweb.options.fonts?(a=this.keymanweb.options.fonts,h=/^https?\:/,h.test(a)||(a="//"==a.substr(0,2)?this.keymanweb.protocol+a:"/"==a.substr(0,1)?this.keymanweb.rootPath+a.substr(1):this.keymanweb.rootPath+a)):this.keymanweb.options.fonts=a;"undefined"!=typeof d.font&&(g.KFont="undefined"===typeof g.KFont?new f(d.font,a):g.KFont);"undefined"!=typeof d.oskFont&&(g.KOskFont="undefined"===typeof g.KOskFont?new f(d.oskFont,a):g.KOskFont);this.doKeyboardRegistered(g.KI,
g.KL,g.KN,g.KLC,g.KP);!this.activeStub&&l&&1==this.keyboardStubs.length&&(this.doBeforeKeyboardChange(g.KI,g.KLC),this._SetActiveKeyboard(g.KI,g.KLC,!1),this.doKeyboardChange(g.KI,g.KLC))};c.prototype.findStub=function(a,b){var c;for(c=0;c<this.keyboardStubs.length;c++)if(this.keyboardStubs[c].KI=="Keyboard_"+a&&this.keyboardStubs[c].KLC==b)return this.keyboardStubs[c];return null};c.prototype.setDefaultKeyboard=function(){return 0<this.keyboardStubs.length?(this._SetActiveKeyboard(this.keyboardStubs[0].KI,
this.keyboardStubs[0].KLC),!0):!1};c.prototype.setActiveKeyboard=function(a,b){!this.keymanweb.isEmbedded&&a&&0!=a.indexOf("Keyboard_")&&(a="Keyboard_"+a);this.doBeforeKeyboardChange(a,b);var c=this._SetActiveKeyboard(a,b,!0);null!=this.keymanweb.domManager.getLastActiveElement()&&this.keymanweb.domManager.focusLastActiveElement();this.doKeyboardChange(a,b);c.catch(function(){throw Error('Unable to load keyboard with internal name "'+a+'", language code "'+b+'".');});return c};c.prototype._SetActiveKeyboard=
function(a,b,c){var d,g,f=e.keyman.singleton,l=f.util,k=f.osk,r=f.core.activeKeyboard;if(2>arguments.length||!b)b="---";for(d=0;d<this.keyboardStubs.length&&(a!=this.keyboardStubs[d].KI||b!=this.keyboardStubs[d].KLC&&"---"!=b);d++);l.device.touchable&&(""==a||null==a||d>=this.keyboardStubs.length)&&0!=this.keyboardStubs.length&&(a=this.keyboardStubs[0].KI,b=this.keyboardStubs[0].KLC);2<arguments.length&&c&&this.saveCurrentKeyboard(a,b);if(this.activeStub&&r&&r.id==a&&this.activeStub.KI==a&&this.activeStub.KLC==
b&&!this.keymanweb.mustReloadKeyboard)return Promise.resolve();if(r&&r.id==a)for(g=0;g<this.keyboardStubs.length;g++)if(this.keyboardStubs[g].KI==a&&this.keyboardStubs[g].KLC==b)return this.activeStub=this.keyboardStubs[g],k.vkbd.appendStyleSheet(),this.keymanweb.mustReloadKeyboard&&k._Load(),Promise.resolve();this.activeStub=f.core.activeKeyboard=null;if(""==a)return k._Hide(!1),this.keymanweb.isEmbedded||l.wait(!1),Promise.resolve();for(g=0;g<this.keyboards.length;g++)if(this.keyboards[g].KI==a){f.core.activeKeyboard=
new h.Keyboard(this.keyboards[g]);this.keymanweb.domManager._SetTargDir(this.keymanweb.domManager.getLastActiveElement());for(d=0;d<this.keyboardStubs.length;d++)if(this.keyboardStubs[d].KI==a&&(this.keyboardStubs[d].KLC==b||"---"==b)){this.activeStub=this.keyboardStubs[d];break}break}if(null==f.core.activeKeyboard){for(g=0;g<this.keyboardStubs.length;g++)if(this.keyboardStubs[g].KI==a&&(this.keyboardStubs[g].KLC==b||"---"==b)){if(this.isCJK(this.keyboardStubs[g])||l.device.touchable)k._Enabled=!0;
if(!this.keyboardStubs[g].asyncLoader){k.ready&&k._Hide(!1);var t=this.keyboardStubs[g];t.asyncLoader={};var p=t.KN,O=t.KL;p=p.replace(/\s*keyboard\s*/i,"");t.asyncLoader.callback=function(a,b){var c=a||"Sorry, the "+p+" keyboard for "+O+" is not currently available.";this.keymanweb.isEmbedded||(l.wait(!1),l.alert(a||c,function(){this.keymanweb.setActiveKeyboard("")}.bind(this)));switch(b){case "err":console.error(c);break;default:console.warn(c)}0<g&&(a=this.keyboardStubs[0],this._SetActiveKeyboard(a.KI,
a.KLC,!0))}.bind(this);t.asyncLoader.timer=window.setTimeout(t.asyncLoader.callback,1E4);this.keymanweb.isEmbedded||l.wait("Installing keyboard<br/>"+p);var q=this;t.asyncLoader.promise=new Promise(function(a,b){window.setTimeout(function(){q.installKeyboard(a,b,t)},0)})}this.activeStub=this.keyboardStubs[g];return this.keyboardStubs[g].asyncLoader.promise}this.keymanweb.domManager._SetTargDir(this.keymanweb.domManager.getLastActiveElement())}f=f.core.activeKeyboard;null!==f&&(f=f.scriptObject);String.kmwEnableSupplementaryPlane(f&&
(f.KS&&1==f.KS||"Hieroglyphic"==f.KN));k._Load();return Promise.resolve()};c.prototype.installKeyboard=function(a,b,c){var d=this.keymanweb.util,g=this.keymanweb.osk,f=d._CreateElement("script");f.charset="UTF-8";f.type="text/javascript";this.keymanweb.isEmbedded&&(f.id=c.KI);var l=c.KF,k=c.KL,r=c.KN,t=this,p=e.keyman.singleton.core;f.addEventListener("error",function(){null!==c.asyncLoader.timer&&(window.clearTimeout(c.asyncLoader.timer),c.asyncLoader.timer=null);c.asyncLoader.callback("Cannot find the "+
r+" keyboard for "+k+".","warn");c.asyncLoader=null;b()},!1);f.addEventListener("load",function(){null!==c.asyncLoader.timer&&(window.clearTimeout(c.asyncLoader.timer),c.asyncLoader.timer=null);var e=t.getKeyboardByID(c.KI);e?(c==t.activeStub&&(t.doBeforeKeyboardChange(e.KI,c.KLC),p.activeKeyboard=new h.Keyboard(e),null!=t.keymanweb.domManager.getLastActiveElement()&&(t.keymanweb.uiManager.justActivated=!0,t.keymanweb.domManager._SetTargDir(t.keymanweb.domManager.getLastActiveElement())),String.kmwEnableSupplementaryPlane(e&&
(e.KS&&1==e.KS||"Hieroglyphic"==e.KN)),t.saveCurrentKeyboard(e.KI,c.KLC),g._Load()),t.keymanweb.isEmbedded||d.wait(!1),c.asyncLoader=null,a()):(c.asyncLoader.callback("Error registering the "+r+" keyboard for "+k+".","error"),c.asyncLoader=null,b())},!1);f.src=this.keymanweb.getKeyboardPath(l);try{document.body.appendChild(f),this.linkedScripts.push(f)}catch(O){try{document.getElementsByTagName("head")[0].appendChild(f)}catch(q){b()}}};c.prototype.saveCurrentKeyboard=function(a,b){this.keymanweb.util.saveCookie("KeymanWeb_Keyboard",
{current:a+":"+b});this.keymanweb.isEmbedded||this.keymanweb.touchAliasing._BlurKeyboardSettings(a,b)};c.prototype.restoreCurrentKeyboard=function(){var a=this.keyboardStubs,b=a.length,c=e.keyman.singleton.core;if(!(1>a.length)){var d=this.getSavedKeyboard();d.split(":");var f=d.split(":");2>f.length&&(f[1]="");for(d=0;d<b&&(a[d].KI!=f[0]||a[d].KLC!=f[1]&&""!=f[1]);d++);if(d<b||null==c.activeKeyboard)this._SetActiveKeyboard(f[0],f[1],!1),this.keymanweb.globalKeyboard=f[0],this.keymanweb.globalLanguageCode=
f[1],this.doKeyboardChange(f[0],f[1])}};c.prototype.getSavedKeyboard=function(){var a=this.keymanweb.util.loadCookie("KeymanWeb_Keyboard");if("string"!=typeof a.current)return"Keyboard_us:eng";var b,c=this.keyboardStubs;for(b=0;b<c.length;b++){var d=c[b].KI+":"+c[b].KLC;if(d==a.current)return d}for(b=0;b<c.length;b++)if(d=c[b].KI+":"+c[b].KLC,"Keyboard_us:eng"==d)return d;return 0<c.length?c[0].KI+":"+c[0].KLC:"Keyboard_us:eng"};c.prototype.isCJK=function(a){var b;"undefined"!=typeof a.KLC?b=a.KLC:
"undefined"!=typeof a.LanguageCode&&(b=a.LanguageCode);return"cmn"==b||"jpn"==b||"kor"==b};c.prototype.getKeyboardByID=function(a){var b;for(b=0;b<this.keyboards.length;b++)if(a==this.keyboards[b].KI)return this.keyboards[b];return null};c.prototype.isUniqueRequest=function(a,b){var c;if(null==this.findStub(b.id,b.language)){for(c=0;c<a.length;c++)if(a[c].id==b.id&&a[c].language==b.language)return!1;return!0}return!1};c.prototype.addKeyboardArray=function(a){if(!this.keymanweb.initialized)for(var b=
0;b<a.length;b++)this.deferredStubs.push(a[b]);else if(0!=a.length){var c,d="",g=[];for(b=0;b<a.length;b++){if("string"==typeof a[b]&&0<a[b].length){var e=a[b].split("@"),f=[""];"english"==e[0].toLowerCase()&&(e[0]="us");1<e.length&&(f=e[1].split(","));for(c=0;c<f.length;c++){var h=new k(e[0]);""!=f[c]&&(h.language=f[c]);2<e.length&&(h.version=e[2]);this.isUniqueRequest(g,h)&&g.push(h)}}if("object"==typeof a[b]&&null!=a[b])if("string"==typeof a[b].filename)this.addStub(a[b])||alert("To use a custom keyboard, you must specify file name, keyboard name, language, language code and region code.");
else if(a[b].language&&(console.warn("The 'language' property for keyboard stubs has been deprecated.  Please use the 'languages' property instead."),a[b].languages=a[b].language),f=a[b].languages,"number"==typeof f.length)for(c=0;c<f.length;c++)h=new k(a[b].id,a[b].languages[c].id),this.isUniqueRequest(g,h)&&g.push(h);else h=new k(a[b].id,a[b].languages[c].id),this.isUniqueRequest(g,h)&&g.push(h)}if(0!=g.length){a="&keyboardid=";for(b=0;b<g.length;b++)a=a+d+g[b].toString(),d=",";this.keymanCloudRequest(a,
!1)}}};c.prototype.registerLanguagesForKeyboard=function(a,b,c){var d,e=0;var g="";if("undefined"!=typeof a)if("string"==typeof b.keyboardid&&(g=b.keyboardid.split(",")[c]),"number"==typeof a.length)if(1==a.length||"$"==g.substr(-1,1)||""==g)for(g=0;g<a.length;g++)this.registerLanguagesForKeyboard(a[g],b,c);else{for(g=0;g<a.length;g++){var f=a[g].id.toLowerCase();"us"==f&&(f="english");for(d=0;d<a[g].languages.length;d++)if(f==a[g].languages[d].name.toLowerCase()){e=g;break}}this.registerLanguagesForKeyboard(a[e],
b,c)}else if(c=g.split("@")[1],"string"==typeof c&&(c=c.replace(/\$$/,"")),e=a.languages,"undefined"!=typeof e)if("number"==typeof e.length)for(g=0;g<e.length;g++)"undefined"!=typeof c&&e[g].id!=c||this.mergeStub(a,e[g],b);else this.mergeStub(a,e,b)};c.prototype.register=function(a){var b=a.options;a.timerid&&window.clearTimeout(a.timerid);if("string"==typeof a.error)b="","string"==typeof a.keyboardid&&(b=a.keyboardid.substr(0,1).toUpperCase()+a.keyboardid.substr(1)),this.serverUnavailable(b+" keyboard not found.");
else if("undefined"!=typeof b&&"undefined"!=typeof b.context)if("keyboard"==b.context){var c=a.keyboard;if("number"==typeof c.length)for(a=0;a<c.length;a++)this.registerLanguagesForKeyboard(c[a],b,a);else this.registerLanguagesForKeyboard(c,b,0)}else"language"==b.context&&(this.languageList=a.languages,this.languagesPending&&this.addLanguageKeyboards(this.languagesPending),this.languagesPending=[])};c.prototype.addLanguageKeyboards=function(a){var b,c;if(null==this.languageList){var d=0==this.languagesPending.length;
for(b=0;b<a.length;b++)this.languagesPending.push(a[b]);d&&this.keymanCloudRequest("",!0)}else{var e="";for(b=0;b<a.length;b++){var g=a[b].toLowerCase();(c="$"==g.substr(-1,1))&&(g=g.substr(0,g.length-1));for(d=0;d<this.languageList.length;d++)if(g==this.languageList[d].name.toLowerCase()){""!=e&&(e+=",");e=e+"@"+this.languageList[d].id;c&&(e+="$");break}}""==e?this.keymanweb.util.alert("No keyboards are available for "+a[0]+". Does it have another language name?"):this.keymanCloudRequest("&keyboardid="+
e,!1)}};c.prototype.keymanCloudRequest=function(a,b){var c="https://api.keyman.com/cloud/4.0/",d=this.keymanweb.util._CreateElement("script");c=c+(1<arguments.length&&b?"languages":"keyboards")+"?jsonp=keyman.register&languageidtype=bcp47&version="+this.keymanweb.version;var e=this;var g="&timerid="+window.setTimeout(function(){e.serverUnavailable(a)},1E4);d.charset="UTF-8";d.src=c+a+g;d.type="text/javascript";try{document.body.appendChild(d)}catch(v){document.getElementsByTagName("head")[0].appendChild(d)}};
c.prototype.serverUnavailable=function(a){this.keymanweb.util.alert(""==a?"Unable to connect to Keyman Cloud server!":a);this.keymanweb.warned=!0};c.prototype.removeKeyboards=function(a,b){if(0==arguments.length)return!1;var c,d,e=!0,g=!1,f=!1;for(c=0;c<arguments.length;c++){for(d=this.keyboardStubs.length-1;0<=d;d--)if("Keyboard_"+arguments[c]==this.keyboardStubs[d].KI){"Keyboard_"+arguments[c]==this.getActiveKeyboardName()&&(g=!0);f=!0;this.keyboardStubs.splice(d,1);break}0>d&&(e=!1)}for(c=0;c<
arguments.length;c++)for(d=this.keyboards.length-1;0<=d;d--)if("Keyboard_"+arguments[c]==this.keyboards[d].KI){this.keyboards.splice(d,1);break}g&&(0<this.keyboardStubs.length?this._SetActiveKeyboard(this.keyboardStubs[0].KI,this.keyboardStubs[0].KLC,!0):this._SetActiveKeyboard("","",!1),this.keymanweb.uiManager.justActivated=!0);f&&this.doKeyboardUnregistered();return e};c.prototype._registerKeyboard=function(b){if(this.keymanweb.initialized)if(b._kmw)console.error("The keyboard _kmw property is a reserved field for engine use only; this keyboard is invalid.");
else{b._kmw=new a;var c;this.keymanweb.isEmbedded&&this.keymanweb.preserveID(b);var d=this.activeStub,e=this.activeStub;if(!(d&&"KI"in d)||d.KI!=b.KI)for(c=0;c<this.keyboardStubs.length;c++){d=this.keyboardStubs[c];if(b.KI==d.KI)break;d=null}null==this.activeStub&&null!=d&&(this.activeStub=d);for(c=0;c<this.keyboards.length;c++)if(b.KI==this.keyboards[c].KI)return;this.keyboards=this.keymanweb._push(this.keyboards,b);this.doKeyboardLoaded(b.KI);this.activeStub=e}else this.deferredKR.push(b)};c.prototype._registerStub=
function(a){var b;if(!this.keymanweb.initialized)return this.deferredKRS.push(a),null;null==this.dfltStub&&(this.dfltStub=a);this.keymanweb.isEmbedded&&this.keymanweb.namespaceID(a);"undefined"==typeof a.KLC&&(a.KLC="");"undefined"==typeof a.KL&&(a.KL="undefined");for(b=0;b<this.keyboardStubs.length;b++)if(this.keyboardStubs[b].KI==a.KI&&(""==a.KLC||this.keyboardStubs[b].KLC==a.KLC))return 1;this.keyboardStubs=this.keymanweb._push(this.keyboardStubs,a);this.doKeyboardRegistered(a.KI,a.KL,a.KN,a.KLC,
a.KP);this.activeStub||this.dfltStub!=a||1!=this.keyboardStubs.length||this.setActiveKeyboard(a.KI,a.KLC);return null};c.prototype.doKeyboardRegistered=function(a,b,c,d,e){a={internalName:a,language:b,keyboardName:c,languageCode:d};e&&(a["package"]=e);return this.keymanweb.util.callEvent("kmw.keyboardregistered",a)};c.prototype.doKeyboardUnregistered=function(){return this.keymanweb.util.callEvent("kmw.keyboardregistered",{})};c.prototype.doKeyboardLoaded=function(a){var b={};b.keyboardName=a;return this.keymanweb.util.callEvent("kmw.keyboardloaded",
b)};c.prototype.doBeforeKeyboardChange=function(a,b){var c={};c.internalName=a;c.languageCode=b;return this.keymanweb.util.callEvent("kmw.beforekeyboardchange",c)};c.prototype.doKeyboardChange=function(a,b,c){return this.keymanweb.util.callEvent("kmw.keyboardchange",{internalName:a,languageCode:b,indirect:2<arguments.length?c:!1})};c.prototype.shutdown=function(){for(var a=0,b=this.linkedScripts;a<b.length;a++){var c=b[a];c.remove?c.remove():c.parentNode&&c.parentNode.removeChild(c)}};c.regions="World;Africa;Asia;Europe;South America;North America;Oceania;Central America;Middle East".split(";");
c.regionCodes="un af as eu sa na oc ca me".split(" ");return c}();h.KeyboardManager=d})(h.keyboards||(h.keyboards={}))})(e.keyman||(e.keyman={}))})(com||(com={}));
(function(e){(function(e){var h=function(){function e(b,a,d){this.code=b;this.shift=a;this.handler=d}e.prototype.matches=function(b,a){return this.code==b&&this.shift==a};return e}(),p=function(){function f(b){this.hotkeys=[];this._Process=function(a){a||(a=window.event);var b=e.dom.PreProcessor._GetEventKeyCode(a);if(null==b)return!1;for(var c=(a.shiftKey?16:0)|(a.ctrlKey?32:0)|(a.altKey?64:0),g=0;g<this.hotkeys.length;g++)if(this.hotkeys[g].matches(b,c))return this.hotkeys[g].handler(),a.returnValue=
!1,a&&a.preventDefault&&a.preventDefault(),a.cancelBubble=!0,!1;return!0}.bind(this);this.keyman=b}f.prototype.addHotKey=function(b,a,d){for(var c=0;c<this.hotkeys.length;c++)if(this.hotkeys[c].code==b&&this.hotkeys[c].shift==a){this.hotkeys[c].handler=d;return}this.hotkeys.push(new h(b,a,d))};f.prototype.removeHotkey=function(b,a){for(var d=0;d<this.hotkeys.length;d++)if(this.hotkeys[d].matches(b,a)){this.hotkeys.splice(d,1);break}};return f}();e.HotkeyManager=p})(e.keyman||(e.keyman={}))})(com||
(com={}));
(function(e){(function(e){var h=function(){return function(e,b){this.activationPending=e;this.activated=b}}();e.UIState=h;var p=function(){function e(b){this.justActivated=this.isActivating=!1;this.doUnload=function(){return this.keyman.util.callEvent("kmw.unloaduserinterface",{})};this.keyman=b}e.prototype.getUIState=function(){return new h(this.isActivating,this.justActivated)};e.prototype.setActivatingUI=function(b){this.isActivating=b?!0:!1};e.prototype.doLoad=function(){return this.keyman.util.callEvent("kmw.loaduserinterface",{})};
return e}();e.UIManager=p})(e.keyman||(e.keyman={}))})(com||(com={}));
(function(e){(function(h){(function(k){var p=function(){function f(b){this.keyman=b;this.scrolling=!1;this.shim=this.constructShim()}f.prototype.constructShim=function(){var b=this,a=this.keyman.util._CreateElement("div"),d=this.keyman.osk;a.id="kmw-language-menu-background";a.addEventListener("touchstart",function(a){a.preventDefault();b.hide();if(2<a.touches.length){var c=a.touches[1].pageX;a=a.touches[1].pageY;var e=d.vkbd.spaceBar;c>e.offsetLeft&&c<e.offsetLeft+e.offsetWidth&&a>e.offsetTop&&a<
e.offsetTop+e.offsetHeight&&d.showBuild()}},!1);return a};f.prototype.show=function(){var b=this.keyman.keyboardManager.keyboardStubs,a=this.keyman.util;if(!(1>b.length)){var d=this.lgList=a._CreateElement("div");this.lgList.id="kmw-language-menu";var c=this;document.body.appendChild(this.shim);var e=a._CreateElement("div"),f=e.style,h=a._CreateElement("div");e.id="kmw-menu-scroll-container";h.id="kmw-menu-scroller";"WebkitOverflowScrolling"in f&&(f.WebkitOverflowScrolling="touch");e.appendChild(h);
d.appendChild(e);var k;f=a._CreateElement("div");f.id="kmw-menu-index";for(k=1;26>=k;k++){var p=a._CreateElement("p");p.innerHTML=String.fromCharCode(k+64);f.appendChild(p)}f.addEventListener("touchstart",function(a){c.scrollToLanguage(a,e,h)},!1);f.addEventListener("touchend",function(a){a.stopPropagation();a.preventDefault()},!1);d.appendChild(f);d.addEventListener("scroll",function(a){c.scrolling=!0},!1);e.addEventListener("scroll",function(a){1>e.scrollTop&&(e.scrollTop=1);e.scrollTop>e.scrollHeight-
e.offsetHeight-1&&(e.scrollTop=e.scrollHeight-e.offsetHeight-1)},!1);this.activeLgNo=this.addLanguages(h,b);this.lgList.style.visibility="hidden";document.body.appendChild(this.lgList);"Android"==a.device.OS&&"devicePixelRatio"in window&&(this.lgList.style.fontSize=2/window.devicePixelRatio+"em");"Android"==a.device.OS&&"tablet"==a.device.formFactor&&"devicePixelRatio"in window&&(k=parseInt(a.getStyleValue(d,"width"),10),b=d.style,isNaN(k)||(b.width=b.maxWidth=2*k/window.devicePixelRatio+"px"),k=
parseInt(a.getStyleValue(e,"width"),10),b=e.style,isNaN(k)||(b.width=b.maxWidth=2*k/window.devicePixelRatio+"px"),k=parseInt(a.getStyleValue(h,"width"),10),b=h.style,isNaN(k)||(b.width=b.maxWidth=2*k/window.devicePixelRatio+"px"));this.adjust(0);a=Math.floor(d.offsetHeight/26);b=Math.round(100*a/(f.childNodes[1].offsetTop-f.childNodes[0].offsetTop))/100;p=.6<b?1:2;1.25<b&&(b=1.25);for(k=0;26>k;k++){var n=f.childNodes[k].style;2==p&&1==k%2?n.display="none":(n.fontSize=b*p+"em",n.lineHeight=a*p+"px")}k=
e.offsetWidth;e.scrollHeight>e.offsetHeight+3?k+=f.offsetWidth:f.style.display="none";d.style.width=k+"px";this.lgList.style.visibility="";d=h.firstChild.offsetHeight*this.activeLgNo+1;e.scrollTop=d;e.scrollTop<d&&(e.scrollTop=e.scrollHeight-e.offsetHeight);e.scrollTop>e.scrollHeight-e.offsetHeight-1&&(e.scrollTop=e.scrollHeight-e.offsetHeight-1)}};f.prototype.adjust=function(b){var a=this.keyman.osk,d=this.keyman.util,c=d.device,e=this.lgList,f=e.firstChild,k=f.firstChild,p=e.style;e=e.childNodes[1];
var w=window.innerHeight-a.vkbd.lgKey.offsetHeight-16;b=(k.childNodes.length+b-1)*k.firstChild.firstChild.offsetHeight;"iOS"==c.OS&&("phone"==c.formFactor?(c=d.landscapeView()?36:0,w=(window.innerHeight-c-16)*d.getViewportScale()):"tablet"==c.formFactor&&(c=d.landscapeView()?16:0,w-=c));p.left=h.dom.Utils.getAbsoluteX(a.vkbd.lgKey)+"px";b>w&&(b=w);p.height=b+"px";p.bottom="0px";e.style.height=f.style.height=p.height};f.prototype.scrollToLanguage=function(b,a,d){b.stopImmediatePropagation();b.stopPropagation();
b.preventDefault();var c=b.touches[0].target;if("P"==c.nodeName){var e;b=0;c=c.innerHTML.charCodeAt(0);var f=d.childNodes;try{for(e=0;e<f.length-1;e++){var h=f[e].firstChild.innerHTML.toUpperCase().charCodeAt(0);if(h>=c)break}}catch(A){}try{b=d.firstChild.offsetHeight*e+1,a.scrollTop=b}catch(A){b=0}try{a.scrollTop<b&&(a.scrollTop=a.scrollHeight-a.offsetHeight),a.scrollTop>a.scrollHeight-a.offsetHeight-1&&(a.scrollTop=a.scrollHeight-a.offsetHeight-1)}catch(A){}}};f.prototype.addLanguages=function(b,
a){var d=a.length,c=this.keyman.util,e=c.device,f,h,k=[];for(h=0;h<d;h++){var p=a[h].KL;-1==k.indexOf(p)&&k.push(p)}k.sort();var n=Math.round(100/c.getViewportScale())/100,v,x,J,t,L=-1;p=function(){v=c._CreateElement("div");v.className="kbd-list-closed";x=c._CreateElement("p");x.kList=[];for(h=0;h<d;h++)a[h].KL==k[f]&&x.kList.push(a[h]);"iOS"==e.OS&&(x.style.fontSize=n+"em");v.appendChild(x);b.appendChild(v);k[f]==O.keyman.keyboardManager.activeStub.KL&&(L=f);var g=O;if(1<x.kList.length)for(x.className=
"kbd-list",x.innerHTML=k[f]+"...",x.scrolled=!1,x.ontouchend=function(a){a.preventDefault();a.stopPropagation();a.target.scrolled?a.target.scrolled=!1:this.parentNode.className="kbd-list-closed"==this.parentNode.className?"kbd-list-open":"kbd-list-closed";g.adjust("kbd-list-closed"==this.parentNode.className?0:this.kList.length)},x.addEventListener("touchstart",function(a){a.stopPropagation()},!1),x.addEventListener("touchmove",function(a){a.target.scrolled=!0;a.stopPropagation()},!1),J=0;J<x.kList.length;J++)t=
c._CreateElement("p"),t.className="kbd-list-entry","iOS"==e.OS&&(t.style.fontSize=n+"em"),O.addKeyboard(x.kList[J],t,!1),v.appendChild(t);else x.innerHTML=k[f],x.className="kbd-single-entry",O.addKeyboard(x.kList[0],x,!0);f==L&&(x.className+=" current")};var O=this;for(f=0;f<k.length;f++)p();p=c._CreateElement("div");p.id="kmw-menu-footer";var q=function(a){a.preventDefault();a.stopPropagation()};p.addEventListener("touchstart",q,!1);p.addEventListener("touchmove",q,!1);p.addEventListener("touchend",
q,!1);b.appendChild(p);return L};f.prototype.addKeyboard=function(b,a,d){a.kn=b.KI;a.kc=b.KLC;a.innerHTML=d?b.KL:b.KN.replace(" Keyboard","");var c=this;b=function(a){a.stopPropagation();0>=this.className.indexOf("selected")&&(this.className+=" selected");c.scrolling=!1;c.y0=a.touches[0].pageY;return!0};d=function(a){a.stopImmediatePropagation();var b=c.lgList.childNodes[0],d=b.scrollHeight-b.offsetHeight;if("undefined"!=typeof a.pageY)var e=a.pageY;else if("undefined"!=typeof a.touches)e=a.touches[0].pageY;
else return;var g=e-c.y0;if(0>g)b.scrollTop>=d-1&&(a.preventDefault(),c.y0=e);else if(0<g)2>b.scrollTop&&(a.preventDefault(),c.y0=e);else return;if(-5>g||5<g)c.scrolling=!0,this.className=this.className.replace(/\s*selected/,""),c.y0=e;return!0};var g=function(a){a.preventDefault();"undefined"!=typeof a.stopImmediatePropagation?a.stopImmediatePropagation():a.stopPropagation();c.scrolling?this.className=this.className.replace(/\s*selected/,""):(e.keyman.dom.DOMEventHandlers.states.setFocusTimer(),
c.lgList.style.display="none",c.keyman.keyboardManager._SetActiveKeyboard(this.kn,this.kc,!0),c.keyman.keyboardManager.doKeyboardChange(this.kn,this.kc),c.keyman.domManager.focusLastActiveElement(),c.hide(),c.keyman.osk._Show());return!0};a.onmspointerdown=b;a.addEventListener("touchstart",b,!1);a.onmspointermove=d;a.addEventListener("touchmove",d,!1);a.onmspointerout=g;a.addEventListener("touchend",g,!1)};f.prototype.hide=function(){var b=this.keyman.osk,a=this;this.lgList&&(b.vkbd.highlightKey(b.vkbd.lgKey,
!1),this.lgList.style.visibility="hidden",window.setTimeout(function(){a.shim.parentElement&&(document.body.removeChild(a.shim),document.body.removeChild(a.lgList))},500))};return f}();k.LanguageMenu=p})(h.osk||(h.osk={}))})(e.keyman||(e.keyman={}))})(com||(com={}));
(function(e){(function(h){(function(k){var p=function(){function f(){}f._GetClickEventProperties=function(b,a){var d=e.keyman.singleton,c=d.core;b=b.constructKeyEvent(c.keyboardProcessor,h.dom.Utils.getOutputTarget(a),d.util.device.coreSpec);switch(b.kName){case "K_CAPS":case "K_NUMLOCK":case "K_SCROLL":c.keyboardProcessor.stateKeys[b.kName]=!c.keyboardProcessor.stateKeys[b.kName]}return b};f.clickKey=function(b,a,d,c){d=e.keyman.singleton;var g=d.domManager.getLastActiveElement();if(null!=g){var l=
h.dom.Utils.getOutputTarget(g);d.domManager.initActiveElement(g);d.osk.vkbd.highlightKey(b,!1);l.invalidateSelection();l.deadkeys().deleteMatched();g=f._GetClickEventProperties(b.key.spec,g);d.core.languageProcessor.isActive&&(g.source=a,g.keyDistribution=c);d.isEmbedded||(d.uiManager.setActivatingUI(!0),e.keyman.dom.DOMEventHandlers.states._IgnoreNextSelChange=100,d.domManager.focusLastActiveElement(),e.keyman.dom.DOMEventHandlers.states._IgnoreNextSelChange=0);b=f.handleClick(g,b);d.uiManager.setActivatingUI(!1);
return b}return!0};f.handleClick=function(b,a){var d=e.keyman.singleton;return"K_LOPT"==b.kName||"K_ROPT"==b.kName?(d.osk.vkbd.optionKey(a,b.kName,!0),!0):null!=d.core.processKeyEvent(b)};return f}();k.PreProcessor=p})(h.osk||(h.osk={}))})(e.keyman||(e.keyman={}))})(com||(com={}));
(function(e){(function(h){(function(k){function p(a,b){for(var c in b)a.hasOwnProperty(c)||(a[c]=b[c]);return a}function f(a){return a&&"key"in a&&a.key instanceof g}function b(a){return f(a)?a:null}var a=e.keyman.text.Codes,d=function(){return function(a,b){this.key=a;this.keyId=b}}();k.isKey=f;k.getKeyFrom=b;var c=function(){return function(a,b,c,d,e,g){this.id=a;this.text=b;this.width=c?c:"50";this.sp=d;this.nextlayer=e;this.pad=g}}();k.OSKKeySpec=c;var g=function(){function a(a,b,c){this.spec=
a;this.layer=b;this.formFactor=c}a.getTextWidth=function(b,c,d){d.fontFamily||(d.fontFamily=getComputedStyle(document.body).fontFamily);d.fontSize&&""!=d.fontSize||(d.fontSize="1em");var e=d.fontFamily;b=b.getKeyEmFontSize();d=window.keyman.util.getFontSizeStyle(d.fontSize);d=d.absolute?d.val+"px":d.val*b+"px";b=(a.getTextWidth.canvas||(a.getTextWidth.canvas=document.createElement("canvas"))).getContext("2d");b.font=d+" "+e;return b.measureText(c).width};a.prototype.getKeyWidth=function(){var a=this.objectUnits();
if("px"==a)return this.spec.widthpc;if("%"==a)return a=e.keyman.singleton.osk.getWidthFromCookie(),Math.floor(a*this.spec.widthpc/100)};a.prototype.objectUnits=function(){return"desktop"==this.formFactor?"%":"px"};a.prototype.renameSpecialKey=function(a){return A.specialCharacters[a]?String.fromCharCode(57344+A.specialCharacters[a]):a};a.prototype.generateKeyText=function(b){var c=window.keyman.util,d=this.spec,g=c._CreateElement("span"),f=g.style;if(null==d.text||""==d.text){var h="\u00a0";"string"==
typeof d.id&&/^U_[0-9A-F]{4}$/i.test(d.id)&&(h=String.fromCharCode(parseInt(d.id.substr(2),16)))}else h=d.text;g.className="kmw-key-text";if("1"==d.sp||"2"==d.sp)h=this.renameSpecialKey("*Tab*"==d.text&&"shift"==this.layer?"*TabLeft*":d.text);f.fontSize=b.fontSize;"string"==typeof d.font&&""!=d.font&&(f.fontFamily=d.font);"string"==typeof d.fontsize&&""!=d.fontsize&&(f.fontSize=d.fontsize);var l=e.keyman.singleton.core.activeKeyboard,n={fontSize:f.fontSize};n.fontFamily=f.fontFamily?f.fontFamily:
b.fontFamily;d=a.getTextWidth(b,h,n);0==d&&""!=h&&"\u00a0"!=h&&(h="\u25cc"+h,l&&l.isRTL&&(h="\u200f"+h),d=a.getTextWidth(b,h,n));b=c.getFontSizeStyle(f.fontSize);c=.9*this.getKeyWidth()/d;1>c&&(f.fontSize=b.absolute?c*b.val+"px":c*b.val+"em");g.innerHTML=h;return g};return a}();k.OSKKey=g;var l=function(b){function c(a,c,d){return b.call(this,a,c,d)||this}__extends(c,b);c.prototype.getId=function(a){return this.layer+"-"+this.spec.id};c.prototype.generateKeyCapLabel=function(){var b=a.keyCodes[this.spec.id];
switch(b){case 186:b=59;break;case 187:b=61;break;case 188:b=44;break;case 189:b=45;break;case 190:b=46;break;case 191:b=47;break;case 192:b=96;break;case 219:b=91;break;case 220:b=92;break;case 221:b=93;break;case 222:b=39;break;default:if(48>b||90<b)b=0}if(0<b){var c=window.keyman.util._CreateElement("div");c.className="kmw-key-label";c.innerHTML=String.fromCharCode(b);return c}return null};c.prototype.processSubkeys=function(a){var b,c=a.subKeys=this.spec.sk;for(b=0;b<c.length;b++){if("1"==c[b].sp||
"2"==c[b].sp)c[b].text=this.renameSpecialKey(c[b].text);c[b].layer||(c[b].layer=a.key.layer)}b=window.keyman.util._CreateElement("div");b.className="kmw-key-popup-icon";a.appendChild(b)};c.prototype.construct=function(a,b,c,g){var f=e.keyman.singleton.util,h=this.spec,l="desktop"==this.formFactor,n=f._CreateElement("div");n.className="kmw-key-square";var k=n.style;k.width=this.objectGeometry(h.widthpc);var t=g;f=f._CreateElement("div");f=p(f,new d(this,h.id));a.setButtonClass(h,f,b);l?k.marginLeft=
this.objectGeometry(h.padpc):(k.left=this.objectGeometry(g+h.padpc),a.isStatic||(k.bottom=c.bottom),k.height=c.height,f.style.left=k.left,f.style.width=k.width);g=g+h.padpc+h.widthpc;(b.keyLabels||l)&&(b=this.generateKeyCapLabel())&&f.appendChild(b);f.id=this.getId(a);a.isStatic||a.device.touchable||(f.onmouseover=f.onmousedown=a.mouseOverMouseDownHandler,f.onmouseup=f.onmouseout=a.mouseUpMouseOutHandler);f.appendChild(this.generateKeyText(a));"undefined"!=typeof h.sk&&null!=h.sk?this.processSubkeys(f):
f.subKeys=null;n.appendChild(f);return{element:n,percent:g-t}};c.prototype.objectGeometry=function(a){var b=this.objectUnits();return"%"==b?a+b:Math.round(100*a)/100+b};return c}(g);k.OSKBaseKey=l;var r=function(a){function b(b,c,d){return a.call(this,b,c,d)||this}__extends(b,a);b.prototype.getId=function(a){a=this.spec;var b=e.keyman.singleton.core;return"string"==typeof this.layer&&""!=this.layer?"popup-"+this.layer+"-"+a.id:"popup-"+b.keyboardProcessor.layerId+"-"+a.id};b.prototype.construct=function(a,
b,c){var e=this.spec,g=document.createElement("div"),f=a.getDefaultKeyObject(),h=g.style,l;for(l in f)"string"!=typeof e[l]&&(e[l]=f[l]);g.className="kmw-key-square-ex";c&&(h.marginTop="5px");h.width="undefined"!=typeof e.width?parseInt(e.width,10)*b.offsetWidth/100+"px":b.offsetWidth+"px";h.height=b.offsetHeight+"px";b=document.createElement("div");b=p(b,new d(this,e.id));a.setButtonClass(e,b);b.id=this.getId(a);e=b.style;e.height=h.height;e.width=h.width;e.position="absolute";b.appendChild(this.generateKeyText(a));
g.appendChild(b);return g};return b}(g);k.OSKSubKey=r;var A=function(){function a(a,b,c){this.layerId="default";this.popupPending=this.ddOSK=this.isStatic=!1;this.popupDelay=500;this.layerChangeHandler=function(a,b){a.value!=b&&(this.layerId=b,e.keyman.singleton.osk._Show())}.bind(this);this.touch=function(a){var b=a.changedTouches[0].target,c=this.keyTarget(b);this.touchX=a.changedTouches[0].pageX;this.currentTarget=c;this.cancelDelete();var d=document.getElementById("kmw-popup-keys");if(!(d&&"visible"==
d.style.visibility||this.popupVisible)){this.touchCount=a.touches.length;if(c&&0<=c.className.indexOf("key-hidden")||0<=b.className.indexOf("kmw-key-row"))c=this.findNearestKey(a,b);null!=c&&(b=c.keyId,this.highlightKey(c,!0),"K_LOPT"==b||"K_ROPT"==b?(window.setTimeout(function(){k.PreProcessor.clickKey(c)}.bind(this),0),this.touchPending=this.keyPending=null):"K_BKSP"==b?(b=this.getTouchProbabilities(a.changedTouches[0]),k.PreProcessor.clickKey(c,a.changedTouches[0],this.layerId,b),this.deleteKey=
c,this.deleting=window.setTimeout(this.repeatDelete,500),this.touchPending=this.keyPending=null):(this.keyPending?(this.highlightKey(this.keyPending,!1),b=this.getTouchProbabilities(this.touchPending),k.PreProcessor.clickKey(this.keyPending,this.touchPending,this.layerId,b),this.clearPopup(),this.touchCount--):this.touchHold(c),this.keyPending=c,this.touchPending=a.changedTouches[0]))}}.bind(this);this.release=function(a){var b=document.getElementById("kmw-popup-keys"),c=this.currentTarget;this.cancelDelete();
if(b&&"visible"==b.style.visibility){if(0<a.touches.length)return;if(null==c||0>c.id.indexOf("popup")&&c.id!=this.popupBaseKey.id)this.highlightKey(this.keyPending,!1),this.clearPopup(),this.touchPending=this.keyPending=null}this.popupVisible||(c&&c.id&&this.optionKey(c,c.id,!1),c=a.changedTouches[0].pageX,c=2>c&&5<this.touchX||c>window.innerWidth-2&&this.touchX<window.innerWidth-5,b=this.touchCount,0<this.touchCount&&this.touchCount--,this.keyPending?(this.highlightKey(this.keyPending,!1),0>this.keyPending.className.indexOf("hidden")&&
0<b&&!c&&(c=this.getTouchProbabilities(a.changedTouches[0]),k.PreProcessor.clickKey(this.keyPending,a.changedTouches[0],this.layerId,c)),this.clearPopup(),this.touchPending=this.keyPending=null):(b=a.changedTouches[0],c=this.keyTarget(b.target),c||(c=document.elementFromPoint(b.clientX,b.clientY),c=this.findNearestKey(a,c)),this.highlightKey(c,!1)))}.bind(this);this.moveOver=function(a){var b=e.keyman.singleton.util;a.preventDefault();a.cancelBubble=!0;"function"==typeof a.stopImmediatePropagation?
a.stopImmediatePropagation():"function"==typeof a.stopPropagation&&a.stopPropagation();if(0==this.touchCount)this.cancelDelete();else{var c="object"==typeof a.touches?a.touches[0].clientX:a.clientX,d="object"==typeof a.touches?a.touches[0].clientY:a.clientY;this.touchPending=a.changedTouches[0];var g=document.elementFromPoint(c,d),f=this.keyPending,h=this.keyTarget(g);if(h&&0<=h.className.indexOf("key-hidden")||g&&!h&&0<=g.className.indexOf("key-row"))h=this.findNearestKey(a,g);h&&"string"==typeof h.id&&
0>h.id.indexOf("-K_BKSP")&&this.cancelDelete();if(!(1<a.touches.length))if(this.popupVisible)null==h?(f&&this.highlightKey(f,!1),this.touchPending=this.keyPending=null):h==this.popupBaseKey?(b.hasClass(h,"kmw-key-touched")||this.highlightKey(h,!0),this.keyPending=h,this.touchPending=a.touches[0]):(f&&this.highlightKey(f,!1),this.touchPending=this.keyPending=null);else{(b=document.getElementById("kmw-popup-keys"))&&"visible"==b.style.visibility&&"phone"==this.device.formFactor&&h==this.popupBaseKey&&
(h=b.childNodes[0].firstChild);this.currentTarget=h;f&&h&&h!==f&&this.highlightKey(f,!1);this.highlightSubKeys(h,c,d);if(b&&"visible"==b.style.visibility){if(h&&0>h.id.indexOf("popup")&&h!=this.popupBaseKey)return;h&&h==this.popupBaseKey&&0>h.className.indexOf("kmw-key-touched")&&this.highlightKey(h,!0)}else c=Math.max(5,this.kbdDiv.offsetTop+this.kbdDiv.offsetParent.offsetTop-.25*this.kbdDiv.firstChild.offsetHeight),f&&a.touches[0].pageY<c&&(this.highlightKey(f,!1),this.showKeyTip(null,!1),this.touchPending=
this.keyPending=null);h&&this.keyPending&&(this.keyPending=h,this.touchPending=a.touches[0]);this.keyPending&&(f!=h||0>h.className.indexOf("kmw-key-touched"))&&this.highlightKey(h,!0);f&&h&&h!=f&&""!=h.id&&this.touchHold(h)}}}.bind(this);this.repeatDelete=function(){this.deleting&&(k.PreProcessor.clickKey(this.deleteKey),this.deleting=window.setTimeout(this.repeatDelete,100))}.bind(this);this.mouseOverMouseDownHandler=function(a){var b=e.keyman.singleton.util,c=b.eventTarget(a);null!==c&&"desktop"==
this.device.formFactor&&("SPAN"==c.nodeName&&(c=c.parentNode),c=this.keyTarget(c),"mousedown"==b.eventType(a)?(this.currentKey=c.id,b._CancelMouse(a),this.highlightKey(c,!0)):c.id==this.currentKey&&this.highlightKey(c,!0))}.bind(this);this.mouseUpMouseOutHandler=function(a){var b=e.keyman.singleton.util,c=b.eventTarget(a);null!==c&&"desktop"==this.device.formFactor&&("SPAN"==c.nodeName&&(c=c.parentNode),c=this.keyTarget(c),this.highlightKey(c,!1),"mouseup"==b.eventType(a)&&(c.id==this.currentKey&&
k.PreProcessor.clickKey(c),this.currentKey=""))}.bind(this);var d=e.keyman.singleton;d.core.keyboardProcessor.layerStore.handler=this.layerChangeHandler;d=d.util;this.device=b=b||d.device;c&&(this.isStatic=c);c=d._CreateElement("div");a?d=this.layout=a.layout(b.formFactor):(d=h.keyboards.Layouts.buildDefaultLayout(null,null,b.formFactor),d=this.layout=h.keyboards.ActiveLayout.polyfill(d,null,b.formFactor));this.layers=d.layer;this.fontFamily="font"in d?d.font:"";d.keyLabels=a&&a.displaysUnderlyingKeys;
a=this.deviceDependentLayout(a,b.formFactor);this.ddOSK=!0;c.appendChild(a);this.kbdHelpDiv=this.kbdDiv=c;this.isStatic?c.childNodes[0].className=b.formFactor+"-static kmw-osk-inner-frame":c.className=b.formFactor+" kmw-osk-inner-frame"}a.prototype.getDefaultKeyObject=function(){return new c(void 0,"",h.keyboards.ActiveKey.DEFAULT_KEY.width,h.keyboards.ActiveKey.DEFAULT_KEY.sp,null,h.keyboards.ActiveKey.DEFAULT_KEY.pad)};a.prototype.deviceDependentLayout=function(a,b){a||(a=new h.keyboards.Keyboard(null));
var c=a.layout(b),d=e.keyman.singleton.util,g=e.keyman.singleton.osk,f=100,n=d._CreateElement("div"),k=n.style;n.className="kmw-key-layer-group";switch(b){case "phone":case "tablet":var p=g.getHeight();k.height=p+"px";f=Math.round(100*g.getKeyboardHeight()/p)}if(null==c)return n;p=c.fontsize;k.fontSize="undefined"==typeof p||null==p||""==p?"1em":c.fontsize;this.fontSize=k.fontSize;var r;var v=c.layer;this.getDefaultKeyObject().fontsize=k.fontSize;for(p=0;p<v.length;p++){var w=v[p],A=w.row;for(r=A.length;0<
r&&!(0<A[r-1].key.length);r--);r<A.length&&A.splice(r-A.length,A.length-r)}var V=f/v[0].row.length;"desktop"==b&&(V=f/v[0].row.length);f="desktop"==b?100:g.getWidth();!this.isStatic&&this.device.touchable&&(n.addEventListener("touchstart",this.touch,!0),n.addEventListener("touchend",this.release,!0),n.addEventListener("touchmove",this.moveOver,!1));var X=a.getLayoutState(b)==h.keyboards.LayoutState.CALIBRATED;for(p=0;p<v.length;p++){w=v[p];g=d._CreateElement("div");r=g.style;g.className="kmw-key-layer";
r.display=0==p?"block":"none";r.height=k.height;r.fontFamily="font"in c?c.font:"";g.layer=g.nextLayer=w.id;"string"==typeof w.nextlayer&&(g.nextLayer=w.nextlayer);A=w.row;for(r=0;r<A.length;r++){var ha=d._CreateElement("div");ha.className="kmw-key-row";ha.onmousedown=d.mouseDownPreventDefaultHandler;var B=A[r];var S=ha.style;S.maxHeight=S.height=V+"%";var E=B.key;if(!X){var F=0;for(B=0;B<E.length-1;B++){var G=E[B].widthpc*f;E[B].widthpc=G;var W=E[B].padpc*f;E[B].padpc=W;E[B].proportionalX=(F+W+G/
2)/f;E[B].proportionalWidth=G/f;F+=W+G}var Y=h.keyboards.ActiveKey.DEFAULT_RIGHT_MARGIN*f/w.totalWidth;F+=Y;1==E.length&&0>parseInt(E[0].pad,10)?(G=E[0].widthpc*f,E[0].widthpc=G,F+=G,E[0].padpc=f-F,E[0].proportionalX=(F-Y-G/2)/f,E[0].proportionalWidth=G/f):0<E.length&&(B=E.length-1,W=E[B].padpc*f,E[B].padpc=W,F+=W,E[B].widthpc=G=f-F,E[B].proportionalX=(f-Y-G/2)/f,E[B].proportionalWidth=G/f)}for(B=F=0;B<E.length;B++)G=E[B],G=(new l(G,w.id,b)).construct(this,c,S,F),ha.appendChild(G.element),F+=G.percent;
g.appendChild(ha)}n.appendChild(g)}a.markLayoutCalibrated(b);return n};a.prototype.getTouchCoordinatesOnKeyboard=function(a){var b=e.keyman.singleton.util.getAbsolute(this.kbdDiv.firstChild);a={x:a.pageX-b.x,y:a.pageY-b.y};b=this.kbdDiv.firstChild;a.x/=b.offsetWidth;a.y/=b.offsetHeight;return a};a.prototype.getTouchProbabilities=function(a){if(!e.keyman.singleton.core.languageProcessor.mayCorrect)return null;a=this.getTouchCoordinatesOnKeyboard(a);var b=this.kbdDiv.firstChild;return this.layout.getLayer(this.layerId).getTouchProbabilities(a,
b.offsetWidth/b.offsetHeight)};a.prototype.keyTarget=function(a){var c=e.keyman.singleton.util;try{if(a){if(c.hasClass(a,"kmw-key"))return b(a);if(a.parentNode&&c.hasClass(a.parentNode,"kmw-key"))return b(a.parentNode);if(a.firstChild&&c.hasClass(a.firstChild,"kmw-key"))return b(a.firstChild)}}catch(x){}return null};a.prototype.findNearestKey=function(a,b){if(!a||"undefined"==typeof a.changedTouches||0==a.changedTouches.length)return null;for(a=a.changedTouches[0].pageX;b&&void 0!==b.className&&0>
b.className.indexOf("key-row");)b=b.parentNode;if(!b)return null;var c,d=0,e=24,g=1E5;for(c=0;c<b.childNodes.length;c++){var f=b.childNodes[c];if(!(void 0!==f.className&&0<=f.className.indexOf("key-hidden"))){var h=f.offsetLeft;var l=h+f.offsetWidth;if(a>=h&&a<=l)return f.firstChild;h-=a;0<=h&&h<g&&(d=c,g=h);h=a-l;0<=h&&h<g&&(d=c,g=h)}}return 1E5>g&&(b=b.childNodes[d],h=b.offsetLeft,l=h+b.offsetWidth,40<b.offsetWidth&&(e=.6*b.offsetWidth),0<=h-a&&h-a<e||0<=a-l&&a-l<e)?b.firstChild:null};a.prototype.cancelDelete=
function(){this.deleting&&window.clearTimeout(this.deleting);this.deleting=0};a.prototype.findKeyElement=function(a,b){for(var c=this.kbdDiv.firstChild,d=0;d<c.childElementCount;d++){var e=c.childNodes[d];if(e.firstChild.firstChild.firstChild.key.layer==a)for(var g=0;g<e.childElementCount;g++)for(var f=e.childNodes[g],h=0;h<f.childElementCount;h++){var l=f.childNodes[h].firstChild;if(l.keyId==b)return l}}return null};a.prototype._UpdateVKShiftStyle=function(a){var b,c=e.keyman.singleton.core;if(a)for(b=
0;b<this.layers.length&&this.layers[b].id!=this.layerId;b++);else{b=this.layerIndex;a=this.layers[b].id;var d=this.layers[b];b=["K_CAPS","K_NUMLOCK","K_SCROLL"];var g=[d.capsKey,d.numKey,d.scrollKey];for(d=0;d<g.length;d++)if(null!=g[d]){g[d].sp=c.keyboardProcessor.stateKeys[b[d]]?h.keyboards.Layouts.buttonClasses["SHIFT-ON"]:h.keyboards.Layouts.buttonClasses.SHIFT;var f=a+"-"+b[d],l=document.getElementById(f);null==l&&(l=this.findKeyElement(a,b[d]));null!=l?this.setButtonClass(g[d],l,this.layout):
console.warn('Could not find key to apply style: "'+f+'"')}}};a.prototype.setButtonClass=function(a,b,c){var d=0,e="default shift shift-on special special-on    deadkey blank hidden".split(" ");"string"==typeof a.dk&&"1"==a.dk&&(d=8);"string"==typeof a.sp&&(d=parseInt(a.sp,10));if(0>d||10<d)d=0;c=c||this.layout;b.className=4<c.layer[0].row.length&&"phone"==this.device.formFactor?"kmw-key kmw-5rows kmw-key-"+e[d]:"kmw-key kmw-key-"+e[d]};a.prototype.clearPopup=function(){var a=e.keyman.singleton.osk,
b=document.getElementById("kmw-popup-keys");null!=b&&(b.shim&&a._Box.removeChild(b.shim),b.parentNode.removeChild(b));this.popupCallout&&a._Box.removeChild(this.popupCallout);this.popupCallout=null;this.subkeyDelayTimer&&(window.clearTimeout(this.subkeyDelayTimer),this.subkeyDelayTimer=null);this.popupBaseKey=null};a.prototype.showSubKeys=function(a){if(null!=this.keyPending){var b=e.keyman.singleton,c=b.util,d=this.device,g=a.subKeys,f=document.createElement("DIV");this.getDefaultKeyObject();f.id=
"kmw-popup-keys";this.popupBaseKey=a;"phone"==d.formFactor&&this.prependBaseKey(a);var l=f.style;l.bottom=parseInt(a.style.bottom,10)+parseInt(a.style.height,10)+4+"px";l.fontFamily=this.fontFamily;l.fontSize=b.util.getStyleValue(a,"font-size");l.visibility="hidden";var k=g.length;var n=Math.min(Math.ceil(k/9),2);var p=Math.ceil(k/n);1<n&&(l.width=p*a.offsetWidth+5*p+"px");for(l=0;l<k;l++){var r=!1,w=Math.floor(l/p);1<n&&0<w&&(r=!0);r=(new e.keyman.osk.OSKSubKey(g[l],a.key.layer,d.formFactor)).construct(this,
a,r);f.appendChild(r)}this.showKeyTip(null,!1);b.osk._Box.appendChild(f);l=f.style;g=h.dom.Utils.getAbsoluteX(a)+.5*(a.offsetWidth-f.offsetWidth);c=(c.landscapeView()?screen.height:screen.width)-f.offsetWidth;g>c&&(g=c);0>g&&(g=0);l.left=g+"px";l.visibility="visible";c=b.isEmbedded;n=getComputedStyle(f);g=b.osk.getHeight();k=parseInt(n.bottom,10);n=parseInt(n.height,10);p=0;n+k>g&&c&&(p=n+k-g,l.bottom=k-p+"px");this.popupCallout=this.addCallout(a,p);f.shim=document.createElement("DIV");f.shim.id=
"kmw-popup-shim";b.osk._Box.appendChild(f.shim);"phone"==d.formFactor&&(this.keyPending=a=f.childNodes[0].firstChild,this.highlightKey(a,!0))}};a.prototype.prependBaseKey=function(a){var b=a.subKeys,d=e.keyman.singleton;if(a&&"undefined"!=typeof a.id){a.id.split("-");var g=a.keyId;var f=a.key.spec.layer;var h=a.key.spec.sp,l=a.key.spec.nextlayer;if("undefined"!=typeof b&&0<b.length&&(b[0].id!=g||b[0].layer!=f)){g=new c(g,"",void 0,h,l);""!=f&&(g.layer=f);for(f=0;f<a.childNodes.length&&!d.util.hasClass(a.childNodes[f],
"kmw-key-text");f++);f<a.childNodes.length&&(g.text=a.childNodes[f].textContent);b.splice(0,0,g)}}};a.prototype.showLanguage=function(){var a=e.keyman.singleton,b="",c=a.keyboardManager.activeStub;c?(a=c.KL,b=c.KN):a=a.getActiveLanguage(!0)?a.getActiveLanguage(!0):"English";try{var d=this.spaceBar.firstChild,g=d.parentNode;"undefined"==typeof g.className||""==g.className?g.className="kmw-spacebar":-1==g.className.indexOf("kmw-spacebar")&&(g.className+=" kmw-spacebar");d.className="kmw-spacebar-caption";
b=b.replace(/\s*keyboard\s*/i,"");c="";c=b==a?a:a+" ("+b+")";d.innerHTML!=c&&(d.innerHTML=c)}catch(L){}};a.prototype.highlightKey=function(a,b){if(a&&""!=a.className&&!(0<=a.className.indexOf("kmw-key-row"))){var c=a.className;null!=this.keytip&&0>c.indexOf("kmw-key-shift")&&0>c.indexOf("kmw-spacebar")&&0>a.id.indexOf("popup")?this.showKeyTip(a,b):b&&0>c.indexOf(" kmw-key-touched")?(a.className=c+" kmw-key-touched",this.showKeyTip(null,!1)):a.className=c.replace(" kmw-key-touched","")}};a.prototype.getKeyEmFontSize=
function(){var a=e.keyman.singleton,b=a.util;if("desktop"==this.device.formFactor)return.8*this.getFontSizeFromCookie();var c=getComputedStyle(document.body).fontSize;c=b.getFontSizeStyle(c).val;var d=1;this.isStatic||(d=b.getFontSizeStyle(a.osk._Box).val);return c*d};a.prototype.getFontSizeFromCookie=function(){var a=e.keyman.singleton.util,b=a.loadCookie("KeymanWeb_OnScreenKeyboard");if("undefined"==typeof b||null==b)return 16;a=a.toNumber(b.height,.15*screen.height);a>.5*screen.height&&(a=.5*screen.height);
return a/8};a.prototype.getSpecialKey=function(a,c){var d=this.kbdDiv.childNodes[0].childNodes;if(0<=a&&a<d.length)for(a=d[a].childNodes,a=a[a.length-1].childNodes,d=0;d<a.length;d++){var e=b(a[d].firstChild);if(e&&e.keyId==c)return e}return null};a.prototype.show=function(){var a=this.device,b,c=-1,d=this.kbdDiv.childNodes[0].childNodes;for(b=0;b<d.length;b++){var e=d[b];e.layer==this.layerId?(e.style.display="block",this.nextLayer=this.layerId,this.layerIndex=c=b,"string"==typeof this.layers[b].nextlayer&&
(this.nextLayer=this.layers[b].nextlayer),this._UpdateVKShiftStyle()):e.style.display="none"}a.touchable&&(this.lgKey=this.getSpecialKey(c,"K_LOPT"),this.hkKey=this.getSpecialKey(c,"K_ROPT"),"iOS"==a.OS&&"phone"==a.formFactor&&this.adjustHeights());this.spaceBar=this.getSpecialKey(c,"K_SPACE")};a.prototype.adjustHeights=function(){var a=e.keyman.singleton,b=a.osk._Box;if(!(b&&this.kbdDiv&&this.kbdDiv.firstChild&&this.kbdDiv.firstChild.firstChild.childNodes))return!1;var c=1;"iOS"!=this.device.OS||
a.isEmbedded||(c/=a.util.getViewportScale());a=this.computedAdjustedOskHeight();b=b.style;b.height=b.maxHeight=a+"px";b=this.kbdDiv.firstChild.style;b.height=b.maxHeight=a+"px";b.fontSize=c+"em";this.adjustLayerHeights(a);return!0};a.prototype.computedAdjustedOskHeight=function(){for(var a=this.device,b=this.kbdDiv.firstChild.childNodes,c=e.keyman.singleton.osk.getKeyboardHeight(),d=0,g=0;g<b.length;g++){var f=b[g].childNodes.length;f*=Math.floor(c/(0==f?1:f));f>d&&(d=f)}b=d+0;"Android"==a.OS&&"devicePixelRatio"in
window&&(b/=window.devicePixelRatio);return b};a.prototype.adjustLayerHeights=function(a){for(var b=e.keyman.singleton.osk,c=this.device,d=this.kbdDiv.firstChild.childNodes,g=0;g<d.length;g++){var f=d[g],h=d[g].childNodes.length;d[g].style.height=a+"px";var l=Math.floor(b.getKeyboardHeight()/(0==h?1:h));"Android"==c.OS&&"devicePixelRatio"in window&&(f.style.height=f.style.maxHeight=a+"px",l/=window.devicePixelRatio);f=Math.round(.15*l);for(var k=0;k<h;k++){var n=d[g].childNodes[k].style,p=(h-k-1)*
l+1;this.isStatic||(n.bottom=p+"px");n.maxHeight=n.height=l+"px";this.layout.layer[g].row[k].proportionalY=(a-p-l/2)/a;this.adjustRowHeights(d[g].childNodes[k].childNodes,l,p,f)}}};a.prototype.adjustRowHeights=function(a,b,c,d){var g=e.keyman.singleton.util,f=this.device;f="iOS"==f.OS&&"phone"==f.formFactor&&g.landscapeView();for(var h=a.length,l=0;l<h;l++){var k=a[l],n;for(n=0;n<k.childNodes.length&&!g.hasClass(k.childNodes[n],"kmw-key");n++);var p=k.style;this.isStatic||(p.bottom=c-d/2+"px");p.height=
p.minHeight=b+"px";p=k.childNodes[n].style;this.isStatic||(p.bottom=c+"px");p.height=p.minHeight=b-d+"px";f&&0<n&&(k.childNodes[0].style.fontSize="6px")}};a.prototype.appendStyleSheet=function(){var a=e.keyman.singleton,b=a.util,c=a.core.activeKeyboard,d=a.keyboardManager.activeStub;if(null!=d){this.styleSheet&&b.removeStyleSheet(this.styleSheet);var g=d.KFont;d=d.KOskFont;b.addFontFaceStyleSheet(g);b.addFontFaceStyleSheet(d);a.hideInputs();var f=this.addFontStyle(g,d);null!=c&&"string"==typeof c.oskStyling&&
(f+=c.oskStyling);this.styleSheet=b.addStyleSheet(f);this.waitForFonts(g,d)&&a.alignInputs()}};a.prototype.addFontStyle=function(a,b){var c=e.keyman.singleton,d=c.baseFont;"undefined"!=typeof a&&"undefined"!=typeof a.family&&(d=a.family);d=d.replace(/\u0022/g,"");var g=new RegExp("\\s?"+d+",?"),f=c.appliedFont.replace(/\u0022/g,"");f=f.replace(g,"");f=f.replace(/,$/,"");f='"'+(""==f?d:d+","+f).replace(/,\s?/g,'","')+'"';d=".keymanweb-font{\nfont-family:"+f+" !important;\n}\n";"undefined"!=typeof b?
d=d+'.kmw-key-text{\nfont-family:"'+b.family.replace(/\u0022/g,"").replace(/,/g,'","')+'";\n}\n':"undefined"!=typeof a&&(d=d+'.kmw-key-text{\nfont-family:"'+a.family.replace(/\u0022/g,"").replace(/,/g,'","')+'";\n}\n');c.appliedFont=f;return d};a.buildDocumentationKeyboard=function(b,c,d,g){var f=e.keyman.singleton;c=f.core.activeKeyboard;d="undefined"==typeof d?"desktop":d;g="undefined"==typeof g?"default":g;var l=new h.Device;l.formFactor=d;"desktop"!=d&&(l.OS="iOS");f=f.keyboardManager.keyboards;
if(null!=b){var k=b.toLowerCase().replace("keyboard_","");for(b=0;b<f.length;b++)if(k==f[b].KI.toLowerCase().replace("keyboard_","")){c=f[b];break}}if(!c)return null;b=c.layout(d);l=new a(c,l,!0);f=l.kbdDiv.childNodes[0];null!=b?(l.layerId=g,l.show(),l.adjustHeights(),f.style.fontSize=l.kbdDiv.style.fontSize):f.innerHTML="<p style='color:#c40; font-size:0.5em;margin:10px;'>No "+d+" layout is defined for "+c.name+".</p>";f.style.border="1px solid #ccc";return f};a.prototype.onHide=function(){this.hkKey&&
this.highlightKey(this.hkKey,!1)};a.prototype.touchHold=function(a){this.subkeyDelayTimer&&(window.clearTimeout(this.subkeyDelayTimer),this.subkeyDelayTimer=null);"undefined"!=typeof a.subKeys&&null!=a.subKeys&&(this.subkeyDelayTimer=window.setTimeout(function(){this.clearPopup();this.showSubKeys(a)}.bind(this),this.popupDelay))};a.prototype.optionKey=function(a,b,c){a=e.keyman.singleton;var d=a.osk;c&&(0<=b.indexOf("K_LOPT")?d.showLanguageMenu():0<=b.indexOf("K_ROPT")&&(a.uiManager.setActivatingUI(!1),
d._Hide(!0),b=a.domManager.getActiveElement(),h.dom.Utils.instanceof(b,"TouchAliasElement")&&b.hideCaret(),a.domManager.clearLastActiveElement()))};a.prototype.highlightSubKeys=function(a,b,c){if(null!=a&&null!=a.subKeys){var d,e=document.getElementById("kmw-popup-keys");5<this.touchY-c&&null==e&&(this.subkeyDelayTimer&&window.clearTimeout(this.subkeyDelayTimer),this.showSubKeys(a),e=document.getElementById("kmw-popup-keys"));for(d=0;d<a.subKeys.length;d++)try{var g=e.childNodes[d].firstChild;var f=
h.dom.Utils.getAbsoluteX(g);var l=h.dom.Utils.getAbsoluteY(g);var k=f+g.offsetWidth;var n=l+g.offsetHeight;var p=b>f&&b<k&&c>l&&c<n;this.highlightKey(g,p);p&&this.highlightKey(a,!1)}catch(ma){}}};a.prototype.showKeyTip=function(a,b){var c=e.keyman.singleton,d=c.util,g=c.osk,f=this.keytip;if(null!=f&&(a!=f.key||b!=f.state)){var l=document.getElementById("kmw-popup-keys");l=l&&"visible"==l.style.visibility;if(b&&!l){var k=h.dom.Utils.getAbsoluteY(g._Box),n=g._Box.offsetHeight;g=h.dom.Utils.getAbsoluteX(a);
var p=h.dom.Utils.getAbsoluteY(a);l=a.offsetWidth;for(var r=a.offsetHeight,v=a.firstChild,w=f.element.style,A=f.element.childNodes[1],X=A.style,ha=0,B=f.element.firstChild,S=0;S<a.childNodes.length&&(v=a.childNodes[S],!d.hasClass(v,"kmw-key-text"));S++);B.width=1.6*l;B.height=2.3*r;w.top="auto";w.bottom=k+n-p-r+"px";w.textAlign="center";w.overflow="visible";w.fontFamily=d.getStyleValue(v,"font-family");w.width=B.width+"px";w.height=B.height+"px";d=d.getStyleInt(v,"font-size");0!=d&&(d*=1.8,w.fontSize=
d+"px",k=e.keyman.osk.OSKKey.getTextWidth(this,A.textContent,w),k=.9*B.width/k,1>k&&(w.fontSize=d*k+"px"));A.textContent=v.textContent;X.display="block";X.position="absolute";X.textAlign="center";X.width="100%";X.top="2%";X.bottom="auto";v=(B.width-l)/2;g<v?(ha=-1,g+=v):g>window.innerWidth-l-v&&(ha=1,g-=v);A=c.isEmbedded;d=getComputedStyle(f.element);c=c.osk.getHeight();X=parseInt(d.bottom,10);d=parseInt(d.height,10);k=0;d+X>c&&A&&(k=d+X-c,B.height-=k,w.height=B.height+"px");this.drawPreview(B,l,
r,ha,k);w.left=g-v+"px";w.display="block"}else f.element.style.display="none";f.key=a;f.state=b}};a.prototype.drawPreview=function(a,b,c,d,g){var f=e.keyman.singleton.util.device;g=g||0;c=a.getContext("2d");var h=(a.width-b)/2,l=a.height+g;g=h;var k=b+h;b+=2*h;var n=.5*l,p=.6*l,r=8,t=a.height;p=p>t?t:p;l=l>t?t:l;"Android"==f.OS&&(r=3);switch(d){case -1:g-=h;k-=h;break;case 1:g+=h,k+=h}c.clearRect(0,0,a.width,a.height);"Android"==f.OS&&(g=k=(g+k)/2);c.fillStyle=f.styles.popupCanvasBackgroundColor;
c.lineWidth=1;c.strokeStyle="#cccccc";c.save();c.beginPath();c.moveTo(0+r,0);c.arcTo(b,0,b,r,r);"Android"==f.OS?(c.arcTo(b,n,k,p,r),c.arcTo(k,p,g,p,r)):(a=0,l>p&&(a=l-p>r?r:l-p),c.arcTo(b,n,k,p,r),c.arcTo(k,p,k-a,l,a),c.arcTo(k,l,g,l,a),c.arcTo(g,l,g,p-a,a));c.arcTo(g,p,0,n-r,r);c.arcTo(0,n,0,r,r);c.arcTo(0,0,0+r,0,r);c.fill();c.stroke();c.restore()};a.prototype.createKeyTip=function(){var a=e.keyman.singleton,b=a.util;if("phone"==a.util.device.formFactor){if(null==this.keytip){this.keytip={key:null,
state:!1};var c=this.keytip.element=b._CreateElement("div");c.className="kmw-keytip";c.id="kmw-keytip";c.style.pointerEvents="none";c.appendChild(b._CreateElement("canvas"));c.appendChild(b._CreateElement("span"))}a.osk._Box.appendChild(this.keytip.element)}};a.prototype.addCallout=function(a,b){var c=e.keyman.singleton,d=c.util;if("phone"!=d.device.formFactor||"iOS"!=d.device.OS)return null;b=b||0;var g=a.offsetHeight-b;if(0<g){d=d._CreateElement("div");var f=d.style;d.id="kmw-popup-callout";c.osk._Box.appendChild(d);
c=a.offsetLeft;var h=a.offsetWidth;f.top=a.offsetTop+b-6+"px";f.left=c+"px";f.width=h+"px";f.height=g+6+"px";return d}return null};a.prototype.waitForFonts=function(a,b){var c=e.keyman.singleton,d=c.util;if("undefined"==typeof a&&"undefined"==typeof b||"undefined"==typeof a.files&&"undefined"==typeof b.files)return!0;var g=d.checkFontDescriptor(a),f=d.checkFontDescriptor(b);if(g&&f)return!0;c.fontCheckTimer=window.setInterval(function(){d.checkFontDescriptor(a)&&d.checkFontDescriptor(b)&&(window.clearInterval(c.fontCheckTimer),
c.fontCheckTimer=null,c.alignInputs())},100);window.setTimeout(function(){c.fontCheckTimer&&(window.clearInterval(c.fontCheckTimer),c.fontCheckTimer=null,c.alignInputs())},5E3);return!1};a.specialCharacters={"*Shift*":8,"*Enter*":5,"*Tab*":6,"*BkSp*":4,"*Menu*":11,"*Hide*":10,"*Alt*":25,"*Ctrl*":1,"*Caps*":3,"*ABC*":16,"*abc*":17,"*123*":19,"*Symbol*":21,"*Currency*":20,"*Shifted*":8,"*AltGr*":2,"*TabLeft*":7,"*LAlt*":86,"*RAlt*":87,"*LCtrl*":88,"*RCtrl*":89,"*LAltCtrl*":96,"*RAltCtrl*":97,"*LAltCtrlShift*":98,
"*RAltCtrlShift*":99,"*AltShift*":100,"*CtrlShift*":101,"*AltCtrlShift*":102,"*LAltShift*":103,"*RAltShift*":104,"*LCtrlShift*":105,"*RCtrlShift*":112};return a}();k.VisualKeyboard=A})(h.osk||(h.osk={}))})(e.keyman||(e.keyman={}))})(com||(com={}));
(function(e){(function(h){(function(h){var k=function(){function b(a){this.totalLength=0;this.x=a.pageX;this.totalLength=0}b.prototype.updateTo=function(a){var b=this.x;this.x=a.pageX;a={deltaX:this.x-b};this.totalLength+=Math.abs(a.deltaX);return a};Object.defineProperty(b.prototype,"hasScrolled",{get:function(){return this.totalLength>b.HAS_SCROLLED_FUDGE_FACTOR},enumerable:!0,configurable:!0});b.HAS_SCROLLED_FUDGE_FACTOR=10;return b}(),f=function(){function b(a,b,c){this.baseElement=a;this.rowClassMatch=
b;this.selectedTargetMatch=c}b.prototype.findTargetFromTouch=function(a,b,c){c=c?a.touches:a.changedTouches;if(!a||"undefined"==typeof c||0==c.length)return null;for(a=c[0].pageX;b&&void 0!==b.className&&0>b.className.indexOf(this.rowClassMatch);)b=b.parentNode;if(!b)return null;var d=0,e=24,f=1E5;for(c=0;c<b.childNodes.length;c++){var h=b.childNodes[c];if(!this.isInvalidTarget(this.findTargetFrom(h))){var k=h.offsetLeft;var n=k+h.offsetWidth;k-=a;0<=k&&k<f&&(d=c,f=k);n=a-n;0<=n&&n<f&&(d=c,f=n);if(0>
n&&0>k)return this.findTargetFrom(h)}}return 1E5>f&&(b=b.childNodes[d],k=b.offsetLeft,n=k+b.offsetWidth,40<b.offsetWidth&&(e=.6*b.offsetWidth),0<=k-a&&k-a<e||0<=a-n&&a-n<e)?this.findTargetFrom(b):null};b.prototype.findBestTarget=function(a,b){var c=b?document.elementFromPoint(a.touches[0].clientX,a.touches[0].clientY):a.changedTouches[0].target;var d=this.findTargetFrom(c);d||(d=this.findTargetFromTouch(a,c,b));return d};b.prototype.isInvalidTarget=function(a){return!1};b.prototype.touchStart=function(a){this.currentTarget=
this.findBestTarget(a);this.touchX=a.changedTouches[0].pageX;this.touchY=a.changedTouches[0].pageY;this.touchCount=a.touches.length;this.currentTarget&&(this.scrollTouchState=this.currentTarget.clientWidth<this.currentTarget.scrollWidth?new k(a.changedTouches[0]):null,this.highlight(this.currentTarget,!0),this.pendingTarget?(this.highlight(this.pendingTarget,!1),this.select(this.pendingTarget),this.clearHolds(),this.touchCount--):this.hold(this.currentTarget),this.pendingTarget=this.currentTarget)};
b.prototype.touchEnd=function(a){var b=this.currentTarget;if(this.isSubmenuActive()||this.hasModalPopup()){if(0<a.touches.length)return;if(null==b||0>b.id.indexOf("popup")&&b.id!=this.popupBaseTarget.id)this.highlight(this.pendingTarget,!1),this.clearHolds(),this.pendingTarget=null}b=a.changedTouches[0].pageX;b=2>b&&5<this.touchX||b>window.innerWidth-2&&this.touchX<window.innerWidth-5;this.scrollTouchState&&(b=b||this.scrollTouchState.hasScrolled);var c=this.touchCount;0<this.touchCount&&this.touchCount--;
this.pendingTarget?(this.highlight(this.pendingTarget,!1),0>this.pendingTarget.className.indexOf("hidden")&&0<c&&!b&&this.select(this.pendingTarget),this.clearHolds(),this.pendingTarget=null):(b=this.findBestTarget(a))&&this.highlight(b,!1)};b.prototype.touchMove=function(a){var b=e.keyman.singleton,c=b.util;a.preventDefault();a.cancelBubble=!0;"function"==typeof a.stopImmediatePropagation?a.stopImmediatePropagation():"function"==typeof a.stopPropagation&&a.stopPropagation();if(!(1<a.touches.length||
0==this.touchCount))if(this.currentTarget&&null!=this.scrollTouchState)a=this.scrollTouchState.updateTo(a.changedTouches[0]).deltaX,this.currentTarget.scrollLeft-=window.devicePixelRatio*a;else{var g="object"==typeof a.touches?a.touches[0].clientY:a.clientY,f=this.pendingTarget,h=this.findBestTarget(a,!0);if(this.hasModalPopup())null==h?(f&&this.highlight(f,!1),this.pendingTarget=null):h==this.popupBaseTarget?(c.hasClass(h,this.selectedTargetMatch)||this.highlight(h,!0),this.pendingTarget=h):(f&&
this.highlight(f,!1),this.pendingTarget=null);else{this.currentTarget=h=this.dealiasSubTarget(h);f&&h&&h!==f&&this.highlight(f,!1);if(h&&this.hasSubmenu(h)){!b.isEmbedded&&5<this.touchY-g&&!this.isSubmenuActive()&&this.displaySubmenuFor(h);if(h&&0>h.id.indexOf("popup")&&h!=this.popupBaseTarget)return;h&&h==this.popupBaseTarget&&0>h.className.indexOf(this.selectedTargetMatch)&&this.highlight(h,!0)}else c=this.baseElement,b=c.offsetParent.offsetTop+c.offsetTop,c=c.offsetHeight,g=Math.max(5,b-.25*c),
f&&(a.touches[0].pageY<g||a.touches[0].pageY>b+c+.25*c)&&(this.highlight(f,!1),this.clearHolds(),this.pendingTarget=null);h&&this.pendingTarget&&(this.pendingTarget=h);this.pendingTarget&&h&&(f!=h||0>h.className.indexOf(this.selectedTargetMatch))&&this.highlight(h,!0);f&&h&&h!=f&&""!=h.id&&this.hold(h)}}};return b}();h.UITouchHandlerBase=f})(h.dom||(h.dom={}))})(e.keyman||(e.keyman={}))})(com||(com={}));
(function(e){(function(h){(function(k){var p=function(){function a(b){var c=e.keyman.singleton.util._CreateElement("div");c.id=a.BANNER_ID;c.className=a.BANNER_CLASS;this.div=c;this.height=b;this.update()}Object.defineProperty(a.prototype,"height",{get:function(){return this._height},set:function(a){this._height=0<a?a:0;this.update()},enumerable:!0,configurable:!0});a.prototype.update=function(){var a=this.div.style,b=a.height,c=a.display;0<this._height?(a.height=this._height+"px",a.display="block"):
(a.height="0px",a.display="none");return b!==a.height||c!==a.display};a.prototype.appendStyleSheet=function(){};a.prototype.getDiv=function(){return this.div};a.prototype.activate=function(){};a.prototype.deactivate=function(){};a.DEFAULT_HEIGHT=37;a.BANNER_CLASS="kmw-banner-bar";a.BANNER_ID="kmw-banner-bar";return a}();k.Banner=p;var f=function(a){function b(){return a.call(this,0)||this}__extends(b,a);return b}(p);k.BlankBanner=f;f=function(a){function b(b,c){if(0<b.length){var d=a.call(this)||
this;c&&(d.height=c)}else d=a.call(this,0)||this;0<=b.indexOf("base64")?console.log("Loading img from base64 data"):console.log("Loading img with src '"+b+"'");d.img=document.createElement("img");d.img.setAttribute("src",b);b=d.img.style;b.width="100%";b.height="100%";d.getDiv().appendChild(d.img);console.log("Image loaded.");return d}__extends(b,a);b.prototype.setImagePath=function(a){this.img&&this.img.setAttribute("src",a)};return b}(p);k.ImageBanner=f;var b=function(){function b(a){this._applyFunctor=
null;var b=e.keyman.singleton;this.index=a;this.constructRoot();a=this.display=b.util._CreateElement("span");this.div.appendChild(a)}b.prototype.constructRoot=function(){var c=e.keyman.singleton,d=this.div=c.util._CreateElement("div"),f=d.style;d.className="kmw-suggest-option";d.id=b.BASE_ID+this.index;if(c=c.keyboardManager.activeStub)c.KLC&&(d.lang=c.KLC),(d=c.KFont)&&d.family&&""!=d.family&&(f.fontFamily=this.fontFamily=d.family);f.width=(100-a.MARGIN*(a.SUGGESTION_LIMIT-1))/a.SUGGESTION_LIMIT+
"%";this.div.suggestion=this};Object.defineProperty(b.prototype,"suggestion",{get:function(){return this._suggestion},enumerable:!0,configurable:!0});b.prototype.update=function(a,b){this._suggestion=a;this._applyFunctor=b||null;this.updateText()};b.prototype.updateText=function(){var a=this.generateSuggestionText();this.div.replaceChild(a,this.display);this.display=a};b.prototype.apply=function(a){var b=e.keyman.singleton;if(this.isEmpty())return[null,null];if(this._applyFunctor)return this._applyFunctor(),
[null,null];var c=b.core.languageProcessor.getPredictionState(this._suggestion.transformId);if(c){a||(a=h.dom.Utils.getOutputTarget());var d=h.text.Mock.from(c.preInput);d.apply(this._suggestion.transform);var g=d.buildTransformFrom(a);d=b.core.languageProcessor.wordbreak(a);a.apply(g);if(b.oninserttext&&b.isEmbedded)b.oninserttext(g.deleteLeft,g.insert,g.deleteRight);b=h.text.Mock.from(c.preInput);b.apply(c.transform);return[b.buildTranscriptionFrom(a,null),d]}console.warn("Could not apply the Suggestion!");
return[null,null]};b.prototype.isEmpty=function(){return!this._suggestion};b.prototype.generateSuggestionText=function(){var a=e.keyman.singleton,b=this._suggestion,c=a.util._CreateElement("span");c.className="kmw-suggestion-text";if(null==b)return c;null==b.displayAs||""==b.displayAs?b="\u00a0":(a=a.core.activeKeyboard,b=String.fromCharCode(a&&a.isRTL?8238:8237)+b.displayAs);c.innerHTML=b;return c};b.BASE_ID="kmw-suggestion-";return b}();k.BannerSuggestion=b;var a=function(a){function c(g){g=a.call(this,
g||p.DEFAULT_HEIGHT)||this;g.getDiv().className=g.getDiv().className+" "+c.BANNER_CLASS;g.options=[];for(var f=0;f<c.SUGGESTION_LIMIT;f++){var h=new b(f);g.options[f]=h}h=(f=e.keyman.singleton.core.activeKeyboard)&&f.isRTL;for(f=0;f<c.SUGGESTION_LIMIT;f++){var l=h?c.SUGGESTION_LIMIT-f-1:f;g.getDiv().appendChild(g.options[l].div);if(f!=c.SUGGESTION_LIMIT){l=e.keyman.singleton.util._CreateElement("div");l.className="kmw-banner-separator";var k=l.style;k.marginLeft=c.MARGIN/2+"%";k.marginRight=c.MARGIN/
2+"%";g.getDiv().appendChild(l)}}g.manager=new d(g.getDiv(),g.options);g.setupTouchHandling();return g}__extends(c,a);c.prototype.setupTouchHandling=function(){var a=e.keyman.singleton,b=this.getDiv(),c=this.manager;a.util.device.touchable&&(b.addEventListener("touchstart",function(a){c.touchStart(a)},!0),b.addEventListener("touchend",function(a){c.touchEnd(a)},!0),b.addEventListener("touchmove",function(a){c.touchMove(a)},!1))};c.prototype.activate=function(){var a=e.keyman.singleton,b=this.manager;
a.core.languageProcessor.addListener("invalidatesuggestions",b.invalidateSuggestions);a.core.languageProcessor.addListener("suggestionsready",b.updateSuggestions);a.core.languageProcessor.addListener("tryaccept",b.tryAccept);a.core.languageProcessor.addListener("tryrevert",b.tryRevert);a.core.languageProcessor.predictFromTarget(h.dom.Utils.getOutputTarget())};c.prototype.deactivate=function(){var a=e.keyman.singleton,b=this.manager;a.core.languageProcessor.removeListener("invalidatesuggestions",b.invalidateSuggestions);
a.core.languageProcessor.removeListener("suggestionsready",b.updateSuggestions);a.core.languageProcessor.removeListener("tryaccept",b.tryAccept);a.core.languageProcessor.removeListener("tryrevert",b.tryRevert)};c.prototype.rotateSuggestions=function(){this.manager.rotateSuggestions()};c.SUGGESTION_LIMIT=3;c.MARGIN=1;c.TOUCHED_CLASS="kmw-suggest-touched";c.BANNER_CLASS="kmw-suggest-banner";return c}(p);k.SuggestionBanner=a;var d=function(c){function d(b,d){b=c.call(this,b,p.BANNER_CLASS,a.TOUCHED_CLASS)||
this;b.initNewContext=!0;b.currentSuggestions=[];b.recentAccept=!1;b.preAccept=null;b.swallowPrediction=!1;b.doRevert=!1;b.recentRevert=!1;b.rejectedSuggestions=[];b._applyReversion=function(){var a=e.keyman.singleton,b=h.dom.Utils.getOutputTarget(),c=this.preAccept,d=h.text.Mock.from(c.preInput);d.apply(c.transform);c=d.buildTransformFrom(b);b.apply(c);if(a.oninserttext&&a.isEmbedded)a.oninserttext(c.deleteLeft,c.insert,c.deleteRight);this.currentSuggestions=this.previousSuggestions;this.currentTranscriptionID=
this.previousTranscriptionID;a=this.currentSuggestions.indexOf(this.recentAccepted);-1!=a&&(this.rejectedSuggestions.push(this.recentAccepted),this.currentSuggestions.splice(a,1));this.doRevert=this.recentAccept=!1;this.recentRevert=!0;this.doUpdate()}.bind(b);b.tryAccept=function(a){return!this.recentAccept&&this.selected?(this.doAccept(this.selected),!1):this.recentAccept&&"space"==a?this.recentAccept=!1:!0}.bind(b);b.tryRevert=function(){this.doRevert?this.recentAccept=this.doRevert=!1:this.recentAccept&&
(this.showRevert(),this.swallowPrediction=!0);return!0}.bind(b);b.invalidateSuggestions=function(a){this.initNewContext=!1;this.swallowPrediction&&"context"!=a||(this.recentRevert=this.doRevert=this.recentAccept=!1,this.rejectedSuggestions=[],"context"==a&&(this.swallowPrediction=!1,this.initNewContext=!0));this.options.forEach(function(a){a.update(null)})}.bind(b);b.updateSuggestions=function(a){var b=a.suggestions;this.currentSuggestions=b;this.currentTranscriptionID=a.transcriptionID;for(a=0;a<
b.length;a++){var c=b[a];"keep"==c.tag&&(this.keepSuggestion=c)}this.keepSuggestion&&this.currentSuggestions.splice(this.currentSuggestions.indexOf(this.keepSuggestion),1);this.swallowPrediction?this.swallowPrediction=!1:(this.recentRevert=this.doRevert=this.recentAccept=!1,this.rejectedSuggestions=[]);this.doUpdate()}.bind(b);b.options=d;return b}__extends(d,c);d.prototype.findTargetFrom=function(a){var b=e.keyman.singleton.util;try{if(a){if(b.hasClass(a,"kmw-suggest-option"))return a;if(a.parentNode&&
b.hasClass(a.parentNode,"kmw-suggest-option"))return a.parentNode}}catch(A){}return null};d.prototype.highlight=function(c,d){var e=c.className,f=" "+a.TOUCHED_CLASS;-1==c.id.indexOf(b.BASE_ID)?console.warn("Cannot find BannerSuggestion object for element to highlight!"):(this.selected=c.suggestion).isEmpty()&&(d=!1,this.selected=null);d&&0>e.indexOf(f)?c.className=e+f:c.className=e.replace(f,"")};d.prototype.select=function(a){this.doAccept(a.suggestion)};d.prototype.hold=function(a){a=a.suggestion;
var b=-1==this.currentSuggestions.indexOf(a.suggestion);this.platformHold&&this.platformHold(a,b)};d.prototype.clearHolds=function(){};d.prototype.hasModalPopup=function(){return e.keyman.singleton.osk.vkbd.popupVisible};d.prototype.dealiasSubTarget=function(a){return a};d.prototype.hasSubmenu=function(a){return!1};d.prototype.isSubmenuActive=function(){return!1};d.prototype.displaySubmenuFor=function(a){throw Error("Method not implemented.");};d.prototype.doAccept=function(a){var b=a.apply(),c=b[0];
b=b[1];var d=this;c&&(this.preAccept=c,b.then(function(a){d.preAcceptText=a}),this.selected=null,this.recentAccept=!0,this.recentRevert=this.doRevert=!1,this.recentAccepted=a.suggestion,this.previousSuggestions=this.currentSuggestions,this.previousTranscriptionID=this.currentTranscriptionID,a=e.keyman.singleton,this.swallowPrediction=!0,a.core.languageProcessor.predictFromTarget(h.dom.Utils.getOutputTarget()))};d.prototype.showRevert=function(){this.revertSuggestion={transform:null,displayAs:'"'+
this.preAcceptText+'"'};this.doRevert=!0;this.doUpdate()};d.prototype.activateKeep=function(){return!this.recentAccept&&!this.recentRevert&&!this.initNewContext};d.prototype.doUpdate=function(){var a=this,b=[];this.activateKeep()&&this.keepSuggestion?b.push(this.keepSuggestion):this.doRevert&&b.push(this.revertSuggestion);b=b.concat(this.currentSuggestions);this.options.forEach(function(c,d){d<b.length?c.update(b[d],0==d&&a.doRevert?a._applyReversion:null):c.update(null)})};d.prototype.rotateSuggestions=
function(){if(0<this.currentSuggestions.length){var b=a.SUGGESTION_LIMIT-(this.activateKeep()?1:0);b=this.currentSuggestions.splice(0,b);this.rejectedSuggestions=this.rejectedSuggestions.concat(b)}0==this.currentSuggestions.length&&(this.currentSuggestions=this.rejectedSuggestions,this.rejectedSuggestions=[]);this.doUpdate()};return d}(h.dom.UITouchHandlerBase);k.SuggestionManager=d})(h.osk||(h.osk={}))})(e.keyman||(e.keyman={}))})(com||(com={}));
(function(e){(function(h){(function(h){var k=function(){function f(){this._options={};this.imagePath="";this.constructContainer();this.setOptions(f.DEFAULT_OPTIONS);e.keyman.singleton.core.languageProcessor.on("statechange",this.selectBanner.bind(this))}f.prototype.constructContainer=function(){var b=e.keyman.singleton.util._CreateElement("div");b.id="keymanweb_banner_container";b.className="kmw-banner-container";return this.bannerContainer=b};Object.defineProperty(f.prototype,"element",{get:function(){return this.bannerContainer},
enumerable:!0,configurable:!0});f.prototype.getOptions=function(){var b={},a;for(a in this._options)b[a]=this._options[a];return b};f.prototype.setOptions=function(b){var a=e.keyman.singleton,d;for(d in b){switch(d){case "alwaysShow":this.alwaysShow=b[d];break;case "mayPredict":a.core.languageProcessor.mayPredict=b[d];break;case "mayCorrect":a.core.languageProcessor.mayCorrect=b[d];break;case "imagePath":this.imagePath=b[d]}this._options[d]=b[d]}this.selectBanner()};f.prototype.appendStyles=function(){this.activeBanner&&
this.activeBanner.appendStyleSheet()};f.prototype.setBanner=function(b,a){switch(b){case "blank":a=new h.BlankBanner;break;case "image":a=new h.ImageBanner(this.imagePath,h.Banner.DEFAULT_HEIGHT);break;case "suggestion":a=new h.SuggestionBanner(a);break;default:throw Error("Invalid type specified for the banner!");}this._activeType=b;a&&(this._setBanner(a),a.activate())};f.prototype.selectBanner=function(b){e.keyman.singleton.core.languageProcessor.isActive?this.setBanner("suggestion"):this.alwaysShow?
this.setBanner("image"):this.setBanner("blank")};f.prototype._setBanner=function(b){if(this.activeBanner){if(b==this.activeBanner)return;var a=this.activeBanner;a.deactivate();this.bannerContainer.replaceChild(b.getDiv(),a.getDiv())}this.activeBanner=b;this.bannerContainer.appendChild(b.getDiv());e.keyman.singleton.osk._Show()};Object.defineProperty(f.prototype,"activeType",{get:function(){return this._activeType},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"height",{get:function(){return this.activeBanner?
this.activeBanner.height:0},set:function(b){this.activeBanner&&(this.activeBanner.height=b)},enumerable:!0,configurable:!0});f.DEFAULT_OPTIONS={alwaysShow:!1,mayPredict:!0,mayCorrect:!0,imagePath:""};return f}();h.BannerManager=k})(h.osk||(h.osk={}))})(e.keyman||(e.keyman={}))})(com||(com={}));
(function(e){(function(h){(function(k){var p=function(){function f(){this.ready=!1;this.loadRetry=0;this._Visible=!1;this._Enabled=!0;this.vpScale=1;this.noDrag=this.userPositioned=!1;this.modifierCodes=h.text.Codes.modifierCodes;this.modifierBitmasks=h.text.Codes.modifierBitmasks;this.stateBitmasks=h.text.Codes.stateBitmasks;this.keyCodes=h.text.Codes.keyCodes;this.restorePosition=function(){this._Visible&&(e.keyman.singleton.domManager.focusLastActiveElement(),this.loadCookie(),this.userPositioned=
!1,this.saveCookie(),this._Show(),this.doResizeMove());this.pinImg&&(this.pinImg.style.display="none");window.event&&(window.event.returnValue=!1)}.bind(this);this._VKbdMouseOver=function(b){e.keyman.singleton.uiManager.setActivatingUI(!0)}.bind(this);this._VKbdMouseOut=function(b){e.keyman.singleton.uiManager.setActivatingUI(!1)}.bind(this);this._VResizeMouseOver=this._VResizeMouseOut=function(b){b=e.keyman.singleton._GetEventObject(b);if(!b)return!1;b&&b.preventDefault&&b.preventDefault();var a=
this.getRect();this.width=a.width;this.height=a.height;b.cancelBubble=!0;return!1}.bind(this);this._VResizeMouseDown=function(b){var a=e.keyman.singleton;a.uiManager.justActivated=!0;b=a._GetEventObject(b);if(!b)return!0;this.resizing=!0;if(b.pageX){var d=b.pageX;var c=b.pageY}else b.clientX&&(d=b.clientX+document.body.scrollLeft,c=b.clientY+document.body.scrollTop);this._ResizeMouseX=d;this._ResizeMouseY=c;document.onmousemove!=this._VResizeMouseMove&&document.onmousemove!=this._VMoveMouseMove&&
(this._VPreviousMouseMove=document.onmousemove,this._VPreviousMouseUp=document.onmouseup);this._VPreviousCursor=document.body.style.cursor;this._VPreviousMouseButton="undefined"==typeof b.which?b.button:b.which;this._VOriginalWidth=this.vkbd.kbdDiv.offsetWidth;this._VOriginalHeight=this.vkbd.kbdDiv.offsetHeight;document.onmousemove=this._VResizeMouseMove;document.onmouseup=this._VResizeMoveMouseUp;document.body.style.cursor&&(document.body.style.cursor="se-resize");b&&b.preventDefault&&b.preventDefault();
b.cancelBubble=!0;return!1}.bind(this);this._VResizeMouseMove=function(b){b=e.keyman.singleton._GetEventObject(b);if(!b)return!0;this.resizing=!0;if(this._VPreviousMouseButton!=("undefined"==typeof b.which?b.button:b.which))return this._VResizeMoveMouseUp(b);if(b.pageX){var a=b.pageX;var d=b.pageY}else b.clientX&&(a=b.clientX+document.body.scrollLeft,d=b.clientY+document.body.scrollTop);a=this._VOriginalWidth+a-this._ResizeMouseX;d=this._VOriginalHeight+d-this._ResizeMouseY;a<.2*screen.width&&(a=
.2*screen.width);d<.1*screen.height&&(d=.1*screen.height);a>.9*screen.width&&(a=.9*screen.width);d>.5*screen.height&&(a=.5*screen.height);this.vkbd.kbdDiv.style.width=a+"px";this.vkbd.kbdDiv.style.height=d+"px";this.vkbd.kbdDiv.style.fontSize=d/8+"px";b&&b.preventDefault&&b.preventDefault();b.cancelBubble=!0;return!1}.bind(this);this._VMoveMouseDown=function(b){var a=e.keyman.singleton;a.uiManager.justActivated=!0;b=a._GetEventObject(b);if(!b)return!0;this.resizing=!0;if(b.pageX){var d=b.pageX;var c=
b.pageY}else b.clientX&&(d=b.clientX+document.body.scrollLeft,c=b.clientY+document.body.scrollTop);document.onmousemove!=this._VResizeMouseMove&&document.onmousemove!=this._VMoveMouseMove&&(this._VPreviousMouseMove=document.onmousemove,this._VPreviousMouseUp=document.onmouseup);this._VPreviousCursor=document.body.style.cursor;this._VPreviousMouseButton="undefined"==typeof b.which?b.button:b.which;this._VMoveX=d-this._Box.offsetLeft;this._VMoveY=c-this._Box.offsetTop;a.isCJK()&&(this.pinImg.style.left=
"15px");document.onmousemove=this._VMoveMouseMove;document.onmouseup=this._VResizeMoveMouseUp;document.body.style.cursor&&(document.body.style.cursor="move");b&&b.preventDefault&&b.preventDefault();b.cancelBubble=!0;return!1}.bind(this);this._VMoveMouseMove=function(b){b=e.keyman.singleton._GetEventObject(b);if(!b||this.noDrag)return!0;this.userPositioned=this.resizing=!0;this.pinImg.style.display="block";if(this._VPreviousMouseButton!=("undefined"==typeof b.which?b.button:b.which))return this._VResizeMoveMouseUp(b);
if(b.pageX){var a=b.pageX;var d=b.pageY}else b.clientX&&(a=b.clientX+document.body.scrollLeft,d=b.clientY+document.body.scrollTop);this._Box.style.left=a-this._VMoveX+"px";this._Box.style.top=d-this._VMoveY+"px";b&&b.preventDefault&&b.preventDefault();a=this.getRect();this.width=a.width;this.height=a.height;b.cancelBubble=!0;return!1}.bind(this);this._VResizeMoveMouseUp=function(b){var a=e.keyman.singleton;b=a._GetEventObject(b);if(!b)return!0;this.resizing=!1;this.vkbd&&(this.vkbd.currentKey=null);
document.onmousemove=this._VPreviousMouseMove;document.onmouseup=this._VPreviousMouseUp;document.body.style.cursor&&(document.body.style.cursor=this._VPreviousCursor);a.domManager.focusLastActiveElement();b&&b.preventDefault&&b.preventDefault();a.uiManager.justActivated=!1;a.uiManager.setActivatingUI(!1);this.vkbd&&(this._VOriginalWidth=this.vkbd.kbdDiv.offsetWidth,this._VOriginalHeight=this.vkbd.kbdDiv.offsetHeight);this.doResizeMove();b.cancelBubble=!0;this.saveCookie();return!1}.bind(this);this.hideNow=
function(){this._Box.removeEventListener("transitionend",this.hideNow,!1);this._Box.removeEventListener("webkitTransitionEnd",this.hideNow,!1);if(!(0<=document.body.className.indexOf("osk-always-visible"))){var b=this._Box.style;b.display="none";b.opacity="1";this._Visible=!1;b.transition=b.msTransition=b.MozTransition=b.WebkitTransition="";if(this.vkbd)this.vkbd.onHide()}}.bind(this)}f.prototype.prepare=function(){var b=e.keyman.singleton,a=b.util;if(b.initialized){if(!this.ready&&(this._Box=a._CreateElement("div"),
document.body.appendChild(this._Box),a.linkStyleSheet(b.getStyleSheetPath("kmwosk.css")),a.attachDOMEvent(this._Box,"mousedown",function(a){b.uiManager.setActivatingUI(!0);return!1}),a.device.touchable)){var d=function(a){a.cancelable&&a.preventDefault();a.stopPropagation();return!1};a.attachDOMEvent(this._Box,"touchstart",function(a){b.uiManager.setActivatingUI(!0);return d(a)});a.attachDOMEvent(this._Box,"touchend",d);a.attachDOMEvent(this._Box,"touchmove",d);a.attachDOMEvent(this._Box,"touchcancel",
d);this.vpScale=a.getViewportScale()}this.loadCookie();this.banner=new k.BannerManager;this.ready=!0}else window.setTimeout(this.prepare.bind(this),200)};f.prototype._Unload=function(){this._Box=this.banner=this.vkbd=null};f.prototype._Load=function(){var b=e.keyman.singleton,a=b.util,d=a.device,c=b.core.activeKeyboard;if(null==this._Box)99<=this.loadRetry||(window.setTimeout(this._Load.bind(this),100),this.loadRetry++);else{this.loadRetry=0;b._TitleElement&&(b._TitleElement.innerHTML="KeymanWeb");
this._Visible=!1;var f=this._Box.style;f.zIndex="9999";f.display="none";f.width=d.touchable?"100%":"auto";f.position="desktop"==d.formFactor?"absolute":"fixed";if(d.touchable){var h=1;if("phone"==d.formFactor)h=1.92*(b.isEmbedded?.65:.6);else{var k=1;"Android"==d.OS&&"devicePixelRatio"in window&&(k=window.devicePixelRatio);h="Android"==d.OS&&"tablet"==d.formFactor&&this.getHeight()<300*k?1.2*h:2*h}f.fontSize=h+"em"}this.vkbd=null;this._Box.innerHTML="";this._Box.onmouseover=this._VKbdMouseOver;this._Box.onmouseout=
this._VKbdMouseOut;null!=c||d.touchable?(f="",this._Box.className="",null!=c&&(f=c.helpText),c&&c.layout(d.formFactor)?this._GenerateVisualKeyboard(c):c?(d=a._CreateElement("div"),d.className="kmw-title-bar",d.appendChild(this._TitleBarInterior()),d.onmousedown=this._VMoveMouseDown,this._Box.appendChild(d),d=a._CreateElement("div"),d.className="kmw-osk-static",d.innerHTML=f,this._Box.appendChild(d),c.hasHelpHTML&&c.insertHelpHTML(this._Box)):this._GenerateVisualKeyboard(null),b._TitleElement&&(b._TitleElement.innerHTML=
"<span style='font-weight:bold'>"+c.name+"</span> - "+b._TitleElement.innerHTML,b._TitleElement.className="",b._TitleElement.style.color="#fff")):(d=a._CreateElement("div"),d.className="kmw-title-bar",d.appendChild(this._TitleBarInterior()),d.onmousedown=this._VMoveMouseDown,this._Box.appendChild(d),d=a._CreateElement("div"),d.className="kmw-osk-none",this._Box.appendChild(d));b=this._Box.firstChild;c=" kmw-keyboard-"+(c?c.id.replace("Keyboard_",""):"");"keymanweb_title_bar"==b.id?b=b.nextSibling.nextSibling:
"keymanweb_banner_container"==b.id&&(b=b.nextSibling);b.className="kmw-osk-inner-frame"+c;this.banner.appendStyles();this.vkbd&&(this.vkbd.createKeyTip(),this.vkbd.appendStyleSheet());this._Enabled&&this._Show()}};f.prototype._GenerateVisualKeyboard=function(b){this.vkbd=new e.keyman.osk.VisualKeyboard(b);b=e.keyman.singleton.util;this._Box.className=b.device.formFactor+" "+b.device.OS.toLowerCase()+" kmw-osk-frame";"desktop"==b.device.formFactor&&this._Box.appendChild(this.controlBar());this.banner&&
this._Box.appendChild(this.banner.element);this._Box.appendChild(this.vkbd.kbdDiv);"desktop"==b.device.formFactor?this._Box.appendChild(this.resizeBar()):this.vkbd.adjustHeights()};f.prototype.controlBar=function(){var b=e.keyman.singleton,a=b.util,d=a._CreateElement("div"),c="";d.id="keymanweb_title_bar";d.className="kmw-title-bar";d.onmousedown=this._VMoveMouseDown;b.core.activeKeyboard&&(c=b.core.activeKeyboard.name);b=a._CreateElement("span");b.className="kmw-title-bar-caption";b.innerHTML=c;
d.appendChild(b);c=this.closeButton=a._CreateElement("div");c.id="kmw-close-button";c.className="kmw-title-bar-image";c.onmousedown=a._CancelMouse;c.onclick=function(){this._Hide(!0)}.bind(this);d.appendChild(c);c=this.helpImg=a._CreateElement("div");c.id="kmw-help-image";c.className="kmw-title-bar-image";c.title="KeymanWeb Help";c.onclick=function(){a.callEvent("osk.helpclick",{});window.event&&(window.event.returnValue=!1);return!1};c.onmousedown=a._CancelMouse;d.appendChild(c);c=this.configImg=
a._CreateElement("div");c.id="kmw-config-image";c.className="kmw-title-bar-image";c.title="KeymanWeb Configuration Options";c.onclick=function(){a.callEvent("osk.configclick",{});window.event&&(window.event.returnValue=!1);return!1};c.onmousedown=a._CancelMouse;d.appendChild(c);c=this.pinImg=a._CreateElement("div");c.id="kmw-pin-image";c.className="kmw-title-bar-image";c.title="Pin the On Screen Keyboard to its default location on the active text box";c.onclick=function(){this.loadCookie();this.userPositioned=
!1;this.saveCookie();this._Show();this.doResizeMove();this.pinImg&&(this.pinImg.style.display="none");window.event&&(window.event.returnValue=!1);return!1}.bind(this);c.onmousedown=a._CancelMouse;d.appendChild(c);return d};f.prototype.resizeBar=function(){var b=e.keyman.singleton.util,a=b._CreateElement("div");a.className="kmw-footer";a.onmousedown=b._CancelMouse;var d=b._CreateElement("div");d.className="kmw-footer-caption";d.innerHTML='<a href="https://keyman.com/developer/keymanweb/">KeymanWeb</a>';
d.id="keymanweb-osk-footer-caption";b.attachDOMEvent(d,"dblclick",function(a){a&&a.shiftKey&&this.showBuild();return!1}.bind(this),!1);"onselectstart"in d&&(d.onselectstart=b.selectStartHandler);a.appendChild(d);b=b._CreateElement("div");b.className="kmw-footer-resize";b.onmousedown=this._VResizeMouseDown;b.onmouseover=b.onmouseout=this._VResizeMouseOut;a.appendChild(b);this.resizeIcon=b;return a};f.prototype.showBuild=function(){var b=e.keyman.singleton;b.util.alert("KeymanWeb Version "+b.version+
"."+b.build+'<br /><br /><span style="font-size:0.8em">Copyright &copy; 2017 SIL International</span>')};f.prototype._TitleBarInterior=function(){var b=e.keyman.singleton,a=b.util,d=a._CreateElement("div"),c=d.style;c.paddingLeft="2px";c.cursor="move";c.background="#ad4a28";c.font="8pt Tahoma,Arial,sans-serif";c=a._CreateElement("div");c.className="kmw-title-bar-actions";c.onmousedown=a._CancelMouse;var f=a._CreateElement("div");f.className="kmw-close-button";f.onmousedown=a._CancelMouse;f.onclick=
function(){this._Hide(!0)}.bind(this);this.closeButton=f;c.appendChild(f);f=this.pinImg=a._CreateElement("div");f.className="kmw-pin-image";f.title="Pin the On Screen Keyboard to its default location on the active text box";f.onclick=this.restorePosition;f.onmousedown=a._CancelMouse;f.style.display="none";a.device.touchable||c.appendChild(f);d.appendChild(c);b=b._TitleElement=a._CreateElement("span");b.className="kmw-title-bar-caption";b.innerHTML="KeymanWeb";d.appendChild(b);return d};f.prototype.isEnabled=
function(){return this._Enabled};f.prototype.isVisible=function(){return this._Visible};f.prototype.saveCookie=function(){var b=e.keyman.singleton.util,a=b.loadCookie("KeymanWeb_OnScreenKeyboard"),d=this.getPos();a.visible=this._Enabled?1:0;a.userSet=this.userPositioned?1:0;a.left=d.left;a.top=d.top;this.vkbd&&(a.width=this.width,a.height=this.height);b.saveCookie("KeymanWeb_OnScreenKeyboard",a)};f.prototype.loadCookie=function(){var b=e.keyman.singleton.util,a=b.loadCookie("KeymanWeb_OnScreenKeyboard");
if("undefined"==typeof a||null==a)return this.userPositioned=!1;this._Enabled=1==b.toNumber(a.visible,1);this.userPositioned=1==b.toNumber(a.userSet,0);this.x=b.toNumber(a.left,-1);this.y=b.toNumber(a.top,-1);var d=b.toNumber(a.width,.3*screen.width);b=b.toNumber(a.height,.15*screen.height);d<.2*screen.width&&(d=.2*screen.width);b<.1*screen.height&&(b=.1*screen.height);d>.9*screen.width&&(d=.9*screen.width);b>.5*screen.height&&(b=.5*screen.height);this.vkbd&&(this.vkbd.kbdDiv.style.width=d+"px",this.vkbd.kbdDiv.style.height=
b+"px",this.vkbd.kbdDiv.style.fontSize=b/8+"px");-1!=this.x&&-1!=this.y&&this._Box||(this.userPositioned=!1);this.x<window.pageXOffset-.8*d&&(this.x=window.pageXOffset-.8*d);0>this.y&&(this.y=this.x=-1,this.userPositioned=!1);this.userPositioned&&this._Box&&this.setPos({left:this.x,top:this.y});return!0};f.prototype.getWidthFromCookie=function(){var b=e.keyman.singleton.util,a=b.loadCookie("KeymanWeb_OnScreenKeyboard");if("undefined"==typeof a||null==a)return.3*screen.width;b=b.toNumber(a.width,.3*
screen.width);b<.2*screen.width?b=.2*screen.width:b>.9*screen.width&&(b=.9*screen.width);return b};f.prototype.getBannerHeight=function(){return null!=this.banner?this.banner.height:0};f.prototype.getKeyboardHeight=function(){var b=e.keyman.singleton,a=b.util.device;if("function"==typeof b.getOskHeight)return b.getOskHeight();var d=Math.floor(Math.min(screen.availHeight,screen.availWidth)/2);if("phone"==a.formFactor){var c=Math.min(screen.height,screen.width),f=Math.max(screen.height,screen.width);
d=b.util.portraitView()?Math.floor(Math.max(screen.availHeight,screen.availWidth)/3):f/c*d/1.6}"iOS"==a.OS&&(d/=b.util.getViewportScale());"Android"==a.OS&&"phone"==a.formFactor&&"devicePixelRatio"in window&&/Firefox|Chrome|OPR/.test(navigator.userAgent)&&(d*=window.devicePixelRatio);return d};f.prototype.getHeight=function(){return this.getBannerHeight()+this.getKeyboardHeight()};f.prototype.getWidth=function(){var b=e.keyman.singleton,a=b.util.device;if("function"==typeof b.getOskWidth)return b.getOskWidth();
if("iOS"==a.OS)var d=window.innerWidth;else if("Android"==a.OS)try{d=document.documentElement.clientWidth}catch(c){d=screen.availWidth}else d=screen.width;return d};f.prototype.doResizeMove=function(b){return e.keyman.singleton.util.callEvent("osk.resizemove",b)};f.prototype.getRect=function(){var b={};this.vkbd?(b.left=b.left=h.dom.Utils.getAbsoluteX(this.vkbd.kbdDiv),b.top=b.top=h.dom.Utils.getAbsoluteY(this.vkbd.kbdDiv),b.width=b.width=h.dom.Utils.getAbsoluteX(this.vkbd.kbdHelpDiv)-h.dom.Utils.getAbsoluteX(this.vkbd.kbdDiv)+
this.vkbd.kbdHelpDiv.offsetWidth,b.height=b.height=h.dom.Utils.getAbsoluteY(this.vkbd.kbdHelpDiv)-h.dom.Utils.getAbsoluteY(this.vkbd.kbdDiv)+this.vkbd.kbdHelpDiv.offsetHeight):(b.left=b.left=h.dom.Utils.getAbsoluteX(this._Box),b.top=b.top=h.dom.Utils.getAbsoluteY(this._Box),b.width=b.width=h.dom.Utils.getAbsoluteX(this._Box)+this._Box.offsetWidth,b.height=b.height=h.dom.Utils.getAbsoluteY(this._Box)+this._Box.offsetHeight);return b};f.prototype.setRect=function(b){var a=e.keyman.singleton.util;if(null!=
this._Box&&"desktop"==a.device.formFactor){a=this._Box;var d=a.style;"left"in b&&(d.left=b.left-h.dom.Utils.getAbsoluteX(a)+a.offsetLeft+"px",this.dfltX=d.left);"top"in b&&(d.top=b.top-h.dom.Utils.getAbsoluteY(a)+a.offsetTop+"px",this.dfltY=d.top);if(null!=this.vkbd){var c=this.vkbd.kbdDiv;d=c.style;if("width"in b){var f=b.width-(a.offsetWidth-c.offsetWidth);f<.2*screen.width&&(f=.2*screen.width);f>.9*screen.width&&(f=.9*screen.width);d.width=f+"px";this.width=f}"height"in b&&(a=b.height-(a.offsetHeight-
c.offsetHeight),a<.1*screen.height&&(a=.1*screen.height),a>.5*screen.height&&(a=.5*screen.height),d.height=a+"px",d.fontSize=a/8+"px",this.height=a);"nosize"in b&&this.resizeIcon&&(this.resizeIcon.style.display=b.nosize?"none":"block")}"nomove"in b&&(this.noDrag=b.nomove,this.pinImg&&(this.pinImg.style.display=b.nomove||!this.userPositioned?"none":"block"));this.saveCookie()}};f.prototype.getPos=function(){var b=this._Box;return{left:this._Visible?b.offsetLeft:this.x,top:this._Visible?b.offsetTop:
this.y}};f.prototype.setPos=function(b){if("undefined"!=typeof this._Box&&!e.keyman.singleton.util.device.touchable){if(this.userPositioned){var a=b.left;b=b.top;"undefined"!=typeof a&&(a<-.8*this._Box.offsetWidth&&(a=-.8*this._Box.offsetWidth),this.userPositioned&&(this._Box.style.left=a+"px",this.x=a));"undefined"!=typeof b&&(0>b&&(b=0),this.userPositioned&&(this._Box.style.top=b+"px",this.y=b))}this.pinImg&&(this.pinImg.style.display=this.userPositioned?"block":"none")}};f.prototype._Show=function(b,
a){var d=e.keyman.singleton,c=d.util.device;if(null!=this._Box&&null!=d.domManager.getActiveElement()&&(c.touchable||null!=d.core.activeKeyboard&&this._Enabled)){var f=this._Box.style;c.touchable&&""==f.bottom&&(f.visibility="hidden");c.touchable&&(f.opacity="1");if(this.vkbd&&this.vkbd.ddOSK&&(this.vkbd.show(),c.touchable)){f.position="fixed";f.left=f.bottom="0px";var l=this.vkbd.kbdDiv.firstChild.style.height;l=l.substr(0,l.indexOf("px"));f.height=f.maxHeight=this.getBannerHeight()+parseInt(l,10)+
5+"px";f.border="none";f.borderTop="1px solid gray";this._Visible=this._Enabled=!0}f.display="block";this.vkbd&&this.vkbd.showLanguage();"desktop"==c.formFactor&&(f.position="absolute",f.display="block",f.left="0px",this.loadCookie(),0<=b?(f.left=b+"px",f.top=a+"px"):this.userPositioned?(f.left=this.x+"px",f.top=this.y+"px"):(b=d.domManager.getActiveElement(),a=b.ownerDocument,"on"==a.designMode&&a.defaultView&&a.defaultView.frameElement&&(b=a.defaultView.frameElement),this.dfltX?f.left=this.dfltX:
"undefined"!=typeof b&&null!=b&&(f.left=h.dom.Utils.getAbsoluteX(b)+"px"),this.dfltY?f.top=this.dfltY:"undefined"!=typeof b&&null!=b&&(f.top=h.dom.Utils.getAbsoluteY(b)+b.offsetHeight+"px")),this._Visible=this._Enabled=!0,this.vkbd&&this.vkbd.kbdDiv&&(this.width=this.vkbd.kbdDiv.offsetWidth,this.height=this.vkbd.kbdDiv.offsetHeight),this.saveCookie(),b=this.pinImg,"undefined"!=typeof b&&null!=b&&(b.style.display=this.userPositioned?"block":"none"));"hidden"==f.visibility&&window.setTimeout(function(){this._Box.style.visibility=
"visible"}.bind(this),0);c.touchable||(c={},c.x=this._Box.offsetLeft,c.y=this._Box.offsetTop,c.userLocated=this.userPositioned,this.doShow(c))}};f.prototype._Hide=function(b){var a=e.keyman.singleton,d=a.util.device;this._Box&&"block"==this._Box.style.display&&this.vkbd&&this.vkbd.kbdDiv&&(this.width=this.vkbd.kbdDiv.offsetWidth,this.height=this.vkbd.kbdDiv.offsetHeight);if(b)this._Enabled=a.isCJK()||d.touchable?!0:!1,this.saveCookie();else if("desktop"==d.formFactor&&0<=document.body.className.indexOf("osk-always-visible"))return;
this._Visible=!1;this._Box&&d.touchable&&0<this._Box.offsetHeight?(d=this._Box.style,d.transition="string"==typeof d.MozBoxSizing?"opacity 0.8s linear":d.msTransition=d.WebkitTransition="opacity 0.5s linear 0",window.setTimeout(function(){var a=this._Box.style;this._Visible?a.transition=a.msTransition=a.MozTransition=a.WebkitTransition="":(a.opacity="0",this._Box.addEventListener("transitionend",this.hideNow,!1),this._Box.addEventListener("webkitTransitionEnd",this.hideNow,!1))}.bind(this),200)):
this._Box&&(this._Box.style.display="none");d={};d.HiddenByUser=b;this.doHide(d);b&&a.domManager.focusLastActiveElement()};f.prototype.hide=function(){this._Enabled=!1;this._Hide(!0)};f.prototype.doShow=function(b){return e.keyman.singleton.util.callEvent("osk.show",b)};f.prototype.doHide=function(b){return e.keyman.singleton.util.callEvent("osk.hide",b)};f.prototype.showLanguageMenu=function(){(new k.LanguageMenu(e.keyman.singleton)).show()};f.prototype.userLocated=function(){return this.userPositioned};
f.prototype.show=function(b){0<arguments.length?(this._Enabled=b)?this._Show():this._Hide(!0):this._Visible?this._Hide(!0):this._Show()};f.prototype.addEventListener=function(b,a){return e.keyman.singleton.util.addEventListener("osk."+b,a)};f.prototype.shutdown=function(){var b=this._Box;b.parentElement&&b.parentElement.removeChild(b)};return f}();k.OSKManager=p})(h.osk||(h.osk={}))})(e.keyman||(e.keyman={}))})(com||(com={}));
(function(e){(function(h){(function(h){(function(h){var f=function(){function b(){this.registeredModels={};this.languageModelMap={}}b.prototype.init=function(){e.keyman.singleton.addEventListener("keyboardchange",this.onKeyboardChange.bind(this))};b.prototype.onKeyboardChange=function(a){var b,c=e.keyman.singleton,f=c.core;"string"==typeof a&&(a=(b={},b.internalName=c.keyboardManager.getActiveKeyboardName(),b.languageCode=a,b.indirect=!0,b));a=this.languageModelMap[a.languageCode];f.activeModel!==
a&&(f.activeModel&&f.languageProcessor.unloadModel(),a&&f.languageProcessor.loadModel(a))};b.prototype.register=function(a){var b=e.keyman.singleton.keyboardManager.getActiveLanguage();this.registeredModels[a.id]=a;var c=this;a.languages.forEach(function(d){c.languageModelMap[d]=a;if(d==b)c.onKeyboardChange(d)})};b.prototype.deregister=function(a){var b=e.keyman.singleton.core;if(this.registeredModels[a]){var c=this.registeredModels[a];delete this.registeredModels[a];b.activeModel&&b.activeModel.id==
a&&b.languageProcessor.unloadModel();var f=this;c.languages.forEach(function(b){f.languageModelMap[b].id==a&&delete f.languageModelMap[b]})}};b.prototype.isRegistered=function(a){return!!this.registeredModels[a.id]};return b}();h.ModelManager=f})(h.prediction||(h.prediction={}))})(h.text||(h.text={}))})(e.keyman||(e.keyman={}))})(com||(com={}));
(function(e){(function(h){var k=function(){function k(){this._TitleElement=null;this._IE=0;this._MasterDocument=null;this._HotKeys=[];this.warned=!1;this.baseFont="sans-serif";this.appliedFont="";this.fontCheckTimer=null;this.protocol=this.rootPath=this.srcPath="";this.mustReloadKeyboard=!1;this.globalLanguageCode=this.globalKeyboard=null;this.isEmbedded=!1;this.refocusTimer=0;this.isHeadless=!1;this.build=300;this.options={root:"",resources:"",keyboards:"",fonts:"",attachType:"",ui:null};this.refreshElementContent=
null;this.util=this.util=new h.Util(this);this.ui=this.ui={};this.keyboardManager=new h.keyboards.KeyboardManager(this);this.domManager=new h.dom.DOMManager(this);this.hotkeyManager=new h.HotkeyManager(this);this.uiManager=new h.UIManager(this);var f="undefined"!==typeof window.KeymanWeb_BaseLayout?window.KeymanWeb_BaseLayout:"us";this._BrowserIsSafari=0<=navigator.userAgent.indexOf("AppleWebKit");this.core=new h.text.InputProcessor({baseLayout:f,variableStoreSerializer:new h.dom.VariableStoreCookieSerializer});
this["interface"]=this.core.keyboardInterface;this.modelManager=new h.text.prediction.ModelManager;this.osk=this.osk=new e.keyman.osk.OSKManager;this.build=e.keyman.environment.BUILD;this.srcPath=k._srcPath;this.rootPath=k._rootPath;this.protocol=k._protocol;this.version=e.keyman.environment.VERSION;this.helpURL="http://help.keyman.com/go";this.setInitialized(0);this.loaded=!0}k.prototype.setDefaultDeviceOptions=function(e){};k.prototype.getStyleSheetPath=function(e){return e};k.prototype.getKeyboardPath=
function(e,b){return e};k.prototype.KC_=function(e,b,a){return""};k.prototype.handleRotationEvents=function(){};k.prototype.alignInputs=function(e){};k.prototype.hideInputs=function(){};k.prototype.namespaceID=function(e){};k.prototype.preserveID=function(e){};k.prototype.setInitialized=function(e){this.initialized=this.initialized=e};k.prototype.delayedInit=function(){this.touchAliasing=this.util.device.touchable?this.domManager.touchHandlers:this.domManager.nonTouchHandlers};k.prototype.shutdown=
function(){this.util.detachDOMEvent(window,"focus",this.pageFocusHandler,!1);this.util.detachDOMEvent(window,"blur",this.pageFocusHandler,!1);this.domManager.shutdown();this.osk.shutdown();this.util.shutdown();this.keyboardManager.shutdown();this.core.languageProcessor.shutdown();this.ui&&this.ui.shutdown&&this.ui.shutdown();h.dom.DOMEventHandlers.states=new h.dom.CommonDOMStates};k.prototype.getDebugInfo=function(){var e={attachType:this.options.attachType,device:this.util.device,initialized:this.initialized,
isEmbedded:this.isEmbedded,ui:this.ui?this.ui.name:null};this.util.device.touchable&&(e.ui="touch");return e};k.prototype.isFontAvailable=function(e){return this.util.checkFont({family:e})};k.prototype.addEventListener=function(e,b){return this.util.addEventListener("kmw."+e,b)};k.prototype._GetEventObject=function(e){if(!e&&(e=window.event,!e)){var b=this.domManager.getLastActiveElement();if(b){e=b.ownerDocument;if(e)var a=e.defaultView;if(!a)return null;e=a.event}}return e};k.prototype._push=function(e,
b){e.push?e.push(b):e=e.concat(b);return e};k.prototype.attachToControl=function(e){this.domManager.attachToControl(e)};k.prototype.detachFromControl=function(e){this.domManager.detachFromControl(e)};k.prototype.addKeyboards=function(e){0==arguments.length?this.keyboardManager.keymanCloudRequest("",!1):this.keyboardManager.addKeyboardArray(arguments)};k.prototype.addKeyboardsForLanguage=function(e){this.keyboardManager.addLanguageKeyboards(arguments)};k.prototype.register=function(e){this.keyboardManager.register(e)};
k.prototype.removeKeyboards=function(e,b){return this.keyboardManager.removeKeyboards(e)};k.prototype.setActiveKeyboard=function(e,b){return this.keyboardManager.setActiveKeyboard(e,b)};k.prototype.getActiveKeyboard=function(){return this.keyboardManager.getActiveKeyboardName()};k.prototype.getActiveLanguage=function(e){return this.keyboardManager.getActiveLanguage(e)};k.prototype.isAttached=function(e){return this.domManager.isAttached(e)};k.prototype.isCJK=function(e){return(e=e?new h.keyboards.Keyboard(e):
this.core.activeKeyboard)&&e.isCJK};k.prototype.isChiral=function(e){return(e?new h.keyboards.Keyboard(e):this.core.activeKeyboard).isChiral};k.prototype.getKeyboard=function(e,b){var a,d=this.keyboardManager.getDetailedKeyboards();for(a=0;a<d.length;a++){var c=d[a];if(c.InternalName==e||c.InternalName=="Keyboard_"+e)if(2>arguments.length||c.LanguageCode==b)return c}return null};k.prototype.getKeyboards=function(){return this.keyboardManager.getDetailedKeyboards()};k.prototype.getSavedKeyboard=function(){return this.keyboardManager.getSavedKeyboard()};
k.prototype.init=function(e){return this.domManager.init(e)};k.prototype.resetContext=function(e){e||(e=h.dom.DOMEventHandlers.states.activeElement);(e=h.dom.Utils.getOutputTarget(e))&&e.resetContext();this.core.resetContext()};k.prototype.setNumericLayer=function(){this.core.keyboardProcessor.setNumericLayer(this.util.device.coreSpec)};k.prototype.disableControl=function(e){this.domManager.disableControl(e)};k.prototype.enableControl=function(e){this.domManager.enableControl(e)};k.prototype.setKeyboardForControl=
function(e,b,a){this.domManager.setKeyboardForControl(e,b,a)};k.prototype.getKeyboardForControl=function(e){this.domManager.getKeyboardForControl(e)};k.prototype.getLanguageForControl=function(e){this.domManager.getLanguageForControl(e)};k.prototype.focusLastActiveElement=function(){this.domManager.focusLastActiveElement()};k.prototype.getLastActiveElement=function(){return this.domManager.getLastActiveElement()};k.prototype.setActiveElement=function(e,b){return this.domManager.setActiveElement(e,
b)};k.prototype.moveToElement=function(e){this.domManager.moveToElement(e)};k.prototype.addHotKey=function(e,b,a){this.hotkeyManager.addHotKey(e,b,a)};k.prototype.removeHotKey=function(e,b){this.hotkeyManager.removeHotkey(e,b)};k.prototype.getUIState=function(){return this.uiManager.getUIState()};k.prototype.activatingUI=function(e){this.uiManager.setActivatingUI(e)};k.prototype.BuildVisualKeyboard=function(f,b,a,d){return e.keyman.osk.VisualKeyboard.buildDocumentationKeyboard(f,b,a,d)};return k}();
h.KeymanBase=k})(e.keyman||(e.keyman={}))})(com||(com={}));var scripts=document.getElementsByTagName("script"),ss=scripts[scripts.length-1].src,sPath=ss.substr(0,ss.lastIndexOf("/")+1),KeymanBase=com.keyman.KeymanBase;KeymanBase._srcPath=sPath;KeymanBase._rootPath=sPath.replace(/(https?:\/\/)([^\/]*)(.*)/,"$1$2/");KeymanBase._protocol=sPath.replace(/(.{3,5}:)(.*)/,"$1");window.keyman&&window.keyman.loaded||function(){window.keyman=com.keyman.singleton=com.keyman.singleton=new KeymanBase;window.keyman.core.languageProcessor.init()}();
window.keyman.initialized||function(){var e=window.keyman,h=e.util;e.debug=e.debug=function(h){if(null==e.debugElement){var k=document.createElement("DIV");var f=k.style;f.position="absolute";f.width="30%";f.maxHeight="50%";f.top="0";f.right="0";f.minHeight="50px";f.border="1px solid blue";f.whiteSpace="pre-line";f.overflowY="scroll";f=document.createElement("P");f.id="debug_output";f.style.margin="2px";k.appendChild(f);document.body.appendChild(k);e.debugElement=f}if(null!=(f=document.getElementById("debug_output")))if(0==
arguments.length)"undefined"!=typeof f.textContent?f.textContent="":f.innerHTML="";else{k=(new Date).toTimeString().substr(3,5)+" ";var b,a;for(b=0;b<arguments.length;b++){0<b&&(k+="; ");var d=arguments[b];if("object"==typeof d)if(null==d)k+="null";else{var c="";for(a in d){0<c.length&&(c+=", ");c=c+a+":";switch(typeof d[a]){case "string":case "number":case "boolean":c+=d[a];break;default:c+=typeof d[a]}if(1024<c.length){c=c.substr(0,1E3)+"...";break}}0<c.length&&(k=k+"{"+c+"}")}else k+=d}1500<k.length&&
(k=k.substr(0,1500)+" (more)");"undefined"!=typeof f.textContent?f.textContent=k+"\n"+f.textContent:f.innerHTML=k+"<br />"+f.innerHTML}};e.debugElement=null;e.delayedInit();h.attachDOMEvent(window,"load",e.domManager._WindowLoad,!1);h.attachDOMEvent(window,"unload",e.domManager._WindowUnload,!1);h.attachDOMEvent(document,"keyup",e.hotkeyManager._Process,!1);e.pageFocusHandler=function(){var e=com.keyman.singleton;!e.uiManager.isActivating&&e.osk.vkbd&&e.core.keyboardProcessor._UpdateVKShift(null,
15,0)};h.attachDOMEvent(window,"focus",e.pageFocusHandler,!1);h.attachDOMEvent(window,"blur",e.pageFocusHandler,!1);String.kmwEnableSupplementaryPlane(!1)}();
(function(e){(function(e){var h=function(){function e(){this.innerWidth=window.innerWidth;this.innerHeight=window.innerHeight}e.prototype.equals=function(b){return this.innerWidth==b.innerWidth&&this.innerHeight==b.innerHeight};return e}(),p=function(){function e(b){this.idlePermutationCounter=e.IDLE_PERMUTATION_CAP;this.keyman=b}e.prototype.resolve=function(){this.keyman.alignInputs();var b=this.keyman.osk;b._Load();this.oskVisible&&b._Show();this.isActive=!1;this.updateTimer&&(window.clearInterval(this.updateTimer),
this.rotState=null)};e.prototype.initNewRotation=function(){this.oskVisible=this.keyman.osk.isVisible();this.keyman.osk.hideNow();this.isActive=!0};e.prototype.init=function(){if(!this.keyman.isEmbedded){var b=this.keyman.util.device.OS,a=this.keyman.util,d=this;"iOS"==b?(a.attachDOMEvent(window,"orientationchange",function(){d.iOSEventHandler();return!1}),a.attachDOMEvent(window,"resize",function(){d.iOSEventHandler();return!1})):"Android"==b&&("onmozorientationchange"in screen?a.attachDOMEvent(screen,
"mozorientationchange",function(){d.initNewRotation();return!1}):a.attachDOMEvent(window,"orientationchange",function(){d.initNewRotation();return!1}),a.attachDOMEvent(window,"resize",function(){d.resolve();return!1}))}};e.prototype.iOSEventHandler=function(){this.isActive||(this.initNewRotation(),this.rotState=new h,this.updateTimer=window.setInterval(this.iOSEventUpdate.bind(this),e.UPDATE_INTERVAL));this.idlePermutationCounter=0};e.prototype.iOSEventUpdate=function(){var b=new h;this.rotState.equals(b)?
++this.idlePermutationCounter==e.IDLE_PERMUTATION_CAP&&this.resolve():(this.rotState=b,this.idlePermutationCounter=0)};e.IDLE_PERMUTATION_CAP=15;e.UPDATE_INTERVAL=20;return e}();e.RotationManager=p})(e.keyman||(e.keyman={}))})(com||(com={}));
window.keyman.initialized||function(){var e=window.keyman,h=e.util,k=h.device,p=com.keyman.dom;e.isEmbedded=!1;e.setDefaultDeviceOptions=function(e){""==e.attachType&&(e.attachType=k.touchable?"manual":"auto")};h.wait=function(f){var b=this.waiting;if("undefined"!=typeof b&&null!=b&&!e.warned){var a=b.firstChild.childNodes;f?(b.pending=!0,window.setTimeout(function(){b.pending&&(window.scrollTo(0,0),a[0].style.display="none",a[1].className="kmw-wait-text",a[1].innerHTML=f,a[2].style.display="block",
b.style.display="block")},1E3)):b.pending&&(a[1].innerHTML="",b.pending=!1,b.style.display="none")}};e.getStyleSheetPath=function(e){return h.getOption("resources")+"osk/"+e};e.getKeyboardPath=function(f){return(/^(([\.]\/)|([\.][\.]\/)|(\/))|(:)/.test(f)?"":e.options.keyboards)+f};e.alignInputs=function(f){if(k.touchable){var b=e.domManager,a=[];f?f.forEach(function(b){b.base?a.push(b):b.kmw_ip&&a.push(b.kmw_ip)}):a=b.inputList;a.forEach(function(a){p.Utils.instanceof(a,"TouchAliasElement")&&a.updateInput();
a.style.visibility="visible";0<a.base.textContent.length&&(a.base.style.visibility="hidden")})}};e.hideInputs=function(){var f=e.domManager;if(k.touchable)for(var b=0;b<f.inputList.length;b++)f.inputList[b].style.visibility="hidden",f.inputList[b].base.style.visibility="visible"};e.isPositionSynthesized=function(){return k.touchable};e.handleRotationEvents=function(){(new com.keyman.RotationManager(e)).init()}}();
(function(){var e=window.keyman,h=window.setInterval(function(){"complete"===document.readyState&&(window.clearInterval(h),e.init(null))},10)})();(function(){var e=com.keyman.Util.prototype;e._GetAbsoluteX=e.getAbsoluteX;e._GetAbsoluteY=e.getAbsoluteY;e._GetAbsolute=e.getAbsolute;e.toNzString=e.nzString})();(function(){com.keyman.text.KeyboardInterface.__publishShorthandAPI()})();
//# sourceMappingURL=keymanweb.js.map
