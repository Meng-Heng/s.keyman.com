String.kmwFromCharCode=function(a){var b=[],c;for(c=0;c<arguments.length;c++){var d=Number(arguments[c]);if(!isFinite(d)||0>d||1114111<d||Math.floor(d)!==d)throw new RangeError("Invalid code point "+d);65536>d?b.push(d):(d-=65536,b.push((d>>10)+55296),b.push(d%1024+56320))}return String.fromCharCode.apply(void 0,b)};
String.prototype.kmwCharCodeAt=function(a){var b=String(this),c=0;if(0>a||a>=b.length)return NaN;for(var d=0;d<a;d++)if(c=b.kmwNextChar(c),null===c)return NaN;a=b.charCodeAt(c);return 55296<=a&&56319>=a&&b.length>c+1&&(b=b.charCodeAt(c+1),56320<=b&&57343>=b)?(a-55296<<10)+(b-56320)+65536:a};String.prototype.kmwIndexOf=function(a,b){var c=String(this);a=c.indexOf(a,b);if(0>a)return a;for(var d=b=0;null!==d&&d<a;d=c.kmwNextChar(d))b++;return b};
String.prototype.kmwLastIndexOf=function(a,b){var c=String(this);a=c.lastIndexOf(a,b);if(0>a)return a;for(var d=b=0;null!==d&&d<a;d=c.kmwNextChar(d))b++;return b};String.prototype.kmwLength=function(){var a=String(this);if(0==a.length)return 0;for(var b=0,c=0;null!==c;b++)c=a.kmwNextChar(c);return b};String.prototype.kmwSlice=function(a,b){var c=String(this);a=c.kmwCodePointToCodeUnit(a);b=c.kmwCodePointToCodeUnit(b);return null===a||null===b?"":c.slice(a,b)};
String.prototype.kmwSubstr=function(a,b){var c=String(this);0>a&&(a=c.kmwLength()+a);0>a&&(a=0);var d=c.kmwCodePointToCodeUnit(a),e=d;if(null===d)return"";if(2>arguments.length)e=c.length;else for(var f=0;f<b;f++)e=c.kmwNextChar(e);return null===e?c.substring(d):c.substring(d,e)};
String.prototype.kmwSubstring=function(a,b){var c=String(this);if("undefined"==typeof b)a=c.kmwCodePointToCodeUnit(a),b=c.length;else{if(a>b){var d=a;a=b;b=d}a=c.kmwCodePointToCodeUnit(a);b=c.kmwCodePointToCodeUnit(b)}if(isNaN(a)||null===a)a=0;if(isNaN(b)||null===b)b=c.length;return c.substring(a,b)};
String.prototype.kmwNextChar=function(a){var b=String(this);if(null===a||0>a||a>=b.length-1)return null;var c=b.charCodeAt(a);return 55296<=c&&56319>=c&&b.length>a+1&&(c=b.charCodeAt(a+1),56320<=c&&57343>=c)?a==b.length-2?null:a+2:a+1};String.prototype.kmwPrevChar=function(a){var b=String(this);if(null==a||0>=a||a>b.length)return null;var c=b.charCodeAt(a-1);return 56320<=c&&57343>=c&&1<a&&(b=b.charCodeAt(a-2),55296<=b&&56319>=b)?a-2:a-1};
String.prototype.kmwCodePointToCodeUnit=function(a){if(null===a)return null;var b=String(this),c=0;if(0>a){for(var c=b.length,d=0;d>a;d--)c=b.kmwPrevChar(c);return c}if(a==b.kmwLength())return b.length;for(d=0;d<a;d++)c=b.kmwNextChar(c);return c};String.prototype.kmwCodeUnitToCodePoint=function(a){var b=String(this);return null===a?null:0==a?0:0>a?b.substr(a).kmwLength():b.substr(0,a).kmwLength()};String.prototype.kmwCharAt=function(a){var b=String(this);return 0<=a?b.kmwSubstr(a,1):""};
String.prototype.kmwBMPNextChar=function(a){var b=String(this);return 0>a||a>=b.length-1?null:a+1};String.prototype.kmwBMPPrevChar=function(a){var b=String(this);return 0>=a||a>b.length?null:a-1};String.prototype.kmwBMPCodePointToCodeUnit=function(a){return a};String.prototype.kmwBMPCodeUnitToCodePoint=function(a){return a};String.prototype.kmwBMPLength=function(){return String(this).length};
String.prototype.kmwBMPSubstr=function(a,b){var c=String(this);return-1<a?c.substr(a,b):c.substr(c.length+a,-a)};
String.kmwEnableSupplementaryPlane=function(a){var b=String.prototype;String._kmwFromCharCode=a?String.kmwFromCharCode:String.fromCharCode;b._kmwCharAt=a?b.kmwCharAt:b.charAt;b._kmwCharCodeAt=a?b.kmwCharCodeAt:b.charCodeAt;b._kmwIndexOf=a?b.kmwIndexOf:b.indexOf;b._kmwLastIndexOf=a?b.kmwLastIndexOf:b.lastIndexOf;b._kmwSlice=a?b.kmwSlice:b.slice;b._kmwSubstring=a?b.kmwSubstring:b.substring;b._kmwSubstr=a?b.kmwSubstr:b.kmwBMPSubstr;b._kmwLength=a?b.kmwLength:b.kmwBMPLength;b._kmwNextChar=a?b.kmwNextChar:
b.kmwBMPNextChar;b._kmwPrevChar=a?b.kmwPrevChar:b.kmwBMPPrevChar;b._kmwCodePointToCodeUnit=a?b.kmwCodePointToCodeUnit:b.kmwBMPCodePointToCodeUnit;b._kmwCodeUnitToCodePoint=a?b.kmwCodeUnitToCodePoint:b.kmwBMPCodeUnitToCodePoint};
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(b,a,g){b!=Array.prototype&&b!=Object.prototype&&(b[a]=g.value)};$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global&&null!=global?global:b};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(b,a,g,l){if(a){g=$jscomp.global;b=b.split(".");for(l=0;l<b.length-1;l++){var n=b[l];n in g||(g[n]={});g=g[n]}b=b[b.length-1];l=g[b];a=a(l);a!=l&&null!=a&&$jscomp.defineProperty(g,b,{configurable:!0,writable:!0,value:a})}};$jscomp.polyfill("Array.prototype.fill",function(b){return b?b:function(a,b,l){var n=this.length||0;0>b&&(b=Math.max(0,n+b));if(null==l||l>n)l=n;l=Number(l);0>l&&(l=Math.max(0,n+l));for(b=Number(b||0);b<l;b++)this[b]=a;return this}},"es6-impl","es3");
var keyman=window.keyman||{};keyman.__BUILD__=35;
window.keyman.loaded||function(){var b=window.keyman={_TitleElement:null,_Enabled:1,_IE:0,legacy:0,_IsActivatingKeymanWebUI:0,_JustActivatedKeymanWebUI:0,_IgnoreNextSelChange:0,_Selection:null,_SelectionControl:null,_KeyboardStubs:[],dfltStub:null,_Keyboards:[],_ActiveKeyboard:null,_ActiveStub:null,_AnyIndices:[],_DeadKeys:[],_AttachedElements:[],_ActiveElement:null,_LastActiveElement:null,_DfltStyle:"",_MasterDocument:null,_HotKeys:[],focusTimer:null,focusing:!1,resizing:!1,sortedInputs:[],inputList:[],
languageList:null,languagesPending:[],deferredStubs:[],deferredKRS:[],deferredKR:[],waiting:null,warned:!1,baseFont:"sans-serif",appliedFont:"",embeddedFonts:[],fontCheckTimer:null,srcPath:"",rootPath:"",mustReloadKeyboard:!1,globalKeyboard:null,globalLanguageCode:null,isEmbedded:!1,refocusTimer:0,modStateFlags:0};b.loaded=!0;b.initialized=0;b.build=keyman.__BUILD__;b.version="10.0";b.helpURL="http://help.keyman.com/go";var a=b.util={},g=b.osk={ready:!1};b.ui={};b["interface"]={};b.setDefaultDeviceOptions=
function(a){};b.getStyleSheetPath=function(a){return a};b.getKeyboardPath=function(a){return a};b.KC_=function(a,b,d){return""};b.handleRotationEvents=function(){};b.alignInputs=function(a){};b.refreshElementContent=null;g.highlightSubKeys=function(a,b,d){};g.createKeyTip=function(){};g.optionKey=function(a,b,d){};g.showKeyTip=function(a,b){};g.waitForFonts=function(a,b){return!0};b.options={root:"",resources:"",keyboards:"",fonts:"",attachType:"",ui:null};a.events={};a.currentEvents=[];g=document.getElementsByTagName("script");
g=g[g.length-1].src;g=g.substr(0,g.lastIndexOf("/")+1);b.srcPath=g;b.rootPath=g.replace(/(https?:\/\/)([^\/]*)(.*)/,"$1$2/");b.protocol=g.replace(/(.{3,5}:)(.*)/,"$1");a.arrayFromNodeList=function(a){for(var b=[],d=0;d<a.length;d++)b.push(a[d]);return b};a.addEventListener=function(b,e){a.removeEventListener(b,e);a.events[b].push(e);return!0};a.removeEventListener=function(b,e){"undefined"==typeof a.events[b]&&(a.events[b]=[]);for(var d=0;d<a.events[b].length;d++)if(a.events[b][d]==e)return a.events[b].splice(d,
1),!0;return!1};a.callEvent=function(b,e){if("undefined"==typeof a.events[b])return!0;if(-1!=a.currentEvents.indexOf(b))return!1;a.currentEvents.push(b);for(var d=0;d<a.events[b].length;d++){var c=a.events[b][d],f=!1;try{f=c(e)}catch(k){f=!1}if(!1===f)return a.currentEvents.pop(),!1}a.currentEvents.pop();return!0};a.attachDOMEvent=a.attachDOMEvent=function(b,e,d,c){a.detachDOMEvent(b,e,d,c);b.attachEvent?b.attachEvent("on"+e,d):b.addEventListener&&b.addEventListener(e,d,c?!0:!1)};a.detachDOMEvent=
a.detachDOMEvent=function(a,b,d,c){a.detachEvent?a.detachEvent("on"+b,d):a.removeEventListener&&a.removeEventListener(b,d,c)};a.getOption=a.getOption=function(a,e){return a in b.options?b.options[a]:1<arguments.length?e:""};a.setOption=a.setOption=function(a,e){b.options[a]=e};a.getAbsoluteX=a._GetAbsoluteX=function(n){if(!n)return 0;var e=n.offsetLeft?n.offsetLeft:0,d=n;if(d.offsetParent)for(;d.offsetParent;)d=d.offsetParent,e+=d.offsetLeft;d&&d.ownerDocument&&n.ownerDocument!=b._MasterDocument&&
(d=d.ownerDocument);return d&&d.parentWindow&&d.parentWindow.frameElement?e+a._GetAbsoluteX(d.parentWindow.frameElement)-d.documentElement.scrollLeft:d&&d.defaultView&&d.defaultView.frameElement?e+a._GetAbsoluteX(d.defaultView.frameElement)-d.documentElement.scrollLeft:e};a.getAbsoluteY=a._GetAbsoluteY=function(n){if(!n)return 0;var e=n.offsetTop?n.offsetTop:0,d=n;if(d.offsetParent)for(;d.offsetParent;)d=d.offsetParent,e+=d.offsetTop;d&&d.ownerDocument&&n.ownerDocument!=b._MasterDocument&&(d=d.ownerDocument);
return d&&d.parentWindow&&d.parentWindow.frameElement?e+a._GetAbsoluteY(d.parentWindow.frameElement)-d.documentElement.scrollTop:d&&d.defaultView&&d.defaultView.frameElement?e+a._GetAbsoluteY(d.defaultView.frameElement)-d.documentElement.scrollTop:e};a.getAbsolute=a._GetAbsolute=function(b){var n={};n.x=a._GetAbsoluteX(b);n.y=a._GetAbsoluteY(b);return n};a.selectStartHandler=function(){return!1};a.mouseDownPreventDefaultHandler=function(a){a&&a.preventDefault()};a.mouseDownPreventDefaultHandler=function(a){a&&
a.preventDefault()};a.createElement=a._CreateElement=function(b){b=document.createElement(b);"undefined"!=typeof b.onselectstart?(b.unSelectable="on",b.onselectstart=a.selectStartHandler):(b.style.MozUserSelect="none",b.style.KhtmlUserSelect="none",b.style.UserSelect="none",b.style.WebkitUserSelect="none");return b};a.getIEVersion=a._GetIEVersion=function(){var a="";"userAgent"in navigator&&(a=navigator.userAgent);if("selection"in document){var b=navigator.appVersion;var d=b.indexOf("MSIE ");if(0<=
d){if("BackCompat"==document.compatMode)return 6;b=b.substr(d+5);d=b.indexOf(".");if(0<d)return parseInt(b.substr(0,d),10)}}d=a.indexOf("Trident/");if(0>d)return 999;a=a.substr(d+8);d=a.indexOf(".");return 0<d?parseInt(a.substr(0,d),10)+4:999};a.getDPI=function(){var a=document.createElement("DIV"),b=a.style,d=96;if("complete"!==document.readyState)return d;a.id="calculateDPI";b.position="absolute";b.display="block";b.visibility="hidden";b.left="10px";b.top="10px";b.width="1in";b.height="10px";document.body.appendChild(a);
d="undefined"==typeof window.devicePixelRatio?a.offsetWidth:a.offsetWidth*window.devicePixelRatio;document.body.removeChild(a);return d};a.getStyleValue=function(a,b){try{if(a&&"undefined"!=typeof window.getComputedStyle)return window.getComputedStyle(a,"").getPropertyValue(b);if(a&&"undefined"!=typeof a.currentStyle)return a.currentStyle[b]}catch(d){}return""};a.getStyleInt=function(b,e,d){b=parseInt(a.getStyleValue(b,e),10);return isNaN(b)?"number"==typeof d?d:0:b};var l=a.device={touchable:!!("ontouchstart"in
window),OS:"",formFactor:"desktop",dyPortrait:0,dyLandscape:0,version:"0",orientation:window.orientation};if(navigator&&navigator.userAgent){g=navigator.userAgent;0<=g.indexOf("iPad")&&(l.OS="iOS",l.formFactor="tablet",l.dyPortrait=l.dyLandscape=0);0<=g.indexOf("iPhone")&&(l.OS="iOS",l.formFactor="phone",l.dyPortrait=l.dyLandscape=25);if(0<=g.indexOf("Android")){l.OS="Android";l.formFactor="phone";l.dyPortrait=75;l.dyLandscape=25;try{l.version=g.match(/(?:Android\s+)(\d+\.\d+\.\d+)/)[1]}catch(n){}}0<=
g.indexOf("Windows NT")&&(l.OS="Windows",0<=g.indexOf("Touch")&&(l.formFactor="phone"),"number"==typeof navigator.msMaxTouchPoints&&0<navigator.msMaxTouchPoints&&(l.touchable=!0))}"tablet"==l.formFactor&&400>Math.min(screen.width,screen.height)&&(l.formFactor="phone");"phone"==l.formFactor&&720<Math.max(screen.width,screen.height)&&(l.formFactor="tablet");"iOS"!=l.OS||"ongesturestart"in window||"Win32"==navigator.platform||(l.OS="Android");l.browser="web";if(999>a._GetIEVersion())l.browser="ie";else{if("iOS"==
l.OS||"macosx"==l.OS.toLowerCase())l.browser="safari";/Firefox|Chrome|OPR/.test(navigator.userAgent)&&(0<=navigator.userAgent.indexOf("Firefox")&&"onmozorientationchange"in screen?l.browser="firefox":0<=navigator.userAgent.indexOf("OPR")?l.browser="opera":0<=navigator.userAgent.indexOf("Chrome")&&(l.browser="chrome"))}"desktop"==l.formFactor&&(l.touchable=!1);a.physicalDevice={touchable:!1,browser:l.browser,formFactor:"desktop",OS:l.OS};a.isTouchDevice=function(){return l.touchable};a.portraitView=
function(){return!a.landscapeView()};a.landscapeView=function(){return"undefined"==typeof window.orientation?!1:1==Math.abs(window.orientation/90)};a.getViewportScale=function(){try{if(screen.width>document.documentElement.clientWidth)return 1;var b=screen.width;a.landscapeView()?screen.width<screen.height&&(b=screen.height):screen.width>screen.height&&(b=screen.height);return Math.round(100*b/window.innerWidth)/100}catch(e){return 1}};a.barHeight=function(){var b=0;"phone"==l.formFactor&&(b=screen.height/
2-window.innerHeight-(a.landscapeView()?l.dyLandscape:l.dyPortrait));return b};a._EncodeEntities=function(a){return a.replace("&","&amp;").replace("<","&lt;").replace(">","&gt;")};a.createShim=a.createShim=function(){console.warn("The util.createShim function is deprecated, as its old functionality is no longer needed.  It and references to its previously-produced shims may be safely removed.")};a.showShim=a.showShim=function(a,b,d){console.warn("The util.showShim function is deprecated, as its old functionality is no longer needed.  It may be safely removed.")};
a.hideShim=function(a){console.warn("The util.hideShim function is deprecated, as its old functionality is no longer needed.  It may be safely removed.")};a.rgba=a.rgba=function(b,e,d,c,f){var k="transparent";if(9>a._GetIEVersion())f=Math.floor(100*f),e=e.toString(16),d=d.toString(16),c=c.toString(16),e=("00"+e).substr(-2),d=("00"+d).substr(-2),c=("00"+c).substr(-2),c=f+e+d+c,b.filter="progid:DXImageTransform.Microsoft.gradient(startColorstr=#"+c+",endColorstr=#"+c+")",b.zoom="1";else try{k="rgba("+
e+","+d+","+c+","+f+")"}catch(h){k="rgb("+e+","+d+","+c+")"}return k};a.addStyleSheet=a.addStyleSheet=function(a){var b=document.createElement("STYLE");b.type="text/css";b.styleSheet?b.styleSheet.cssText=a:b.appendChild(document.createTextNode(a));a=document.getElementsByTagName("HEAD");0<a.length?a[0].appendChild(b):document.body.appendChild(b);return b};a.removeStyleSheet=a.removeStyleSheet=function(b){if(null==b||"object"!=typeof b||"STYLE"!=b.nodeName||"undefined"==typeof b.parentNode||null==
b.parentNode)return!1;b.parentNode.removeChild(b);return!0};a.linkStyleSheet=a.linkStyleSheet=function(b){var a=document.getElementsByTagName("head");if(0<a.length){var d=document.createElement("link");d.type="text/css";d.rel="stylesheet";d.href=b;a[0].appendChild(d)}};a.addFontFaceStyleSheet=function(n){if("undefined"!=typeof n&&("undefined"==typeof n.files&&(n.files=n.source),"undefined"!=typeof n.files)){var e,d="",c="",f="",k="",h=[];for(e=0;e<b.embeddedFonts.length;e++)if(b.embeddedFonts[e]==
n.family)return;"string"==typeof n.files?h[0]=n.files:h=n.files;for(e=0;e<h.length;e++)0<h[e].indexOf(".ttf")&&(d=h[e]),0<h[e].indexOf(".woff")&&(c=h[e]),0<h[e].indexOf(".eot")&&(f=h[e]),0<h[e].indexOf(".svg")&&(k=h[e]);""!=d&&0>d.indexOf("/")&&(d=b.options.fonts+d);""!=c&&0>c.indexOf("/")&&(c=b.options.fonts+c);""!=f&&0>f.indexOf("/")&&(f=b.options.fonts+f);""!=k&&0>k.indexOf("/")&&(k=b.options.fonts+k);e="@font-face {\nfont-family:"+n.family+";\nfont-style:normal;\nfont-weight:normal;\n";if(9<=
a._GetIEVersion())if("iOS"==l.OS)if(""!=d)d=a.unCached(d),e=e+"src:url('"+d+"') format('truetype');";else return;else{f=[];"Android"==l.OS?(""!=k&&f.push("url('"+k+"') format('svg')"),""!=c&&f.push("url('"+c+"') format('woff')"),""!=d&&f.push("url('"+d+"') format('truetype')")):(""!=c&&f.push("url('"+c+"') format('woff')"),""!=d&&f.push("url('"+d+"') format('truetype')"),""!=k&&f.push("url('"+k+"') format('svg')"));if(0==f.length)return;e+="src:"+f.join(",")+";"}else if(""!=f)e=e+"src:url('"+f+"');";
else return;a.addStyleSheet(e+"\n}\n");b.embeddedFonts.push(n.family)}};a.unCached=function(b){return b};a.loadCookie=a.loadCookie=function(b){var n={};if(0<arguments.length){var d=a.loadCookie(),c;for(c in d)if(c==b){var f=unescape(d[c]).split(";");for(var k=0;k<f.length;k++){var h=f[k].split("=");n[h[0]]=1<h.length?h[1]:""}}}else if("undefined"!=typeof document.cookie&&""!=document.cookie)for(d=document.cookie.split(/;\s*/),k=0;k<d.length;k++)f=d[k].split("="),2==f.length&&(n[f[0]]=f[1]);return n};
a.saveCookie=a.saveCookie=function(b,a){var d="",c;for(c in a)d=d+c+"="+a[c]+";";a=(new Date((new Date).valueOf()+2592E6)).toGMTString();document.cookie=b+"="+escape(d)+"; path=/; expires="+a};a.toNumber=a.toNumber=function(b,a){b=parseInt(b,10);return isNaN(b)?a:b};a.toFloat=a.toFloat=function(b,a){b=parseFloat(b);return isNaN(b)?a:b};a.toNzString=a.nzString=function(b,a){var d="";1<arguments.length&&(d=a);return"undefined"==typeof b||null==b||0==b||""==b?d:""+b};a.deepCopy=function(b,g){g=g||{};
for(var d in b)"object"===typeof b[d]?(g[d]=b[d].constructor===Array?[]:{},a.deepCopy(b[d],g[d])):g[d]=b[d];return g};"indexOf"in Array||(Array.prototype.indexOf=function(b,a){for(a=a||0;a<this.length;a++)if(this[a]==b)return a;return-1});a.eventTarget=function(b){return b&&b.target?b.target:window.event?window.event.srcElement:null};a.eventType=function(b){return b&&b.type?b.type:window.event?window.event.type:""};a.alert=a.alert=function(a,g){var d=b.waiting,c=d.firstChild.childNodes;c[0].style.display=
"block";c[1].className="kmw-alert-text";c[1].innerHTML=a;c[2].style.display="none";d.style.display="block";d.dismiss=1<arguments.length?g:null};a.prepareWait=function(){var a=document.createElement("DIV"),g=document.createElement("DIV"),d=document.createElement("DIV"),c=document.createElement("DIV"),f=document.createElement("DIV");a.className="kmw-wait-background";g.className="kmw-wait-box";a.dismiss=null;d.className="kmw-wait-text";c.className="kmw-wait-graphic";f.className="kmw-alert-close";g.onmousedown=
g.onclick=function(c){"block"==f.style.display&&(a.style.display="none",a.dismiss&&a.dismiss())};g.addEventListener("touchstart",g.onclick,!1);a.onmousedown=a.onclick=function(c){c.preventDefault();c.stopPropagation()};a.addEventListener("touchstart",a.onclick,!1);g.appendChild(f);g.appendChild(d);g.appendChild(c);a.appendChild(g);document.body.appendChild(a);b.waiting=a};a.myPath=function(b){var a,d=document.getElementsByTagName("script");for(a=0;a<d.length;a++){var c=d[a];if(0<=c.src.indexOf(b))return c.src.substr(0,
c.src.lastIndexOf("/")+1)}return""};a.prependProtocol=function(a){return/^https?:/.test(a)?a:"//"==a.substr(0,2)?b.protocol+a:"/"==a.substr(0,1)?b.protocol+"/"+a:b.protocol+"//"+a};a.testString=function(b){var a=b.family;if("sample"in b&&"string"==typeof b.sample)return"BESbswy"+b.sample;var d="TamilWeb TibetanWeb LatinWeb CherokeeWeb EgyptianWeb SinhalaWeb KhmerWeb ArabicWeb BurmeseWeb LaoWeb OriyaWeb GeezWeb".split(" "),c="\u0bbe\u0bf5 \u0f7f\u0fd0 \u02b0\u02a4 \u13d0\u13c9 \ua723\uf7d3 \u0dd8\u0da3 \u17d6\u178e \u0639\u06b3 \u1038\u1024 \u0ec0\u0edd \u0b03\u0b06 \u1361\u132c".split(" ");
for(b=0;b<d.length;b++)if(a==d[b])return"BESbswy"+c[b];return"BESbswy"};a.checkFont=function(b){var g=b.family,d=document.createElement("DIV"),c=d.style,f=document.createElement("P"),k=document.createElement("P"),h=document.createElement("SPAN"),m=h.style,r=document.createElement("SPAN"),n=r.style;c.position="absolute";c.top="10px";c.left="10px";c.visibility="hidden";document.body.appendChild(d);d.appendChild(f);d.appendChild(k);f.appendChild(h);k.appendChild(r);h.setAttribute("style","font-family:monospace !important");
n.fontFamily=g+",monospace";m.fontSize=n.fontSize="24px";h.innerHTML=r.innerHTML=a.testString(b);h.offsetWidth!=r.offsetWidth&&(h.setAttribute("style","font-family:sans-serif !important"),n.fontFamily=g+",sans-serif",h.offsetWidth!=r.offsetWidth&&(h.setAttribute("style","font-family:serif !important"),n.fontFamily=g+",serif"));b=h.offsetWidth!=r.offsetWidth;f.removeChild(h);k.removeChild(r);d.removeChild(f);d.removeChild(k);document.body.removeChild(d);return b};b.isFontAvailable=function(b){return a.checkFont({family:b})};
a.checkFontDescriptor=function(b){return"undefined"==typeof b||"string"!=typeof b.family?!0:a.checkFont(b)}}();window.keyman.initialized||function(){var b=window.keyman,a=b.osk,g=b.util,l=g.device,n=b["interface"];b.debug=b.debug=function(a){if(null==b.debugElement){var c=document.createElement("DIV");var f=c.style;f.position="absolute";f.width="30%";f.maxHeight="50%";f.top="0";f.right="0";f.minHeight="50px";f.border="1px solid blue";f.whiteSpace="pre-line";f.overflowY="scroll";f=document.createElement("P");f.id="debug_output";f.style.margin="2px";c.appendChild(f);document.body.appendChild(c);b.debugElement=
f}if(null!=(f=document.getElementById("debug_output")))if(0==arguments.length)"undefined"!=typeof f.textContent?f.textContent="":f.innerHTML="";else{var c=(new Date).toTimeString().substr(3,5)+" ",d,h;for(d=0;d<arguments.length;d++){0<d&&(c+="; ");var m=arguments[d];if("object"==typeof m)if(null==m)c+="null";else{var g="";for(h in m){0<g.length&&(g+=", ");g=g+h+":";switch(typeof m[h]){case "string":case "number":case "boolean":g+=m[h];break;default:g+=typeof m[h]}if(1024<g.length){g=g.substr(0,1E3)+
"...";break}}0<g.length&&(c=c+"{"+g+"}")}else c+=m}1500<c.length&&(c=c.substr(0,1500)+" (more)");"undefined"!=typeof f.textContent?f.textContent=c+"\n"+f.textContent:f.innerHTML=c+"<br />"+f.innerHTML}};b.debugElement=null;b.addEventListener=b.addEventListener=function(b,c){return g.addEventListener("kmw."+b,c)};b.setupTouchDevice=function(){b.cancelInput=function(){b._ActiveElement=null;b.hideCaret();a.hideNow()};b.setBlur=function(c){"relatedTarget"in c&&c.relatedTarget&&("DIV"!=c.relatedTarget.nodeName||
-1==c.relatedTarget.className.indexOf("keymanweb-input"))?b.cancelInput():b.focusing||b.cancelInput()};b.setFocus=function(c){b.focusing=!0;b.focusTimer=window.setTimeout(function(){b.focusing=!1},1E3);var f=c;c?"object"==typeof c.touches&&(f=c.touches[0]):(f={clientX:0,clientY:0},f.target=b._LastActiveElement?b._LastActiveElement.kmw_ip:b.sortedInputs[0].kmw_ip);c=f.clientX;var d=f.clientY;var h=f.target;var m="SPAN"==h.nodeName?h.parentNode:null!=h.className&&0<=h.className.indexOf("keymanweb-input")?
h.firstChild:h;f=m.parentNode;b._ActiveElement!=f&&(b.hideCaret(),b._ActiveElement=f,f.focus());b._SetTargDir(f);b.useInternalKeyboard=!1;a.ready&&!a._Visible&&a._Show();if("DIV"==h.nodeName)d=g._GetAbsoluteX(m.firstChild),"rtl"==f.dir?(d+=m.firstChild.offsetWidth,m=c>d?0:1E5):m=c<d?0:1E5,b.setTextCaret(f,m),b.scrollInput(f);else{var r,h=m.childNodes[1];var e=0;var n=b.getText(f)._kmwLength();m=b.getTextCaret(f);var l=document.body.scrollTop;if("TEXTAREA"==f.base.nodeName){var u=Math.round(f.base.offsetHeight/
f.base.rows);for(r=0;16>r;r++){var v=g._GetAbsoluteY(h)-l;if(v>d&&m>e&&m!=n)n=m,m=Math.round((m+e)/2);else if(v<d-u&&m<n&&m!=e)e=m,m=Math.round((m+n)/2);else break;b.setTextCaret(f,m)}for(;g._GetAbsoluteY(h)-l>d&&m>e;)b.setTextCaret(f,--m);for(;g._GetAbsoluteY(h)-l<d-u&&m<n;)b.setTextCaret(f,++m)}if("rtl"==f.dir){for(r=0;16>r;r++){d=g._GetAbsoluteX(h);if(d<c&&m>e&&m!=n)n=m,m=Math.round((m+e)/2);else if(d>c&&m<n&&m!=e)e=m,m=Math.round((m+n)/2);else break;b.setTextCaret(f,m)}for(;g._GetAbsoluteX(h)<
c&&m>e;)b.setTextCaret(f,--m);for(;g._GetAbsoluteX(h)>c&&m<n;)b.setTextCaret(f,++m)}else{for(r=0;16>r;r++){d=g._GetAbsoluteX(h);if(d>c&&m>e&&m!=n)n=m,m=Math.round((m+e)/2);else if(d<c&&m<n&&m!=e)e=m,m=Math.round((m+n)/2);else break;b.setTextCaret(f,m)}for(;g._GetAbsoluteX(h)>c&&m>e;)b.setTextCaret(f,--m);for(;g._GetAbsoluteX(h)<c&&m<n;)b.setTextCaret(f,++m)}}c=b._ActiveKeyboard?b._ActiveKeyboard.KI:"";b._LastActiveElement&&null!=b._LastActiveElement._kmwAttachment.keyboard?(b._LastActiveElement._kmwAttachment.keyboard=
c,b._LastActiveElement._kmwAttachment.languageCode=b.getActiveLanguage()):(b.globalKeyboard=c,b.globalLanguageCode=b.getActiveLanguage());b._LastActiveElement=f;c=null==b._ActiveKeyboard?"":b._ActiveKeyboard.KI;null!=b._LastActiveElement._kmwAttachment.keyboard?b.setActiveKeyboard(b._LastActiveElement._kmwAttachment.keyboard,b._LastActiveElement._kmwAttachment.languageCode):b.setActiveKeyboard(b.globalKeyboard,b.globalLanguageCode);b._IsIEEditableIframe(f,1)&&b._IsMozillaEditableIframe(f,1)?(b._DisableInput=
0,b._JustActivatedKeymanWebUI||(b._DeadKeys=[],b._NotifyKeyboard(0,f,1)),b._JustActivatedKeymanWebUI||b._SelectionControl==f||(b._IsActivatingKeymanWebUI=0),b._JustActivatedKeymanWebUI=0,b._SelectionControl=f):b._DisableInput=1};b.caret=document.createElement("DIV");var d=b.caret.style;d.position="absolute";d.height="16px";d.width="2px";d.backgroundColor="blue";d.border="none";d.left=d.top="0px";d.display="block";d.visibility="hidden";d.zIndex="9998";b.showCaret=function(c){if(c&&c.firstChild&&!(3>
c.firstChild.childNodes.length)){var a=c.firstChild,d=b.caret.style,h=a.childNodes[1];b.caret.parentNode!=a&&a.appendChild(b.caret);d.left=h.offsetLeft+"px";d.top=h.offsetTop+"px";d.height=h.offsetHeight-1+"px";d.visibility="hidden";b.scrollBody(c);b.setScrollBar(c)}};b.setScrollBar=function(c){var b=c.childNodes[0],a=c.childNodes[1].style;(b.offsetWidth>c.offsetWidth||0>b.offsetLeft)&&"TEXTAREA"!=c.base.nodeName?(a.height="4px",a.width=c.offsetWidth/b.offsetWidth*100+"%",a.left=-b.offsetLeft/b.offsetWidth*
100+"%",a.top="0",a.visibility="visible"):b.offsetHeight>c.offsetHeight||0>b.offsetTop?(a.width="4px",a.height=c.offsetHeight/b.offsetHeight*100+"%",a.top=-b.offsetTop/b.offsetHeight*100+"%",a.left="0",a.visibility="visible"):a.visibility="hidden"};b.flashCaret=function(){if(l.touchable&&null!=b._ActiveElement){var c=b.caret.style;c.visibility="visible"!=c.visibility?"visible":"hidden"}};b.hideCaret=function(){var c=b._LastActiveElement;if(c&&null!=c.className&&0<=c.className.indexOf("keymanweb-input")){c.base.value=
b.getText(c);b.setText(c,null,1E5);var a=c.firstChild.style;"TEXTAREA"==c.base.nodeName?a.top="0":a.left="rtl"==c.base.dir?c.offsetWidth-c.firstChild.offsetWidth-8+"px":"0";b.caret.parentNode&&b.caret.parentNode.removeChild(b.caret);b.caret.style.visibility="hidden";1<c.childNodes.length&&(c.childNodes[1].style.visibility="hidden")}};b.timerId=window.setInterval(b.flashCaret,500);b.setText=function(c,a,d){if(c&&0<c.childNodes.length){var f=c.firstChild;var k=0;if(3<=f.childNodes.length){var g=f.childNodes[0],
f=f.childNodes[2];if(null===a){var e="string"==typeof g.textContent?g.textContent:g.innerText;a="string"==typeof f.textContent?f.textContent:f.innerText;a=e+a}0>d&&(d=0);k=a._kmwLength();if(null===d||d>k)d=k;e=a._kmwSubstr(0,d);a=a._kmwSubstr(d);"string"==typeof g.textContent?g.textContent=e:g.innerText=e;"string"==typeof f.textContent?f.textContent=a:f.innerText=a}}b.updateBaseElement(c,k)};b.updateBaseElement=function(c,a){c.base.value=b.getText(c);c.style.backgroundColor=0==a?"transparent":window.getComputedStyle(c.base,
null).backgroundColor;"iOS"==l.OS&&(c.base.style.visibility=0==a?"visible":"hidden")};b.getText=function(c){return null==c?"":"string"==typeof c.textContent?c.textContent:c.innerText};b.getTextBeforeCaret=function(c){if(c&&1<c.childNodes.length&&(c=c.firstChild,0<c.childNodes.length)){c=c.childNodes[0];if("textContent"in c)return c.textContent;if("innerText"in c)return c.innerText}return""};b.setTextBeforeCaret=function(c,a){if(c&&0<c.childNodes.length){var f=c.firstChild;var d=0;1<f.childNodes.length&&
(d=f.childNodes[0],f=f.childNodes[2],"TEXTAREA"!=c.base.nodeName&&(a=a.replace(/\s+$/," ")),"textContent"in d?d.textContent=a:"innerText"in d&&(d.innerText=a),d=a.length,"textContent"in f?d+=f.textContent.length:"innerText"in f&&(d+=f.innerText.length))}b.updateBaseElement(c,d);b.scrollInput(c)};b.getTextCaret=function(c){return b.getTextBeforeCaret(c)._kmwLength()};b.setTextCaret=function(c,a){b.setText(c,null,a);b.showCaret(c)};b.dragInput=function(c){c.preventDefault();c.stopPropagation();var a=
"object"==typeof c.targetTouches?c.targetTouches[0].target:c.target;if(null!=a){if(null==a.className||0>a.className.indexOf("keymanweb-input"))a=a.parentNode;if(null==a.className||0>a.className.indexOf("keymanweb-input"))a=a.parentNode;if(!(null==a.className||0>a.className.indexOf("keymanweb-input"))){var d="object"==typeof c.touches?c.touches[0].screenX:c.screenX,h="object"==typeof c.touches?c.touches[0].screenY:c.screenY;if("undefined"==typeof b.firstTouch||null==b.firstTouch)b.firstTouch={x:d,
y:h};else{var m=b.firstTouch.x,r=b.firstTouch.y;c=a.firstChild;if("TEXTAREA"==a.base.nodeName){if(d=parseInt(c.style.top,10),isNaN(d)&&(d=0),m=r-h,-4>m||4<m)c.style.top=(d<m?d-m:0)+"px",b.firstTouch.y=h}else{h=parseInt(c.style.left,10);isNaN(h)&&(h=0);var e=m-d;if(-4>e||4<e)m=0,r=g._GetAbsoluteX(a)+a.offsetWidth-c.offsetWidth-32,"rtl"==a.base.dir?m=16:r-=24,h-=e,h>m&&(h=m),h<r&&(h=r),c.style.left=h+"px",b.firstTouch.x=d}}b.setScrollBar(a)}}};b.scrollInput=function(c){if(c&&c.firstChild&&null!=c.className&&
!(0>c.className.indexOf("keymanweb-input"))){var a=c.firstChild;if(!(3>a.childNodes.length)){var d=a.childNodes[1],h=g._GetAbsoluteX(d),d=g._GetAbsoluteY(d),m=g._GetAbsoluteX(c),r=g._GetAbsoluteY(c),e=parseInt(a.style.left,10),n=parseInt(a.style.top,10),l=0,u=0;isNaN(e)&&(e=0);isNaN(n)&&(n=0);"TEXTAREA"==c.base.nodeName?(h=Math.round(c.offsetHeight/c.base.rows),d<r&&(u=d-r),d>r+c.offsetHeight-h&&(u=d-r-c.offsetHeight+h),0!=u&&(a.style.top=(n<u?n-u:0)+"px")):(h<m+8&&(l=h-m-12),h>m+c.offsetWidth-12&&
(l=h-m-c.offsetWidth+12),0!=l&&(a.style.left=(e<l?e-l:0)+"px"));b.showCaret(c)}}};b.scrollBody=function(c){if(c&&null!=c.className&&!(0>c.className.indexOf("keymanweb-input"))&&a.ready){c=c.firstChild.childNodes[1];var b=g._GetAbsoluteY(c),d=window.pageYOffset;b<d?c=b-d:(c=b-d-(window.innerHeight-a._Box.offsetHeight-c.offsetHeight-2),0>c&&(c=0));0!=c&&window.scrollTo(0,c+window.pageYOffset)}};b.updateInput=function(c){var a=c.style,b=c.base,d=window.getComputedStyle(b,null),m=parseInt(d.marginLeft,
10),r=parseInt(d.marginTop,10),e=g._GetAbsoluteX(b),n=g._GetAbsoluteY(b),q=c.offsetParent;q&&(e-=g._GetAbsoluteX(q),n-=g._GetAbsoluteY(q));isNaN(m)&&(m=0);isNaN(r)&&(r=0);a.left=e-m+"px";a.top=n-r+"px";"undefined"!=typeof d.MozBoxSizing&&(a.left=e+"px",a.top=n+"px");var m=b.offsetWidth,b=b.offsetHeight,r=parseInt(d.paddingLeft,10),e=parseInt(d.paddingRight,10),n=parseInt(d.paddingTop,10),q=parseInt(d.paddingBottom,10),u=parseInt(d.borderLeft,10),v=parseInt(d.borderRight,10),z=parseInt(d.borderTop,
10),C=parseInt(d.borderBottom,10),D="undefined";"undefined"!=typeof d.boxSizing?D=d.boxSizing:"undefined"!=typeof d.MozBoxSizing&&(D=d.MozBoxSizing);"content-box"==D&&(isNaN(r)||(m-=r),isNaN(e)||(m-=e),isNaN(u)||(m-=u),isNaN(v)||(m-=v),isNaN(n)||(b-=n),isNaN(q)||(b-=q),isNaN(z)||(b-=z),isNaN(C)||(b-=C));"Android"==l.OS&&("undefined"!=typeof d.MozBoxSizing?(a.paddingTop=n+1+"px",a.paddingLeft=r+"px","TEXTAREA"==c.base.nodeName?a.marginTop="1px":a.marginLeft="1px",m--,b--):(m++,b++));a.width=m+"px";
a.height=b+"px"};b.enableTouchElement=function(c){if("iframe"==c.tagName.toLowerCase())return!1;if(b.isKMWDisabled(c))return b.setupNonKMWTouchElement(c),!1;c.kmwInput=!0;c.removeEventListener("touchstart",b.nonKMWTouchHandler);if(c.kmw_ip){if(-1!=b.inputList.indexOf(c.kmw_ip))return!1;b.inputList.push(c.kmw_ip);console.log("Unexpected state - this element's simulated input DIV should have been removed from the page!");return!0}var a=document.createElement("DIV");a.base=a.base=c;a._kmwAttachment=
c._kmwAttachment;b.enableInputElement(a,!0);c.kmw_ip=a;c.disabled=!0;a.className="keymanweb-input";a.dir=a.base.dir;var d=document.createElement("DIV");var h=window.getComputedStyle(a.base,null);c=a.style;c.overflow="hidden";c.position="absolute";c.border="hidden";c.border="none";c.borderRadius="5px";var m=document.createElement("DIV");var g=m.style;g.position="absolute";g.height=g.width="4px";g.left=g.top="0";g.display="block";g.visibility="hidden";g.backgroundColor="#808080";g.borderRadius="2px";
g=document.createElement("SPAN");var e=document.createElement("SPAN");var n=document.createElement("SPAN");g.innerHTML=e.innerHTML=n.innerHTML="";g.className=e.className=n.className="keymanweb-font";d.appendChild(g);d.appendChild(n);d.appendChild(e);a.appendChild(d);a.appendChild(m);d=d.style;d.position="absolute";m=g.style;var q=e.style;n=n.style;m.border=q.border="none";m.height=q.height="100%";m.fontFamily=q.fontFamily=d.fontFamily=h.fontFamily;"input"!=a.base.nodeName.toLowerCase()||isNaN(parseInt(h.height,
10))||(m.lineHeight=q.lineHeight=h.height);n.border="1px solid red";n.visibility="hidden";n.marginLeft=n.marginRight="-1px";c.padding="8px";d.padding="0px 2px";d.backgroundColor="Android"==l.OS&&"transparent"==h.backgroundColor?"#fff":h.backgroundColor;a.tabIndex="0";a.style.msTouchAction="none";a.addEventListener("touchstart",b.setFocus);a.onmspointerdown=function(c){c.preventDefault();c.stopPropagation();return b.setFocus(c)};a.addEventListener("touchend",function(c){c.stopPropagation()});a.onmspointerup=
function(c){c.stopPropagation()};a.addEventListener("touchmove",b.dragInput,!1);a.onmspointermove=b.dragInput;a.onblur=b.setBlur;"textarea"==a.base.nodeName.toLowerCase()?g.style.whiteSpace=e.style.whiteSpace="pre-wrap":g.style.whiteSpace=e.style.whiteSpace="pre";a.base.parentNode.appendChild(a);b.updateInput(a);c=a.style;c.color=h.color;c.fontFamily=h.fontFamily;c.fontSize=h.fontSize;c.fontWeight=h.fontWeight;c.textDecoration=h.textDecoration;c.padding=h.padding;c.margin=h.margin;c.border=h.border;
c.borderRadius=h.borderRadius;"webkitTapHighlightColor"in c&&(c.webkitTapHighlightColor="rgba(0,0,0,0)");"textarea"==a.base.nodeName.toLowerCase()?(2==a.base.rows&&(g=parseInt(h.height,10)-parseInt(h.paddingTop,10)-parseInt(h.paddingBottom,10),h=parseInt(h.fontSize,10),h=Math.round(g/h),h>a.base.rows+1&&(a.base.rows=h)),d.width=c.width,d.minHeight=c.height):(d.minWidth=c.width,d.height=c.height);a.base.style.visibility="hidden";(function(c){c._kmwResizeHandler=function(a){window.setTimeout(function(){b.updateInput(c)},
1)};c.base.addEventListener("resize",c._kmwResizeHandler,!1)})(a);b.setText(a,a.base.value,null);return!0};b.disableTouchElement=function(c){if("iframe"!=c.tagName.toLowerCase()){if(c.kmw_ip){var a=b.inputList.indexOf(c.kmw_ip);-1!=a&&b.inputList.splice(a,1);c.style.visibility="visible";c.disabled=!1;c.removeEventListener("resize",c.kmw_ip._kmwResizeHandler);b.disableInputElement(c.kmw_ip);c.parentNode.removeChild(c.kmw_ip);delete c.kmw_ip}b.setupNonKMWTouchElement(c)}};b.nonKMWTouchHandler=function(c){b.focusing=
!1;clearTimeout(b.focusTimer);a.hideNow()};b.setupNonKMWTouchElement=function(c){c.addEventListener("touchstart",b.nonKMWTouchHandler,!1);b.isAttached(c)&&(c._kmwAttachment.touchEnabled=!1)}};b.enableInputElement=function(a,c){c=c?a.base:a;b.isKMWDisabled(c)||("iframe"==a.tagName.toLowerCase()?b._AttachToIframe(a):(c.className=c.className?c.className+" keymanweb-font":"keymanweb-font",b.inputList.push(a),g.attachDOMEvent(c,"focus",b._ControlFocus),g.attachDOMEvent(c,"blur",b._ControlBlur),a.onkeypress=
b._KeyPress,a.onkeydown=b._KeyDown,a.onkeyup=b._KeyUp))};b.disableInputElement=function(a,c){var d=c?a.base:a;if("iframe"==a.tagName.toLowerCase())b._DetachFromIframe(a);else{0<d.className.indexOf("keymanweb-font")&&!c&&(d.className=d.className.replace("keymanweb-font","").trim());var k=b.inputList.indexOf(a);-1<k&&b.inputList.splice(k,1);c||(g.detachDOMEvent(d,"focus",b._ControlFocus),g.detachDOMEvent(d,"blur",b._ControlBlur));a.onkeypress=null;a.onkeydown=null;a.onkeyup=null}c&&(b.inputList.push(d),
d.onkeypress=b._KeyPress,d.onkeydown=b._KeyDown,d.onkeyup=b._KeyUp)};b.getBaseFont=function(){var a=document.getElementsByTagName("INPUT"),c=document.getElementsByTagName("TEXTAREA"),b=0;0==a.length&&0==c.length?b=0:0<a.length&&0==c.length?b=1:0==a.length&&0<c.length?b=2:a[0].offsetTop<c[0].offsetTop?b=1:a[0].offsetTop>c[0].offsetTop?b=2:a[0].offsetLeft<c[0].offsetLeft?b=1:a[0].offsetLeft>c[0].offsetLeft&&(b=2);switch(b){case 0:case 1:g.getStyleValue(a[0],"font-family");case 2:var k=g.getStyleValue(c[0],
"font-family")}if("undefined"==typeof k||"monospace"==k)k="Arial,sans-serif";return k};b.setFocus=function(a){};b.timerID=null;b.getText=function(a){return""};b.setText=function(a,c,b){};b.getTextBeforeCaret=function(){return""};b.setTextBeforeCaret=function(a){};b.getTextCaret=function(a){return 0};b.setTextCaret=function(a,c){};b.hideCaret=function(){};b.flashCaret=function(){};b.updateInput=function(a){};b.resetContext=b.resetContext=function(){a.layerId="default";b._DeadkeyResetMatched();b._DeadkeyDeleteMatched();
b.cachedContext.reset();b._ResetVKShift();a._Show()};b.addKeyboards=function(a){0==arguments.length?b.keymanCloudRequest("",!1):b.addKeyboardArray(arguments)};b.addKeyboardArray=function(a){var c;if(!b.initialized)for(var d=0;d<a.length;d++)b.deferredStubs.push(a[d]);else if(0!=a.length){var k,h=c="";b.cloudList=[];var m=function(a){var c;if(null==b.findStub(a.id,a.language)){for(c=0;c<b.cloudList.length;c++)if(b.cloudList[c].id==a.id&&b.cloudList[c].language==a.language)return!1;return!0}return!1};
for(d=0;d<a.length;d++){if("string"==typeof a[d]&&0<a[d].length){var g=a[d].split("@");var e=[""];"english"==g[0].toLowerCase()&&(g[0]="us");1<g.length&&(e=g[1].split(","));for(k=0;k<e.length;k++)c={id:g[0]},""!=e[k]&&(c.language=e[k]),2<g.length&&(c.version=g[2]),m(c)&&b.cloudList.push(c)}if("object"==typeof a[d]&&null!=a[d])if("string"==typeof a[d].filename)b.addStub(a[d])||alert("To use a custom keyboard, you must specify file name, keyboard name, language, language code and region code.");else if(a[d].language&&
(console.warn("The 'language' property for keyboard stubs has been deprecated.  Please use the 'languages' property instead."),a[d].languages=a[d].language),e=a[d].languages,"number"==typeof e.length)for(k=0;k<e.length;k++)c={id:a[d].id,language:a[d].languages[k].id},m(c)&&b.cloudList.push(c);else c={id:a[d].id,language:a[d].languages[k].id},m(c)&&b.cloudList.push(c)}if(0!=b.cloudList.length){c="&keyboardid=";for(d=0;d<b.cloudList.length;d++)a=b.cloudList[d],k=a.id,m=e="","string"==typeof a.language&&
""!=a.language&&(e=a.language),"string"==typeof a.version&&""!=a.version&&(m=a.version),""!=e?(k=k+"@"+e,""!=m&&(k=k+"@"+m)):""!=m&&(k=k+"@@"+m),c=c+h+k,h=",";b.keymanCloudRequest(c,!1)}}};b.keymanCloudRequest=function(a,c){var d="https://r.keymanweb.com/api/4.0/",k=g._CreateElement("SCRIPT"),d=d+(1<arguments.length&&c?"languages":"keyboards")+"?jsonp=keyman.register";var h="&timerid="+window.setTimeout(function(){b.serverUnavailable(a)},1E4);k.charset="UTF-8";k.src=d+a+h;k.type="text/javascript";
try{document.body.appendChild(k)}catch(m){document.getElementsByTagName("head")[0].appendChild(k)}};b.addKeyboardsForLanguage=function(a){b.addLanguageKeyboards(arguments)};b.addLanguageKeyboards=function(a){var c,d=b.languageList,k;if(null==d){var h=0==b.languagesPending.length;for(c=0;c<a.length;c++)b.languagesPending.push(a[c]);h&&b.keymanCloudRequest("",!0)}else{var m="";for(c=0;c<a.length;c++){var e=a[c].toLowerCase();(k="$"==e.substr(-1,1))&&(e=e.substr(0,e.length-1));for(h=0;h<d.length;h++)if(e==
d[h].name.toLowerCase()){""!=m&&(m+=",");m=m+"@"+d[h].id;k&&(m+="$");break}}""==m?g.alert("No keyboards are available for "+a[0]+". Does it have another language name?"):b.keymanCloudRequest("&keyboardid="+m,!1)}};b.addStub=function(a){if("string"!=typeof a.id)return!1;"undefined"!=typeof a.language&&(console.warn("The 'language' property for keyboard stubs has been deprecated.  Please use the 'languages' property instead."),a.languages=a.language);if("undefined"==typeof a.languages)return!1;"string"!=
typeof a.name&&(a.name=a.id.replace("_"," "),a.name=a.name.substr(0,1).toUpperCase()+a.name.substr(1));var c=a.languages,d=[];"undefined"==typeof c.length?d[0]=c:d=c;for(var k={keyboardBaseUri:b.options.keyboards,fontBaseUri:b.options.fonts},c=0;c<d.length;c++)b.mergeStub(a,d[c],k);return!0};b.findStub=function(a,c){var d,k=b._KeyboardStubs;for(d=0;d<k.length;d++)if(k[d].KI=="Keyboard_"+a&&k[d].KLC==c)return k[d];return null};b.regions="World;Africa;Asia;Europe;South America;North America;Oceania;Central America;Middle East".split(";");
b.regionCodes="un af as eu sa na oc ca me".split(" ");b.mergeStub=function(a,c,f){var d=b.findStub(a.id,c.id);null==d&&(d={KI:"Keyboard_"+a.id,KLC:c.id},b._KeyboardStubs.push(d));var h=c.region,m=0;if("number"==typeof h)m=1>h||9<h?0:h-1;else if("string"==typeof h)for(var g=2==h.length?b.regionCodes:b.regions,e=0;e<g.length;e++)if(h.toLowerCase()==g[e].toLowerCase()){m=e;break}"undefined"==typeof d.KL&&(d.KL=c.name);"undefined"==typeof d.KR&&(d.KR=b.regions[m]);"undefined"==typeof d.KRC&&(d.KRC=b.regionCodes[m]);
"undefined"==typeof d.KN&&(d.KN=a.name);"undefined"==typeof d.KF&&(h=/^(([.]\/)|([.][.]\/)|(\/))|(:)/,d.KF=a.filename,h.test(d.KF)||(d.KF=f.keyboardBaseUri+d.KF));a=f.fontBaseUri;""!=b.options.fonts?(a=b.options.fonts,h=/^https?:/,h.test(a)||(a="//"==a.substr(0,2)?b.protocol+a:"/"==a.substr(0,1)?b.rootPath+a.substr(1):b.rootPath+a)):b.options.fonts=a;"undefined"==typeof d.KFont&&"undefined"!=typeof c.font&&(f=d.KFont=c.font,f.files=f.source,f.path=a);"undefined"==typeof d.KOskFont&&"undefined"!=typeof c.oskFont&&
(f=d.KOskFont=c.oskFont,f.files=f.source,f.path=a);b.doKeyboardRegistered(d.KI,d.KL,d.KN,d.KLC)};b.registerLanguagesForKeyboard=function(a,c,f){var d,h=0;var m="";if("undefined"!=typeof a)if("string"==typeof c.keyboardid&&(m=c.keyboardid.split(",")[f]),"number"==typeof a.length)if(1==a.length||"$"==m.substr(-1,1)||""==m)for(m=0;m<a.length;m++)b.registerLanguagesForKeyboard(a[m],c,f);else{for(m=0;m<a.length;m++){var g=a[m].id.toLowerCase();"us"==g&&(g="english");for(d=0;d<a[m].languages.length;d++)if(g==
a[m].languages[d].name.toLowerCase()){h=m;break}}b.registerLanguagesForKeyboard(a[h],c,f)}else if(f=m.split("@")[1],"string"==typeof f&&(f=f.replace(/\$$/,"")),h=a.languages,"undefined"!=typeof h)if("number"==typeof h.length)for(m=0;m<h.length;m++)"undefined"!=typeof f&&h[m].id!=f||b.mergeStub(a,h[m],c);else b.mergeStub(a,h,c)};b.register=function(a){var c=a.options;a.timerid&&window.clearTimeout(a.timerid);if("string"==typeof a.error)c="","string"==typeof a.keyboardid&&(c=a.keyboardid.substr(0,1).toUpperCase()+
a.keyboardid.substr(1)),b.serverUnavailable(c+" keyboard not found.");else if("undefined"!=typeof c&&"undefined"!=typeof c.context)if("keyboard"==c.context){var d=a.keyboard;if("number"==typeof d.length)for(a=0;a<d.length;a++)b.registerLanguagesForKeyboard(d[a],c,a);else b.registerLanguagesForKeyboard(d,c,0)}else"language"==c.context&&(b.languageList=a.languages,b.languagesPending&&b.addLanguageKeyboards(b.languagesPending),b.languagesPending=[])};b.serverUnavailable=function(a){g.alert(""==a?"Unable to connect to Keyman Cloud server!":
a);b.warned=!0};b.removeKeyboards=function(a){if(0==arguments.length)return!1;var c,d,k=b._KeyboardStubs,h=!0,m=!1,g=!1;for(c=0;c<arguments.length;c++){for(d=k.length-1;0<=d;d--)if("Keyboard_"+arguments[c]==k[d].KI&&1<k.length){"Keyboard_"+arguments[c]==b.getActiveKeyboard()&&(m=!0);g=!0;k.splice(d,1);break}0>d&&(h=!1)}m&&(b._SetActiveKeyboard(k[0].KI,k[0].KLC,!0),b._JustActivatedKeymanWebUI=1);g&&b.doKeyboardUnregistered();return h};if(document.selection){var e=navigator.appVersion;"undefined"==
typeof document.createEventObject&&(0<=e.indexOf("MSIE 5.0")||0<=e.indexOf("MSIE 4.0")||0<=e.indexOf("MSIE 3.0"))?b.legacy=1:0<=e.indexOf("MSIE 6.0")?b._IE=6:0<=e.indexOf("MSIE 7.0")?b._IE=7:0<=e.indexOf("MSIE 8.0")&&(b._IE=8);b._IE&&"BackCompat"==document.compatMode&&(b._IE=6)}a._BaseLayout="undefined"!==typeof window.KeymanWeb_BaseLayout?window.KeymanWeb_BaseLayout:"us";b._BrowserIsSafari=0<=navigator.userAgent.indexOf("AppleWebKit");b._GetEventObject=function(a){if(!a&&(a=window.event,!a)){var c=
b._GetLastActiveElement();if(c){if(c=c.ownerDocument)c=c.parentWindow;if(!c)return null;a=c.event}}return a};b._push=function(a,c){a.push?a.push(c):a=a.concat(c);return a};b.attachToControl=b.attachToControl=function(a){b.isAttached(a)||(b.isKMWInput(a)?(b.setupElementAttachment(a),b.isKMWDisabled(a)?l.touchable&&b.setupNonKMWTouchElement(a):l.touchable?b.enableTouchElement(a):b.enableInputElement(a)):l.touchable&&b.setupNonKMWTouchElement(a))};b.detachFromControl=b.detachFromControl=function(a){b.isAttached(a)&&
(b.isKMWInput(a)&&(b.isKMWDisabled(a)||b._DisableControl(a)),b.clearElementAttachment(a))};b._AttachToIframe=function(a){try{var c=a.contentWindow.document;c&&(c.parentWindow?"on"==c.designMode.toLowerCase()||c.body.isContentEditable?(g.attachDOMEvent(a,"focus",b._ControlFocus),g.attachDOMEvent(a,"blur",b._ControlBlur),g.attachDOMEvent(c,"keydown",b._KeyDown),g.attachDOMEvent(c,"keypress",b._KeyPress),g.attachDOMEvent(c,"keyup",b._KeyUp),b.legacy||(g.attachDOMEvent(c,"selectionchange",b._SelectionChange),
b._SelectionChange())):b._SetupDocument(c):"on"==c.designMode.toLowerCase()?(g.attachDOMEvent(c,"focus",b._ControlFocus),g.attachDOMEvent(c,"blur",b._ControlBlur),g.attachDOMEvent(c,"keydown",b._KeyDown),g.attachDOMEvent(c,"keypress",b._KeyPress),g.attachDOMEvent(c,"keyup",b._KeyUp)):b._SetupDocument(c))}catch(f){}};b._DetachFromIframe=function(a){try{var c=a.contentWindow.document;c&&(c.parentWindow?"on"==c.designMode.toLowerCase()||c.body.isContentEditable?(g.detachDOMEvent(a,"focus",b._ControlFocus),
g.detachDOMEvent(a,"blur",b._ControlBlur),g.detachDOMEvent(c,"keydown",b._KeyDown),g.detachDOMEvent(c,"keypress",b._KeyPress),g.detachDOMEvent(c,"keyup",b._KeyUp),b.legacy||(g.detachDOMEvent(c,"selectionchange",b._SelectionChange),b._SelectionChange())):b._ClearDocument(c):"on"==c.designMode.toLowerCase()?(g.detachDOMEvent(c,"focus",b._ControlFocus),g.detachDOMEvent(c,"blur",b._ControlBlur),g.detachDOMEvent(c,"keydown",b._KeyDown),g.detachDOMEvent(c,"keypress",b._KeyPress),g.detachDOMEvent(c,"keyup",
b._KeyUp)):b._ClearDocument(c))}catch(f){}};b.GetEnabled=function(){return b._Enabled};b.SetEnabled=function(a){a=a?1:0;b._Enabled!=a&&(b._Enabled=a,!a&&b.HideInterface&&b.HideInterface())};b.disableControl=b.disableControl=function(a){b.isAttached(a)||console.warn("KeymanWeb is not attached to element "+a);var c=a.className;0>c.indexOf("kmw-disabled")&&(a.className=c?c+" kmw-disabled":"kmw-disabled")};b.enableControl=b.enableControl=function(a){b.isAttached(a)||console.warn("KeymanWeb is not attached to element "+
a);var c=a.className;0<=c.indexOf("kmw-disabled")&&(a.className=c.replace("kmw-disabled","").trim())};b._DisableControl=function(a){if(b.isAttached(a)){if(b._LastActiveElement==a||b._LastActiveElement==a.kmw_ip)b._LastActiveElement=null,b.setActiveKeyboard(b.globalKeyboard,b.globalLanguageCode),b.osk._Hide();l.touchable?(b.disableTouchElement(a),b.setupNonKMWTouchElement(a),window.setTimeout(function(){b.listInputs();for(var a=0;a<b.sortedInputs.length;a++)b.sortedInputs[a].kmw_ip&&b.updateInput(b.sortedInputs[a].kmw_ip)},
1)):b.listInputs();b.disableInputElement(a)}};b._EnableControl=function(a){b.isAttached(a)&&(l.touchable?(b.enableTouchElement(a),window.setTimeout(function(){b.listInputs();for(var a=0;a<b.sortedInputs.length;a++)b.sortedInputs[a].kmw_ip&&b.updateInput(b.sortedInputs[a].kmw_ip)},1)):b.enableInputElement(a))};b.setKeyboardForControl=b.setKeyboardForControl=function(a,c,f){null!==c&&void 0!==c?0>c.indexOf("Keyboard_")&&""!=c&&(c="Keyboard_"+c):f=null;"iframe"==a.tagName.toLowerCase()?console.warn("'keymanweb.setKeyboardForControl' cannot set keyboard on iframes."):
b.isAttached(a)?(a._kmwAttachment.keyboard=c,a._kmwAttachment.languageCode=f,b._LastActiveElement!=a&&b._LastActiveElement!=a.kmw_ip||!b._LastActiveElement||null!=c&&null!=f&&b.setActiveKeyboard(c,f)):console.error("KeymanWeb is not attached to element "+a)};b.getKeyboardForControl=b.getKeyboardForControl=function(a){if(b.isAttached(a))return a._kmwAttachment.keyboard;console.error("KeymanWeb is not attached to element "+a);return null};b.focusLastActiveElement=b._FocusLastActiveElement=function(){b._LastActiveElement&&
(b._JustActivatedKeymanWebUI=1,b._IsMozillaEditableIframe(b._LastActiveElement,0)?b._LastActiveElement.defaultView.focus():b._LastActiveElement.focus&&b._LastActiveElement.focus())};b.getLastActiveElement=b._GetLastActiveElement=function(){return b._LastActiveElement};b.setActiveElement=b.setActiveElement=function(a,c){"string"==typeof a&&(a=document.getElementById(a));b._ActiveElement=b._LastActiveElement=a;1<arguments.length&&c&&(l.touchable?b.setFocus():b.focusLastActiveElement())};b.getUIState=
b.getUIState=function(){var a={};a.activationPending=a.activationPending=b._IsActivatingKeymanWebUI;a.activated=a.activated=b._JustActivatedKeymanWebUI;return a};b.activatingUI=function(a){b._IsActivatingKeymanWebUI=a?1:0};b._ControlFocus=function(d){if(!b._Enabled)return!0;d=b._GetEventObject(d);if(!d)return!0;if(d.target)d=d.target;else if(d.srcElement)d=d.srcElement;else return!0;if(l.touchable&&(null==d.className||0>d.className.indexOf("keymanweb-input")))return!0;var c=d.nodeName.toLowerCase();
if("input"==c){if(c=d.type.toLowerCase(),"text"!=c&&"search"!=c)return!0}else if((l.touchable||!d.isContentEditable)&&"textarea"!=c)return!0;b._ActiveElement=d;3==d.nodeType&&(d=d.parentNode);c=d;l.touchable&&(null==d.className||0>d.className.indexOf("keymanweb-input"))&&b.scrollBody(d);"IFRAME"==d.tagName&&(b._AttachToIframe(d),d=d.contentWindow.document);var f=b._LastActiveElement;b._LastActiveElement=d;var k=null==b._ActiveKeyboard?"":b._ActiveKeyboard.KI;null!=b._LastActiveElement._kmwAttachment.keyboard?
b._JustActivatedKeymanWebUI?(b._LastActiveElement._kmwAttachment.keyboard=k,b._LastActiveElement._kmwAttachment.languageCode=b.getActiveLanguage()):b.setActiveKeyboard(b._LastActiveElement._kmwAttachment.keyboard,b._LastActiveElement._kmwAttachment.languageCode):f&&(b._JustActivatedKeymanWebUI?(b.globalKeyboard=k,b.globalLanguageCode=b.getActiveLanguage()):b.setActiveKeyboard(b.globalKeyboard,b.globalLanguageCode));if(!b._IsIEEditableIframe(d,1)||!b._IsMozillaEditableIframe(d,1))return b._DisableInput=
1,!0;b._DisableInput=0;b._JustActivatedKeymanWebUI||(b._DeadKeys=[],b._NotifyKeyboard(0,d,1));b._JustActivatedKeymanWebUI||b._SelectionControl==d||(b._IsActivatingKeymanWebUI=0);b._JustActivatedKeymanWebUI=0;b._SelectionControl=d;d._KeymanWebSelectionStart=d._KeymanWebSelectionEnd=null;b._SetTargDir(d);b.doControlFocused(c,b._LastActiveElement);l.touchable?a._Enabled=1:a.ready&&(b.isCJK()&&(a._Enabled=1),a._Enabled?a._Show():a._Hide(!1));return!0};b._IsIEEditableIframe=function(a,c){var b,d=a&&(b=
a.tagName)&&"body"==b.toLowerCase()&&(b=a.ownerDocument)&&b.parentWindow;return!c&&d||c&&(!d||a.isContentEditable)};b._IsMozillaEditableIframe=function(a,c){var b;a=a&&(b=a.defaultView)&&b.frameElement;return!c&&a||c&&(!a||"on"==b.document.designMode.toLowerCase())};b._ControlBlur=function(d){if(!b._Enabled)return!0;d=b._GetEventObject(d);if(!d)return!0;if(d.target)var c=d.target;else if(d.srcElement)c=d.srcElement;else return!0;b._ActiveElement=null;l.touchable&&b.hideCaret();3==c.nodeType&&(c=c.parentNode);
"IFRAME"==c.tagName&&(c=c.contentWindow.document);c.setSelectionRange&&(c._KeymanWebSelectionStart=c.value._kmwCodeUnitToCodePoint(c.selectionStart),c._KeymanWebSelectionEnd=c.value._kmwCodeUnitToCodePoint(c.selectionEnd));var f=b._ActiveKeyboard?b._ActiveKeyboard.KI:"";b._LastActiveElement&&null!=b._LastActiveElement._kmwAttachment.keyboard?(b._LastActiveElement._kmwAttachment.keyboard=f,b._LastActiveElement._kmwAttachment.languageCode=b.getActiveLanguage()):(b.globalKeyboard=f,b.globalLanguageCode=
b.getActiveLanguage());b._LastActiveElement=c;b._JustActivatedKeymanWebUI=0;b._IsActivatingKeymanWebUI||b._NotifyKeyboard(0,c,0);d=b._GetEventObject(d);b.doControlBlurred(c,d,b._IsActivatingKeymanWebUI);a.ready&&!b._IsActivatingKeymanWebUI&&a._Hide(!1);return!0};b.doControlBlurred=function(a,c,b){var d={};d.target=a;d.event=c;d.isActivating=b;return g.callEvent("kmw.controlblurred",d)};b.doControlFocused=function(a,c){var b={};b.target=a;b.activeControl=c;return g.callEvent("kmw.controlfocused",b)};
b.doKeyboardRegistered=function(a,c,b,k){return g.callEvent("kmw.keyboardregistered",{internalName:a,language:c,keyboardName:b,languageCode:k})};b.doKeyboardUnregistered=function(){return g.callEvent("kmw.keyboardregistered",{})};b.doKeyboardLoaded=function(a){var c={};c.keyboardName=a;return g.callEvent("kmw.keyboardloaded",c)};b.doBeforeKeyboardChange=function(a,c){var b={};b.internalName=a;b.languageCode=c;return g.callEvent("kmw.beforekeyboardchange",b)};b.doKeyboardChange=function(a,c,b){var d=
{};d.internalName=a;d.languageCode=c;d.indirect=2<arguments.length?b:!1;return g.callEvent("kmw.keyboardchange",d)};b.doUnloadOSK=function(){return g.callEvent("kmw.unloadosk",{})};b.doLoadUI=function(){return g.callEvent("kmw.loaduserinterface",{})};b.doUnloadUI=function(){return g.callEvent("kmw.unloaduserinterface",{})};b._BubbledFocus=function(a){};window.addEventListener&&window.addEventListener("focus",b._BubbledFocus,!0);b._GetEventKeyCode=function(a){return a.keyCode?a.keyCode:a.which?a.which:
null};b._GetKeyEventProperties=function(a,c){c={};a=b._GetEventObject(a);if(!a||!0===a.cancelBubble)return null;if(a.target)c.Ltarg=a.target;else if(a.srcElement)c.Ltarg=a.srcElement;else return null;3==c.Ltarg.nodeType&&(c.Ltarg=c.Ltarg.parentNode);c.Lcode=b._GetEventKeyCode(a);if(null==c.Lcode)return null;var f=b.osk,d=b.modStateFlags,h=!1,m=!1;switch(c.Lcode){case f.keyCodes.K_CTRL:case f.keyCodes.K_LCTRL:case f.keyCodes.K_RCTRL:case f.keyCodes.K_CONTROL:case f.keyCodes.K_LCONTROL:case f.keyCodes.K_RCONTROL:h=
!0;break;case f.keyCodes.K_LMENU:case f.keyCodes.K_RMENU:case f.keyCodes.K_ALT:case f.keyCodes.K_LALT:case f.keyCodes.K_RALT:m=!0}var g=0|(a.shiftKey?16:0);a.ctrlKey&&(g|=0!=a.location&&h?1==a.location?f.modifierCodes.LCTRL:f.modifierCodes.RCTRL:d&3);a.altKey&&(g|=0!=a.location&&m?1==a.location?f.modifierCodes.LALT:f.modifierCodes.RALT:d&12);c.Lstates=0;a.getModifierState("CapsLock")?c.Lstates=f.modifierCodes.CAPS:c.Lstates=f.modifierCodes.NO_CAPS;a.getModifierState("NumLock")?c.Lstates|=f.modifierCodes.NUM_LOCK:
c.Lstates|=f.modifierCodes.NO_NUM_LOCK;a.getModifierState("ScrollLock")||a.getModifierState("Scroll")?c.Lstates|=f.modifierCodes.SCROLL_LOCK:c.Lstates|=f.modifierCodes.NO_SCROLL_LOCK;g|=c.Lstates;c.LmodifierChange=b.modStateFlags!=g;b.modStateFlags=g;h=f.modifierCodes.RALT|f.modifierCodes.LCTRL;(d&h)==h&&(g&h)!=h&&(g&=~h);g&f.modifierCodes.RALT&&(g&=~f.modifierCodes.LCTRL);b.isChiral()?(c.Lmodifiers=g&f.modifierBitmasks.CHIRAL,f.emulatesAltGr()&&(c.Lmodifiers&f.modifierBitmasks.ALT_GR_SIM)==f.modifierBitmasks.ALT_GR_SIM&&
(c.Lmodifiers^=f.modifierBitmasks.ALT_GR_SIM,c.Lmodifiers|=f.modifierCodes.RALT)):c.Lmodifiers=(a.shiftKey?16:0)|(g&(f.modifierCodes.LCTRL|f.modifierCodes.RCTRL)?32:0)|(g&(f.modifierCodes.LALT|f.modifierCodes.RALT)?64:0);c.LisVirtualKeyCode="undefined"!=typeof a.charCode&&null!=a.charCode&&(0==a.charCode||0!=(c.Lmodifiers&111));c.LisVirtualKey=c.LisVirtualKeyCode||"keypress"!=a.type;return c};b._SelectionChange=function(){if(b._IgnoreNextSelChange)b._IgnoreNextSelChange--;else{var a=document.selection;
"control"!=a.type.toLowerCase()&&(a=a.createRange(),b._Selection&&b._Selection.isEqual(a)||(b._Selection=a,b._DeadKeys=[]))}return!0};b._NotifyKeyboard=function(a,c,f){null!=b._ActiveKeyboard&&"function"==typeof b._ActiveKeyboard.KNS&&b._ActiveKeyboard.KNS(a,c,f)};b._KeyDown=function(d){var c;b._KeyPressToSwallow=0;if(!b._Enabled||b._DisableInput||null==b._ActiveKeyboard)return!0;var f=g.eventTarget(d);if(l.touchable){if(f&&"undefined"!=typeof f.kmwInput&&0==f.kmwInput)return!0}else if(f&&0<=f.className.indexOf("kmw-disabled"))return!0;
if(!a.ready)return!0;f=b._GetKeyEventProperties(d,!0);if(null==f)return!0;switch(f.Lcode){case 8:b._DeadKeys=[];break;case 16:case 17:case 18:case 20:case 144:case 145:return b._NotifyKeyboard(f.Lcode,f.Ltarg,1),l.touchable?!0:a._UpdateVKShift(f,f.Lcode-15,1)}f.LmodifierChange&&(b._NotifyKeyboard(0,f.Ltarg,1),a._UpdateVKShift(f,0,1));(c=f.Ltarg.ownerDocument)&&(c=c.selection)&&(33>f.Lcode||40<f.Lcode)&&c.createRange().select();!window.event&&b._VKMap_FF_IE["k"+f.Lcode]&&(f.Lcode=b._VKMap_FF_IE["k"+
f.Lcode]);if(b._ActiveKeyboard.KM){if(8==f.Lcode)return b._KeyPressToSwallow=1,b.processKeystroke(g.physicalDevice,f.Ltarg,f)||n.output(1,b._LastActiveElement,""),!1;b._KeyPressToSwallow=0}else{var k=0;(c=b._VKMap[a._BaseLayout])&&c["k"+f.Lcode]&&(f.Lcode=c["k"+f.Lcode]);"undefined"!=typeof b._ActiveKeyboard.KM||f.Lmodifiers&96||(c={Lcode:b._USKeyCodeToCharCode(f),Ltarg:f.Ltarg,Lmodifiers:0,LisVirtualKey:0},b.processKeystroke(g.physicalDevice,c.Ltarg,c)&&(k=1));k=k||b.processKeystroke(g.physicalDevice,
f.Ltarg,f);8==f.Lcode&&!k&&null!=f.Ltarg.className&&0<=f.Ltarg.className.indexOf("keymanweb-input")&&n.output(1,b._LastActiveElement,"")}!k&&96<=f.Lcode&&111>=f.Lcode&&(k=106>f.Lcode?f.Lcode-48:f.Lcode-64,n.output(0,f.Ltarg,String._kmwFromCharCode(k)),k=1);if(k)return d&&d.preventDefault&&(d.preventDefault(),d.stopPropagation()),b._KeyPressToSwallow=d?b._GetEventKeyCode(d):0,!1;b._KeyPressToSwallow=0;return 8==f.Lcode&&null!=f.Ltarg.className&&0<=f.Ltarg.className.indexOf("keymanweb-input")?!1:"undefined"!=
typeof f.Ltarg.base&&(d=a.defaultKeyOutput("",f.Lcode,f.Lmodifiers,!1,f.Ltarg))?(n.output(0,f.Ltarg,d),!1):!0};b.processKeystroke=function(a,c,f){b._CachedSelectionStart=null;b._DeadkeyResetMatched();b.cachedContext.reset();g.activeDevice=a;return b._ActiveKeyboard.gs(c,f)};b._KeyPress=function(a){if(a._kmw_block)return!1;if(!b._Enabled||b._DisableInput||null==b._ActiveKeyboard)return!0;var c=b._GetKeyEventProperties(a);if(null==c||c.LisVirtualKey)return!0;if(!b._ActiveKeyboard.KM){if(!b._KeyPressToSwallow||
32>c.Lcode||b._BrowserIsSafari&&63232<c.Lcode&&63744>c.Lcode)return!0;if(a=b._GetEventObject(a))a.returnValue=!1;return!1}if(b._KeyPressToSwallow||b.processKeystroke(g.physicalDevice,c.Ltarg,c))return b._KeyPressToSwallow=0,a&&a.preventDefault&&(a.preventDefault(),a.stopPropagation()),!1;b._KeyPressToSwallow=0;return!0};b._KeyUp=function(d){d=b._GetKeyEventProperties(d,!1);if(null==d||!a.ready)return!0;switch(d.Lcode){case 13:if("TEXTAREA"==d.Ltarg.nodeName)break;if(d.Ltarg.base&&"TEXTAREA"==d.Ltarg.base.nodeName)break;
"search"==d.Ltarg.type||"submit"==d.Ltarg.type?d.Ltarg.form.submit():b.moveToNext(!1);return!0;case 16:case 17:case 18:case 20:case 144:case 145:return b._NotifyKeyboard(d.Lcode,d.Ltarg,0),l.touchable?!0:a._UpdateVKShift(d,d.Lcode-15,1)}d.LmodifierChange&&(b._NotifyKeyboard(0,d.Ltarg,0),a._UpdateVKShift(d,0,1));var c;(c=d.Ltarg.ownerDocument)&&(c=c.selection)&&"control"!=c.type&&(c=c.createRange(),b._Selection=c);return!1};b.moveToNext=function(a){var c,f=b.sortedInputs,d=b._ActiveElement;if(0!=f.length){l.touchable&&
(d=d.base);for(c=0;c<f.length&&f[c]!=d;c++);c=a?c-1:c+1;c=c>=f.length?c-f.length:c;c=0>c?c+f.length:c;l.touchable?(b.focusing=!0,a=f[c].kmw_ip,"undefined"==typeof a?f[c].focus():(b._ActiveElement=b._LastActiveElement=a,b.setTextCaret(a,1E4),b.scrollInput(a),a.focus())):f[c].focus()}};b.moveToElement=function(a){"string"==typeof a&&(a=document.getElementById(a));l.touchable&&a.kmw_ip?a.kmw_ip.focus():a.focus()};b._SetActiveKeyboard=function(d,c,f){var k,h;if(2>arguments.length||!c)c="---";for(k=0;k<
b._KeyboardStubs.length&&(d!=b._KeyboardStubs[k].KI||c!=b._KeyboardStubs[k].KLC&&"---"!=c);k++);l.touchable&&(""==d||null==d||k>=b._KeyboardStubs.length)&&(d=b._KeyboardStubs[0].KI,c=b._KeyboardStubs[0].KLC);2<arguments.length&&f&&b.saveCurrentKeyboard(d,c);if(!b._ActiveStub||!b._ActiveKeyboard||b._ActiveKeyboard.KI!=d||b._ActiveStub.KI!=d||b._ActiveStub.KLC!=c||b.mustReloadKeyboard){if(b._ActiveKeyboard&&b._ActiveKeyboard.KI==d)for(h=0;h<b._KeyboardStubs.length;h++)if(b._KeyboardStubs[h].KI==d&&
b._KeyboardStubs[h].KLC==c){b._ActiveStub=b._KeyboardStubs[h];a.appendStyleSheet();b.mustReloadKeyboard&&a._Load();return}b._ActiveKeyboard=null;b._ActiveStub=null;if(""==d)a._Hide(!1),b.isEmbedded||g.wait(!1);else{for(h=0;h<b._Keyboards.length;h++)if(b._Keyboards[h].KI==d){b._ActiveKeyboard=b._Keyboards[h];b._SetTargDir(b._LastActiveElement);for(k=0;k<b._KeyboardStubs.length;k++)if(b._KeyboardStubs[k].KI==d&&(b._KeyboardStubs[k].KLC==c||"---"==c)){b._ActiveStub=b._KeyboardStubs[k];break}break}if(null==
b._ActiveKeyboard){for(h=0;h<b._KeyboardStubs.length;h++)if(b._KeyboardStubs[h].KI==d&&(b._KeyboardStubs[h].KLC==c||"---"==c)){if(b.isCJK(b._KeyboardStubs[h])||l.touchable)a._Enabled=1;if(!b._KeyboardStubs[h].asyncLoader){a.ready&&a._Hide(!1);var m=b._KeyboardStubs[h];m.asyncLoader={};var e=m.KN,n=m.KL,e=e.replace(/\s*keyboard\s*/i,"");b.isEmbedded||(m.asyncLoader.callback=function(a){b.isEmbedded||(g.wait(!1),g.alert(a||"Sorry, the "+e+" keyboard for "+n+" is not currently available.",function(){b.setActiveKeyboard("")}));
0<h&&(a=b._KeyboardStubs[0],b._SetActiveKeyboard(a.KI,a.KLC,!0))},m.asyncLoader.timer=window.setTimeout(m.asyncLoader.callback,1E4));b.isEmbedded||g.wait("Installing keyboard<br/>"+e);window.setTimeout(function(){b.installKeyboard(m)},0)}b._ActiveStub=b._KeyboardStubs[h];return}b._SetTargDir(b._LastActiveElement)}k=b._ActiveKeyboard;null!==k&&String.kmwEnableSupplementaryPlane(k&&(k.KS&&1==k.KS||"Hieroglyphic"==k.KN));a._Load()}}};b.installKeyboard=function(d){var c=g._CreateElement("SCRIPT");c.charset=
"UTF-8";c.type="text/javascript";var f=d.KF,k=d.KL,h=d.KN;c.addEventListener("error",function(){null!==d.asyncLoader.timer&&(window.clearTimeout(d.asyncLoader.timer),d.asyncLoader.timer=null);b.isEmbedded||(d.asyncLoader.callback("Cannot find the "+h+" keyboard for "+k+"."),console.log("Error:  cannot find the",h,"keyboard for",k,"at",f+"."));d.asyncLoader=null},!1);c.addEventListener("load",function(){null!==d.asyncLoader.timer&&(window.clearTimeout(d.asyncLoader.timer),d.asyncLoader.timer=null);
var c=b._getKeyboardByID(d.KI);c?d==b._ActiveStub&&(b.doBeforeKeyboardChange(c.KI,d.KLC),b._ActiveKeyboard=c,null!=b._LastActiveElement&&(b._JustActivatedKeymanWebUI=1,b._SetTargDir(b._LastActiveElement)),String.kmwEnableSupplementaryPlane(d&&(d.KS&&1==d.KS||"Hieroglyphic"==c.KN)),b.saveCurrentKeyboard(c.KI,d.KLC),a._Load(),b.isEmbedded||g.wait(!1)):b.isEmbedded||(d.asyncLoader.callback("Error registering the "+h+" keyboard for "+k+"."),console.log("Error registering the",h,"keyboard for",k+"."));
d.asyncLoader=null},!1);c.src=b.getKeyboardPath(f);try{document.body.appendChild(c)}catch(m){document.getElementsByTagName("head")[0].appendChild(c)}};b._getKeyboardByID=function(a){var c;for(c=0;c<b._Keyboards.length;c++)if(a==b._Keyboards[c].KI)return b._Keyboards[c];return null};b.isCJK=function(a){var c=b._ActiveKeyboard,f="";0<arguments.length&&(c=a);c&&("undefined"!=typeof c.KLC?f=c.KLC:"undefined"!=typeof c.LanguageCode&&(f=c.LanguageCode));return"cmn"==f||"jpn"==f||"kor"==f};b.isCJK=b.isCJK;
b.isChiral=b.isChiral=function(a){"string"==typeof a&&(a=b._getKeyboardByID(a));return!!(b.getKeyboardModifierBitmask(a)&b.osk.modifierBitmasks.IS_CHIRAL)};b.getKeyboardModifierBitmask=function(d){var c=b._ActiveKeyboard;0<arguments.length&&"undefined"!=typeof d&&(c=d);return c?c.KMBM?c.KMBM:a.modifierBitmasks.NON_CHIRAL:0};b.setActiveKeyboard=b.setActiveKeyboard=function(a,c){b.doBeforeKeyboardChange(a,c);b._SetActiveKeyboard(a,c,!0);null!=b._LastActiveElement&&b._FocusLastActiveElement();b.doKeyboardChange(a,
c)};b.getActiveKeyboard=function(){return null==b._ActiveKeyboard?"":b._ActiveKeyboard.KI};b.getActiveLanguage=b.getActiveLanguage=function(){return null==b._ActiveStub?"":b._ActiveStub.KLC};b.getKeyboard=function(a,c){var f;for(f=0;f<b._KeyboardStubs.length;f++){var d=b._GetKeyboardDetail(b._KeyboardStubs[f]);if(d.InternalName==a&&(2>arguments.length||d.LanguageCode==c))return d}return null};b.GetKeyboardDetail=function(a){for(var c=b.getKeyboards(),f=0;f<c.length;f++)if(c[f].InternalName==a)return c[f];
return null};b._GetKeyboardDetail=function(a){var c={};c.Name=a.KN;c.InternalName=a.KI;c.LanguageName=a.KL;c.LanguageCode=a.KLC;c.RegionName=a.KR;c.RegionCode=a.KRC;c.CountryName=a.KC;c.CountryCode=a.KCC;c.KeyboardID=a.KD;c.Font=a.KFont;c.OskFont=a.KOskFont;return c};b.getKeyboards=function(){var a=[],c;for(c=0;c<b._KeyboardStubs.length;c++){var f=b._KeyboardStubs[c];f=b._GetKeyboardDetail(f);a=b._push(a,f)}return a};b._WindowUnload=function(){b.doUnloadUI();a.ready&&a._Unload();b._LastActiveElement=
0};g.attachDOMEvent(window,"load",function(a){document.body.scrollTop=0;"undefined"!=typeof document.documentElement&&(document.documentElement.scrollTop=0)},!1);g.attachDOMEvent(window,"unload",b._WindowUnload,!1);b.isKMWInput=function(a){var c=a.tagName.toLowerCase();if("textarea"==c)return!0;if("input"==c&&"text"==a.type.toLowerCase()){if("text"==a.type||"search"==a.type)return!0}else if("iframe"==c&&!l.touchable)try{if(a.contentWindow.document)return!0}catch(f){}else if(a.isContentEditable&&!l.touchable)return!0;
return!1};b.isKMWDisabled=function(a){var c=a.className;a.tagName.toLowerCase();return a.readOnly||c&&0<=c.indexOf("kmw-disabled")?!0:!1};b.isAttached=function(a){return a._kmwAttachment?!0:!1};b.setupElementAttachment=function(a){a._kmwAttachment={keyboard:null,touchEnabled:l.touchable}};b.clearElementAttachment=function(a){a._kmwAttachment=null};b._GetDocumentEditables=function(a){var c=[];if(a.tagName){var b=a.tagName.toLowerCase();"input"!=b&&"textarea"!=b&&"iframe"!=b||c.push(a)}else if("#text"==
a.nodeName)return[];a.getElementsByTagName&&(c=c.concat(g.arrayFromNodeList(a.getElementsByTagName("INPUT")),g.arrayFromNodeList(a.getElementsByTagName("TEXTAREA")),g.arrayFromNodeList(a.getElementsByTagName("IFRAME"))));a.querySelectorAll&&(c=c.concat(g.arrayFromNodeList(a.querySelectorAll("[contenteditable]"))));a.isContentEditable&&c.push(a);return c};b._SetupDocument=function(a){a=b._GetDocumentEditables(a);for(var c=0;c<a.length;c++)b.attachToControl(a[c])};b._ClearDocument=function(a){a=b._GetDocumentEditables(a);
for(var c=0;c<a.length;c++)b.detachFromControl(a[c])};b.fixPath=function(a){if(0==a.length)return a;var c=a.substr(a.length-1,1);return"/"==c||"\\"==c?a:a+"/"};b.init=b.init=function(d){var c;var f=function(a){if(0==a.length)return a;"/"!=a.substr(a.length-1,1)&&(a+="/");return"http"==a.replace(/^(http)s?:.*/,"$1")||"file"==a.replace(/^(file):.*/,"$1")?a:"//"==a.substr(0,2)?b.protocol+a:"/"==a.substr(0,1)?b.rootPath+a.substr(1):b.srcPath+a};var k=b.options;if("object"==typeof d&&null!==d)for(c in k)d.hasOwnProperty(c)&&
(k[c]=d[c]);""!=k.root&&(b.rootPath=f(k.root));""==k.resources&&(k.resources=b.srcPath);k.resources=f(k.resources);k.keyboards=f(k.keyboards);k.fonts=f(k.fonts);""==k.attachType&&(k.attachType="auto");b.setDefaultDeviceOptions(k);if(!b.initialized)if("complete"!==document.readyState)window.setTimeout(function(){b.init(d)},50);else{b._MasterDocument=window.document;"Android"==l.OS&&(l.dpi=g.getDPI(),l.formFactor=screen.height<4*l.dpi||screen.width<4*l.dpi?"phone":"tablet");window.removeEventListener&&
window.removeEventListener("focus",b._BubbledFocus,!0);b.initialized=1;a.prepare();g.prepareWait();b.addKeyboardArray(b.deferredStubs);for(k=0;k<b.deferredKRS.length;k++)n.registerStub(b.deferredKRS[k]);b.initializeUI();for(k=0;k<b.deferredKR.length;k++)n.registerKeyboard(b.deferredKR[k]);b.isEmbedded?0<b._KeyboardStubs.length&&b._SetActiveKeyboard(b._KeyboardStubs[0].KI,b._KeyboardStubs[0].KLC):(b.appliedFont=b.baseFont=b.getBaseFont(),l.touchable&&(b.handleRotationEvents(),b.setupTouchDevice()),
"manual"!=b.options.attachType&&b._SetupDocument(document.documentElement),b.listInputs(),l.touchable&&(a._Box.addEventListener("touchend",function(a){a.stopPropagation()},!1),k=document.createElement("DIV"),f=k.style,f.width="100%",f.height=screen.width/2+"px",document.body.appendChild(k),"Android"==l.OS&&0<navigator.userAgent.indexOf("Chrome")?(b.hideOskWhileScrolling=function(b){if("undefined"!=typeof a._Box&&"undefined"!=typeof a._Box.style){c=b.target.parentNode;if("undefined"!=typeof c&&null!=
c&&(0<=c.className.indexOf("keymanweb-input")||0<=c.className.indexOf("kmw-key-")||"undefined"!=typeof c.parentNode&&(c=c.parentNode,0<=c.className.indexOf("keymanweb-input")||0<=c.className.indexOf("kmw-key-"))))return;a.hideNow()}},document.body.addEventListener("touchstart",b.hideOskWhileScrolling,!1)):(b.conditionallyHideOsk=function(){b.hideOnRelease&&!a.lgList&&a.hideNow();b.hideOnRelease=!1},b.hideOskIfOnBody=function(a){b.touchY=a.touches[0].screenY;b.hideOnRelease=!0},b.cancelHideIfScrolling=
function(a){a=a.touches[0].screenY;var c=b.touchY;if(5<a-c||5>c-a)b.hideOnRelease=!1},document.body.addEventListener("touchstart",b.hideOskIfOnBody,!1),document.body.addEventListener("touchmove",b.cancelHideIfScrolling,!1),document.body.addEventListener("touchend",b.conditionallyHideOsk,!1))),document.selection&&!b.legacy&&g.attachDOMEvent(document,"selectionchange",b._SelectionChange),b.restoreCurrentKeyboard(),k=document.querySelector("body"),"manual"!=b.options.attachType&&(b.mutationObserver=
new MutationObserver(b._AutoAttachObserverCore),f={childList:!0,subtree:!0},b.mutationObserver.observe(k,f)),f={subtree:!0,attributes:!0,attributeOldValue:!0,attributeFilter:["class","readonly"]},(new MutationObserver(b._EnablementMutationObserverCore)).observe(k,f),b.initialized=2)}};b._EnablementMutationObserverCore=function(a){for(var c=0;c<a.length;c++){var f=a[c],d=f.oldValue?0<=f.oldValue.indexOf("kmw-disabled"):!1,h=0<=f.target.className.indexOf("kmw-disabled");d&&!h?b._EnableControl(f.target):
!d&&h&&b._DisableControl(f.target);h||"readonly"!=f.attributeName||(d=f.oldValue?null!=f.oldValue:!1,h=f.target.readOnly,d&&!h?b._EnableControl(f.target):!d&&h&&b._DisableControl(f.target))}};b._AutoAttachObserverCore=function(a){for(var c=[],f=[],d=0;d<a.length;d++){for(var h=a[d],m=0;m<h.addedNodes.length;m++)c=c.concat(b._GetDocumentEditables(h.addedNodes[m]));for(m=0;m<h.removedNodes.length;m++)f=f.concat(b._GetDocumentEditables(h.removedNodes[m]))}for(a=0;a<c.length;a++)b.isKMWInput(c[a])&&b._MutationAdditionObserved(c[a]);
for(a=0;a<f.length;a++)b.isKMWInput(f[a])&&b._MutationRemovalObserved(f[a]);if(c.length||f.length)l.touchable?l.touchable&&window.setTimeout(function(){b.listInputs();for(var a=0;a<b.sortedInputs.length;a++)b.sortedInputs[a].kmw_ip&&b.updateInput(b.sortedInputs[a].kmw_ip)},1):b.listInputs()};b._MutationAdditionObserved=function(a){if("iframe"!=a.tagName.toLowerCase()||l.touchable)b.attachToControl(a);else{var c=function(){b.attachToControl(a)};a.addEventListener("load",c);"complete"==a.contentDocument.readyState&&
c()}};b._MutationRemovalObserved=function(a){l.touchable&&b.disableTouchElement(a);b.disableInputElement(a);b.clearElementAttachment(a)};b.listInputs=function(){var a,c=[],f=document.getElementsByTagName("INPUT"),k=document.getElementsByTagName("TEXTAREA");for(a=0;a<f.length;a++)switch(f[a].type){case "text":case "search":case "email":case "url":0>f[a].className.indexOf("kmw-disabled")&&c.push({ip:f[a],x:g._GetAbsoluteX(f[a]),y:g._GetAbsoluteY(f[a])})}for(a=0;a<k.length;a++)0>k[a].className.indexOf("kmw-disabled")&&
c.push({ip:k[a],x:g._GetAbsoluteX(k[a]),y:g._GetAbsoluteY(k[a])});c.sort(function(a,c){return a.y!=c.y?a.y-c.y:a.x-c.x});f=[];for(a=0;a<c.length;a++)f.push(c[a].ip);b.sortedInputs=f};b.initializeUI=function(){"function"==typeof b.ui.initialize?(b.ui.initialize(),a._Show()):window.setTimeout(b.initializeUI,1E3)};b.isPositionSynthesized=function(){return l.touchable};b._SelPos=function(a){var c,f=999>g._GetIEVersion();if(b.isPositionSynthesized())return b.getTextCaret(a);if(a._KeymanWebSelectionStart)return a._KeymanWebSelectionStart;
if(a.setSelectionRange)return a.value.substr(0,a.selectionStart)._kmwLength();if((c=a.ownerDocument)&&(c=c.defaultView)&&c.getSelection&&"on"==a.ownerDocument.designMode.toLowerCase()){if(a=c.getSelection(),3==a.focusNode.nodeType)return a.focusNode.substringData(0,a.focusOffset)._kmwLength()}else if(f){if("string"==typeof a.value)return c=b.getInputSelection(a),a.value.substr(0,c.start)._kmwLength();if(a=a.body?a:a.ownerDocument)c=a.selection;else return 0;a=c.createRange();a.moveStart("textedit",
-1);return a.text._kmwLength()}return 0};b.getInputSelection=function(a){var c=0,b=0,d;if("number"==typeof a.selectionStart&&"number"==typeof a.selectionEnd)c=a.selectionStart,b=a.selectionEnd;else if((d=document.selection.createRange())&&d.parentElement()==a){var h=a.value.length;var g=a.value.replace(/\r\n/g,"\n");b=a.createTextRange();b.moveToBookmark(d.getBookmark());a=a.createTextRange();a.collapse(!1);-1<b.compareEndPoints("StartToEnd",a)?c=b=h:(c=-b.moveStart("character",-h),c+=g.slice(0,c).split("\n").length-
1,-1<b.compareEndPoints("EndToEnd",a)?b=h:(b=-b.moveEnd("character",-h),b+=g.slice(0,b).split("\n").length-1))}return{start:c,end:b}};b._DeadkeyResetMatched=function(){var a,c=b._DeadKeys;for(a=0;a<c.length;a++)c[a].matched=0};b._DeadkeyDeleteMatched=function(){var a,c=b._DeadKeys;for(a=0;a<c.length;a++)c[a].matched&&c.splice(a,1)};b._DeadkeyAdjustPos=function(a,c){var f,d=b._DeadKeys;for(f=0;f<d.length;f++)d[f].p>a&&(d[f].p+=c)};b._SetTargDir=function(a){var c=null!=b._ActiveKeyboard&&b._ActiveKeyboard.KRTL?
"rtl":"ltr";a&&(l.touchable?0==a.textContent.length&&(a.base.dir=a.dir=c,b.setTextCaret(a,1E4)):"string"==typeof a.value?0==a.value.length&&(a.dir=c):"string"==typeof a.textContent&&0==a.textContent.length&&(a.dir=c))};b._ResetVKShift=function(){b._IsActivatingKeymanWebUI||a._UpdateVKShift&&a._UpdateVKShift(null,15,0)};b.addHotKey=b.addHotKey=function(a,c,f){for(var d=0;d<b._HotKeys.length;d++)if(b._HotKeys[d].Code==a&&b._HotKeys[d].Shift==c){b._HotKeys[d].Handler=f;return}b._HotKeys.push({Code:a,
Shift:c,Handler:f})};b.removeHotKey=b.removeHotKey=function(a,c){for(var f=0;f<b._HotKeys.length;f++)if(b._HotKeys[f].Code==a&&b._HotKeys[f].Shift==c){b._HotKeys.splice(f,1);break}};b._ProcessHotKeys=function(a){a||(a=window.event);var c=b._GetEventKeyCode(a);if(null==c)return null;for(var f=(a.shiftKey?16:0)|(a.ctrlKey?32:0)|(a.altKey?64:0),d=0;d<b._HotKeys.length;d++)if(c==b._HotKeys[d].Code&&f==b._HotKeys[d].Shift)return b._HotKeys[d].Handler(),a.returnValue=0,a&&a.preventDefault&&a.preventDefault(),
a.cancelBubble=!0,!1;return!0};g.attachDOMEvent(document,"keyup",b._ProcessHotKeys,!1);b.saveCurrentKeyboard=function(a,c){g.saveCookie("KeymanWeb_Keyboard",{current:a+":"+c})};b.restoreCurrentKeyboard=function(){var a=b._KeyboardStubs,c=a.length;if(!(1>a.length)){var f=b.getSavedKeyboard();f.split(":");var k=f.split(":");2>k.length&&(k[1]="");for(f=0;f<c&&(a[f].KI!=k[0]||a[f].KLC!=k[1]&&""!=k[1]);f++);if(f<c||null==b._ActiveKeyboard)b._SetActiveKeyboard(k[0],k[1],!1),b.globalKeyboard=k[0],b.globalLanguageCode=
k[1],b.doKeyboardChange(k[0],k[1])}};b.getSavedKeyboard=b.getSavedKeyboard=function(){var a=g.loadCookie("KeymanWeb_Keyboard");if("string"!=typeof a.current)return"Keyboard_us:eng";var c,f=b._KeyboardStubs;for(c=0;c<f.length;c++){var k=f[c].KI+":"+f[c].KLC;if(k==a.current)return k}for(c=0;c<f.length;c++)if(k=f[c].KI+":"+f[c].KLC,"Keyboard_us:eng"==k)return k;return 0<f.length?f[0].KI+":"+f[0].KLC:"Keyboard_us:eng"};g.attachDOMEvent(window,"focus",b._ResetVKShift,!1);g.attachDOMEvent(window,"blur",
b._ResetVKShift,!1);String.kmwEnableSupplementaryPlane(!1)}();window.keyman.initialized||function(){var b=window.keyman,a=b.osk,g=b.util,l=g.device,n=b["interface"];a.modifierCodes={LCTRL:1,RCTRL:2,LALT:4,RALT:8,SHIFT:16,CTRL:32,ALT:64,CAPS:256,NO_CAPS:512,NUM_LOCK:1024,NO_NUM_LOCK:2048,SCROLL_LOCK:4096,NO_SCROLL_LOCK:8192,VIRTUAL_KEY:16384};a.modifierBitmasks={ALL:127,ALT_GR_SIM:a.modifierCodes.LCTRL|a.modifierCodes.LALT,CHIRAL:31,IS_CHIRAL:15,NON_CHIRAL:112};a.stateBitmasks={ALL:16128,CAPS:768,NUM_LOCK:3072,SCROLL_LOCK:12288};a.keyCodes={K_BKSP:8,K_TAB:9,
K_ENTER:13,K_SHIFT:16,K_CONTROL:17,K_ALT:18,K_PAUSE:19,K_CAPS:20,K_ESC:27,K_SPACE:32,K_PGUP:33,K_PGDN:34,K_END:35,K_HOME:36,K_LEFT:37,K_UP:38,K_RIGHT:39,K_DOWN:40,K_SEL:41,K_PRINT:42,K_EXEC:43,K_INS:45,K_DEL:46,K_HELP:47,K_0:48,K_1:49,K_2:50,K_3:51,K_4:52,K_5:53,K_6:54,K_7:55,K_8:56,K_9:57,K_A:65,K_B:66,K_C:67,K_D:68,K_E:69,K_F:70,K_G:71,K_H:72,K_I:73,K_J:74,K_K:75,K_L:76,K_M:77,K_N:78,K_O:79,K_P:80,K_Q:81,K_R:82,K_S:83,K_T:84,K_U:85,K_V:86,K_W:87,K_X:88,K_Y:89,K_Z:90,K_NP0:96,K_NP1:97,K_NP2:98,K_NP3:99,
K_NP4:100,K_NP5:101,K_NP6:102,K_NP7:103,K_NP8:104,K_NP9:105,K_NPSTAR:106,K_NPPLUS:107,K_SEPARATOR:108,K_NPMINUS:109,K_NPDOT:110,K_NPSLASH:111,K_F1:112,K_F2:113,K_F3:114,K_F4:115,K_F5:116,K_F6:117,K_F7:118,K_F8:119,K_F9:120,K_F10:121,K_F11:122,K_F12:123,K_NUMLOCK:144,K_SCROLL:145,K_LSHIFT:160,K_RSHIFT:161,K_LCONTROL:162,K_RCONTROL:163,K_LALT:164,K_RALT:165,K_COLON:186,K_EQUAL:187,K_COMMA:188,K_HYPHEN:189,K_PERIOD:190,K_SLASH:191,K_BKQUOTE:192,K_LBRKT:219,K_BKSLASH:220,K_RBRKT:221,K_QUOTE:222,K_oE2:226,
K_LOPT:50001,K_ROPT:50002,K_NUMERALS:50003,K_SYMBOLS:50004,K_CURRENCIES:50005,K_UPPER:50006,K_LOWER:50007,K_ALPHA:50008,K_SHIFTED:50009,K_ALTGR:50010,K_TABBACK:50011,K_TABFWD:50012};a.buttonClasses={DEFAULT:"0",SHIFT:"1","SHIFT-ON":"2",SPECIAL:"3","SPECIAL-ON":"4",DEADKEY:"8",BLANK:"9",HIDDEN:"10"};var e=[["0123456789",";=,-./`","[\\]'"],[")!@#$%^&*(",":+<_>?~",'{|}"']],d="K_BKQUOTE K_1 K_2 K_3 K_4 K_5 K_6 K_7 K_8 K_9 K_0 K_HYPHEN K_EQUAL K_* K_* K_* K_Q K_W K_E K_R K_T K_Y K_U K_I K_O K_P K_LBRKT K_RBRKT K_BKSLASH K_* K_* K_* K_A K_S K_D K_F K_G K_H K_J K_K K_L K_COLON K_QUOTE K_* K_* K_* K_* K_* K_oE2 K_Z K_X K_C K_V K_B K_N K_M K_COMMA K_PERIOD K_SLASH K_* K_* K_* K_* K_* K_SPACE".split(" ");
a._Box=null;a._DivVKbd=null;a._DivVKbdHelp=null;a._Visible=0;a._Enabled=1;a._VShift=[];a._VKeySpans=[];a._VKeyDown=null;a._VKbdContainer=null;a._VOriginalWidth=1;a._BaseLayout="us";a._BaseLayoutEuro={};a._BaseLayoutEuro.se="\u00a71234567890+\u00b4~~~QWERTYUIOP\u00c5\u00a8'~~~ASDFGHJKL\u00d6\u00c4~~~~~<ZXCVBNM,.-~~~~~ ";a._BaseLayoutEuro.uk="`1234567890-=~~~QWERTYUIOP[]#~~~ASDFGHJKL;'~~~~~\\ZXCVBNM,./~~~~~ ";a._stateKeys={K_CAPS:!1,K_NUMLOCK:!1,K_SCROLL:!1};a.lgTimer=null;a.lgKey=null;a.hkKey=null;
a.spaceBar=null;a.lgList=null;a.frameColor="#ad4a28";a.keyPending=null;a.fontFamily="";a.fontSize="1em";a.layout=null;a.layers=null;a.layerId="default";a.nextLayer="default";a.layerIndex=0;a.currentKey="";a.subkeyDelayTimer=null;a.popupPending=!1;a.popupVisible=!1;a.popupCallout=null;a.styleSheet=null;a.loadRetry=0;a.popupDelay=500;a.currentTarget=null;a.touchCount=0;a.touchX=0;a.deleting=0;a.x=99;a.y=0;a.width=1;a.height=1;a.rowHeight=1;a.nRows=1;a.vpScale=1;a.closeButton=null;a.resizeIcon=null;
a.resizing=0;a.pinImg=null;a.userPositioned=0;a.dfltX="";a.dfltY="";a.noDrag=!1;a.keytip=null;a.touchY=0;a.addCallout=function(a){};a.addEventListener=function(a,b){return g.addEventListener("osk."+a,b)};a._TitleBarInterior=function(){var c=g._CreateElement("DIV"),f=c.style;f.paddingLeft="2px";f.cursor="move";f.background="#ad4a28";f.font="8pt Tahoma,Arial,sans-serif";f=g._CreateElement("DIV");f.className="kmw-title-bar-actions";f.onmousedown=a._CancelMouse;var d=g._CreateElement("DIV");d.className=
"kmw-close-button";d.onmousedown=a._CancelMouse;d.onclick=function(){a._Hide(!0)};a.closeButton=d;f.appendChild(d);a.restorePosition=function(){a._Visible&&(b._FocusLastActiveElement(),a.loadCookie(),a.userPositioned=!1,a.saveCookie(),a._Show(),a.doResizeMove());a.pinImg&&(a.pinImg.style.display="none");window.event&&(window.event.returnValue=!1)};d=a.pinImg=g._CreateElement("DIV");d.className="kmw-pin-image";d.title="Pin the On Screen Keyboard to its default location on the active text box";d.onclick=
a.restorePosition;d.onmousedown=a._CancelMouse;d.style.display="none";l.touchable||f.appendChild(d);c.appendChild(f);d=b._TitleElement=g._CreateElement("SPAN");d.className="kmw-title-bar-caption";d.innerHTML="KeymanWeb";c.appendChild(d);return c};a.isEnabled=a.isEnabled=function(){return a._Enabled};a.isVisible=a.isVisible=function(){return a._Visible};a.getRect=a.getRect=function(){var c={};a._DivVKbd?(c.left=c.left=g._GetAbsoluteX(a._DivVKbd),c.top=c.top=g._GetAbsoluteY(a._DivVKbd),c.width=c.width=
g._GetAbsoluteX(a._DivVKbdHelp)-g._GetAbsoluteX(a._DivVKbd)+a._DivVKbdHelp.offsetWidth,c.height=c.height=g._GetAbsoluteY(a._DivVKbdHelp)-g._GetAbsoluteY(a._DivVKbd)+a._DivVKbdHelp.offsetHeight):(c.left=c.left=g._GetAbsoluteX(a._Box),c.top=c.top=g._GetAbsoluteY(a._Box),c.width=c.width=g._GetAbsoluteX(a._Box)+a._Box.offsetWidth,c.height=c.height=g._GetAbsoluteY(a._Box)+a._Box.offsetHeight);return c};a.setRect=a.setRect=function(c){if(null!=a._Box&&"desktop"==l.formFactor){var b=a._Box,d=b.style;"left"in
c&&(d.left=c.left-g._GetAbsoluteX(b)+b.offsetLeft+"px",a.dfltX=d.left);"top"in c&&(d.top=c.top-g._GetAbsoluteY(b)+b.offsetTop+"px",a.dfltY=d.top);if(null!=a._DivVKbd){var h=a._DivVKbd,d=h.style;if("width"in c){var m=c.width-(b.offsetWidth-h.offsetWidth);m<.2*screen.width&&(m=.2*screen.width);m>.9*screen.width&&(m=.9*screen.width);d.width=m+"px";a.width=m}"height"in c&&(b=c.height-(b.offsetHeight-h.offsetHeight),b<.1*screen.height&&(b=.1*screen.height),b>.5*screen.height&&(b=.5*screen.height),d.height=
b+"px",d.fontSize=b/8+"px",a.height=b);"nosize"in c&&a.resizeIcon&&(a.resizeIcon.style.display=c.nosize?"none":"block")}"nomove"in c&&(a.noDrag=c.nomove,a.pinImg&&(a.pinImg.style.display=c.nomove||!a.userPositioned?"none":"block"));a.saveCookie()}};a.getPos=function(){var c=a._Box,b={};b.left=a._Visible?c.offsetLeft:a.x;b.top=a._Visible?c.offsetTop:a.y;return b};a.setPos=a.setPos=function(c){if("undefined"!=typeof a._Box&&!l.touchable){if(a.userPositioned){var b=c.left;c=c.top;"undefined"!=typeof b&&
(b<-.8*a._Box.offsetWidth&&(b=-.8*a._Box.offsetWidth),a.userPositioned&&(a._Box.style.left=b+"px",a.x=b));"undefined"!=typeof c&&(0>c&&(c=0),a.userPositioned&&(a._Box.style.top=c+"px",a.y=c))}a.pinImg&&(a.pinImg.style.display=a.userPositioned?"block":"none")}};a._VKeyGetTarget=function(a){a=b._GetEventObject(a);if(!a)return null;if(a.target)a=a.target;else if(a.srcElement)a=a.srcElement;else return null;3==a.nodeType&&(a=a.parentNode);"SPAN"==a.tagName&&(a=a.parentNode);return a};a.highlightKey=function(c,
b){if(c&&""!=c.className&&!(0<=c.className.indexOf("kmw-key-row"))){var f=c.className;null!=a.keytip&&0>f.indexOf("kmw-key-shift")&&0>f.indexOf("kmw-spacebar")&&0>c.id.indexOf("popup")?a.showKeyTip(c,b):b&&0>f.indexOf(" kmw-key-touched")?(c.className=f+" kmw-key-touched",a.showKeyTip(null,!1)):c.className=f.replace(" kmw-key-touched","")}};a.showSubKeys=function(c){if(null!=a.keyPending){var b=document.createElement("DIV"),d=a.getDefaultKeyObject();b.id="kmw-popup-keys";a.popupBaseKey=c;"phone"==
l.formFactor&&a.prependBaseKey(c);var h=c.id.split("-");var m=h[h.length-1];if("phone"==l.formFactor&&c.subKeys[0].id!=m){m={id:m,layer:""};1<h.length&&(m.layer=h[0]);for(h=0;h<c.childNodes.length&&!a.hasClass(c.childNodes[h],"kmw-key-text");h++);h<c.childNodes.length&&(m.text=c.childNodes[h].textContent);c.subKeys.splice(0,0,m)}h=b.style;h.bottom=parseInt(c.style.bottom,10)+parseInt(c.style.height,10)+4+"px";h.fontFamily=a.fontFamily;h.fontSize=g.getStyleValue(c,"font-size");h.visibility="hidden";
var m=c.subKeys.length;var e=Math.min(Math.ceil(m/9),2);var n=Math.ceil(m/e);1<e&&(h.width=n*c.offsetWidth+5*n+"px");for(h=0;h<m;h++){var p=c.subKeys[h];var q=document.createElement("DIV");for(var u in d)"string"!=typeof p[u]&&(p[u]=d[u]);q.className="kmw-key-square-ex";q.keyId=p.id;var v=q.style;var z=Math.floor(h/n);1<e&&0<z&&(v.marginTop="5px");q.width="undefined"!=typeof p.width?v.width=parseInt(p.width,10)*c.offsetWidth/100+"px":v.width=c.offsetWidth+"px";v.height=c.offsetHeight+"px";z=document.createElement("DIV");
a.setButtonClass(p,z);z.id="string"==typeof p.layer&&""!=p.layer?"popup-"+p.layer+"-"+p.id:"popup-default-"+p.id;z.key=p;var C=z.style;C.height=v.height;C.width=v.width;C.position="absolute";v=g._CreateElement("SPAN");v.className="kmw-key-text";null==p.text||""==p.text?(v.innerHTML="\u00a0","string"==typeof p.id&&/^U_[0-9A-F]{4}$/i.test(p.id)&&(v.innerHTML=String.fromCharCode(parseInt(p.id.substr(2),16)))):v.innerHTML=p.text;C=v.style;C.fontSize=a.fontSize;"string"==typeof p.font&&""!=p.font&&(C.fontFamily=
p.font);"string"==typeof p.fontsize&&0!=p.fontsize&&(C.fontSize=p.fontsize);z.appendChild(v);q.appendChild(z);b.appendChild(q)}a.showKeyTip(null,!1);a._Box.appendChild(b);h=b.style;d=g._GetAbsoluteX(c)+.5*(c.offsetWidth-b.offsetWidth);u=(g.landscapeView()?screen.height:screen.width)-b.offsetWidth;d>u&&(d=u);0>d&&(d=0);h.left=d+"px";a.popupCallout=a.addCallout(c);h.visibility="visible";b.shim=document.createElement("DIV");b.shim.id="kmw-popup-shim";a._Box.appendChild(b.shim);"phone"==l.formFactor&&
(c=b.childNodes[0].firstChild,a.keyPending=c,a.highlightKey(c,!0))}};a.prependBaseKey=function(c){if(c&&"undefined"!=typeof c.id){var b=c.id.split("-");var d=b[b.length-1],h=1<b.length?b[0]:"";if("undefined"!=typeof c.subKeys&&0<c.subKeys.length&&(c.subKeys[0].id!=d||c.subKeys[0].layer!=h)){d={id:d,layer:""};1<b.length&&(d.layer=b[0]);for(b=0;b<c.childNodes.length&&!a.hasClass(c.childNodes[b],"kmw-key-text");b++);b<c.childNodes.length&&(d.text=c.childNodes[b].textContent);c.subKeys.splice(0,0,d)}}};
a.getVKDictionaryCode=function(a){if(!b._ActiveKeyboard.VKDictionary){var c=[];if("string"==typeof b._ActiveKeyboard.KVKD)for(var d=b._ActiveKeyboard.KVKD.split(" "),h=0;h<d.length;h++)c[d[h]]=h+256;b._ActiveKeyboard.VKDictionary=c}return(a=b._ActiveKeyboard.VKDictionary[a])?a:0};a.selectLayer=function(c,f){var d=2>arguments.length?null:f;"number"==typeof d&&(d=a.getLayerId(16*d));if(!d)switch(c){case "K_LSHIFT":case "K_RSHIFT":case "K_SHIFT":d="shift";break;case "K_LCONTROL":case "K_LCTRL":if(b.isChiral()){d=
"leftctrl";break}case "K_RCONTROL":case "K_RCTRL":if(b.isChiral()){d="rightctrl";break}case "K_CTRL":d="ctrl";break;case "K_LMENU":case "K_LALT":if(b.isChiral()){d="leftalt";break}case "K_RMENU":case "K_RALT":if(b.isChiral()){d="rightalt";break}case "K_ALT":d="alt";break;case "K_ALTGR":d=b.isChiral()?"leftctrl-rightalt":"ctrl-alt";break;case "K_CURRENCIES":case "K_NUMERALS":case "K_SHIFTED":case "K_UPPER":case "K_LOWER":case "K_SYMBOLS":d="default"}if(!d||d==a.layerId&&"desktop"!=l.formFactor)return!1;
a.updateLayer(d);a._Show();return!0};a.defaultKeyOutput=function(c,f,d,h,g){var k="",m=!1,l=g&&"undefined"!=typeof g.base;0==d?m=!0:d==a.modifierCodes.SHIFT&&(m=!0,d=1);if(l||h)switch((l=a.keyCodes[c])||(l=f),l){case a.keyCodes.K_BKSP:n.output(1,b._LastActiveElement,"");break;case a.keyCodes.K_TAB:b.moveToNext(d);break;case a.keyCodes.K_TABBACK:b.moveToNext(!0);break;case a.keyCodes.K_TABFWD:b.moveToNext(!1);break;case a.keyCodes.K_ENTER:if("TEXTAREA"==g.nodeName||"undefined"!=typeof g.base&&"TEXTAREA"==
g.base.nodeName)return"\n";h&&("INPUT"!=g.nodeName||"search"!=g.type&&"submit"!=g.type?"undefined"==typeof g.base||"search"!=g.base.type&&"submit"!=g.base.type?b.moveToNext(!1):(g.base.disabled=!1,g.base.form.submit()):g.form.submit());break;case a.keyCodes.K_SPACE:return" "}"U_"==c.substr(0,2)?(c=parseInt(c.substr(2,6),16),0<=c&&31>=c||128<=c&&159>=c?console.log("Suppressing Unicode control code: U_00"+c.toString(16)):k=String.kmwFromCharCode(c)):m&&(f>=a.keyCodes.K_0&&f<=a.keyCodes.K_9?k=e[d][0][f-
a.keyCodes.K_0]:f>=a.keyCodes.K_A&&f<=a.keyCodes.K_Z?k=String.fromCharCode(f+(d?0:32)):f>=a.keyCodes.K_COLON&&f<=a.keyCodes.K_BKQUOTE?k=e[d][1][f-a.keyCodes.K_COLON]:f>=a.keyCodes.K_LBRKT&&f<=a.keyCodes.K_QUOTE&&(k=e[d][2][f-a.keyCodes.K_LBRKT]));return k};a.clickKey=function(c){var f=b._LastActiveElement,d;var h=c.id.split("-");if(2>h.length)return!0;"popup"==h[0]&&h.splice(0,1);if(null!=f){var m=h[0];var e=h[h.length-1],w=d=a.getModifierState(a.layerId);for(d=1;d<h.length-1;d++)m=m+"-"+h[d];"undefined"!=
typeof c.key&&(w=c.key.nextlayer);null==b._ActiveElement&&(b._ActiveElement=f);if("K_LOPT"==e||"K_ROPT"==e)return a.optionKey(c,e,!0),!0;a.highlightKey(c,!1);if("desktop"==l.formFactor&&a.selectLayer(e,w))return!0;h=f._KeymanWebSelectionStart;d=f._KeymanWebSelectionEnd;var p=b._Selection;b._IsActivatingKeymanWebUI=1;b._IgnoreNextSelChange=100;b._FocusLastActiveElement();b._IsMozillaEditableIframe(f,0)&&(f=f.documentElement);document.selection&&null!=p&&p.select();f._KeymanWebSelectionStart=h;f._KeymanWebSelectionEnd=
d;b._IgnoreNextSelChange=0;b._CachedSelectionStart=null;b._DeadkeyDeleteMatched();h={Ltarg:f,Lmodifiers:0,Lstates:0,Lcode:a.keyCodes[e],LisVirtualKey:!0};h.Lstates|=a._stateKeys.K_CAPS?a.modifierCodes.CAPS:a.modifierCodes.NO_CAPS;h.Lstates|=a._stateKeys.K_NUMLOCK?a.modifierCodes.NUM_LOCK:a.modifierCodes.NO_NUM_LOCK;h.Lstates|=a._stateKeys.K_SCROLL?a.modifierCodes.SCROLL_LOCK:a.modifierCodes.NO_SCROLL_LOCK;"U_"==e.substr(0,2)&&(h.LisVirtualKey=!1);"undefined"==typeof h.Lcode&&(h.Lcode=a.getVKDictionaryCode(e),
h.Lcode||(h.Lcode=1));d="undefined"==typeof c.key?null:c.key.layer;d=null==d?a.getModifierState(m):a.getModifierState(d);h.Lmodifiers=d;(h.Lmodifiers&a.modifierBitmasks.ALT_GR_SIM)==a.modifierBitmasks.ALT_GR_SIM&&a.emulatesAltGr()&&(h.Lmodifiers&=~a.modifierBitmasks.ALT_GR_SIM,h.Lmodifiers|=a.modifierCodes.RALT);b._ActiveKeyboard&&b._ActiveKeyboard.KM?(m=c.firstChild.firstChild.wholeText,h.LisVirtualKey=!1,h.LisVirtualKeyCode=!1,h.vkCode=h.Lcode,h.Lcode!=a.keyCodes.K_SPACE&&(h.Lcode="string"==typeof m&&
""!=m?m.charCodeAt(0):0,160==h.Lcode&&(h.Lcode=0)),h.Lmodifiers=0):h.vkCode=h.Lcode;"undefined"==typeof b._ActiveKeyboard.KM&&(h.Lcode=b._USKeyCodeToCharCode(h),h.LisVirtualKey=!1);if(!b._ActiveKeyboard||0!=h.Lcode&&!b.processKeystroke(g.device,f,h))switch(h.Lcode=h.vkCode,e){case "K_CAPS":case "K_NUMLOCK":case "K_SCROLL":a._stateKeys[e]=!a._stateKeys[e];a._Show();break;default:(m=a.defaultKeyOutput(e,h.Lcode,d,!0,f))&&n.output(0,f,m)}"undefined"!=typeof c.key&&null!==c.key.nextlayer&&(a.nextLayer=
c.key.nextlayer);a.selectLayer(e,w);f._KeymanWebSelectionStart=null;f._KeymanWebSelectionEnd=null}b._IsActivatingKeymanWebUI=0;return!0};a.getLayerId=function(c){var b="";if(0==c)return"default";c&a.modifierCodes.LCTRL&&(b=(0<b.length?b+"-":"")+"leftctrl");c&a.modifierCodes.RCTRL&&(b=(0<b.length?b+"-":"")+"rightctrl");c&a.modifierCodes.LALT&&(b=(0<b.length?b+"-":"")+"leftalt");c&a.modifierCodes.RALT&&(b=(0<b.length?b+"-":"")+"rightalt");c&a.modifierCodes.SHIFT&&(b=(0<b.length?b+"-":"")+"shift");c&
a.modifierCodes.CTRL&&(b=(0<b.length?b+"-":"")+"ctrl");c&a.modifierCodes.ALT&&(b=(0<b.length?b+"-":"")+"alt");return b};a.getModifierState=function(b){var c=0;0<=b.indexOf("shift")&&(c|=a.modifierCodes.SHIFT);var d=!1;0<=b.indexOf("leftctrl")&&(c|=a.modifierCodes.LCTRL,d=!0);0<=b.indexOf("rightctrl")&&(c|=a.modifierCodes.RCTRL,d=!0);0<=b.indexOf("ctrl")&&!d&&(c|=a.modifierCodes.CTRL);d=!1;0<=b.indexOf("leftalt")&&(c|=a.modifierCodes.LALT,d=!0);0<=b.indexOf("rightalt")&&(c|=a.modifierCodes.RALT,d=
!0);0<=b.indexOf("alt")&&!d&&(c|=a.modifierCodes.ALT);return c};a.updateLayer=function(b){var c=a.layerId,d=b,h,g="leftctrl rightctrl ctrl leftalt rightalt alt shift".split(" ");for(h=0;h<g.length;h++)d=d.replace(g[h]+"-",""),d=d.replace(g[h],"");if("default"==a.layerId||"numeric"==a.layerId||"symbol"==a.layerId||"currency"==a.layerId||""!=d)c=b;else{d=a.getModifierState(c);for(h=0;h<g.length;h++)c=c.replace(g[h]+"-",""),c=c.replace(g[h],"");switch(b){case "shift":d^=a.modifierCodes.SHIFT;break;case "leftctrl":d^=
a.modifierCodes.LCTRL;break;case "rightctrl":d^=a.modifierCodes.RCTRL;break;case "ctrl":d^=a.modifierCodes.CTRL;break;case "leftalt":d^=a.modifierCodes.LALT;break;case "rightalt":d^=a.modifierCodes.RALT;break;case "alt":d^=a.modifierCodes.ALT;break;default:c=b}"default"!=c&&(c=""==c?a.getLayerId(d):a.getLayerId(d)+"-"+c)}""==c&&(c="default");a.layerId=c;for(h=0;h<a.layers.length;h++)if(a.layerId==a.layers[h].id)return;a.layerId="default"};a.showLanguage=function(){var c="";if(b._ActiveStub){var d=
b._ActiveStub.KL;c=b._ActiveStub.KN}else d=b._ActiveLanguage?b._ActiveLanguage.KN:"English";try{var k=a.spaceBar.firstChild.firstChild;k.parentNode.className="undefined"==typeof k.parentNode.className||""==k.parentNode.className?"kmw-spacebar":k.parentNode.className+" kmw-spacebar";k.className="kmw-spacebar-caption";var c=c.replace(/\s*keyboard\s*/i,""),h="",h=c==d?d:d+" ("+c+")";k.innerHTML!=h&&(k.innerHTML=h)}catch(m){}};a.showLanguageMenu=function(){var c=b._KeyboardStubs;if(!(1>c.length)){var d=
a.lgList=g._CreateElement("DIV");a.lgList.id="kmw-language-menu";d.shim=g._CreateElement("DIV");d.shim.id="kmw-language-menu-background";d.shim.addEventListener("touchstart",function(b){b.preventDefault();a.hideLanguageList();if(2<b.touches.length){var c=b.touches[1].pageX;b=b.touches[1].pageY;c>a.spaceBar.offsetLeft&&c<a.spaceBar.offsetLeft+a.spaceBar.offsetWidth&&b>a.spaceBar.offsetTop&&b<a.spaceBar.offsetTop+a.spaceBar.offsetHeight&&a.showBuild()}},!1);document.body.appendChild(d.shim);var k=g._CreateElement("DIV"),
h=k.style,m=g._CreateElement("DIV");k.id="kmw-menu-scroll-container";m.id="kmw-menu-scroller";"WebkitOverflowScrolling"in h&&(h.WebkitOverflowScrolling="touch");k.appendChild(m);d.appendChild(k);var e,h=g._CreateElement("DIV");h.id="kmw-menu-index";for(e=1;26>=e;e++){var n=g._CreateElement("P");n.innerHTML=String.fromCharCode(e+64);h.appendChild(n)}h.addEventListener("touchstart",function(b){a.scrollToLanguage(b,k,m)},!1);h.addEventListener("touchend",function(a){a.stopPropagation();a.preventDefault()},
!1);d.appendChild(h);d.addEventListener("scroll",function(b){a.lgList.scrolling=!0},!1);k.addEventListener("scroll",function(a){1>k.scrollTop&&(k.scrollTop=1);k.scrollTop>k.scrollHeight-k.offsetHeight-1&&(k.scrollTop=k.scrollHeight-k.offsetHeight-1)},!1);a.lgList.activeLgNo=a.addLanguagesToMenu(m,c);a.lgList.visibility="hidden";document.body.appendChild(a.lgList);"Android"==l.OS&&"devicePixelRatio"in window&&(a.lgList.style.fontSize=2/window.devicePixelRatio+"em");"Android"==l.OS&&"tablet"==l.formFactor&&
"devicePixelRatio"in window&&(e=parseInt(g.getStyleValue(d,"width"),10),c=d.style,isNaN(e)||(c.width=c.maxWidth=2*e/window.devicePixelRatio+"px"),e=parseInt(g.getStyleValue(k,"width"),10),c=k.style,isNaN(e)||(c.width=c.maxWidth=2*e/window.devicePixelRatio+"px"),e=parseInt(g.getStyleValue(m,"width"),10),c=m.style,isNaN(e)||(c.width=c.maxWidth=2*e/window.devicePixelRatio+"px"));a.adjustLanguageMenu(0);c=Math.floor(d.offsetHeight/26);n=Math.round(100*c/(h.childNodes[1].offsetTop-h.childNodes[0].offsetTop))/
100;var p=.6<n?1:2;1.25<n&&(n=1.25);for(e=0;26>e;e++){var q=h.childNodes[e].style;2==p&&1==e%2?q.display="none":(q.fontSize=n*p+"em",q.lineHeight=c*p+"px")}e=k.offsetWidth;k.scrollHeight>k.offsetHeight+3?e+=h.offsetWidth:h.style.display="none";d.style.width=e+"px";a.lgList.visibility="";d=m.firstChild.offsetHeight*a.lgList.activeLgNo+1;k.scrollTop=d;k.scrollTop<d&&(k.scrollTop=k.scrollHeight-k.offsetHeight);k.scrollTop>k.scrollHeight-k.offsetHeight-1&&(k.scrollTop=k.scrollHeight-k.offsetHeight-1)}};
a.adjustLanguageMenu=function(b){var c=a.lgList,d=c.firstChild,h=d.firstChild,m=c.style,c=c.childNodes[1],e=window.innerHeight-a.lgKey.offsetHeight-16,h=(h.childNodes.length+b-1)*h.firstChild.firstChild.offsetHeight;"iOS"==l.OS&&("phone"==l.formFactor?(b=g.landscapeView()?36:0,e=(window.innerHeight-b-16)*g.getViewportScale()):"tablet"==l.formFactor&&(b=g.landscapeView()?16:0,e-=b));m.left=g._GetAbsoluteX(a.lgKey)+"px";h>e&&(h=e);m.height=h+"px";m.top=g._GetAbsoluteY(a._Box)+a._Box.offsetHeight-h+
window.pageYOffset-6+"px";m.bottom="auto";c.style.height=d.style.height=m.height};a.scrollToLanguage=function(a,b,d){a.stopImmediatePropagation();a.stopPropagation();a.preventDefault();if("P"==a.touches[0].target.nodeName){var c,f=0;a=a.touches[0].target.innerHTML.charCodeAt(0);var k=d.childNodes;try{for(c=0;c<k.length-1;c++){var g=k[c].firstChild.innerHTML.toUpperCase().charCodeAt(0);if(g>=a)break}}catch(p){}try{f=d.firstChild.offsetHeight*c+1,b.scrollTop=f}catch(p){f=0}try{b.scrollTop<f&&(b.scrollTop=
b.scrollHeight-b.offsetHeight),b.scrollTop>b.scrollHeight-b.offsetHeight-1&&(b.scrollTop=b.scrollHeight-b.offsetHeight-1)}catch(p){}}};a.addLanguagesToMenu=function(c,d){var f=d.length,h,e,n=[];for(e=0;e<f;e++){var w=d[e].KL;-1==n.indexOf(w)&&n.push(w)}n.sort();var p=Math.round(100/g.getViewportScale())/100;w=-1;for(h=0;h<n.length;h++){var q=g._CreateElement("DIV");q.className="kbd-list-closed";var u=g._CreateElement("P");u.kList=[];for(e=0;e<f;e++)d[e].KL==n[h]&&u.kList.push(d[e]);"iOS"==l.OS&&(u.style.fontSize=
p+"em");q.appendChild(u);c.appendChild(q);n[h]==b._ActiveStub.KL&&(w=h);if(1<u.kList.length)for(u.className="kbd-list",u.innerHTML=n[h]+"...",u.scrolled=!1,u.ontouchend=function(b){b.preventDefault();b.stopPropagation();b.target.scrolled?b.target.scrolled=!1:this.parentNode.className="kbd-list-closed"==this.parentNode.className?"kbd-list-open":"kbd-list-closed";a.adjustLanguageMenu("kbd-list-closed"==this.parentNode.className?0:this.kList.length)},u.addEventListener("touchstart",function(a){a.stopPropagation()},
!1),u.addEventListener("touchmove",function(a){a.target.scrolled=!0;a.stopPropagation()},!1),e=0;e<u.kList.length;e++){var v=g._CreateElement("P");v.className="kbd-list-entry";"iOS"==l.OS&&(v.style.fontSize=p+"em");a.addKeyboardToMenu(u.kList[e],v,!1);q.appendChild(v)}else u.innerHTML=n[h],u.className="kbd-single-entry",a.addKeyboardToMenu(u.kList[0],u,!0);h==w&&(u.className+=" current")}d=g._CreateElement("DIV");d.id="kmw-menu-footer";f=function(a){a.preventDefault();a.stopPropagation()};d.addEventListener("touchstart",
f,!1);d.addEventListener("touchmove",f,!1);d.addEventListener("touchend",f,!1);c.appendChild(d);return w};a.addKeyboardToMenu=function(c,d,k){d.kn=c.KI;d.kc=c.KLC;d.innerHTML=k?c.KL:c.KN.replace(" Keyboard","");c=function(b){b.stopPropagation();0>=this.className.indexOf("selected")&&(this.className+=" selected");a.lgList.scrolling=!1;a.lgList.y0=b.touches[0].pageY;return!0};k=function(b){b.stopImmediatePropagation();var c=a.lgList.childNodes[0],d=c.scrollHeight-c.offsetHeight;if("undefined"!=typeof b.pageY)var f=
b.pageY;else if("undefined"!=typeof b.touches)f=b.touches[0].pageY;else return;var k=f-a.lgList.y0;if(0>k)c.scrollTop>=d-1&&(b.preventDefault(),a.lgList.y0=f);else if(0<k)2>c.scrollTop&&(b.preventDefault(),a.lgList.y0=f);else return;if(-5>k||5<k)a.lgList.scrolling=!0,this.className=this.className.replace(/\s*selected/,""),a.lgList.y0=f;return!0};var f=function(c){c.preventDefault();"undefined"!=typeof c.stopImmediatePropagation?c.stopImmediatePropagation():c.stopPropagation();a.lgList.scrolling?this.className=
this.className.replace(/\s*selected/,""):(b.focusing=!0,b.focusTimer=window.setTimeout(function(){b.focusing=!1},1E3),a.lgList.style.display="none",b._SetActiveKeyboard(this.kn,this.kc,!0),b.doKeyboardChange(this.kn,this.kc),b._FocusLastActiveElement(),a.hideLanguageList(),a._Show());return!0};d.onmspointerdown=c;d.addEventListener("touchstart",c,!1);d.onmspointermove=k;d.addEventListener("touchmove",k,!1);d.onmspointerout=f;d.addEventListener("touchend",f,!1)};a.hideLanguageList=function(){a.lgList&&
(a.highlightKey(a.lgKey.firstChild,!1),a.lgList.style.visibility="hidden",window.setTimeout(function(){null!=a.lgList&&"undefined"!=typeof a.lgList&&(document.body.removeChild(a.lgList.shim),document.body.removeChild(a.lgList));a.lgList=null},500))};a._UpdateVKShift=function(c,d,k){var f=0,g=["CAPS","NUM_LOCK","SCROLL_LOCK"],e=["K_CAPS","K_NUMLOCK","K_SCROLL"];if(c)for(f=c.Lmodifiers,d=c.Lstates,b.isChiral()&&a.emulatesAltGr()&&(b.modStateFlags&a.modifierBitmasks.ALT_GR_SIM)==a.modifierBitmasks.ALT_GR_SIM&&
(f|=a.modifierBitmasks.ALT_GR_SIM,f&=~a.modifierCodes.RALT),c=0;c<g.length;c++)d&a.stateBitmasks[g[c]]&&(a._stateKeys[e[c]]=d&a.modifierCodes[g[c]]);else if(k)for(f|=d,c=0;c<g.length;c++)d&a.stateBitmasks[g[c]]&&(a._stateKeys[e[c]]=!0);else for(f&=~d,c=0;c<g.length;c++)d&a.stateBitmasks[g[c]]&&(a._stateKeys[e[c]]=!1);a.layerId=a.getLayerId(f);a._Visible&&a._Show();return!0};a._UpdateVKShiftStyle=function(b){var c;if(b)for(c=0;c<a.layers.length&&a.layers[c].id!=a.layerId;c++);else{c=a.layerIndex;b=
a.layers[c].id;var d=a.layers[c];c=["K_CAPS","K_NUMLOCK","K_SCROLL"];var h=[d.capsKey,d.numKey,d.scrollKey];for(d=0;d<h.length;d++)if(null!=h[d]){h[d].sp=a._stateKeys[c[d]]?a.buttonClasses["SHIFT-ON"]:a.buttonClasses.SHIFT;var g=document.getElementById(b+"-"+c[d]);a.setButtonClass(h[d],g,a.layout)}}};a._CancelMouse=function(a){(a=b._GetEventObject(a))&&a.preventDefault&&a.preventDefault();a&&(a.cancelBubble=!0,a.returnValue=!1);return!1};a.showLayer=function(c){if(b._ActiveKeyboard)for(var d=0;d<
a.layers.length;d++)if(a.layers[d].id==c)return a.layerId=c,a._Show(),!0;return!1};a.getHeight=function(){if("function"==typeof b.getOskHeight)return b.getOskHeight();var a=Math.floor(Math.min(screen.availHeight,screen.availWidth)/2);if("phone"==l.formFactor)var d=Math.min(screen.height,screen.width),k=Math.max(screen.height,screen.width),a=g.portraitView()?Math.floor(Math.max(screen.availHeight,screen.availWidth)/3):k/d*a/1.6;"iOS"==l.OS&&(a/=g.getViewportScale());"Android"==l.OS&&"phone"==l.formFactor&&
"devicePixelRatio"in window&&/Firefox|Chrome|OPR/.test(navigator.userAgent)&&(a*=window.devicePixelRatio);return a};a.getWidth=function(){if("function"==typeof b.getOskWidth)return b.getOskWidth();var a=screen.width;if("Android"==l.OS)try{a=document.documentElement.clientWidth}catch(f){a=screen.availWidth}return a};a.mouseOverMouseDownHandler=function(b){var c=g.eventTarget(b);null!==c&&"desktop"==l.formFactor&&("SPAN"==c.nodeName&&(c=c.parentNode),"mousedown"==g.eventType(b)?(a.currentKey=c.id,a._CancelMouse(b),
a.highlightKey(c,!0)):c.id==a.currentKey&&a.highlightKey(c,!0))};a.mouseUpMouseOutHandler=function(b){var c=g.eventTarget(b);null!==c&&"desktop"==l.formFactor&&("SPAN"==c.nodeName&&(c=c.parentNode),a.highlightKey(c,!1),"mouseup"==g.eventType(b)&&(c.id==a.currentKey&&a.clickKey(c),a.currentKey=""))};a.getDefaultKeyObject=function(){return{text:"",width:"100",pad:"15",sp:"0",layer:null,nextlayer:null}};a.deviceDependentLayout=function(b,d){var c=g._CreateElement("DIV"),f=c.style,e=0;c.className="kmw-key-layer-group";
switch(d){case "phone":case "tablet":e=a.getHeight(),f.height=e+"px"}if(null==b)return c;f.fontSize="undefined"==typeof b.fontsize||null==b.fontsize?"1em":b.fontsize;a.fontSize=f.fontSize;var n;var w=b.layer;var p=a.getDefaultKeyObject();p.fontsize=f.fontSize;for(var q=/\*\w+\*/,e=0;e<w.length;e++){var u=w[e];var v=u.row;for(n=v.length;0<n&&!(0<v[n-1].key.length);n--);n<v.length&&v.splice(n-v.length,v.length-n)}var z=100/v.length;"desktop"==d&&(z=100/v.length);if("desktop"==d){var C=function(a){return a+
"%"};var D=100}else C=function(a){return Math.round(a)+"px"},D=a.getWidth();l.touchable&&"ontouchstart"in window&&(c.addEventListener("touchstart",a.touch,!0),c.addEventListener("touchend",a.release,!1),c.addEventListener("touchmove",a.moveOver,!1));for(e=0;e<w.length;e++){u=w[e];u.aligned=!1;var E=g._CreateElement("DIV");v=E.style;E.className="kmw-key-layer";v.display=0==e?"block":"none";v.height=f.height;v.fontFamily="font"in b?b.font:"";E.layer=E.nextLayer=u.id;"string"==typeof u.nextlayer&&(E.nextLayer=
u.nextlayer);v=u.row;var H=0;for(n=0;n<v.length;n++){var I=0;var y=v[n];var x=y.key;for(y=0;y<x.length;y++){var t=x[y];if(null==t)--x.length;else{var K="string"==typeof t.width&&""!=t.width?parseInt(t.width,10):100;if(isNaN(K)||0==K)K=100;t.width=K.toString();var F="string"==typeof t.pad&&""!=t.pad?parseInt(t.pad,10):15;if(isNaN(F)||0==F)F=15;t.pad=F.toString();I+=K+F}}I>H&&(H=I)}H="desktop"==d?H+5:H+15;for(n=0;n<v.length;n++){I=g._CreateElement("DIV");I.className="kmw-key-row";I.onmousedown=g.mouseDownPreventDefaultHandler;
y=v[n];K=I.style;K.maxHeight=K.height=z+"%";x=y.key;for(y=0;y<x.length;y++){t=x[y];for(var L in p)"string"!=typeof t[L]&&(t[L]=p[L]);switch(t.sp){case "1":q.test(t.text)||""==t.text||(t.sp="3");break;case "2":q.test(t.text)||""==t.text||(t.sp="4")}}for(y=F=0;y<x.length-1;y++){t=Math.round(parseInt(x[y].width,10)*D/H);x[y].widthpc=t;var J=Math.round(parseInt(x[y].pad,10)*D/H);x[y].padpc=J;F+=J+t}F+=Math.round(15*D/H);1==x.length&&0>parseInt(x[0].pad,10)?(t=Math.round(parseInt(x[0].width,10)*D/H),x[0].widthpc=
t,F+=t,x[0].padpc=D-F):0<x.length&&(y=x.length-1,J=Math.round(parseInt(x[y].pad,10)*D/H),x[y].padpc=J,F+=J,x[y].widthpc=D-F);for(y=F=0;y<x.length;y++){t=x[y];J=g._CreateElement("DIV");J.keyId=t.id;J.className="kmw-key-square";var A=J.style;J.width=A.width=C(t.widthpc);"desktop"!=d?(A.left=C(F+x[y].padpc),A.bottom=K.bottom,A.height=K.height):A.marginLeft=C(t.padpc);F=F+x[y].padpc+x[y].widthpc;var G=g._CreateElement("DIV");a.setButtonClass(t,G,b);"desktop"!=d&&(G.style.left=A.left,G.style.width=A.width);
A=null;if(b.keyLabels||"desktop"==d){var B=a.keyCodes[t.id];switch(B){case 186:B=59;break;case 187:B=61;break;case 188:B=44;break;case 189:B=45;break;case 190:B=46;break;case 191:B=47;break;case 192:B=96;break;case 219:B=91;break;case 220:B=92;break;case 221:B=93;break;case 222:B=39;break;default:if(48>B||90<B)B=0}0<B&&(A=g._CreateElement("DIV"),A.className="kmw-key-label",A.innerHTML=String.fromCharCode(B),G.appendChild(A))}G.id=u.id+"-"+t.id;G.key=t;if("undefined"!=typeof t.sk&&null!=t.sk)for(B=
G.subKeys=t.sk,A=0;A<B.length;A++){if("1"==B[A].sp||"2"==B[A].sp)B[A].text=a.renameSpecialKey(B[A].text)}else G.subKeys=null;l.touchable||(G.onmouseover=G.onmousedown=a.mouseOverMouseDownHandler,G.onmouseup=G.onmouseout=a.mouseUpMouseOutHandler);A=g._CreateElement("SPAN");B=A.style;null==t.text||""==t.text?(A.innerHTML="\u00a0","string"==typeof t.id&&/^U_[0-9A-F]{4}$/i.test(t.id)&&(A.innerHTML=String.fromCharCode(parseInt(t.id.substr(2),16)))):A.innerHTML=t.text;A.className="kmw-key-text";if("1"==
t.sp||"2"==t.sp)A.innerHTML=a.renameSpecialKey("*Tab*"==t.text&&1==e?"*TabLeft*":t.text);"font"in t&&(B.fontFamily=t.font);"fontsize"in t&&(B.fontSize=t.fontsize);G.appendChild(A);J.appendChild(G);"undefined"!=typeof t.sk&&null!=t.sk&&(t=g._CreateElement("DIV"),t.className="kmw-key-popup-icon",G.appendChild(t));I.appendChild(J)}E.appendChild(I)}c.appendChild(E)}return c};a.renameSpecialKey=function(a){for(var b="*Shift* *Enter* *Tab* *BkSp* *Menu* *Hide* *Alt* *Ctrl* *Caps* *ABC* *abc* *123* *Symbol* *Currency* *Shifted* *AltGr* *TabLeft*".split(" "),
c=[8,5,6,4,11,10,25,1,3,16,17,19,21,20,8,2,7],d=0;d<b.length;d++)if(a==b[d])return String.fromCharCode(57344+c[d]);return a};a.clearPopup=function(){var b=document.getElementById("kmw-popup-keys");null!=b&&(b.shim&&a._Box.removeChild(b.shim),b.parentNode.removeChild(b));a.popupCallout&&a._Box.removeChild(a.popupCallout);a.popupCallout=null;a.subkeyDelayTimer&&(window.clearTimeout(a.subkeyDelayTimer),a.subkeyDelayTimer=null);a.popupBaseKey=null};a.touch=function(c){var d=c.changedTouches[0].target,
k=a.keyTarget(d);a.touchX=c.changedTouches[0].pageX;a.currentTarget=k;var h=document.getElementById("kmw-popup-keys");if(!(h&&"visible"==h.style.visibility||a.popupVisible)){a.touchCount=c.touches.length;if(k&&0<=k.className.indexOf("key-hidden")||0<=d.className.indexOf("kmw-key-row"))k=a.findNearestKey(c,d);null!=k&&(c=k.id.split("-"),c=c[c.length-1],a.highlightKey(k,!0),"K_LOPT"==c||"K_ROPT"==c?(window.setTimeout(function(){a.clickKey(k)},0),a.keyPending=null):"K_BKSP"==c?(n.output(1,b._LastActiveElement,
""),a.deleting=window.setTimeout(a.repeatDelete,500),a.keyPending=null):(a.keyPending?(a.highlightKey(a.keyPending,!1),a.clickKey(a.keyPending),a.clearPopup(),a.touchCount--):a.touchHold(k),a.keyPending=k))}};a.release=function(b){var c=document.getElementById("kmw-popup-keys"),d=a.currentTarget;if(c&&"visible"==c.style.visibility||a.popupVisible){if(0<b.touches.length)return;if(null==d||0>d.id.indexOf("popup")&&d.id!=a.popupBaseKey.id)a.highlightKey(a.keyPending,!1),a.clearPopup(),a.keyPending=null}d&&
d.id&&a.optionKey(b,d.id,!1);d=b.changedTouches[0].pageX;d=2>d&&5<a.touchX||d>window.innerWidth-2&&a.touchX<window.innerWidth-5;c=a.touchCount;0<a.touchCount&&a.touchCount--;a.keyPending?(a.highlightKey(a.keyPending,!1),0>a.keyPending.className.indexOf("hidden")&&0<c&&!d&&a.clickKey(a.keyPending),a.clearPopup(),a.keyPending=null):(c=b.changedTouches[0],d=a.keyTarget(c.target),d||(d=document.elementFromPoint(c.clientX,c.clientY),d=a.findNearestKey(b,d)),a.highlightKey(d,!1));a.deleting&&window.clearTimeout(a.deleting);
a.deleting=0};a.moveOver=function(b){b.preventDefault();b.cancelBubble=!0;"function"==typeof b.stopImmediatePropagation?b.stopImmediatePropagation():"function"==typeof b.stopPropagation&&b.stopPropagation();if(!(1<b.touches.length||0==a.touchCount)){var c="object"==typeof b.touches?b.touches[0].clientX:b.clientX,d="object"==typeof b.touches?b.touches[0].clientY:b.clientY,h=document.elementFromPoint(c,d),g=a.keyPending,e=a.keyTarget(h);if(e&&0<=e.className.indexOf("key-hidden")||h&&!e&&0<=h.className.indexOf("key-row"))e=
a.findNearestKey(b,h);e&&"string"==typeof e.id&&0>e.id.indexOf("BKSP")&&(a.deleting&&window.clearTimeout(a.deleting),a.deleting=0);if(a.popupVisible)null==e?(g&&a.highlightKey(g,!1),a.keyPending=null):e==a.popupBaseKey?(a.hasClass(e,"kmw-key-touched")||a.highlightKey(e,!0),a.keyPending=e):(g&&a.highlightKey(g,!1),a.keyPending=null);else{(h=document.getElementById("kmw-popup-keys"))&&"visible"==h.style.visibility&&"phone"==l.formFactor&&e==a.popupBaseKey&&(e=h.childNodes[0].firstChild);a.currentTarget=
e;g&&e&&e.id!=g.id&&a.highlightKey(g,!1);a.highlightSubKeys(e,c,d);if(h&&"visible"==h.style.visibility){if(e&&0>e.id.indexOf("popup")&&e!=a.popupBaseKey)return;e&&e==a.popupBaseKey&&0>e.className.indexOf("kmw-key-touched")&&a.highlightKey(e,!0)}else g&&b.touches[0].pageY<Math.max(5,a._Box.offsetTop-.25*a._Box.offsetHeight)&&(a.highlightKey(g,!1),a.showKeyTip(null,!1),a.keyPending=null);e&&a.keyPending&&(a.keyPending=e);a.keyPending&&(g!=e||0>e.className.indexOf("kmw-key-touched"))&&a.highlightKey(e,
!0);g&&e&&e!=g&&""!=e.id&&a.touchHold(e)}}};a.hasClass=function(a,b){b=" "+b+" ";return 0<=(" "+a.className+" ").replace(/[\n\t\r\f]/g," ").indexOf(b)};a.keyTarget=function(b){try{if(b){if(a.hasClass(b,"kmw-key"))return b;if(b.parentNode&&a.hasClass(b.parentNode,"kmw-key"))return b.parentNode;if(b.firstChild&&a.hasClass(b.firstChild,"kmw-key"))return b.firstChild}}catch(f){}return null};a.findNearestKey=function(a,b){if(!a||"undefined"==typeof a.changedTouches||0==a.changedTouches.length)return null;
for(a=a.changedTouches[0].pageX;b&&0>b.className.indexOf("key-row");)b=b.parentNode;if(!b)return null;var c,d=0,f=24,g=1E5;for(c=0;c<b.childNodes.length;c++)if(!(0<=b.childNodes[c].firstChild.className.indexOf("key-hidden"))){var e=b.childNodes[c].firstChild.offsetLeft;var n=e+b.childNodes[c].firstChild.offsetWidth;e-=a;0<=e&&e<g&&(d=c,g=e);e=a-n;0<=e&&e<g&&(d=c,g=e)}return 1E5>g&&(b=b.childNodes[d].firstChild,e=b.offsetLeft,n=e+b.offsetWidth,40<b.offsetWidth&&(f=.6*b.offsetWidth),0<=e-a&&e-a<f||
0<=a-n&&a-n<f)?b:null};a.repeatDelete=function(){a.deleting&&(n.output(1,b._LastActiveElement,""),a.deleting=window.setTimeout(a.repeatDelete,100))};a.setButtonClass=function(b,d,k){var c=0,f="default shift shift-on special special-on    deadkey blank hidden".split(" ");"string"==typeof b.dk&&"1"==b.dk&&(c=8);"string"==typeof b.sp&&(c=parseInt(b.sp,10));if(0>c||10<c)c=0;k=k||a.layout;d.className=4<k.layer[0].row.length&&"phone"==g.device.formFactor?"kmw-key kmw-5rows kmw-key-"+f[c]:"kmw-key kmw-key-"+
f[c]};a.processLegacyDefinitions=function(b){for(var c=a.generateLayerIds(!1),k={},g=0;g<c.length;g++){for(var e=c[g],n=[],l=!1,p=0;65>p;p++){var q=p+65*g;n.push(b[q]);q<b.length&&""!=b[q]&&p!=d.indexOf("K_SPACE")&&(l=!0)}l&&(k[e]=n)}"undefined"!=typeof k["default"]&&k["default"]||(k["default"]=[""]);"undefined"!=typeof k.shift&&k.shift||(k.shift=[""]);return k};a.formatDefaultLayer=function(b,d,k,g){for(var c=b.id,f=0;f<b.row.length;f++)for(var e=b.row[f].key,h=0;h<e.length;h++){var n=e[h];switch(n.id){case "K_SHIFT":case "K_LSHIFT":case "K_RSHIFT":-1!=
c.indexOf("shift")&&(n.sp=a.buttonClasses["SHIFT-ON"]);"desktop"!=k&&"default"!=c&&(n.nextlayer="default");break;case "K_LCTRL":case "K_LCONTROL":if(d){-1!=c.indexOf("leftctrl")&&(n.sp=a.buttonClasses["SHIFT-ON"]);break}case "K_RCTRL":case "K_RCONTROL":if(d){-1!=c.indexOf("rightctrl")&&(n.sp=a.buttonClasses["SHIFT-ON"]);break}case "K_CONTROL":-1==c.indexOf("ctrl")||d&&(-1==c.indexOf("leftctrl")||-1==c.indexOf("rightctrl"))||(n.sp=a.buttonClasses["SHIFT-ON"]);break;case "K_LALT":if(d){-1!=c.indexOf("leftalt")&&
(n.sp=a.buttonClasses["SHIFT-ON"]);break}case "K_RALT":if(d){-1!=c.indexOf("rightalt")&&(n.sp=a.buttonClasses["SHIFT-ON"]);break}case "K_ALT":-1==c.indexOf("alt")||d&&(-1==c.indexOf("leftalt")||-1==c.indexOf("rightalt"))||(n.sp=a.buttonClasses["SHIFT-ON"]);break;case "K_oE2":"undefined"!=typeof g&&g||("desktop"==k?(e.splice(h--,1),e[0].width="200"):e[h].sp=a.buttonClasses.HIDDEN)}}};a.generateLayerIds=function(b){if(b){b=32;var c=1}else b=8,c=16;for(var d=[],g=0;g<b;g++)d.push(a.getLayerId(g*c));
return d};a.emulatesAltGr=function(b){return!(b?b:a.layers)[a.getLayerId(a.modifierCodes.LCTRL|a.modifierCodes.LALT)]};a.buildDefaultLayout=function(c,f,e){var k=e;var n=b.dfltLayout;"object"!=typeof n[k]&&(k="desktop");k=g.deepCopy(n[k]);var n=k.layer,l=c.KLS,w=c.K102;var p=f&a.modifierBitmasks.IS_CHIRAL;"undefined"!=typeof l&&l||(l=a.processLegacyDefinitions(c.BK));f=Object.getOwnPropertyNames(l);var q=[];f.splice(f.indexOf("default"),1);f=["default"].concat(f);a.emulatesAltGr(l)&&-1!=f.indexOf("rightalt")&&
(f.push("leftctrl-leftalt"),l["leftctrl-leftalt"]=l.rightalt);if("desktop"==e)for(q=a.generateLayerIds(p),c=0;c<q.length;c++)-1!=f.indexOf(q[c])&&q.splice(c--,1);q=f.concat(q);for(c=0;c<q.length;c++)0<c&&(n[c]=g.deepCopy(n[0])),n[c].id=q[c],n[c].nextlayer=q[c],a.formatDefaultLayer(n[c],0!=p,e,!!w);for(c=0;c<n.length;c++){var u=n[c],v=null,z=null,C=null,D=null,E=l[u.id],H="shift"==u.id?1:0,I="default"==u.id||H?1:0;q=u.row;for(w=0;w<q.length;w++){var y=q[w].key;for(p=0;p<y.length;p++){var x=y[p];var t=
d.indexOf(x.id);if(E||I)E&&0<=t&&t<E.length&&(x.text=E[t]),I&&(""==x.text||"undefined"==typeof x.text)&&"K_SPACE"!=x.id&&130>t+65*H&&(x.text="`1234567890-=\u00a7~~qwertyuiop[]\\~~~asdfghjkl;'~~~~~?zxcvbnm,./~~~~~ ~!@#$%^&*()_+\u00a7~~QWERTYUIOP{}\\~~~ASDFGHJKL:\"~~~~~?ZXCVBNM<>?~~~~~ "[t+65*H]);"undefined"==typeof x.text&&(x.text="");switch(x.id){case "K_SHIFT":v=x;break;case "K_CAPS":z=x;break;case "K_NUMLOCK":C=x;break;case "K_SCROLL":D=x}if(null!=x.sk){for(t=0;t<x.sk.length;t++)-1==f.indexOf(x.sk[t].nextlayer)&&
x.sk.splice(t--,1);0==x.sk.length&&(x.sk=null)}}}u.shiftKey=v;u.capsKey=z;u.numKey=C;u.scrollKey=D;if("desktop"!=e&&0<c&&null!=v)switch(v.sp=a.buttonClasses["SHIFT-ON"],v.sk=null,n[c].id){case "ctrl":v.text="*Ctrl*";break;case "alt":v.text="*Alt*";break;case "ctrl-alt":v.text="*AltGr*"}}return k};a._GenerateVisualKeyboard=function(c,d,e,h){d=g._CreateElement("DIV");if("object"!=typeof e||null==e)e=a.buildDefaultLayout(c,h,l.formFactor);a.layout=e;a.layers=e.layer;a.fontFamily="font"in e?e.font:"";
e.keyLabels=b._ActiveKeyboard&&"undefined"!=typeof b._ActiveKeyboard.KDU&&b._ActiveKeyboard.KDU;c=a.deviceDependentLayout(e,l.formFactor);a.ddOSK=!0;a.keyMap=c;d.appendChild(c);a._DivVKbdHelp=a._DivVKbd=d;a._Box.className=l.formFactor+" "+l.OS.toLowerCase()+" kmw-osk-frame";d.className=l.formFactor+" kmw-osk-inner-frame";"desktop"==l.formFactor&&a._Box.appendChild(a.controlBar());a._Box.appendChild(d);"desktop"==l.formFactor?a._Box.appendChild(a.resizeBar()):a.adjustHeights()};b.BuildVisualKeyboard=
b.buildOSK=function(c,d,e,g){d=b._ActiveKeyboard;var f="undefined"==typeof e?"desktop":e;g="undefined"==typeof g?"default":g;if(null!=c)for(c=c.toLowerCase().replace("keyboard_",""),e=0;e<b._Keyboards.length;e++)if(c==b._Keyboards[e].KI.toLowerCase().replace("keyboard_","")){d=b._Keyboards[e];break}if(!d)return null;e=d.KVKL;c=null;var k=d.KV;"object"==typeof e&&("object"==typeof e[f]&&null!=e[f]?c=e[f]:"phone"==f&&"object"==typeof e.tablet&&null!=e.tablet?c=e.tablet:"tablet"==f&&"object"==typeof e.phone&&
null!=e.phone?c=e.phone:"object"==typeof e.desktop&&null!=e.desktop&&(c=e.desktop));null==c&&null!=k&&(c=a.buildDefaultLayout(k,b.getKeyboardModifierBitmask(d),f));null!=c&&(c.keyLabels="undefined"!=typeof d.KDU&&d.KDU);k=a.deviceDependentLayout(c,f);k.className=f+"-static kmw-osk-inner-frame";if(null!=c){var h,n;for(e=0;e<c.layer.length;e++){d=k.childNodes[e];for(h=0;h<d.childNodes.length;h++)for(f=d.childNodes[h],n=0;n<f.childNodes.length;n++){var l=f.childNodes[n];l.style.height="100%"}d.style.display=
"number"==typeof g?e==g&&0<=g?"block":"none":"string"==typeof g?c.layer[e].id==g?"block":"none":0==e?"block":"none"}}else k.innerHTML="<p style='color:#c40; font-size:0.5em;margin:10px;'>No "+f+" layout is defined for "+d.KN+".</p>";k.style.border="1px solid #ccc";return k};a.adjustHeights=function(){if(a._Box&&a._Box.firstChild&&a._Box.firstChild.firstChild&&a._Box.firstChild.firstChild.childNodes){var b=a._Box.firstChild.firstChild.childNodes,d=b[0].childNodes.length,e=a.getHeight(),h=Math.floor(e/
(0==d?1:d)),n,r,w;var p=1;"Android"==l.OS&&"devicePixelRatio"in window&&(h/=window.devicePixelRatio);e=d*h;d=a._Box;h=d.style;h.height=h.maxHeight=e+3+"px";d=d.firstChild.firstChild;h=d.style;h.height=h.maxHeight=e+3+"px";"phone"==l.formFactor&&(p=.6);"iOS"==l.OS&&(p/=g.getViewportScale());h.fontSize=p+"em";var q="iOS"==l.OS&&"phone"==l.formFactor&&g.landscapeView();for(p=0;p<b.length;p++){d=b[p].childNodes.length;h=Math.floor(e/(0==d?1:d));var u=Math.round(.15*h);b[p].style.height=e+3+"px";for(n=
0;n<d;n++){var v=b[p].childNodes[n].style;v.bottom=(d-n-1)*h+1+"px";v.maxHeight=v.height=h+"px";var z=b[p].childNodes[n].childNodes;var C=z.length;for(r=0;r<C;r++){var D=z[r];for(w=0;w<D.childNodes.length&&!a.hasClass(D.childNodes[w],"kmw-key");w++);var E=D.childNodes[w].style;E.bottom=v.bottom;E.height=E.minHeight=h-u+"px";q&&0<w&&(D.childNodes[0].style.fontSize="6px")}}}}};a.controlBar=function(){var c=g._CreateElement("DIV"),d="";c.id="keymanweb_title_bar";c.className="kmw-title-bar";c.onmousedown=
a._VMoveMouseDown;b._ActiveKeyboard&&(d=b._ActiveKeyboard.KN);var e=g._CreateElement("SPAN");e.className="kmw-title-bar-caption";e.innerHTML=d;c.appendChild(e);d=a.closeButton=g._CreateElement("DIV");d.id="kmw-close-button";d.className="kmw-title-bar-image";d.onmousedown=a._CancelMouse;d.onclick=function(){a._Hide(!0)};c.appendChild(d);d=a.helpImg=g._CreateElement("DIV");d.id="kmw-help-image";d.className="kmw-title-bar-image";d.title="KeymanWeb Help";d.onclick=function(){g.callEvent("osk.helpclick",
{});window.event&&(window.event.returnValue=!1);return!1};d.onmousedown=a._CancelMouse;c.appendChild(d);d=a.configImg=g._CreateElement("DIV");d.id="kmw-config-image";d.className="kmw-title-bar-image";d.title="KeymanWeb Configuration Options";d.onclick=function(){g.callEvent("osk.configclick",{});window.event&&(window.event.returnValue=!1);return!1};d.onmousedown=a._CancelMouse;c.appendChild(d);d=a.pinImg=g._CreateElement("DIV");d.id="kmw-pin-image";d.className="kmw-title-bar-image";d.title="Pin the On Screen Keyboard to its default location on the active text box";
d.onclick=function(){a.loadCookie();a.userPositioned=!1;a.saveCookie();a._Show();a.doResizeMove();a.pinImg&&(a.pinImg.style.display="none");window.event&&(window.event.returnValue=!1);return!1};d.onmousedown=a._CancelMouse;c.appendChild(d);return c};a.showBuild=function(){g.alert("KeymanWeb Version "+b.version+"."+b.build+'<br /><br /><span style="font-size:0.8em">Copyright &copy; 2017 SIL International</span>')};a.resizeBar=function(){var b=g._CreateElement("DIV");b.className="kmw-footer";b.onmousedown=
a._CancelMouse;var d=g._CreateElement("DIV");d.className="kmw-footer-caption";d.innerHTML='<a href="https://keyman.com/developer/keymanweb/">KeymanWeb</a>';d.id="keymanweb-osk-footer-caption";g.attachDOMEvent(d,"dblclick",function(b){b&&b.shiftKey&&a.showBuild()},!1);"onselectstart"in d&&(d.onselectstart=g.selectStartHandler);b.appendChild(d);d=g._CreateElement("DIV");d.className="kmw-footer-resize";d.onmousedown=a._VResizeMouseDown;d.onmouseover=d.onmouseout=a._VResizeMouseOut;b.appendChild(d);a.resizeIcon=
d;return b};a._VKbdMouseOver=function(a){b._IsActivatingKeymanWebUI=1};a._VKbdMouseOut=function(a){b._IsActivatingKeymanWebUI=0};a._VResizeMouseOver=a._VResizeMouseOut=function(c){c=b._GetEventObject(c);if(!c)return!1;c&&c.preventDefault&&c.preventDefault();var d=a.getRect();a.width=d.width;a.height=d.height;c.cancelBubble=!0;return!1};a._VResizeMouseDown=function(c){b._JustActivatedKeymanWebUI=1;c=b._GetEventObject(c);if(!c)return!0;a.resizing=1;if(c.pageX){var d=c.pageX;var e=c.pageY}else c.clientX&&
(d=c.clientX+document.body.scrollLeft,e=c.clientY+document.body.scrollTop);a._ResizeMouseX=d;a._ResizeMouseY=e;document.onmousemove!=a._VResizeMouseMove&&document.onmousemove!=a._VMoveMouseMove&&(a._VPreviousMouseMove=document.onmousemove,a._VPreviousMouseUp=document.onmouseup);a._VPreviousCursor=document.body.style.cursor;a._VPreviousMouseButton="undefined"==typeof c.which?c.button:c.which;a._VOriginalWidth=a._DivVKbd.offsetWidth;a._VOriginalHeight=a._DivVKbd.offsetHeight;document.onmousemove=a._VResizeMouseMove;
document.onmouseup=a._VResizeMoveMouseUp;document.body.style.cursor&&(document.body.style.cursor="se-resize");c&&c.preventDefault&&c.preventDefault();c.cancelBubble=!0;return!1};a._VResizeMouseMove=function(c){c=b._GetEventObject(c);if(!c)return!0;a.resizing=1;if(a._VPreviousMouseButton!=("undefined"==typeof c.which?c.button:c.which))return a._VResizeMoveMouseUp(c);if(c.pageX){var d=c.pageX;var e=c.pageY}else c.clientX&&(d=c.clientX+document.body.scrollLeft,e=c.clientY+document.body.scrollTop);d=
a._VOriginalWidth+d-a._ResizeMouseX;e=a._VOriginalHeight+e-a._ResizeMouseY;d<.2*screen.width&&(d=.2*screen.width);e<.1*screen.height&&(e=.1*screen.height);d>.9*screen.width&&(d=.9*screen.width);e>.5*screen.height&&(d=.5*screen.height);a._DivVKbd.style.width=d+"px";a._DivVKbd.style.height=e+"px";a._DivVKbd.style.fontSize=e/8+"px";c&&c.preventDefault&&c.preventDefault();c.cancelBubble=!0;return!1};a._VMoveMouseDown=function(c){b._JustActivatedKeymanWebUI=1;c=b._GetEventObject(c);if(!c)return!0;a.resizing=
1;if(c.pageX){var d=c.pageX;var e=c.pageY}else c.clientX&&(d=c.clientX+document.body.scrollLeft,e=c.clientY+document.body.scrollTop);document.onmousemove!=a._VResizeMouseMove&&document.onmousemove!=a._VMoveMouseMove&&(a._VPreviousMouseMove=document.onmousemove,a._VPreviousMouseUp=document.onmouseup);a._VPreviousCursor=document.body.style.cursor;a._VPreviousMouseButton="undefined"==typeof c.which?c.button:c.which;a._VMoveX=d-a._Box.offsetLeft;a._VMoveY=e-a._Box.offsetTop;b.isCJK()&&(a.pinImg.style.left=
"15px");document.onmousemove=a._VMoveMouseMove;document.onmouseup=a._VResizeMoveMouseUp;document.body.style.cursor&&(document.body.style.cursor="move");c&&c.preventDefault&&c.preventDefault();c.cancelBubble=!0;return!1};a._VMoveMouseMove=function(c){c=b._GetEventObject(c);if(!c||a.noDrag)return!0;a.resizing=1;a.userPositioned=!0;a.pinImg.style.display="block";if(a._VPreviousMouseButton!=("undefined"==typeof c.which?c.button:c.which))return a._VResizeMoveMouseUp(c);if(c.pageX){var d=c.pageX;var e=
c.pageY}else c.clientX&&(d=c.clientX+document.body.scrollLeft,e=c.clientY+document.body.scrollTop);a._Box.style.left=d-a._VMoveX+"px";a._Box.style.top=e-a._VMoveY+"px";c&&c.preventDefault&&c.preventDefault();d=a.getRect();a.width=d.width;a.height=d.height;c.cancelBubble=!0;return!1};a._VResizeMoveMouseUp=function(c){c=b._GetEventObject(c);if(!c)return!0;a.resizing=0;a.currentKey=null;document.onmousemove=a._VPreviousMouseMove;document.onmouseup=a._VPreviousMouseUp;document.body.style.cursor&&(document.body.style.cursor=
a._VPreviousCursor);b._FocusLastActiveElement();c&&c.preventDefault&&c.preventDefault();b._JustActivatedKeymanWebUI=0;b._IsActivatingKeymanWebUI=0;a._DivVKbd&&(a._VOriginalWidth=a._DivVKbd.offsetWidth,a._VOriginalHeight=a._DivVKbd.offsetHeight);a.doResizeMove();c.cancelBubble=!0;a.saveCookie();return!1};a.userLocated=function(){return a.userPositioned};a.show=function(b){0<arguments.length?(a._Enabled=b)?a._Show():a._Hide(!0):a._Visible?a._Hide(!0):a._Show()};a.doShow=function(a){return g.callEvent("osk.show",
a)};a.doHide=function(a){return g.callEvent("osk.hide",a)};a.doResizeMove=function(a){return g.callEvent("osk.resizemove",a)};a._Show=function(c,d){if(null!=a._Box&&null!=b._ActiveElement&&(l.touchable||null!=b._ActiveKeyboard&&a._Enabled)){var f=a._Box.style;l.touchable&&""==f.bottom&&(f.visibility="hidden");if(a.ddOSK){var e,n=-1,r=a._DivVKbd.childNodes[0].childNodes;for(e=0;e<r.length;e++)r[e].layer==a.layerId?(r[e].style.display="block",a.nextLayer=a.layerId,a.layerIndex=n=e,"string"==typeof a.layers[e].nextlayer&&
(a.nextLayer=a.layers[e].nextlayer),a._UpdateVKShiftStyle()):r[e].style.display="none";l.touchable&&(f.position="fixed",f.left=f.bottom="0px",f.height=f.maxHeight=a._Box.firstChild.firstChild.style.height,f.border="none",f.borderTop="1px solid gray",a._Enabled=1,a._Visible=1,"phone"==l.formFactor?a._DivVKbd.style.fontSize="120%":"Android"==l.OS&&"tablet"==l.formFactor&&300>parseInt(f.height,10)?a._DivVKbd.style.fontSize="120%":a._DivVKbd.style.fontSize="200%",a.lgKey=a.getSpecialKey(n,"K_LOPT"),a.hkKey=
a.getSpecialKey(n,"K_ROPT"),"iOS"==l.OS&&"phone"==l.formFactor&&a.adjustHeights());a.spaceBar=a.getSpecialKey(n,"K_SPACE")}f.display="block";a.showLanguage();"desktop"==l.formFactor&&(f.position="absolute",f.display="block",f.left="0px",a.loadCookie(),0<=c?(f.left=c+"px",f.top=d+"px"):a.userPositioned?(f.left=a.x+"px",f.top=a.y+"px"):(c=b._ActiveElement,""!=a.dfltX?f.left=a.dfltX:"undefined"!=typeof c&&null!=c&&(f.left=g._GetAbsoluteX(c)+"px"),""!=a.dfltY?f.top=a.dfltY:"undefined"!=typeof c&&null!=
c&&(f.top=g._GetAbsoluteY(c)+c.offsetHeight+"px")),a._Enabled=1,a._Visible=1,a._DivVKbd&&(a.width=a._DivVKbd.offsetWidth,a.height=a._DivVKbd.offsetHeight),a.saveCookie(),c=a.pinImg,"undefined"!=typeof c&&null!=c&&(c.style.display=a.userPositioned?"block":"none"));"hidden"==f.visibility&&window.setTimeout(function(){a._Box.style.visibility="visible"},0);l.touchable||(f={},f.x=a._Box.offsetLeft,f.y=a._Box.offsetTop,f.userLocated=a.userPositioned,a.doShow(f))}};a.adjustRowLengths=function(b){if(!(0<=
b)){var c=a._DivVKbd.childNodes[0].childNodes;if(!(0>b||b>=c.length||c[b].aligned)&&"block"==c[b].style.display){var d=a._DivVKbd.childNodes[0].offsetWidth-6;"Windows"==l.OS&&(d-=g.landscapeView()?4:40);var e,n=c[b].childNodes;for(e=0;e<n.length;e++){var r=n[e].childNodes;var w=r.length;var p=r[w-2].offsetLeft+r[w-2].offsetWidth;r=r[w-1];r.style.width=d-p+"px"}c[b].aligned=!0}}};a.resetRowLengths=function(){var b,d=a._DivVKbd.childNodes[0].childNodes,e=-1;for(b=0;b<d.length;b++)"block"==d[b].style.display&&
(e=b),d[b].aligned=!1;return e};a.getSpecialKey=function(b,d){var c=a._DivVKbd.childNodes[0].childNodes;if(0<=b&&b<c.length)for(b=c[b].childNodes,c=b[b.length-1].childNodes,b=0;b<c.length;b++)if(c[b].keyId==d)return c[b];return null};a.hide=function(){a._Enabled=0;a._Hide(!0)};a._Hide=function(c){a._Box&&"block"==a._Box.style.display&&a._DivVKbd&&(a.width=a._DivVKbd.offsetWidth,a.height=a._DivVKbd.offsetHeight);if(c)a._Enabled=b.isCJK()||l.touchable?1:0,a.saveCookie();else if("desktop"==l.formFactor&&
0<=document.body.className.indexOf("osk-always-visible"))return;a._Visible=0;if(a._Box&&l.touchable&&0<a._Box.offsetHeight){var d=a._Box.style;d.transition="string"==typeof d.MozBoxSizing?"opacity 0.8s linear":d.msTransition=d.WebkitTransition="opacity 0.5s linear 0";window.setTimeout(function(){var b=a._Box.style;a._Visible?b.transition=b.msTransition=b.MozTransition=b.WebkitTransition="":(b.opacity="0",a._Box.addEventListener("transitionend",a.hideNow,!1),a._Box.addEventListener("webkitTransitionEnd",
a.hideNow,!1))},200)}else a._Box&&(a._Box.style.display="none");d={};d.HiddenByUser=c;a.doHide(d);c&&b._FocusLastActiveElement()};a.hideNow=function(){a._Box.removeEventListener("transitionend",a.hideNow,!1);a._Box.removeEventListener("webkitTransitionEnd",a.hideNow,!1);var b=a._Box.style;b.display="none";b.opacity="1";a._Visible=0;b.transition=b.msTransition=b.mozTransition=b.WebkitTransition="";a.hkKey&&"undefined"!=typeof a.hkKey&&a.highlightKey(a.hkKey.firstChild,!1)};a.prepare=function(){b.initialized?
(a.ready||(a._Box=g._CreateElement("DIV"),document.body.appendChild(a._Box),g.linkStyleSheet(b.getStyleSheetPath("kmwosk.css")),g.attachDOMEvent(a._Box,"mousedown",function(){b._IsActivatingKeymanWebUI=1}),l.touchable&&(g.attachDOMEvent(a._Box,"touchstart",function(a){b._IsActivatingKeymanWebUI=1;a.preventDefault();a.stopPropagation()}),g.attachDOMEvent(a._Box,"touchend",function(a){a.preventDefault();a.stopPropagation()}),g.attachDOMEvent(a._Box,"touchmove",function(a){a.preventDefault();a.stopPropagation()}),
g.attachDOMEvent(a._Box,"touchcancel",function(a){a.preventDefault();a.stopPropagation()}),a.vpScale=g.getViewportScale())),a.loadCookie(),a.ready=!0):window.setTimeout(a.prepare,200)};a._Load=function(){if(null==a._Box)99<=a.loadRetry||(window.setTimeout(a._Load,100),a.loadRetry++);else{a.loadRetry=0;b._TitleElement&&(b._TitleElement.innerHTML="KeymanWeb");a._Visible=0;a.layerId="default";var c=a._Box.style;c.zIndex="9999";c.display="none";c.width="auto";c.position="desktop"==l.formFactor?"absolute":
"fixed";"phone"==l.formFactor&&(c.fontSize="1.6em");a._DivVKbd=a._DivVKbdHelp=null;a._Box.innerHTML="";a._Box.onmouseover=a._VKbdMouseOver;a._Box.onmouseout=a._VKbdMouseOut;if(null!=b._ActiveKeyboard||l.touchable){var d=null;var e=null,c="";a._Box.className="";if(null!=b._ActiveKeyboard){d=b._ActiveKeyboard.KV;c=b._ActiveKeyboard.KH;var h=b._ActiveKeyboard.KVKL;"undefined"!=typeof h&&null!=h&&(e=h[l.formFactor],"undefined"==typeof e||null==e)&&("phone"==l.formFactor?e=h.tablet:"tablet"==l.formFactor&&
(e=h.phone),"undefined"==typeof e||null==e)&&(e=h.desktop)}if(null!=d&&null!=d.BK){h=d.BK;for(var n=!0,r=0;r<h.length;r++)if(0<h[r].length){n=!1;break}n&&(d=null)}null!=d||""==c||l.touchable?(null==d&&(d={F:"Tahoma",BK:"`1234567890-=\u00a7~~qwertyuiop[]\\~~~asdfghjkl;'~~~~~?zxcvbnm,./~~~~~ ~!@#$%^&*()_+\u00a7~~QWERTYUIOP{}\\~~~ASDFGHJKL:\"~~~~~?ZXCVBNM<>?~~~~~ "}),a._GenerateVisualKeyboard(d,c,e,b.getKeyboardModifierBitmask())):(a.ddOSK=!1,d=g._CreateElement("DIV"),d.className="kmw-title-bar",d.appendChild(a._TitleBarInterior()),
d.onmousedown=a._VMoveMouseDown,a._Box.appendChild(d),d=g._CreateElement("DIV"),d.className="kmw-osk-static",d.innerHTML=c,a._Box.appendChild(d),b._ActiveKeyboard.KHF&&b._ActiveKeyboard.KHF(a._Box));b._TitleElement&&(b._TitleElement.innerHTML="<span style='font-weight:bold'>"+b._ActiveKeyboard.KN+"</span> - "+b._TitleElement.innerHTML,b._TitleElement.className="",b._TitleElement.style.color="#fff")}else d=g._CreateElement("DIV"),d.className="kmw-title-bar",d.appendChild(a._TitleBarInterior()),d.onmousedown=
a._VMoveMouseDown,a._Box.appendChild(d),d=g._CreateElement("DIV"),d.className="kmw-osk-none",a._Box.appendChild(d);a.createKeyTip();c=a._Box.firstChild;d=" kmw-keyboard-"+(b._ActiveKeyboard?b._ActiveKeyboard.KI.replace("Keyboard_",""):"");"keymanweb_title_bar"==c.id&&(c=c.nextSibling);c.className="kmw-osk-inner-frame"+d;a.appendStyleSheet();a._Enabled&&a._Show()}};a.appendStyleSheet=function(){if(null!=b._ActiveStub){a.styleSheet&&g.removeStyleSheet(a.styleSheet);var c=b._ActiveStub,d=c.KFont,c=c.KOskFont;
g.addFontFaceStyleSheet(d);g.addFontFaceStyleSheet(c);b.alignInputs(!1);var e=a.addFontStyle(d,c);null!=b._ActiveKeyboard&&"string"==typeof b._ActiveKeyboard.KCSS&&(e+=b._ActiveKeyboard.KCSS);a.styleSheet=g.addStyleSheet(e);a.waitForFonts(d,c)&&b.alignInputs(!0)}};a.addFontStyle=function(a,d){var c=b.baseFont;"undefined"!=typeof a&&"undefined"!=typeof a.family&&(c=a.family);var c=c.replace(/\u0022/g,""),f=new RegExp("s?"+c+",?"),e=b.appliedFont.replace(/\u0022/g,""),e=e.replace(f,""),e=e.replace(/,$/,
""),e='"'+(""==e?c:c+","+e).replace(/\,\s?/g,'","')+'"',c=".keymanweb-font{\nfont-family:"+e+" !important;\n}\n";"undefined"!=typeof d?c=c+'.kmw-key-text{\nfont-family:"'+d.family.replace(/\u0022/g,"").replace(/,/g,'","')+'";\n}\n':"undefined"!=typeof a&&(c=c+'.kmw-key-text{\nfont-family:"'+a.family.replace(/\u0022/g,"").replace(/,/g,'","')+'";\n}\n');b.appliedFont=e;return c};a._Unload=function(){a._VShift=a._DivVKbd=a._VKeySpans=a._Box=0};a.saveCookie=function(){var b=g.loadCookie("KeymanWeb_OnScreenKeyboard"),
d=a.getPos();b.visible=a._Enabled?1:0;b.userSet=a.userPositioned?1:0;b.left=d.left;b.top=d.top;a._DivVKbd&&(b.width=a.width,b.height=a.height);g.saveCookie("KeymanWeb_OnScreenKeyboard",b)};a.loadCookie=function(){var b=g.loadCookie("KeymanWeb_OnScreenKeyboard");if("undefined"==typeof b||null==b)return a.userPositioned=!1;a._Enabled=g.toNumber(b.visible,!0);a.userPositioned=g.toNumber(b.userSet,!1);a.x=g.toNumber(b.left,-1);a.y=g.toNumber(b.top,-1);var d=g.toNumber(b.width,.3*screen.width),b=g.toNumber(b.height,
.15*screen.height);d<.2*screen.width&&(d=.2*screen.width);b<.1*screen.height&&(b=.1*screen.height);d>.9*screen.width&&(d=.9*screen.width);b>.5*screen.height&&(d=.5*screen.height);a._DivVKbd&&(a._DivVKbd.style.width=d+"px",a._DivVKbd.style.height=b+"px",a._DivVKbd.style.fontSize=b/8+"px");-1!=a.x&&-1!=a.y&&a._Box||(a.userPositioned=!1);a.x<window.pageXOffset-.8*d&&(a.x=window.pageXOffset-.8*d);0>a.y&&(a.x=-1,a.y=-1,a.userPositioned=!1);a.userPositioned&&a._Box&&a.setPos({left:a.x,top:a.y});return!0}}();window.keyman.initialized||function(){var b=window.keyman,a=b.osk,g=b.util,l=g.device;b.isEmbedded=!1;b.setDefaultDeviceOptions=function(a){""==a.attachType&&(a.attachType=l.touchable?"manual":"auto")};g.wait=function(a){var e=b.waiting;if("undefined"!=typeof e&&null!=e&&!b.warned){var d=e.firstChild.childNodes;a?(e.pending=!0,window.setTimeout(function(){e.pending&&(window.scrollTo(0,0),d[0].style.display="none",d[1].className="kmw-wait-text",d[1].innerHTML=a,d[2].style.display="block",e.style.display=
"block")},1E3)):e.pending&&(d[1].innerHTML="",e.pending=!1,e.style.display="none")}};b.getStyleSheetPath=function(a){return g.getOption("resources")+"osk/"+a};b.getKeyboardPath=function(a){return(/^(([.]\/)|([.][.]\/)|(\/))|(:)/.test(a)?"":b.options.keyboards)+a};b.KC_=function(a,e,d){var c,f="";var g=d.body?d:d.ownerDocument;if(l.touchable)f=b.getTextBeforeCaret(d);else if(b.legacy)f=d.value;else if(g&&(c=g.defaultView)&&c.getSelection&&("on"==g.designMode.toLowerCase()||"true"==d.contentEditable||
"plaintext-only"==d.contentEditable||""===d.contentEditable))d=c.getSelection(),3==d.focusNode.nodeType&&(f=d.focusNode.substringData(0,d.focusOffset));else if(d.setSelectionRange){if(d._KeymanWebSelectionStart)f=d._KeymanWebSelectionStart;else{if(null===b._CachedSelectionStart||d.selectionStart!==b._LastCachedSelection)b._LastCachedSelection=d.selectionStart,b._CachedSelectionStart=d.value._kmwCodeUnitToCodePoint(d.selectionStart),b._CachedSelectionEnd=d.value._kmwCodeUnitToCodePoint(d.selectionEnd);
f=b._CachedSelectionStart}f=d.value._kmwSubstr(0,f)}else g&&(c=g.selection)&&(d=c.createRange(),d.moveStart("character",-2*a),f=d.text);f._kmwLength()<a&&(f=Array(a-f._kmwLength()+1).join("\ufffe")+f);return f._kmwSubstr(-a)._kmwSubstr(0,e)};b.alignInputs=function(a){if(l.touchable)for(var e=0;e<b.inputList.length;e++)a?(b.updateInput(b.inputList[e]),b.inputList[e].style.visibility="visible",0<b.inputList[e].base.textContent.length&&(b.inputList[e].base.style.visibility="hidden")):(b.inputList[e].style.visibility=
"hidden",b.inputList[e].base.style.visibility="visible")};a.highlightSubKeys=function(b,e,d){if(null!=b&&null!=b.subKeys){var c,f=document.getElementById("kmw-popup-keys");5<a.touchY-d&&null==f&&(a.subkeyDelayTimer&&window.clearTimeout(a.subkeyDelayTimer),a.showSubKeys(b),f=document.getElementById("kmw-popup-keys"));for(c=0;c<b.subKeys.length;c++)try{var n=f.childNodes[c].firstChild;var h=g._GetAbsoluteX(n);var m=g._GetAbsoluteY(n);var l=h+n.offsetWidth;var w=m+n.offsetHeight;var p=e>h&&e<l&&d>m&&
d<w;a.highlightKey(n,p);p&&a.highlightKey(b,!1)}catch(q){}}};a.optionKey=function(g,e,d){d&&(0<=e.indexOf("K_LOPT")?a.showLanguageMenu():0<=e.indexOf("K_ROPT")&&(b._IsActivatingKeymanWebUI=0,a._Hide(!0),b.hideCaret(),b._LastActiveElement=0))};a.createKeyTip=function(){"phone"==l.formFactor&&(null==a.keytip&&(a.keytip=g._CreateElement("DIV"),a.keytip.className="kmw-keytip",a.keytip.id="kmw-keytip",a.keytip.style.pointerEvents="none",a.keytip.appendChild(g._CreateElement("CANVAS")),a.keytip.appendChild(g._CreateElement("SPAN")),
a.keytip.key=null,a.keytip.state=!1),a._Box.appendChild(a.keytip))};a.showKeyTip=function(b,e){var d=a.keytip;if(null!=d&&(b!=d.key||e!=d.state)){var c=document.getElementById("kmw-popup-keys"),c=c&&"visible"==c.style.visibility;if(e&&!c){for(var f=g._GetAbsoluteY(a._Box),n=a._Box.offsetHeight,c=g._GetAbsoluteX(b),h=g._GetAbsoluteY(b),m=b.offsetWidth,l=b.offsetHeight,w=b.firstChild,p=d.style,q=d.childNodes[1],u=q.style,v=0,z=d.firstChild,C=0;C<b.childNodes.length&&(w=b.childNodes[C],!a.hasClass(w,
"kmw-key-text"));C++);z.width=1.6*m;z.height=2.3*l;p.top="auto";p.bottom=f+n-h-l+"px";p.textAlign="center";p.overflow="visible";p.fontFamily=g.getStyleValue(w,"font-family");p.width=z.width+"px";p.height=z.height+"px";f=g.getStyleInt(w,"font-size");0!=f&&(p.fontSize=1.8*f+"px");q.textContent=w.textContent;u.display="block";u.position="absolute";u.textAlign="center";u.width="100%";u.top="2%";u.bottom="auto";w=(z.width-m)/2;c<w?(v=-1,c+=w):c>window.innerWidth-m-w&&(v=1,c-=w);a.drawPreview(z,m,l,v);
p.left=c-w+"px";p.display="block"}else d.style.display="none";d.key=b;d.state=e}};a.drawPreview=function(a,b,d,c){d=a.getContext("2d");var e=(a.width-b)/2,g=a.height,h=0,n=e,r=b+e;b+=2*e;var w=.5*g,p=.6*g,q=8;"Android"==l.OS&&(q=3);switch(c){case -1:n-=e;r-=e;b-=e;break;case 1:h+=e,n+=e,r+=e}d.clearRect(0,0,a.width,a.height);"Android"==l.OS?(n=r=(n+r)/2,d.fillStyle="#999"):d.fillStyle="#ffffff";d.lineWidth="1";d.strokeStyle="#cccccc";d.save();d.beginPath();d.moveTo(h+q,0);d.arcTo(b,0,b,q,q);"Android"==
l.OS?(d.arcTo(b,w,r,p,q),d.arcTo(r,p,n,p,q)):(d.arcTo(b,w,r,p,q),d.arcTo(r,p,r-q,g,q),d.arcTo(r,g,n,g,q),d.arcTo(n,g,n,p-q,q));d.arcTo(n,p,h,w-q,q);d.arcTo(h,w,h,q,q);d.arcTo(h,0,h+q,0,q);d.fill();d.stroke();d.restore()};a.addCallout=function(b){if("phone"!=l.formFactor||"iOS"!=l.OS)return null;var e=g._CreateElement("DIV"),d=e.style;e.id="kmw-popup-callout";a._Box.appendChild(e);var c=b.offsetLeft,f=b.offsetWidth,n=b.offsetHeight;d.top=b.offsetTop-6+"px";d.left=c+"px";d.width=f+"px";d.height=n+6+
"px";return e};a.touchHold=function(b){a.subkeyDelayTimer&&(window.clearTimeout(a.subkeyDelayTimer),a.subkeyDelayTimer=null);"undefined"!=typeof b.subKeys&&null!=b.subKeys&&(a.subkeyDelayTimer=window.setTimeout(function(){a.clearPopup();a.showSubKeys(b)},a.popupDelay))};b.handleRotationEvents=function(){"iOS"==l.OS&&g.attachDOMEvent(window,"orientationchange",b.rotateDevice);"Android"==l.OS&&(a.wasVisible=a.isVisible,"onmozorientationchange"in screen?g.attachDOMEvent(screen,"mozorientationchange",
a.hideNow):g.attachDOMEvent(window,"orientationchange",a.hideNow),g.attachDOMEvent(window,"resize",function(){b.alignInputs(!0);a.hideLanguageList();a._Load();a.wasVisible&&a._Show()}))};b.rotateDevice=function(b){a.hideLanguageList();a._Visible&&(a.adjustHeights(),"phone"==l.formFactor&&"Android"==l.OS&&window.setTimeout(function(){window.scrollTo(0,1)},1E3))};a.waitForFonts=function(a,e){if("undefined"==typeof a&&"undefined"==typeof e||"undefined"==typeof a.files&&"undefined"==typeof e.files)return!0;
var d=g.checkFontDescriptor(a),c=g.checkFontDescriptor(e);if(d&&c)return!0;b.fontCheckTimer=window.setInterval(function(){g.checkFontDescriptor(a)&&g.checkFontDescriptor(e)&&(window.clearInterval(b.fontCheckTimer),b.fontCheckTimer=null,b.alignInputs(!0))},100);window.setTimeout(function(){b.fontCheckTimer&&(window.clearInterval(b.fontCheckTimer),b.fontCheckTimer=null,b.alignInputs(!0))},5E3);return!1}}();window.keyman.initialized||function(){var b=window.keyman,a=window.KeymanWeb=b["interface"],g=b.util,l=b.osk;b.TSS_LAYER=33;b.TSS_PLATFORM=31;b._BeepObjects=[];b._BeepTimeout=0;a.KSF=a.saveFocus=a.saveFocus=function(){b._IgnoreNextSelChange=1};a.KT=a.insertText=a.insertText=function(g,e){b.cachedContext.reset();var d=b._LastActiveElement;var c=!1;if(null!=d){c=d._KeymanWebSelectionStart;var f=d._KeymanWebSelectionEnd;var n=b._Selection;b._IsActivatingKeymanWebUI=1;b._IgnoreNextSelChange=100;b._FocusLastActiveElement();
b._IsMozillaEditableIframe(d,0)&&(d=d.documentElement);document.selection&&null!=n&&n.select();d._KeymanWebSelectionStart=c;d._KeymanWebSelectionEnd=f;b._IgnoreNextSelChange=0;null!=g&&a.output(0,d,g);"undefined"!==typeof e&&null!==e&&a.deadkeyOutput(0,d,e);d._KeymanWebSelectionStart=null;d._KeymanWebSelectionEnd=null;c=!0}return c};a.KR=a.registerKeyboard=a.registerKeyboard=function(a){if(b.initialized){var e,d=b._ActiveStub,c=b._ActiveStub;if(!(d&&"KI"in d)||d.KI!=a.KI)for(e=0;e<b._KeyboardStubs.length;e++){d=
b._KeyboardStubs[e];if(a.KI==d.KI)break;d=null}null==b._ActiveStub&&null!=d&&(b._ActiveStub=d);for(e=0;e<b._Keyboards.length;e++)if(a.KI==b._Keyboards[e].KI)return;b._Keyboards=b._push(b._Keyboards,a);b.doKeyboardLoaded(a.KI);b._ActiveStub=c}else b.deferredKR.push(a)};a.KRS=a.registerStub=a.registerStub=function(a){var e;if(!b.initialized)return b.deferredKRS.push(a),null;null==b.dfltStub&&(b.dfltStub=a);"undefined"==typeof a.KLC&&(a.KLC="");"undefined"==typeof a.KL&&(a.KL="undefined");for(e=0;e<
b._KeyboardStubs.length;e++)if(b._KeyboardStubs[e].KI==a.KI&&(""==a.KLC||b._KeyboardStubs[e].KLC==a.KLC))return 1;b._KeyboardStubs=b._push(b._KeyboardStubs,a);b.doKeyboardRegistered(a.KI,a.KL,a.KN,a.KLC);return null};a.KC=a.context=a.context=function(a,e,d){var c=b.cachedContext.get(a,e);if(null!==c)return c;d=b.KC_(a,e,d);b.cachedContext.set(a,e,d);return d};a.KN=a.nul=a.nul=function(b,e){return"\ufffe"===a.context(b+1,1,e)};a.KCM=a.contextMatch=a.contextMatch=function(g,e,d,c){if(a.context(g,c,
e)===d)return!0;b._DeadkeyResetMatched();return!1};a.KIK=a.isKeypress=a.isKeypress=function(a){return b._ActiveKeyboard.KM?!a.LisVirtualKey:b._USKeyCodeToCharCode(a)?!0:!1};a.KKM=a.keyMatch=a.keyMatch=function(a,e,d){var c=0,f=173==a.Lcode?189:a.Lcode,g=b.getKeyboardModifierBitmask();255<a.vkCode&&(f=a.vkCode);if(a.LisVirtualKey||255<f){if(16384==(e&16384)||255<f)c=d==f&&(e&g)==a.Lmodifiers}else 0==(e&16384)&&(c=f==d);c||b._DeadkeyResetMatched();return 0!=c};a.KSM=a.stateMatch=a.stateMatch=function(a,
b){return(b&a.Lstates)==b};a.KKI=a.keyInformation=a.keyInformation=function(a){var b={};b.vk=a.LisVirtualKey;b.code=a.Lcode;b.modifiers=a.Lmodifiers;return b};a.KDM=a.deadkeyMatch=a.deadkeyMatch=function(a,e,d){if(0==b._DeadKeys.length)return!1;a=b._SelPos(e)-a;for(e=0;e<b._DeadKeys.length;e++)if(b._DeadKeys[e].p==a&&b._DeadKeys[e].d==d)return b._DeadKeys[e].matched=1,!0;b._DeadkeyResetMatched();return!1};a.KBR=a.beepReset=a.beepReset=function(){b.cachedContext.reset();var a;for(a=b._BeepTimeout=
0;a<b._BeepObjects.length;a++)b._BeepObjects[a].e.style.backgroundColor=b._BeepObjects[a].c;b._BeepObjects=[]};a.KB=a.beep=a.beep=function(g){b.cachedContext.reset();g.body&&(g=g.body);if(g.style&&"undefined"!=typeof g.style.backgroundColor){for(var e=0;e<b._BeepObjects.length;e++)if(b._BeepObjects[e].e==g)return;b._BeepObjects=b._push(b._BeepObjects,{e:g,c:g.style.backgroundColor});g.style.backgroundColor="#000000";0==b._BeepTimeout&&(b._BeepTimeout=1,window.setTimeout(a.beepReset,50))}};a.KA=a.any=
a.any=function(a,e,d){if(""==e)return!1;e=d._kmwIndexOf(e);b._AnyIndices[a]=e;return 0<=e};a.KO=a.output=a.output=function(a,e,d){var c;b.cachedContext.reset();if("oninserttext"in b)b.oninserttext(a,d);var f=e.body?e:e.ownerDocument;var g;if(0<=e.className.indexOf("keymanweb-input")){var h=b.getTextBeforeCaret(e);h=0<a?h._kmwSubstr(0,h._kmwLength()-a)+d:h+d;b.setTextBeforeCaret(e,h)}else{if(b.legacy)e.value=0<a?e.value._kmwSubstr(0,e.value._kmwLength()-a)+d:e.value+d;else if(f&&(g=f.defaultView)&&
g.getSelection&&("on"==f.designMode.toLowerCase()||"true"==e.contentEditable||"plaintext-only"==e.contentEditable||""===e.contentEditable)){var n="on"==f.designMode.toLowerCase();n&&(c=b._CacheCommands(f));g=g.getSelection();h=g.focusNode.nodeValue?g.focusNode.substringData(0,g.focusOffset)._kmwLength():0;g.isCollapsed||g.deleteFromDocument();var l=g.getRangeAt(0);0<a&&(l.setStart(g.focusNode,g.focusOffset-g.focusNode.nodeValue.substr(0,g.focusOffset)._kmwSubstr(-a).length),l.deleteContents());if(0<
d._kmwLength())if(3==g.focusNode.nodeType){l=g.focusOffset;g.focusNode.insertData(g.focusOffset,d);try{g.extend(g.focusNode,l+d.length)}catch(p){g.focusNode.parentNode.scrollIntoView(),g.extend(g.focusNode,l+d.length)}}else{var w=f.createTextNode(d);l.insertNode(w);g.extend(w,d.length)}n&&b._CacheCommandsReset(f,c,null);g.collapseToEnd();0<=a&&(b._DeadkeyDeleteMatched(),b._DeadkeyAdjustPos(h,-a+d._kmwLength()))}else if(f&&(g=f.selection)){if(f.body.isContentEditable||"on"==f.designMode.toLowerCase())c=
b._CacheCommands(f);l=g.createRange();""!=l.text?(g.clear(),a=0):l.collapse(!0);0<a?(l.moveStart("character",-2*a),n=l.text._kmwSubstr(-a),l.collapse(!1),l.moveStart("character",-n.length)):a=0;l.text=d;if(f.body.isContentEditable||"on"==f.designMode.toLowerCase())l.moveStart("character",-d.length),b._CacheCommandsReset(f,c,l.select),l.moveStart("character",d.length),l.select();0<=a&&(b._DeadkeyDeleteMatched(),b._DeadkeyAdjustPos(h,-a+d._kmwLength()));b._Selection=g.createRange();b._Selection.select();
b._Selection.scrollIntoView()}else e.setSelectionRange&&(null!=e._KeymanWebSelectionStart?(h=e._KeymanWebSelectionStart,c=e._KeymanWebSelectionEnd):(h=e.value._kmwCodeUnitToCodePoint(e.selectionStart),c=e.value._kmwCodeUnitToCodePoint(e.selectionEnd)),"textarea"==e.type.toLowerCase()&&"undefined"!=typeof e.scrollTop&&(l=e.scrollTop,n=e.scrollLeft),0>a?(e.value=e.value._kmwSubstring(0,h)+d+e.value._kmwSubstring(c),a=0):e.value=h<a?d+e.value._kmwSubstring(c):e.value._kmwSubstring(0,h-a)+d+e.value._kmwSubstring(c),
0<=a&&(b._DeadkeyDeleteMatched(),b._DeadkeyAdjustPos(h,-a+d._kmwLength())),"undefined"!=typeof l&&(e.scrollTop=l,e.scrollLeft=n),a=h-a+d._kmwLength(),a=e.value._kmwCodePointToCodeUnit(a),e.setSelectionRange(a,a),e._KeymanWebSelectionStart=null,e._KeymanWebSelectionEnd=null);"function"==typeof b.refreshElementContent&&b.refreshElementContent(e)}};a.KDO=a.deadkeyOutput=a.deadkeyOutput=function(g,e,d){b.cachedContext.reset();var c={};0<=g&&a.output(g,e,"");c.p=b._SelPos(e);c.d=d;b._DeadKeys=b._push(b._DeadKeys,
c)};a.KIO=a.indexOutput=a.indexOutput=function(g,e,d,c){b.cachedContext.reset();b._AnyIndices[d-1]<e._kmwLength()&&a.output(g,c,e._kmwCharAt(b._AnyIndices[d-1]))};a._CacheCommands=function(a){var e=[["backcolor",1],["fontname",1],["fontsize",1],["forecolor",1],["bold",0],["italic",0],["strikethrough",0],["subscript",0],["superscript",0],["underline",0]];a.defaultView&&b._push(e,["hilitecolor",1]);for(var d=0;d<e.length;d++)b._push(e[d],e[d][1]?a.queryCommandValue(e[d][0]):a.queryCommandState(e[d][0]));
return e};a._CacheCommandsReset=function(a,b,d){for(var c=0;c<b.length;c++)b[c][1]?a.queryCommandValue(b[c][0])!=b[c][2]&&(d&&d(),a.execCommand(b[c][0],!1,b[c][2])):a.queryCommandState(b[c][0])!=b[c][2]&&(d&&d(),a.execCommand(b[c][0],!1,null))};a.KIFS=a.ifStore=a.ifStore=function(a,e,d){d=!0;if(a==b.TSS_LAYER)d=l.layerId===e;else if(a==b.TSS_PLATFORM){var c=e.split(" ");for(a=0;a<c.length;a++){e=c[a].toLowerCase();switch(e){case "touch":case "hardware":g.activeDevice.touchable!=("touch"==e)&&(d=!1)}switch(e){case "windows":case "android":case "ios":case "macosx":case "linux":g.activeDevice.OS.toLowerCase()!=
e&&(d=!1)}switch(e){case "tablet":case "phone":case "desktop":g.activeDevice.formFactor!=e&&(d=!1)}switch(e){case "web":"native"==g.activeDevice.browser&&(d=!1);break;case "native":case "ie":case "chrome":case "firefox":case "safari":case "opera":g.activeDevice.browser!=e&&(d=!1)}}}return d};a.KSETS=a.setStore=function(a,e,d){b.cachedContext.reset();return a==b.TSS_LAYER?l.showLayer(e):!1};a.KLOAD=a.loadStore=function(a,e,d){b.cachedContext.reset();a=g.loadCookie("KeymanWeb_"+a+"_Option_"+e);return"undefined"!=
typeof a[e]?unescape(a[e]):d};a.KSAVE=a.saveStore=function(a,e){b.cachedContext.reset();var d=b._ActiveKeyboard;if(!d||"undefined"==typeof d.KI||""==d.KI)return!1;a="KeymanWeb_"+d.KI+"_Option_"+a;e=escape(e);g.saveCookie(a,e);return!0};a.GetLastActiveElement=function(){return b._LastActiveElement};a.FocusLastActiveElement=function(){b._FocusLastActiveElement()};a.HideHelp=function(){l._Hide(!0)};a.ShowHelp=function(a,b){l._Show(a,b)};a.ShowPinnedHelp=function(){l.userPositioned=!0;l._Show(-1,-1)};
b.cachedContext={_cache:[],reset:function(){this._cache=[]},get:function(a,b){return"undefined"==typeof this._cache[a]||"undefined"==typeof this._cache[a][b]?null:this._cache[a][b]},set:function(a,b,d){"undefined"==typeof this._cache[a]&&(this._cache[a]=[]);this._cache[a][b]=d}}}();window.keyman.initialized||function(){var b=window.keyman,a=b._VKMap_FF_IE={};a.k61=187;a.k59=186;b._VKMap_Opera_IE={};b._VKMap_Safari_IE={};a=b._VKMap={};a.se={};a.se.k220=192;a.se.k187=189;a.se.k219=187;a.se.k221=219;a.se.k186=221;a.se.k191=220;a.se.k192=186;a.se.k189=191;a.uk={};a.uk.k223=192;a.uk.k192=222;a.uk.k222=226;a.uk.k220=220;var a={},g={};a.k192=96;a.k49=49;a.k50=50;a.k51=51;a.k52=52;a.k53=53;a.k54=54;a.k55=55;a.k56=56;a.k57=57;a.k48=48;a.k189=45;a.k187=61;a.k81=113;a.k87=119;a.k69=101;
a.k82=114;a.k84=116;a.k89=121;a.k85=117;a.k73=105;a.k79=111;a.k80=112;a.k219=91;a.k221=93;a.k220=92;a.k65=97;a.k83=115;a.k68=100;a.k70=102;a.k71=103;a.k72=104;a.k74=106;a.k75=107;a.k76=108;a.k186=59;a.k222=39;a.k90=122;a.k88=120;a.k67=99;a.k86=118;a.k66=98;a.k78=110;a.k77=109;a.k188=44;a.k190=46;a.k191=47;g.k192=126;g.k49=33;g.k50=64;g.k51=35;g.k52=36;g.k53=37;g.k54=94;g.k55=38;g.k56=42;g.k57=40;g.k48=41;g.k189=95;g.k187=43;g.k81=81;g.k87=87;g.k69=69;g.k82=82;g.k84=84;g.k89=89;g.k85=85;g.k73=73;g.k79=
79;g.k80=80;g.k219=123;g.k221=125;g.k220=124;g.k65=65;g.k83=83;g.k68=68;g.k70=70;g.k71=71;g.k72=72;g.k74=74;g.k75=75;g.k76=76;g.k186=58;g.k222=34;g.k90=90;g.k88=88;g.k67=67;g.k86=86;g.k66=66;g.k78=78;g.k77=77;g.k188=60;g.k190=62;g.k191=63;b._USCharCode=[a,g];b._USKeyCodeToCharCode=function(a){return b._USCharCode[a.Lmodifiers&16?1:0]["k"+a.Lcode]}}();window.keyman.initialized||(window.keyman.dfltLayout={desktop:{font:"Tahoma,Helvetica",layer:[{id:"default",row:[{id:"1",key:[{id:"K_BKQUOTE"},{id:"K_1"},{id:"K_2"},{id:"K_3"},{id:"K_4"},{id:"K_5"},{id:"K_6"},{id:"K_7"},{id:"K_8"},{id:"K_9"},{id:"K_0"},{id:"K_HYPHEN"},{id:"K_EQUAL"},{id:"K_BKSP",text:"*BkSp*",sp:"1",width:"130"}]},{id:"2",key:[{id:"K_TAB",text:"*Tab*",sp:"1",width:"130"},{id:"K_Q"},{id:"K_W"},{id:"K_E"},{id:"K_R"},{id:"K_T"},{id:"K_Y"},{id:"K_U"},{id:"K_I"},{id:"K_O"},{id:"K_P"},
{id:"K_LBRKT"},{id:"K_RBRKT"},{id:"K_BKSLASH"}]},{id:"3",key:[{id:"K_CAPS",text:"*Caps*",sp:"1",width:"165"},{id:"K_A"},{id:"K_S"},{id:"K_D"},{id:"K_F"},{id:"K_G"},{id:"K_H"},{id:"K_J"},{id:"K_K"},{id:"K_L"},{id:"K_COLON"},{id:"K_QUOTE"},{id:"K_ENTER",text:"*Enter*",sp:"1",width:"165"}]},{id:"4",key:[{id:"K_SHIFT",text:"*Shift*",sp:"1",width:"130"},{id:"K_oE2"},{id:"K_Z"},{id:"K_X"},{id:"K_C"},{id:"K_V"},{id:"K_B"},{id:"K_N"},{id:"K_M"},{id:"K_COMMA"},{id:"K_PERIOD"},{id:"K_SLASH"},{id:"K_RSHIFT",
text:"*Shift*",sp:"1",width:"130"}]},{id:"5",key:[{id:"K_LCONTROL",text:"*Ctrl*",sp:"1",width:"170"},{id:"K_LALT",text:"*Alt*",sp:"1",width:"160"},{id:"K_SPACE",text:"",width:"770"},{id:"K_RALT",text:"*Alt*",sp:"1",width:"160"},{id:"K_RCONTROL",text:"*Ctrl*",sp:"1",width:"170"}]}]}]},tablet:{font:"Tahoma,Helvetica",layer:[{id:"default",row:[{id:"0",key:[{id:"K_1"},{id:"K_2"},{id:"K_3"},{id:"K_4"},{id:"K_5"},{id:"K_6"},{id:"K_7"},{id:"K_8"},{id:"K_9"},{id:"K_0"},{id:"K_HYPHEN"},{id:"K_EQUAL"},{sp:"10",
width:"1"}]},{id:"1",key:[{id:"K_Q",pad:"25"},{id:"K_W"},{id:"K_E"},{id:"K_R"},{id:"K_T"},{id:"K_Y"},{id:"K_U"},{id:"K_I"},{id:"K_O"},{id:"K_P"},{id:"K_LBRKT"},{id:"K_RBRKT"},{sp:"10",width:"1"}]},{id:"2",key:[{id:"K_A",pad:"50"},{id:"K_S"},{id:"K_D"},{id:"K_F"},{id:"K_G"},{id:"K_H"},{id:"K_J"},{id:"K_K"},{id:"K_L"},{id:"K_COLON"},{id:"K_QUOTE"},{id:"K_BKSLASH",width:"90"}]},{id:"3",key:[{id:"K_oE2",width:"90"},{id:"K_Z"},{id:"K_X"},{id:"K_C"},{id:"K_V"},{id:"K_B"},{id:"K_N"},{id:"K_M"},{id:"K_COMMA"},
{id:"K_PERIOD"},{id:"K_SLASH"},{id:"K_BKQUOTE"},{sp:"10",width:"1"}]},{id:"4",key:[{id:"K_SHIFT",text:"*Shift*",sp:"1",width:"200",sk:[{id:"K_LCONTROL",text:"*Ctrl*",sp:"1",width:"50",nextlayer:"ctrl"},{id:"K_LCONTROL",text:"*LCtrl*",sp:"1",width:"50",nextlayer:"leftctrl"},{id:"K_RCONTROL",text:"*RCtrl*",sp:"1",width:"50",nextlayer:"rightctrl"},{id:"K_LALT",text:"*Alt*",sp:"1",width:"50",nextlayer:"alt"},{id:"K_LALT",text:"*LAlt*",sp:"1",width:"50",nextlayer:"leftalt"},{id:"K_RALT",text:"*RAlt*",
sp:"1",width:"50",nextlayer:"rightalt"},{id:"K_ALTGR",text:"*AltGr*",sp:"1",width:"50",nextlayer:"ctrl-alt"}]},{id:"K_LOPT",text:"*Menu*",sp:"1",width:"150"},{id:"K_SPACE",text:"",width:"570"},{id:"K_BKSP",text:"*BkSp*",sp:"1",width:"150"},{id:"K_ENTER",text:"*Enter*",sp:"1",width:"200"}]}]}]},phone:{font:"Tahoma,Helvetica",layer:[{id:"default",row:[{id:"0",key:[{id:"K_1"},{id:"K_2"},{id:"K_3"},{id:"K_4"},{id:"K_5"},{id:"K_6"},{id:"K_7"},{id:"K_8"},{id:"K_9"},{id:"K_0"},{id:"K_HYPHEN"},{id:"K_EQUAL"},
{sp:"10",width:"1"}]},{id:"1",key:[{id:"K_Q",pad:"25"},{id:"K_W"},{id:"K_E"},{id:"K_R"},{id:"K_T"},{id:"K_Y"},{id:"K_U"},{id:"K_I"},{id:"K_O"},{id:"K_P"},{id:"K_LBRKT"},{id:"K_RBRKT"},{sp:"10",width:"1"}]},{id:"2",key:[{id:"K_A",pad:"50"},{id:"K_S"},{id:"K_D"},{id:"K_F"},{id:"K_G"},{id:"K_H"},{id:"K_J"},{id:"K_K"},{id:"K_L"},{id:"K_COLON"},{id:"K_QUOTE"},{id:"K_BKSLASH",width:"90"}]},{id:"3",key:[{id:"K_oE2",width:"90"},{id:"K_Z"},{id:"K_X"},{id:"K_C"},{id:"K_V"},{id:"K_B"},{id:"K_N"},{id:"K_M"},
{id:"K_COMMA"},{id:"K_PERIOD"},{id:"K_SLASH"},{id:"K_BKQUOTE"},{sp:"10",width:"1"}]},{id:"4",key:[{id:"K_SHIFT",text:"*Shift*",sp:"1",width:"200",sk:[{id:"K_LCONTROL",text:"*Ctrl*",sp:"1",width:"50",nextlayer:"ctrl"},{id:"K_LCONTROL",text:"*LCtrl*",sp:"1",width:"50",nextlayer:"leftctrl"},{id:"K_RCONTROL",text:"*RCtrl*",sp:"1",width:"50",nextlayer:"rightctrl"},{id:"K_LALT",text:"*Alt*",sp:"1",width:"50",nextlayer:"alt"},{id:"K_LALT",text:"*LAlt*",sp:"1",width:"50",nextlayer:"leftalt"},{id:"K_RALT",
text:"*RAlt*",sp:"1",width:"50",nextlayer:"rightalt"},{id:"K_ALTGR",text:"*AltGr*",sp:"1",width:"50",nextlayer:"ctrl-alt"}]},{id:"K_LOPT",text:"*Menu*",width:"150",sp:"1"},{id:"K_SPACE",width:"570",text:""},{id:"K_BKSP",text:"*BkSp*",width:"150",sp:"1"},{id:"K_ENTER",text:"*Enter*",width:"200",sp:"1"}]}]}]}});(function(){var b=window.keyman,a=window.setInterval(function(){"complete"===document.readyState&&(window.clearInterval(a),b.init(null))},10)})();
